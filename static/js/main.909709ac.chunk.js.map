{"version":3,"sources":["util/helpers/chooseRandom.ts","util/helpers/disableReactDevTools.ts","util/helpers/dontCloseWindowWarning.ts","util/helpers/formatDecimal.ts","util/helpers/formatNumber.ts","util/helpers/getValidationError.ts","util/helpers/normalizeString.ts","util/helpers/stripFormatNumber.ts","util/helpers/truncateEthAddress.ts","components/feedback/CycleMessage.tsx","assets/svg/TimesSVG.tsx","config.ts","store/connectedMember/actions.ts","components/web3/helpers/getExtensionAddress.ts","components/feedback/CycleEllipsis.tsx","components/web3/Web3ModalManager.tsx","components/common/FadeIn.tsx","components/web3/hooks/useContractSend.ts","components/web3/hooks/useETHGasPrice.ts","components/web3/hooks/useIsDefaultChain.ts","components/web3/hooks/useInitContracts.ts","components/web3/hooks/useIsAddressDelegated.ts","util/enums.ts","util/types.ts","components/proposals/voting/OffchainOpRollupVotingSubmitResultAction.tsx","components/proposals/voting/OffchainVotingAction.tsx","components/proposals/helpers/getVoteChosen.ts","components/proposals/ProposalPeriod.tsx","assets/svg/StopwatchSVG.tsx","components/proposals/voting/VotingStatus.tsx","components/proposals/voting/OffchainVotingStatus.tsx","assets/svg/CheckSVG.tsx","components/proposals/voting/SquareRootVotingBar.tsx","components/proposals/voting/VotingActionButtons.tsx","store/contracts/actions.ts","components/common/ErrorMessageWithDetails.tsx","components/proposals/types.ts","components/web3/helpers/contractSend.ts","components/web3/helpers/getAdapterAddress.ts","components/web3/helpers/getAdapterAddressFromContracts.ts","components/web3/helpers/getContractByAddress.ts","components/web3/helpers/getDAOConfigEntry.ts","components/web3/types.ts","components/proposals/hooks/useOffchainVotingStartEnd.ts","components/proposals/hooks/useProposalOrDraft.ts","components/proposals/voting/types.ts","components/web3/hooks/useContractPoll.ts","components/proposals/hooks/useProposalWithOffchainVoteStatus.ts","components/proposals/hooks/useSignAndSendVote.ts","components/proposals/hooks/useSignAndSubmitProposal.ts","components/web3/config.ts","components/web3/hooks/useWeb3Modal.ts","components/web3/EtherscanURL.tsx","hooks/useAbortController.ts","hooks/useCounter.ts","hooks/useIsMounted.ts","hooks/useMemberActionDisabled.tsx","components/adpaters/enums.ts","components/feedback/Loader.tsx","store/connectedMember/reducers.ts","store/contracts/reducers.ts","store/reducers.ts","store/index.ts","components/Footer.tsx","components/logo/Logo.tsx","components/logo/index.tsx","assets/svg/MetaMaskSVG.tsx","assets/svg/WalletConnectSVG.tsx","components/web3/WalletIcons.tsx","components/feedback/LoaderWithEmoji.tsx","components/common/Modal.tsx","components/web3/Web3ModalButton.tsx","assets/svg/HamburgerSVG.tsx","components/Nav.tsx","components/Header.tsx","Head.tsx","components/common/Wrap.tsx","pages/start/GetStarted.tsx","util/validation.ts","components/common/InputError.tsx","pages/membership/CreateMembershipProposal.tsx","components/proposals/ProposalCard.tsx","components/proposals/_mockData.ts","pages/membership/Membership.tsx","pages/subpages/NotFound.tsx","components/proposals/ProposalActions.tsx","components/proposals/ProposalAmount.tsx","components/proposals/ProposalDetails.tsx","pages/membership/MembershipDetails.tsx","pages/transfers/CreateTransferProposal.tsx","pages/transfers/Transfers.tsx","pages/transfers/TransferDetails.tsx","pages/tributes/CreateTributeProposal.tsx","pages/tributes/Tributes.tsx","pages/tributes/TributeDetails.tsx","pages/governance/CreateGovernanceProposal.tsx","pages/governance/GovernanceProposals.tsx","pages/governance/GovernanceProposalDetails.tsx","pages/members/MemberCard.tsx","pages/members/_mockData.ts","pages/members/Members.tsx","pages/members/MemberProfile.tsx","Routes.tsx","App.tsx","Init.tsx","reportWebVitals.ts","index.tsx","components/web3/hooks/useWeb3ModalManager.ts"],"names":["chooseRandom","array","doNotChooseItem","arrayToUse","undefined","filter","a","Math","floor","random","length","disableReactDevTools","noop","DEV_TOOLS","window","__REACT_DEVTOOLS_GLOBAL_HOOK__","Object","entries","key","value","dontCloseWindowWarning","callback","event","preventDefault","returnValue","addEventListener","removeEventListener","formatDecimal","n","toFixed","formatNumber","regEx","RegExp","toString","replace","getValidationError","field","errors","message","normalizeString","stringToNormalize","toLowerCase","trim","stripFormatNumber","truncateEthAddress","addr","maxLength","firstSegment","substring","secondPart","CycleMessage","props","intervalMs","messages","INITIAL_ITEM","useFirstItemStart","useState","activeMessage","setActiveMessage","useEffect","intervalId","setInterval","prevMessage","clearInterval","render","TimesSVG","xmlns","aria-hidden","data-icon","data-prefix","viewBox","fill","d","process","REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS","REACT_APP_DEFAULT_CHAIN_NAME_LOCAL","REACT_APP_ENVIRONMENT","REACT_APP_INFURA_PROJECT_ID_DEV","REACT_APP_INFURA_PROJECT_ID_LOCAL","REACT_APP_INFURA_PROJECT_ID_PROD","REACT_APP_SNAPSHOT_HUB_API_URL","ENVIRONMENT","SNAPSHOT_HUB_API_URL","INFURA_PROJECT_ID","CHAINS","MAINNET","ROPSTEN","RINKEBY","GOERLI","KOVAN","GANACHE","CHAIN_NAME","ETHERSCAN_URLS","DAO_REGISTRY_CONTRACT_ADDRESS","DEFAULT_CHAIN","SHARES_ADDRESS","SPACE","development","localhost","production","SET_CONNECTED_MEMBER","CLEAR_CONNECTED_MEMBER","getConnectedMember","account","daoRegistryContract","dispatch","daoRegistryInstance","instance","clearConnectedMember","methods","memberAddressesByDelegatedKey","call","from","memberAddressByDelegateKey","isActiveMember","getCurrentDelegateKey","currentDelegateKey","isActiveMemberChecks","startsWith","payload","delegateKey","memberAddress","type","getExtensionAddress","extensionName","daoContractInstance","Error","Web3","utils","sha3","MESSAGES","rootStyles","position","nbspStyles","height","width","CycleEllipsis","fadeInProps","fadeInPropsMerged","inline","upToIndex","setUpToIndex","prevIndex","style","FadeIn","Web3ModalContext","createContext","Web3ModalManager","children","defaultChain","defaultTheme","DefaultTheme","DARK","providerOptions","web3ModalProviderArguments","useWeb3ModalManager","web3ModalContext","connected","onConnectTo","onDisconnect","networkId","provider","web3Instance","web3Modal","Provider","defaultStyle","transition","duration","opacity","transitionStyles","entering","entered","exiting","exited","appear","in","show","timeout","useContractSend","txError","setTxError","txEtherscanURL","setTxEtherscanURL","txIsPromptOpen","setTxIsPromptOpen","txReceipt","setTxReceipt","Web3TxStatus","STANDBY","txStatus","setTxStatus","useWeb3Modal","handleOnTxProcess","txHash","PENDING","unsubscribeDontCloseWindow","AWAITING_CONFIRM","contractSendParams","contractSend","receipt","FULFILLED","REJECTED","txSend","URL","useETHGasPrice","gasURL","gasPrices","useRef","useIsDefaultChain","isDefaultChain","setIsDefaultChain","defaultChainError","setDefaultChainError","useInitContracts","useDispatch","initContractDaoRegistry","initContractManaging","initRegisteredVotingAdapter","initContractOnboarding","initContractBankExtension","initContractTribute","initContracts","useCallback","useIsAddressDelegated","useSelector","s","connectedMember","NetworkIDs","NetworkNames","FormFieldErrors","ProposalHeaderNames","AsyncStatus","OffchainOpRollupVotingSubmitResultAction","adapterName","snapshotProposal","proposal","signatureStatus","setSignatureStatus","submitError","setSubmitError","bankExtensionMethods","contracts","BankExtensionContract","offchainVotingMethods","VotingContract","daoRegistryAddress","DaoRegistryContract","contractAddress","useMemberActionDisabled","isDisabled","openWhyDisabledModal","WhyDisabledModal","isInProcess","isDone","isInProcessOrDone","votes","proposalHash","idInDAO","adapterAddress","getAdapterAddressFromContracts","voteEntriesPromises","map","v","voteData","values","createVote","address","msg","choice","VoteChoicesIndex","Yes","Number","timestamp","sig","getPriorAmount","snapshot","voteYes","weight","prepareVoteResult","Promise","all","actionId","chainId","daoAddress","voteResultTree","voteResultTreeHexRoot","getHexRoot","result","toStepNode","merkleTree","step","verifyingContract","getVoteResultRootDomainDefinition","domain","types","messageParams","JSON","stringify","root","primaryType","PRIMARY_TYPE_ERC712","signMessage","signature","submitVoteResultArguments","rootSig","txArguments","gasPrice","fast","className","disabled","onClick","Loader","ErrorMessageWithDetails","error","renderText","TX_CYCLE_MESSAGES","EtherscanURL","url","isPending","renderSubmitStatus","title","OffchainVotingAction","voteChoiceClicked","setVoteChoiceClicked","votingDisabledReasonsRef","addressIsDelegatedMessage","alreadyVotedMessage","delegateAddress","useSignAndSendVote","signAndSendVote","voteDataStatus","isAddressDelegated","voteChosen","voteEntry","find","ve","VoteChoices","No","getVoteChosen","setOtherDisabledReasons","snapshotProposalId","idInSnapshot","isSubmitDisabled","voteChoiceProgress","partialVoteData","proposalIdInDAO","proposalIdInSnapshot","refetchProposalOrDraft","current","VotingActionButtons","buttonProps","voteProgress","ProposalPeriod","startLabel","startPeriodMs","endLabel","endedLabel","endPeriodMs","proposalPeriod","setProposalPeriod","displayCountdownCached","countdown","showDaysOnly","endtime","t","Date","parse","seconds","minutes","hours","total","days","getTimeRemaining","formatTimePeriod","time","period","formattedPeriod","interval","currentDate","startDate","endDate","start","end","StopwatchSVG","version","id","stroke","strokeWidth","fillRule","xlinkHref","VotingStatus","hasVotingEnded","noShares","renderStatus","renderTimer","showPercentages","totalShares","yesShares","renderedStatus","aria-label","role","SquareRootVotingBar","votingExpired","gracePeriodEndLabel","gracePeriodEndedLabel","textTransform","cycleEllipsisFadeInProps","OffchainVotingStatus","countdownGracePeriodStartMs","didVotePass","setDidVotePass","gracePeriodEndMs","setGracePeriodEndMs","votingStartSeconds","votingEndSeconds","useOffchainVotingStartEnd","hasOffchainVotingStarted","hasOffchainVotingEnded","offchainVotingStartEndInitReady","getDAOConfigEntry","ContractDAOConfigKeys","offchainVotingGracePeriod","then","r","catch","ProposalPeriodComponent","CheckSVG","xmlnsXlink","percentYes","percentNo","getVotedClass","getARIALabel","getVotingText","handleClick","CONTRACT_BANK_EXTENSION","CONTRACT_DAO_REGISTRY","CONTRACT_MANAGING","CONTRACT_ONBOARDING","CONTRACT_TRIBUTE","CONTRACT_VOTING","CONTRACT_VOTING_OP_ROLLUP","lazyDaoRegistryABI","default","eth","Contract","createContractAction","abi","initContractVoting","initContractThunkFactory","actionType","adapterOrExtensionName","ContractAdapterNames","voting","adapterNameForRedux","VotingAdapterName","lazyImport","initContractVotingOpRollup","OffchainVotingContract","DaoConstants","ONBOARDING","onboarding","BANK","ContractExtensionNames","bank","isExtension","TRIBUTE","tribute","MANAGING","managing","getState","managingContract","ManagingContract","console","warn","getAdapterAddress","getVotingAdapterName","votingAdapterName","lazyABI","contractABI","code","detailsProps","cursor","outline","ProposalFlag","ProposalFlowStatus","methodName","contractInstanceMethods","methodArguments","onProcess","resolve","reject","method","estimateGas","gas","send","on","getContractAddressOrThrow","contract","name","configuration","financing","guildkick","OnboardingContract","ragequit","TributeContract","getContractByAddress","c","configKey","getConfiguration","votingStartEndStatusRef","setHasOffchainVotingStarted","setHasOffchainVotingEnded","isInitReady","setOffchainVotingStartEndInitReady","every","SnapshotType","intervalID","hasStartedCheck","now","hasEndedCheck","ceil","ERROR_PROPOSAL","ERROR_PROPOSAL_NOT_FOUND","useProposalOrDraft","daoProposal","snapshotDraft","setSnapshotDraft","setSnapshotProposal","proposalNotFound","setProposalNotFound","proposalError","setProposalError","proposalStatus","setProposalStatus","useAbortController","abortController","isMountedRef","useCounter","refetchCount","updateRefetchCount","handleGetDraftCached","signal","handleGetProposalCached","handleGetProposalOrDraftCached","snapshotType","draft","proposalData","getCommonSnapshotProposalData","fetch","response","ok","json","responseJSON","keys","idKey","proposalId","data","erc712DraftHash","VotingState","useContractPoll","options","initialCallBeforeWait","pollInterval","isPolling","setIsPolling","pollContractData","setPollContractData","pollContractError","setPollContractError","stopPollingRequested","setStopPollingRequested","callContractCached","pollContractCached","intervalIdRef","intervalFunction","responseData","intervalIdToSet","stopPollingContractCached","pollContract","stopPollingContract","useProposalWithOffchainVoteStatus","daoRegistryMethods","pollProposal","stopPollProposal","pollProposalVoteResult","daoProposalVoteResult","stopPollProposalVoteResult","pollProposalVotes","daoProposalVotes","stopPollProposalVotes","atExistsInDAO","flags","EXISTS","atSponsoredInDAO","SPONSORED","atProcessedInDAO","PROCESSED","offchainResultSubmitted","reporter","resultRoot","isInVotingGracePeriod","GRACE_PERIOD","getReturnData","status","transitionMessage","Sponsor","OffchainVoting","OffchainVotingSubmitResult","OffchainVotingGracePeriod","Process","Completed","state","setVoteData","voteDataError","setVoteDataError","setVoteDataStatus","metadata","getSpace","snapshotSpace","voteProposalData","space","token","buildVoteMessage","erc712Message","prepareVoteMessage","getDomainDefinition","vote","dataToSign","submitMessage","dataToReturn","uniqueId","useSignAndSubmitProposal","setProposalData","proposalSignAndSendError","setProposalSignAndSendError","proposalSignAndSendStatus","setProposalSignAndSendStatus","buildProposalMessageHelper","commonData","getBlockNumber","parseInt","offchainVotingVotingPeriod","votingTimeSeconds","buildProposalMessage","partialProposalData","body","buildDraftMessage","prepareDraftMessage","prepareProposalMessage","uniqueIdDraft","signAndSendProposal","useContext","href","rel","target","setAbortController","AbortController","abort","initialState","count","reducer","action","useReducer","useIsMounted","otherDisabledReasons","shouldShowWhyModal","setShouldShowWhyModal","otherReasonNext","disabledReason","getDisabledReason","canShowDisabledReason","WhyDisabledModalCached","ariaHideApp","isOpen","onRequestClose","overlayClassName","overlay","zIndex","handleSetOtherDisabledReasonsCached","otherReasons","Boolean","Spinner","showAfterMs","text","textProps","loaderProps","showLoaderAfterMs","setShowLoaderAfterMs","timeoutId","setTimeout","clearTimeout","INITIAL_STATE","setConnectedMemberReducer","clearConnectedMemberReducer","contractBankExtension","contractDAORegistry","contractOnboarding","contractTribute","contractVoting","contractManaging","combineReducers","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","Footer","Logo","size","ModalLogo","LeftLogo","CenterLogo","MetaMaskSVG","st1","strokeLinecap","strokeLinejoin","st6","x","y","enableBackground","xmlSpace","WalletConnectSVG","svgWalletIcon","injected","walletconnect","LoaderWithEmoji","Modal","keyProp","styleProps","isOpenHandler","ConnectWallet","customWalletText","showWalletETHBadge","openModal","setOpenModal","isWrongNetwork","isChainGanache","displayWalletText","isMobile","handleNavigate","open","ProviderSVG","providerName","cachedProvider","providerOptionsFiltered","p","displayOptions","display","DisplayChainError","displayProviders","margin","React","memo","HamburgerSVG","transitionOpeningStyles","right","transitionClosingStyles","NavLinks","data-testid","tabIndex","to","Nav","shouldShowMenuModal","setShouldShowMenuModal","setTransitionStyles","location","useLocation","history","useHistory","isIndexPath","pathname","handleMenuModalClose","close","closeMenu","query","matches","aria-controls","Transition","push","Header","RenderLogo","Head","Helmet","content","Wrap","rest","MolochV3Cube","data-aos","data-aos-delay","GetStarted","AOS","init","offset","delay","mirror","once","isEthAddressValid","ethAddress","isAddress","InputError","restProps","Fields","CreateMembershipProposal","form","useForm","mode","reValidateMode","userAccountBalance","setUserAccountBalance","formState","getValues","setValue","register","triggerValidation","createMemberError","isConnected","isValid","getUserAccountBalanceCached","getBalance","accountBalanceInWei","wei","fromWei","ethAmount","ethAmountInWei","toWei","amountUnit","onboardArguments","RenderWrapper","onSubmit","e","aria-describedby","aria-invalid","ref","validate","INVALID_ETHEREUM_ADDRESS","REQUIRED","onChange","amount","isNaN","INVALID_NUMBER","handleSubmit","ProposalCard","buttonText","hash","fakeMembershipProposalsVoting","fakeMembershipProposalsRequest","fakeMembershipProposalsPassed","fakeMembershipProposalsFailed","Membership","votingProposals","renderProposalCards","requestProposals","passedProposals","failedProposals","proposals","VOTING","REQUESTS","PASSED","FAILED","NotFound","textAlign","fontSize","ProposalWithOffchainVoteActions","lazy","cycleEllipsisStyles","ProposalActions","fallback","renderActions","ProposalAmount","amount2","amount2Unit","ProposalDetails","renderAmountBadge","MembershipDetails","useParams","CreateTransferProposal","Transfers","TransferDetails","CreateTributeProposal","txErrorTokenApprove","txEtherscanURLTokenApprove","txIsPromptOpenTokenApprove","txSendTokenApprove","txStatusTokenApprove","userERC20Balance","setUserERC20Balance","erc20Details","setERC20Details","erc20Contract","setERC20Contract","erc20AddressValue","erc20Address","createTributeError","getERC20ContractCached","getERC20DetailsCached","getUserERC20BalanceCached","lazyERC20ABI","symbol","decimals","balanceOf","balance","balanceBN","toBN","divisor","pow","beforeDecimal","div","afterDecimal","mod","balanceReadable","eq","handleSubmitTokenApprove","tributeAmountWithDecimals","allowanceBN","difference","sub","approveValue","add","tokenApproveArguments","applicantAddress","tributeAmount","requestAmount","description","multiplier","mul","requestAmountArg","allowance","gt","bodyIntro","tributeAmountUnit","tributeTokenDecimals","requestAmountUnit","tributeArguments","includes","placeholder","Tributes","TributeDetails","isTributeAmountInt","CreateGovernanceProposal","GovernanceProposals","GovernanceProposalDetails","MemberCard","member","ethereumAddress","fakeMembers","Members","activeMembers","MemberProfile","activeMember","Routes","exact","path","component","App","ProcessName","Init","setError","isInitComplete","setIsInitComplete","initSnapshotAPI","processReadyMap","setProcessReadyMap","handleInitContractsCached","handleGetMemberCached","handleGetSnapshotAPIStatusCached","getSnapshotAPIStatus","fs","InitError","padding","maxWidth","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","document","getElementById","ethereum","autoRefreshOnNetworkChange","ReactDOM","package","WalletConnectProvider","infuraId","qrcodeModalOptions","mobileLinks","LIGHT","ActionType","WEB3_CONNECT_CACHED_PROVIDER","INIT_WEB3MODAL","ACTIVATE_PROVIDER","UPDATE","UPDATE_FROM_ERROR","ERROR","ERROR_FROM_ACTIVATION","DEACTIVATE_PROVIDER","web3ModalTheme","web3ModalChain","onConnectToCached","getNetworkNameCached","connectorId","connectTo","subscribeProvider","web3","getAccounts","accounts","net","getId","clearCachedProvider","handleChainChanged","info","Web3Modal","cacheProvider","network","theme","localStorage","getItem","activeWeb3ModalCached"],"mappings":"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","file":"static/js/main.909709ac.chunk.js","sourcesContent":["/**\n * chooseRandom\n *\n * Choose a random item from an array.\n *\n * @param {array} array - The array to choose from.\n * @param doNotChooseItem - An item to not choose (e.g. previously chosen item)\n */\nexport function chooseRandom<T>(array: T[], doNotChooseItem?: T) {\n  const arrayToUse =\n    doNotChooseItem !== undefined\n      ? array.filter((a) => a !== doNotChooseItem)\n      : array;\n\n  return arrayToUse[Math.floor(Math.random() * arrayToUse.length)];\n}\n","/**\n * disableReactDevTools\n *\n * Run before the app mounts to disable React dev tools.\n * Ideally, this is run conditionally based on environment.\n *\n * @see: https://github.com/facebook/react-devtools/issues/191#issuecomment-443607190\n */\nexport function disableReactDevTools() {\n  const noop = (): void => undefined;\n  const DEV_TOOLS = (window as any).__REACT_DEVTOOLS_GLOBAL_HOOK__;\n\n  if (typeof DEV_TOOLS === 'object') {\n    for (const [key, value] of Object.entries(DEV_TOOLS)) {\n      DEV_TOOLS[key] = typeof value === 'function' ? noop : null;\n    }\n  }\n}\n","/**\n * dontCloseWindowWarning\n *\n * Warns user not to close the window.\n *\n * @returns {() => void} unsubscribe function to stop listening, and the callback from firing.\n */\nexport function dontCloseWindowWarning(): () => void {\n  // @see: https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload#Example\n  const callback = (event: BeforeUnloadEvent) => {\n    // Cancel the event\n    event.preventDefault();\n    // Chrome requires returnValue to be set\n    event.returnValue = '';\n  };\n\n  window.addEventListener('beforeunload', callback);\n\n  return function unsubscribe() {\n    window.removeEventListener('beforeunload', callback);\n  };\n}\n","/**\n * formatDecimal\n *\n * A simple formatter with respect for dynamic decimal places\n * from `toFixed(2)` to `toFixed(4)`. If the number provided\n * is less than `0.01`, then `toFixed(4)` is used, else `toFixed(2)`.\n *\n * This may not work for all cases where the number is tiny, as it could\n * result in `\"0.0000\"`.\n *\n * @param {number} n\n * @returns {string} A `.toFixed()` representation of the decimal number.\n */\nexport function formatDecimal(n: number): string {\n  return n < 0.01 ? n.toFixed(4) : n.toFixed(2);\n}\n","/**\n * formatNumber\n *\n * Formats a number (U.S. region) with commas (e.g. 1000 -> 1,000).\n *\n * @param {string | number} value\n * @returns {string}\n *\n * @todo maybe a more friendly way via Intl API in JS core?\n */\nexport const formatNumber = (value: number | string): string => {\n  const regEx = new RegExp(/(\\d)(?=(\\d{3})+(?:\\.\\d+)?$)/g);\n  return typeof value === 'number'\n    ? value.toString().replace(/,/g, '').replace(regEx, '$1,')\n    : value.replace(/,/g, '').replace(regEx, '$1,');\n};\n","/**\n * getValidationError\n *\n * Used with react-hook-form (mostly to solve a TS incorrect behavior)\n * Gets the associated error message with a field.\n *\n * @param {string} field\n * @param {Record<string, any>} errors\n * @returns string\n */\nexport function getValidationError(\n  field: string,\n  errors: Record<string, any>\n): string {\n  return errors[field] && 'message' in errors[field]\n    ? (errors[field].message as string)\n    : '';\n}\n","/**\n * normalizeString\n *\n * Converts string case to lowerCase and trims whitespace.\n *\n * @param {string} stringToNormalize\n * @returns {string} The normalized string lowercased and trimmed.\n */\nexport function normalizeString(stringToNormalize: string): string {\n  return stringToNormalize.toLowerCase().trim();\n}\n","/**\n * stripFormatNumber\n *\n * Strips a number string formatting (via `formatNumber`) (e.g. 10,000 -> 10000).\n *\n * @param {string} value Number string to strip formatting (via `formatNumber`) from.\n * @returns {string} A Number string without any formatting form `formatNumber`.\n *\n * @todo maybe a more friendly way via Intl API in JS core?\n */\nexport const stripFormatNumber = (value: string): string =>\n  value.toString().replace(/,/g, '');\n","/**\n * truncateEthAddress\n *\n * Truncates Ethereum address.\n *\n * @param {string} addr\n * @param {number} [maxLength=5]\n * @returns {string}\n */\nexport function truncateEthAddress(\n  addr: string,\n  maxLength: number = 5\n): string {\n  if (addr === null) return '---';\n\n  if (typeof addr !== 'undefined' && addr.length > 9) {\n    const firstSegment = addr.substring(0, maxLength);\n    const secondPart = addr.substring(addr.length - 3);\n    return firstSegment + '...' + secondPart;\n  } else {\n    return '---';\n  }\n}\n","import React, {useState, useEffect} from 'react';\n\nimport {chooseRandom} from '../../util/helpers';\n\ntype CycleMessageProps = {\n  /**\n   * Use the first item as the default.\n   */\n  useFirstItemStart?: boolean;\n  /**\n   * What is the interval of cycling the message?\n   */\n  intervalMs: number;\n  /**\n   * Provide multiple strings to cycle through.\n   */\n  messages: string[];\n  /**\n   * Render a React Element.\n   * activeMessage is passed in.\n   */\n  render: (m: string) => React.ReactElement;\n};\n\nexport default function CycleMessage(props: CycleMessageProps) {\n  const {intervalMs, messages, useFirstItemStart} = props;\n\n  // Default item at start.\n  const INITIAL_ITEM = useFirstItemStart\n    ? messages[0]\n    : chooseRandom<string>(messages);\n\n  const [activeMessage, setActiveMessage] = useState<string>(INITIAL_ITEM);\n\n  useEffect(() => {\n    const intervalId = setInterval(\n      () =>\n        setActiveMessage((prevMessage) =>\n          chooseRandom<string>(messages, prevMessage)\n        ),\n      intervalMs\n    );\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [intervalMs, messages]);\n\n  return props.render(activeMessage);\n}\n","export default function TimesSVG() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      aria-hidden=\"true\"\n      data-icon=\"times\"\n      data-prefix=\"fal\"\n      viewBox=\"0 0 320 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z\"></path>\n    </svg>\n  );\n}\n","import {EnvironmentName} from './util/types';\n\n/**\n * Global DApp Config\n */\n\nconst {\n  REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS,\n  REACT_APP_DEFAULT_CHAIN_NAME_LOCAL,\n  REACT_APP_ENVIRONMENT,\n  REACT_APP_INFURA_PROJECT_ID_DEV,\n  REACT_APP_INFURA_PROJECT_ID_LOCAL,\n  REACT_APP_INFURA_PROJECT_ID_PROD,\n  REACT_APP_SNAPSHOT_HUB_API_URL,\n} = process.env;\n\nexport const ENVIRONMENT = REACT_APP_ENVIRONMENT as EnvironmentName | undefined;\n\n/**\n * SNAPSHOT_HUB_API_URL\n *\n * @note For `ENVIRONMENT=localhost` we need to use CRA's local proxy\n *   so that we can communicate with our develop Snapshot Hub API\n *   without any CORS issues.\n *\n * @see src/setupProxy.js\n */\nexport const SNAPSHOT_HUB_API_URL: string | undefined =\n  ENVIRONMENT === 'localhost'\n    ? '/snapshot-hub'\n    : REACT_APP_SNAPSHOT_HUB_API_URL;\n\n// Infura Project Id\nexport const INFURA_PROJECT_ID =\n  REACT_APP_ENVIRONMENT === 'production'\n    ? REACT_APP_INFURA_PROJECT_ID_PROD\n    : REACT_APP_ENVIRONMENT === 'development'\n    ? REACT_APP_INFURA_PROJECT_ID_DEV\n    : REACT_APP_INFURA_PROJECT_ID_LOCAL;\n\n// Network IDs, when users change wallet networks\nexport const CHAINS = {\n  MAINNET: 1,\n  ROPSTEN: 3,\n  RINKEBY: 4,\n  GOERLI: 5,\n  KOVAN: 42,\n  GANACHE: 1337,\n};\n\n// Network names for modal messaging\nexport const CHAIN_NAME = {\n  [CHAINS.MAINNET]: 'Main Ethereum Network',\n  [CHAINS.ROPSTEN]: 'Ropsten Test Network',\n  [CHAINS.RINKEBY]: 'Rinkeby Test Network',\n  [CHAINS.GOERLI]: 'Grli Test Network',\n  [CHAINS.KOVAN]: 'Kovan Test Network',\n  [CHAINS.GANACHE]: 'Ganache Test Network',\n};\n\nexport const ETHERSCAN_URLS: {[chainId: number]: string} = {\n  [CHAINS.MAINNET]: `https://etherscan.io`,\n  [CHAINS.ROPSTEN]: `https://ropsten.etherscan.io`,\n  [CHAINS.RINKEBY]: `https://rinkeby.etherscan.io`,\n  [CHAINS.GOERLI]: `https://goerli.etherscan.io`,\n  [CHAINS.KOVAN]: `https://kovan.etherscan.io`,\n};\n\n// If developing locally, include your DaoRegistry contract address in your `.env` file.\nexport const DAO_REGISTRY_CONTRACT_ADDRESS = REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS;\n\nexport const DEFAULT_CHAIN =\n  REACT_APP_ENVIRONMENT === 'production'\n    ? CHAINS.MAINNET\n    : REACT_APP_ENVIRONMENT === 'development'\n    ? CHAINS.RINKEBY\n    : REACT_APP_DEFAULT_CHAIN_NAME_LOCAL // Set this to change local development chain\n    ? CHAINS[REACT_APP_DEFAULT_CHAIN_NAME_LOCAL]\n    : CHAINS.GANACHE; // Defaults to a Ganache private network (1337)\n\n/**\n * These addresses are important as the contracts use them in their configs.\n *\n * @todo Remove and get from the chain/subgraph?\n *\n * @see https://github.com/openlawteam/laoland/blob/9e0e03616a00e41e666351e146ee109b9fe37fb2/utils/DaoFactory.js\n */\nexport const GUILD_ADDRESS: string =\n  '0x000000000000000000000000000000000000dead';\nexport const TOTAL_ADDRESS: string =\n  '0x000000000000000000000000000000000000babe';\nexport const SHARES_ADDRESS: string =\n  '0x00000000000000000000000000000000000FF1CE';\nexport const LOOT_ADDRESS: string =\n  '0x00000000000000000000000000000000B105F00D';\nexport const ETH_TOKEN_ADDRESS: string =\n  '0x0000000000000000000000000000000000000000';\nexport const DAI_TOKEN_ADDRESS: string =\n  '0x95b58a6bff3d14b7db2f5cb5f0ad413dc2940658';\n\n/**\n * Space is a unique key (typically a contract address)\n * used by Moloch and Snapshot for building core proposal data.\n *\n * It is also used inside a Snapshot Hub for matching a `space`\n * with its own proposals and votes.\n */\nexport const SPACES: Record<EnvironmentName, string> = {\n  development: 'thelao',\n  // @todo Get local Docker snapshot and \"registered\" space set up.\n  localhost: 'thelao',\n  production: 'thelao',\n};\n\n// Defaults to `localhost` space if `ENVIRONMENT` is `undefined`.\nexport const SPACE: string = SPACES[ENVIRONMENT || 'localhost'];\n","import {Dispatch} from 'redux';\n\nimport {ConnectedMemberState, ContractsStateEntry} from '../types';\n\nexport const SET_CONNECTED_MEMBER = 'SET_CONNECTED_MEMBER';\nexport const CLEAR_CONNECTED_MEMBER = 'CLEAR_CONNECTED_MEMBER';\n\n/**\n * getConnectedMember\n *\n * Gets information about a connected address from the DAO's `members`.\n * If the user is not a member, the defaults for a non-existent member of the DAO are returned (e.g. \"0x000000...\")\n * and `isActiveMember` will be `false`.\n *\n * The reason state is set for both a member and a non-member\n * is to ensure we're not too restrictive in our Dapp logic and\n * letting the contract do its job.\n */\nexport function getConnectedMember(\n  account: string,\n  daoRegistryContract: ContractsStateEntry\n) {\n  return async function (dispatch: Dispatch<any>) {\n    const daoRegistryInstance = daoRegistryContract.instance;\n\n    if (!daoRegistryInstance || !account) {\n      dispatch(clearConnectedMember());\n\n      return;\n    }\n\n    try {\n      const memberAddressByDelegateKey: string = await daoRegistryInstance.methods\n        .memberAddressesByDelegatedKey(account)\n        .call({from: account});\n      const isActiveMember: boolean = await daoRegistryInstance.methods\n        .isActiveMember(memberAddressByDelegateKey)\n        .call({from: account});\n      const currentDelegateKey: string = await daoRegistryInstance.methods\n        .getCurrentDelegateKey(memberAddressByDelegateKey)\n        .call({from: account});\n\n      const isActiveMemberChecks: boolean =\n        isActiveMember &&\n        !memberAddressByDelegateKey.startsWith('0x0000000000');\n\n      dispatch(\n        setConnectedMember({\n          delegateKey: currentDelegateKey,\n          isActiveMember: isActiveMemberChecks,\n          memberAddress: memberAddressByDelegateKey,\n        })\n      );\n    } catch (error) {\n      dispatch(clearConnectedMember());\n\n      throw error;\n    }\n  };\n}\n\nexport function setConnectedMember(payload: ConnectedMemberState) {\n  return {type: SET_CONNECTED_MEMBER, ...payload};\n}\n\nexport function clearConnectedMember() {\n  return {type: CLEAR_CONNECTED_MEMBER};\n}\n","import Web3 from 'web3';\n\nimport {ContractsStateEntry} from '../../../store/types';\nimport {ContractExtensionNames} from '../types';\n\nexport async function getExtensionAddress(\n  extensionName: ContractExtensionNames,\n  daoContractInstance: ContractsStateEntry['instance'] | undefined\n): Promise<string> {\n  try {\n    if (!daoContractInstance) {\n      throw new Error('No DaoRegistry contract instance provided.');\n    }\n\n    return await daoContractInstance.methods\n      .getExtensionAddress(Web3.utils.sha3(extensionName))\n      .call();\n  } catch (error) {\n    throw error;\n  }\n}\n","import React, {useState, useEffect, CSSProperties} from 'react';\nimport FadeIn from '../common/FadeIn';\n\ntype CycleEllipsisProps = {\n  /**\n   * What is the interval of cycling the message?\n   */\n  intervalMs?: number;\n  /**\n   * Optional settings for the inner `<FadeIn />` component.\n   */\n  fadeInProps?: Parameters<typeof FadeIn>[0];\n};\n\nconst MESSAGES = ['', '.', '.', '.'];\nconst rootStyles = {position: 'absolute'} as CSSProperties;\nconst nbspStyles = {\n  height: 1,\n  width: 1,\n} as CSSProperties;\n\nexport function CycleEllipsis(props: CycleEllipsisProps) {\n  const {intervalMs = 1000, fadeInProps} = props;\n  const fadeInPropsMerged = {...fadeInProps, inline: true};\n\n  const [upToIndex, setUpToIndex] = useState<number>(1);\n\n  useEffect(() => {\n    const intervalId = setInterval(\n      () => setUpToIndex((prevIndex) => (prevIndex + 1) % MESSAGES.length),\n      intervalMs\n    );\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [intervalMs]);\n\n  return (\n    <>\n      <span style={rootStyles}>\n        <span>{upToIndex >= 0 && MESSAGES[0]}</span>\n        <span>\n          {upToIndex >= 1 && (\n            <FadeIn {...fadeInPropsMerged}>{MESSAGES[1]}</FadeIn>\n          )}\n        </span>\n        <span>\n          {upToIndex >= 2 && (\n            <FadeIn {...fadeInPropsMerged}>{MESSAGES[2]}</FadeIn>\n          )}\n        </span>\n        <span>\n          {upToIndex >= 3 && (\n            <FadeIn {...fadeInPropsMerged}>{MESSAGES[3]}</FadeIn>\n          )}\n        </span>\n      </span>\n      {/* @note Keep as it's an alignment fallback in certain CSS situations when no other text is a sibiling */}\n      <span style={nbspStyles}>&nbsp;</span>\n    </>\n  );\n}\n","import React, {createContext} from 'react';\nimport Web3 from 'web3';\n\nimport useWeb3ModalManager, {DefaultTheme} from './hooks/useWeb3ModalManager';\n\ntype Web3ModalProviderArguments = {\n  defaultChain?: number;\n  defaultTheme?: DefaultTheme;\n  providerOptions: Record<string, any>; // required\n};\n\ntype Web3ModalManagerProps = {\n  children: JSX.Element;\n} & Web3ModalProviderArguments;\n\nexport type Web3ModalContextValue = {\n  account: string | undefined;\n  connected: boolean | undefined;\n  providerOptions: Record<string, any>;\n  onConnectTo: (providerName: string) => void;\n  onDisconnect: () => void;\n  networkId: number | undefined;\n  provider: any;\n  web3Instance: Web3;\n  web3Modal: any;\n};\n\nexport const Web3ModalContext = createContext<Web3ModalContextValue>(\n  {} as Web3ModalContextValue\n);\n\n/**\n * Web3ModalManager\n *\n * A provider for the `web3modal` wallet connection, provides access to\n * the wallet states, enables connections and disconnections.\n *\n * @example\n * <Web3ModalManager defaultChain={1} defaultTheme={'dark'} providerOptions={...}>\n *   ...\n * </Web3ModalManager>\n *\n * @param children: React.JSX\n * @param defaultChain?: number\n * @param defaultTheme?: DefaultTheme; default is `dark`\n * @param providerOptions: Record<string, any>\n */\n\nexport default function Web3ModalManager({\n  children,\n  defaultChain,\n  defaultTheme = DefaultTheme.DARK,\n  providerOptions,\n}: Web3ModalManagerProps) {\n  const web3ModalProviderArguments: Web3ModalProviderArguments = {\n    defaultChain,\n    defaultTheme,\n    providerOptions,\n  };\n  const {\n    account,\n    connected,\n    onConnectTo,\n    onDisconnect,\n    networkId,\n    provider,\n    web3Instance,\n    web3Modal,\n  } = useWeb3ModalManager(web3ModalProviderArguments);\n\n  const web3ModalContext = {\n    account,\n    connected,\n    onConnectTo,\n    onDisconnect,\n    networkId,\n    provider,\n    providerOptions,\n    web3Instance,\n    web3Modal,\n  };\n\n  return (\n    <Web3ModalContext.Provider value={web3ModalContext}>\n      {children}\n    </Web3ModalContext.Provider>\n  );\n}\n","// see: http://reactcommunity.org/react-transition-group/transition\nimport React from 'react';\nimport {Transition} from 'react-transition-group';\n\ntype FadeInProps = {\n  children?: React.ReactNode;\n  duration?: number;\n  /**\n   * Defaults to `true`\n   */\n  show?: boolean;\n  /**\n   * Renders a `<span>` wrapper where the animation CSS is applied.\n   */\n  inline?: boolean;\n};\n\nconst DEFAULT_DURATION = 300;\n\nconst defaultStyle = (props: FadeInProps) => ({\n  transition: `opacity ${\n    props.duration || 300\n  }ms cubic-bezier(0, 0.69, 0.32, 0.64)`,\n  opacity: 0,\n});\n\nconst transitionStyles: Record<string, any> = {\n  entering: {opacity: 0},\n  entered: {opacity: 1},\n  exiting: {opacity: 0},\n  exited: {opacity: 0},\n};\n\nexport default function FadeIn(props: FadeInProps) {\n  const {inline} = props;\n\n  return (\n    <Transition\n      appear\n      in={props.show !== undefined ? props.show : true}\n      timeout={props.duration || DEFAULT_DURATION}>\n      {(transition) =>\n        inline ? (\n          <span\n            style={{\n              ...defaultStyle(props),\n              ...transitionStyles[transition],\n            }}>\n            {props.children}\n          </span>\n        ) : (\n          <div\n            style={{\n              ...defaultStyle(props),\n              ...transitionStyles[transition],\n            }}>\n            {props.children}\n          </div>\n        )\n      }\n    </Transition>\n  );\n}\n","import {useState} from 'react';\nimport {TransactionReceipt} from 'web3-core/types';\n\nimport {CHAINS, ETHERSCAN_URLS} from '../../../config';\nimport {contractSend} from '../helpers';\nimport {dontCloseWindowWarning} from '../../../util/helpers';\nimport {useWeb3Modal} from './useWeb3Modal';\nimport {Web3TxStatus} from '../types';\n\ntype UseContractSendReturn = {\n  txError: Error | undefined;\n  txEtherscanURL: string;\n  txIsPromptOpen: boolean;\n  txReceipt: TransactionReceipt | undefined;\n  txSend: (\n    ...p: Parameters<typeof contractSend>\n  ) => Promise<TransactionReceipt | undefined>;\n  txStatus: Web3TxStatus;\n};\n\n/**\n * useContractSend\n *\n * A React hook which encapsulates the call and related values of `contractSend`.\n *\n * @returns {UseContractSendReturn}\n */\nexport function useContractSend(): UseContractSendReturn {\n  const [txError, setTxError] = useState<Error>();\n  const [txEtherscanURL, setTxEtherscanURL] = useState<string>('');\n  const [txIsPromptOpen, setTxIsPromptOpen] = useState<boolean>(false);\n  const [txReceipt, setTxReceipt] = useState<TransactionReceipt>();\n  const [txStatus, setTxStatus] = useState<Web3TxStatus>(Web3TxStatus.STANDBY);\n\n  /**\n   * Our hooks\n   */\n\n  const {networkId} = useWeb3Modal();\n\n  /**\n   * Functions\n   */\n\n  function handleOnTxProcess(callback?: (txh: string) => void) {\n    return (txHash: string) => {\n      setTxStatus(Web3TxStatus.PENDING);\n      setTxIsPromptOpen(false);\n\n      // Ganache transactions do not show on Etherscan.\n      if (networkId && networkId !== CHAINS.GANACHE) {\n        setTxEtherscanURL(`${ETHERSCAN_URLS[networkId]}/tx/${txHash}`);\n      }\n\n      callback && callback(txHash);\n    };\n  }\n\n  async function txSend(\n    ...contractSendParams: Parameters<typeof contractSend>\n  ) {\n    // Activate \"don't close window\" warning\n    const unsubscribeDontCloseWindow = dontCloseWindowWarning();\n\n    try {\n      // Reset state in case trying again after error.\n      setTxError(undefined);\n      setTxEtherscanURL('');\n\n      setTxStatus(Web3TxStatus.AWAITING_CONFIRM);\n      setTxIsPromptOpen(true);\n\n      // Intercept the on process callback to allow us to set our internal state.\n      contractSendParams[4] = handleOnTxProcess(contractSendParams[4]);\n\n      const receipt = await contractSend(...contractSendParams);\n\n      setTxReceipt(receipt);\n      setTxStatus(Web3TxStatus.FULFILLED);\n\n      unsubscribeDontCloseWindow();\n\n      return receipt;\n    } catch (error) {\n      setTxError(error);\n      setTxStatus(Web3TxStatus.REJECTED);\n      setTxIsPromptOpen(false);\n\n      unsubscribeDontCloseWindow();\n\n      throw error;\n    }\n  }\n\n  return {\n    txError,\n    txEtherscanURL,\n    txIsPromptOpen,\n    txReceipt,\n    txSend,\n    txStatus,\n  };\n}\n","import {useEffect, useState, useRef} from 'react';\n\ntype GasStationResponse = {\n  average: number;\n  avgWait: number;\n  block_time: number;\n  blockNum: number;\n  fast: number;\n  fastest: number;\n  fastestWait: number;\n  fastWait: number;\n  safeLow: number;\n  safeLowWait: number;\n  speed: number;\n  standard: number;\n};\n\ntype GasPrices = {\n  average?: string;\n  fast: string;\n  fastest: string;\n  safeLow: string;\n  standard?: string;\n};\n\nconst REQUEST_TIMEOUT_MS = 5000;\nconst URL = 'https://ethgasstation.info/json/ethgasAPI.json';\nconst SECONDARY_URL = 'https://www.etherchain.org/api/gasPriceOracle';\n\n/**\n * useETHGasPrice\n *\n * Returns the latest mainnet gas prices, converted to WEI string.\n * If ETHGasStation is not returning quick enough (or fails), it tries etherchain's\n * gasPriceOracle API endpoint.\n *\n * @returns {GasPrices}\n */\nexport function useETHGasPrice() {\n  /**\n   * State\n   */\n\n  const [gasURL, setGasURL] = useState<string>(URL);\n  const [gasPrices, setGasPrices] = useState<GasPrices>();\n\n  const isMounted = useRef<boolean>();\n\n  useEffect(() => {\n    /**\n     * If the environment is not production, then exit.\n     * Sometimes using mainnet gas prices for Rinkeby won't work well with wallets.\n     */\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') return;\n\n    isMounted.current = true;\n\n    const abortController = new AbortController();\n    // If the request takes longer than 2 seconds,\n    // abort the request and try the secondary URL.\n    const timeoutId = setTimeout(() => {\n      abortController.abort();\n\n      setGasURL(SECONDARY_URL);\n    }, REQUEST_TIMEOUT_MS);\n\n    // To convert the provided values to gwei, divide by 10\n    const convertGasToWEI = (price: number) =>\n      ((gasURL === URL ? price / 10 : price) * 1000000000).toString();\n\n    fetch(gasURL, {signal: abortController.signal})\n      .then((response) => {\n        if (!isMounted.current) return;\n\n        if (!response.ok) {\n          // try a new endpoint\n          setGasURL(SECONDARY_URL);\n\n          throw new Error(\n            'Something went wrong while getting the latest gas price.'\n          );\n        }\n\n        clearTimeout(timeoutId);\n\n        return response.json();\n      })\n      .then((jsonResponse: GasStationResponse) => {\n        if (!isMounted.current) return;\n\n        const {average, fast, fastest, safeLow, standard} = jsonResponse;\n\n        setGasPrices({\n          average: convertGasToWEI(average || standard),\n          fast: convertGasToWEI(fast),\n          fastest: convertGasToWEI(fastest),\n          safeLow: convertGasToWEI(safeLow),\n        });\n      })\n      .catch(() => {\n        clearTimeout(timeoutId);\n\n        if (!isMounted.current) return;\n\n        // try a new endpoint\n        setGasURL(SECONDARY_URL);\n        setGasPrices(undefined);\n      });\n\n    return () => {\n      isMounted.current = false;\n\n      abortController.abort();\n\n      clearTimeout(timeoutId);\n    };\n  }, [gasURL]);\n\n  return gasPrices;\n}\n","import {useEffect, useState} from 'react';\n\nimport {useWeb3Modal} from '.';\nimport {CHAIN_NAME, DEFAULT_CHAIN} from '../../../config';\n\n/**\n * useIsDefaultChain\n *\n * Checks if the connected account it connected to the default chain\n * @returns {\n *  defaultChain: number,\n *  defaultChainError: string,\n *  isDefaultChain: boolean\n * }\n */\nexport function useIsDefaultChain(): {\n  defaultChain: number;\n  defaultChainError: Error | undefined;\n  isDefaultChain: boolean;\n} {\n  /**\n   * Our hooks\n   */\n\n  const {networkId, connected} = useWeb3Modal();\n\n  /**\n   * State\n   */\n\n  const [isDefaultChain, setIsDefaultChain] = useState<boolean>(false);\n  const [defaultChainError, setDefaultChainError] = useState<Error>();\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    setIsDefaultChain(networkId === DEFAULT_CHAIN);\n\n    if (connected && networkId !== DEFAULT_CHAIN) {\n      setDefaultChainError(\n        new Error(`Please connect to the ${CHAIN_NAME[DEFAULT_CHAIN]}.`)\n      );\n\n      return;\n    }\n\n    // If we make it here, reset after running checks.\n    setDefaultChainError(undefined);\n  }, [connected, networkId]);\n\n  return {\n    defaultChain: DEFAULT_CHAIN,\n    defaultChainError,\n    isDefaultChain,\n  };\n}\n","import {useCallback} from 'react';\nimport {useDispatch} from 'react-redux';\n\nimport {\n  initContractBankExtension,\n  initContractDaoRegistry,\n  initContractManaging,\n  initContractOnboarding,\n  initContractTribute,\n  initRegisteredVotingAdapter,\n} from '../../../store/actions';\nimport {ReduxDispatch} from '../../../store/types';\nimport {useIsDefaultChain} from './useIsDefaultChain';\nimport {useWeb3Modal} from '.';\n\n/**\n * useInitContracts()\n *\n * Initates contracts used in the app\n */\nexport function useInitContracts() {\n  /**\n   * Their hooks\n   */\n\n  const {isDefaultChain} = useIsDefaultChain();\n  const {web3Instance} = useWeb3Modal();\n  const dispatch = useDispatch<ReduxDispatch>();\n\n  /**\n   * Cached callbacks\n   */\n\n  const initContractsCached = useCallback(initContracts, [\n    isDefaultChain,\n    dispatch,\n    web3Instance,\n  ]);\n\n  /**\n   * Functions\n   */\n\n  /**\n   * Init contracts\n   *\n   * If we are connected to the correct network, init contracts\n   */\n  async function initContracts() {\n    try {\n      if (!isDefaultChain) return;\n\n      // Init DaoRegistry and Managing contracts first\n      await dispatch(initContractDaoRegistry(web3Instance));\n      await dispatch(initContractManaging(web3Instance));\n\n      // Init more contracts\n      await dispatch(initRegisteredVotingAdapter(web3Instance));\n      await dispatch(initContractOnboarding(web3Instance));\n      await dispatch(initContractBankExtension(web3Instance));\n      await dispatch(initContractTribute(web3Instance));\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  return {\n    initContracts: initContractsCached,\n  };\n}\n","import {useSelector} from 'react-redux';\n\nimport {normalizeString} from '../../../util/helpers';\nimport {StoreState} from '../../../store/types';\nimport {useWeb3Modal} from './useWeb3Modal';\n\nexport function useIsAddressDelegated(): boolean {\n  /**\n   * Selectors\n   */\n\n  const delegateKey =\n    useSelector((s: StoreState) => s.connectedMember?.delegateKey) || '';\n  const memberAddress =\n    useSelector((s: StoreState) => s.connectedMember?.memberAddress) || '';\n\n  /**\n   * Our hooks\n   */\n\n  const {account = ''} = useWeb3Modal();\n\n  return (\n    normalizeString(account) === normalizeString(memberAddress) &&\n    normalizeString(account) !== normalizeString(delegateKey)\n  );\n}\n","/**\n * FOR HIGH REUSE ENUMS\n *\n * For any other more specific enum types, co-locate them in either:\n *\n * 1) The actual code file.\n * 2) In a type file in the location of the code files which mainly use the types.\n *\n * @see https://kentcdodds.com/blog/colocation\n */\n\n/**\n * @see https://chainid.network/\n */\nexport enum NetworkIDs {\n  GOERLI = 5,\n  KOVAN = 42,\n  RINKEBY = 4,\n  ROPSTEN = 3,\n  MAINNET = 1,\n}\n\n/**\n * @see https://chainid.network/\n */\nexport enum NetworkNames {\n  GOERLI = 'goerli',\n  KOVAN = 'kovan',\n  RINKEBY = 'rinkeby',\n  ROPSTEN = 'ropsten',\n  MAINNET = 'mainnet',\n}\n\nexport enum FormFieldErrors {\n  REQUIRED = 'This field is required.',\n  INVALID_ETHEREUM_ADDRESS = 'The ethereum address is invalid.',\n  INVALID_NUMBER = 'The value is not a number.',\n}\n\nexport enum ProposalHeaderNames {\n  FAILED = 'Failed',\n  PASSED = 'Passed',\n  REQUESTS = 'Proposals',\n  VOTING = 'Voting',\n}\n","/**\n * FOR HIGH REUSE TYPES\n *\n * For any other more specific types, co-locate them in either:\n *\n * 1) The actual code file.\n * 2) In a type file in the location of the code files which mainly use the types.\n *\n * @see https://kentcdodds.com/blog/colocation\n */\n\nexport type EnvironmentName = 'localhost' | 'development' | 'production';\n\nexport enum AsyncStatus {\n  STANDBY = 'STANDBY',\n  PENDING = 'PENDING',\n  FULFILLED = 'FULFILLED',\n  REJECTED = 'REJECTED',\n}\n\nexport interface MetaMaskRPCError extends Error {\n  code: number;\n}\n","import React, {useState} from 'react';\nimport {useSelector} from 'react-redux';\nimport {\n  createVote,\n  getVoteResultRootDomainDefinition,\n  prepareVoteResult,\n  signMessage,\n  SnapshotVoteResponseData,\n  toStepNode,\n  VoteChoicesIndex,\n} from '@openlaw/snapshot-js-erc712';\nimport {VoteEntry} from '@openlaw/snapshot-js-erc712/dist/types';\n\nimport {ContractAdapterNames, Web3TxStatus} from '../../web3/types';\nimport {getAdapterAddressFromContracts} from '../../web3/helpers';\nimport {DEFAULT_CHAIN, SHARES_ADDRESS} from '../../../config';\nimport {PRIMARY_TYPE_ERC712, TX_CYCLE_MESSAGES} from '../../web3/config';\nimport {ProposalData} from '../types';\nimport {StoreState} from '../../../store/types';\nimport {useMemberActionDisabled} from '../../../hooks';\nimport {useWeb3Modal, useContractSend, useETHGasPrice} from '../../web3/hooks';\nimport CycleMessage from '../../feedback/CycleMessage';\nimport ErrorMessageWithDetails from '../../common/ErrorMessageWithDetails';\nimport EtherscanURL from '../../web3/EtherscanURL';\nimport FadeIn from '../../common/FadeIn';\nimport Loader from '../../feedback/Loader';\n\ntype OffchainVotingSubmitResultActionProps = {\n  adapterName: ContractAdapterNames;\n  proposal: ProposalData;\n};\n\ntype SubmitVoteResultArguments = [\n  string, // `dao`\n  string, // `proposalId`\n  string, // `proposal data`,\n  {\n    account: string;\n    choice: VoteChoicesIndex;\n    index: number;\n    nbNo: string;\n    nbYes: string;\n    proof: string[];\n    proposalHash: string;\n    rootSig: string;\n    sig: string;\n    timestamp: number;\n  }\n];\n\nexport function OffchainOpRollupVotingSubmitResultAction(\n  props: OffchainVotingSubmitResultActionProps\n) {\n  const {\n    adapterName,\n    proposal: {snapshotProposal},\n  } = props;\n\n  /**\n   * State\n   */\n\n  const [signatureStatus, setSignatureStatus] = useState<Web3TxStatus>(\n    Web3TxStatus.STANDBY\n  );\n  const [submitError, setSubmitError] = useState<Error>();\n\n  /**\n   * Selectors\n   */\n\n  const bankExtensionMethods = useSelector(\n    (s: StoreState) => s.contracts.BankExtensionContract?.instance.methods\n  );\n  const offchainVotingMethods = useSelector(\n    (s: StoreState) => s.contracts.VotingContract?.instance.methods\n  );\n  const daoRegistryAddress = useSelector(\n    (s: StoreState) => s.contracts.DaoRegistryContract?.contractAddress\n  );\n  const contracts = useSelector((s: StoreState) => s.contracts);\n\n  /**\n   * Our hooks\n   */\n\n  const {account, provider} = useWeb3Modal();\n\n  const {txEtherscanURL, txIsPromptOpen, txSend, txStatus} = useContractSend();\n\n  const {\n    isDisabled,\n    openWhyDisabledModal,\n    WhyDisabledModal,\n  } = useMemberActionDisabled();\n\n  const gasPrices = useETHGasPrice();\n\n  /**\n   * Variables\n   */\n\n  const isInProcess =\n    signatureStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    signatureStatus === Web3TxStatus.PENDING ||\n    txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    txStatus === Web3TxStatus.PENDING;\n\n  const isDone =\n    txStatus === Web3TxStatus.FULFILLED &&\n    signatureStatus === Web3TxStatus.FULFILLED;\n\n  const isInProcessOrDone = isInProcess || isDone || txIsPromptOpen;\n\n  /**\n   * Functions\n   */\n\n  async function handleSubmit() {\n    try {\n      if (!daoRegistryAddress) {\n        throw new Error('No DAO Registry address was found.');\n      }\n\n      if (!snapshotProposal) {\n        throw new Error('No Snapshot proposal was found.');\n      }\n\n      if (!snapshotProposal.votes) {\n        throw new Error('No Snapshot proposal votes were found.');\n      }\n\n      setSignatureStatus(Web3TxStatus.AWAITING_CONFIRM);\n\n      const {idInDAO: proposalHash} = snapshotProposal;\n      const adapterAddress = getAdapterAddressFromContracts(\n        adapterName,\n        contracts\n      );\n\n      // 1. Create vote entries\n      const voteEntriesPromises: Promise<VoteEntry>[] = snapshotProposal.votes.map(\n        async (v) => {\n          const voteData: SnapshotVoteResponseData = Object.values(v)[0];\n\n          return createVote({\n            proposalHash,\n            account: voteData.address,\n            voteYes: voteData.msg.payload.choice === VoteChoicesIndex.Yes,\n            timestamp: Number(voteData.msg.timestamp),\n            sig: voteData.sig,\n            // @todo conditionally use subgraph weight data\n            weight: await bankExtensionMethods\n              .getPriorAmount(\n                voteData.address,\n                SHARES_ADDRESS,\n                snapshotProposal.msg.payload.snapshot\n              )\n              .call(),\n          });\n        }\n      );\n\n      // 2. Prepare vote Result\n      const {voteResultTree, votes} = await prepareVoteResult({\n        actionId: adapterAddress,\n        chainId: DEFAULT_CHAIN,\n        daoAddress: daoRegistryAddress,\n        votes: await Promise.all(voteEntriesPromises),\n      });\n\n      const voteResultTreeHexRoot = voteResultTree.getHexRoot();\n\n      const result = toStepNode({\n        actionId: adapterAddress,\n        chainId: DEFAULT_CHAIN,\n        merkleTree: voteResultTree,\n        // @note Should use last entry\n        step: votes[votes.length - 1],\n        verifyingContract: daoRegistryAddress,\n      });\n\n      const {domain, types} = getVoteResultRootDomainDefinition(\n        daoRegistryAddress,\n        adapterAddress,\n        DEFAULT_CHAIN\n      );\n\n      const messageParams = JSON.stringify({\n        domain,\n        message: {root: voteResultTreeHexRoot},\n        primaryType: PRIMARY_TYPE_ERC712,\n        types,\n      });\n\n      // 3. Sign message\n      const signature = await signMessage(provider, account, messageParams);\n\n      setSignatureStatus(Web3TxStatus.FULFILLED);\n\n      const submitVoteResultArguments: SubmitVoteResultArguments = [\n        daoRegistryAddress,\n        proposalHash,\n        voteResultTreeHexRoot,\n        {...result, rootSig: signature},\n      ];\n\n      const txArguments = {\n        from: account || '',\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      // 4. Send the tx\n      await txSend(\n        'submitVoteResult',\n        offchainVotingMethods,\n        submitVoteResultArguments,\n        txArguments\n      );\n    } catch (error) {\n      setSubmitError(error);\n      setSignatureStatus(Web3TxStatus.REJECTED);\n    }\n  }\n\n  function renderSubmitStatus(): React.ReactNode {\n    // Either Snapshot or chain tx\n    if (\n      txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n      signatureStatus === Web3TxStatus.AWAITING_CONFIRM\n    ) {\n      return 'Awaiting your confirmation\\u2026';\n    }\n\n    // Only for chain tx\n    switch (txStatus) {\n      case Web3TxStatus.PENDING:\n        return (\n          <>\n            <CycleMessage\n              intervalMs={2000}\n              messages={TX_CYCLE_MESSAGES}\n              useFirstItemStart\n              render={(message) => {\n                return <FadeIn key={message}>{message}</FadeIn>;\n              }}\n            />\n\n            <EtherscanURL url={txEtherscanURL} isPending />\n          </>\n        );\n      case Web3TxStatus.FULFILLED:\n        return (\n          <>\n            <div>Result submitted!</div>\n\n            <EtherscanURL url={txEtherscanURL} />\n          </>\n        );\n      default:\n        return null;\n    }\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <>\n      <div>\n        <button\n          className=\"proposaldetails__button\"\n          disabled={isDisabled || isInProcessOrDone}\n          onClick={isDisabled || isInProcessOrDone ? () => {} : handleSubmit}>\n          {isInProcess ? <Loader /> : isDone ? 'Done' : 'Submit Vote Result'}\n        </button>\n\n        <ErrorMessageWithDetails\n          error={submitError}\n          renderText=\"Something went wrong\"\n        />\n\n        {/* SUBMIT STATUS */}\n        {isInProcessOrDone && (\n          <div className=\"form__submit-status-container\">\n            {renderSubmitStatus()}\n          </div>\n        )}\n\n        {isDisabled && (\n          <button className=\"button--help\" onClick={openWhyDisabledModal}>\n            Why is submitting disabled?\n          </button>\n        )}\n      </div>\n\n      <WhyDisabledModal title=\"Why is this disabled?\" />\n    </>\n  );\n}\n","import React, {useEffect, useRef, useState} from 'react';\n\nimport {ContractAdapterNames, Web3TxStatus} from '../../web3/types';\nimport {getVoteChosen} from '../helpers';\nimport {ProposalData} from '../types';\nimport {StoreState} from '../../../store/types';\nimport {useIsAddressDelegated, useWeb3Modal} from '../../web3/hooks';\nimport {useMemberActionDisabled} from '../../../hooks';\nimport {useSelector} from 'react-redux';\nimport {useSignAndSendVote} from '../hooks';\nimport {VoteChoices} from '@openlaw/snapshot-js-erc712';\nimport {VotingActionButtons} from '.';\nimport ErrorMessageWithDetails from '../../common/ErrorMessageWithDetails';\n\ntype OffchainVotingActionProps = {\n  adapterName: ContractAdapterNames;\n  proposal: ProposalData;\n};\n\ntype VotingDisabledReasons = {\n  addressIsDelegatedMessage: string;\n  alreadyVotedMessage: string;\n};\n\nconst getDelegatedAddressMessage = (a: string) =>\n  `Your member address is delegated to ${a}. You must use that address to vote.`;\n\n/**\n * OffchainVotingAction\n *\n * An off-chain voting action component which facilitates submitting to Snapshot Hub.\n *\n * @returns {JSX.Element}\n */\nexport function OffchainVotingAction(\n  props: OffchainVotingActionProps\n): JSX.Element | null {\n  const {adapterName, proposal} = props;\n\n  /**\n   * State\n   */\n\n  const [voteChoiceClicked, setVoteChoiceClicked] = useState<VoteChoices>();\n  const [submitError, setSubmitError] = useState<Error>();\n\n  /**\n   * Refs\n   */\n\n  const votingDisabledReasonsRef = useRef<VotingDisabledReasons>({\n    addressIsDelegatedMessage: '',\n    alreadyVotedMessage: '',\n  });\n\n  /**\n   * Selectors\n   */\n\n  const delegateAddress = useSelector(\n    (s: StoreState) => s.connectedMember?.delegateKey\n  );\n\n  /**\n   * Our hooks\n   */\n\n  const {account} = useWeb3Modal();\n  const {signAndSendVote, voteDataStatus} = useSignAndSendVote();\n  const isAddressDelegated = useIsAddressDelegated();\n  const voteChosen = getVoteChosen(\n    proposal.snapshotProposal?.votes,\n    account || ''\n  );\n  const {\n    isDisabled,\n    openWhyDisabledModal,\n    setOtherDisabledReasons,\n    WhyDisabledModal,\n  } = useMemberActionDisabled();\n\n  /**\n   * Variables\n   */\n\n  const proposalHash: string = proposal.snapshotProposal?.idInDAO || '';\n  const snapshotProposalId: string =\n    proposal.snapshotProposal?.idInSnapshot || '';\n\n  const isInProcess =\n    voteDataStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    voteDataStatus === Web3TxStatus.PENDING;\n\n  const isDone = voteDataStatus === Web3TxStatus.FULFILLED;\n\n  const isInProcessOrDone = isInProcess || isDone;\n\n  const isSubmitDisabled = isDisabled || isInProcessOrDone;\n\n  const voteChoiceProgress: VoteChoices | undefined = isInProcess\n    ? voteChoiceClicked\n    : undefined;\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    // 1. Determine and set local reasons why voting would be disabled\n\n    // Reason: address is delegated\n    if (delegateAddress) {\n      // Set or unset\n      const addressIsDelegatedMessage = isAddressDelegated\n        ? getDelegatedAddressMessage(delegateAddress)\n        : '';\n\n      votingDisabledReasonsRef.current = {\n        ...votingDisabledReasonsRef.current,\n        addressIsDelegatedMessage,\n      };\n    }\n\n    // Reason: already voted\n    votingDisabledReasonsRef.current = {\n      ...votingDisabledReasonsRef.current,\n      alreadyVotedMessage: voteChosen ? 'You have already voted.' : '',\n    };\n\n    // 2. Set reasons\n    setOtherDisabledReasons(Object.values(votingDisabledReasonsRef.current));\n  }, [\n    delegateAddress,\n    isAddressDelegated,\n    setOtherDisabledReasons,\n    voteChosen,\n  ]);\n\n  /**\n   * Functions\n   */\n\n  async function handleSubmitVote(choice: VoteChoices) {\n    try {\n      if (!proposalHash) {\n        throw new Error('No proposal hash was found.');\n      }\n      if (!snapshotProposalId) {\n        throw new Error('No proposal ID was found.');\n      }\n\n      setVoteChoiceClicked(VoteChoices[choice]);\n\n      await signAndSendVote({\n        partialVoteData: {choice},\n        adapterName,\n        proposalIdInDAO: proposalHash,\n        proposalIdInSnapshot: snapshotProposalId,\n      });\n\n      // Refetch to show the vote the user submitted\n      await proposal.refetchProposalOrDraft();\n    } catch (error) {\n      setSubmitError(error);\n    }\n  }\n\n  return (\n    <>\n      <VotingActionButtons\n        onClick={isSubmitDisabled ? () => {} : handleSubmitVote}\n        buttonProps={{\n          disabled: isSubmitDisabled,\n          'aria-disabled': isSubmitDisabled,\n        }}\n        voteChosen={voteChosen}\n        voteProgress={voteChoiceProgress}\n      />\n\n      <ErrorMessageWithDetails\n        error={submitError}\n        renderText=\"Something went wrong\"\n      />\n\n      {isDisabled && (\n        <button className=\"button--help\" onClick={openWhyDisabledModal}>\n          Why is voting disabled?\n        </button>\n      )}\n\n      <WhyDisabledModal title=\"Why is voting disabled?\" />\n    </>\n  );\n}\n","import {VoteChoicesIndex} from '@openlaw/snapshot-js-erc712';\n\nimport {normalizeString} from '../../../util/helpers';\nimport {SnapshotProposal} from '../types';\nimport {VoteChoices} from '../../web3/types';\n\nexport function getVoteChosen(\n  votes: SnapshotProposal['votes'],\n  account: string\n): VoteChoices | undefined {\n  const voteEntry = (votes || []).find((ve) =>\n    Object.entries(ve).find(\n      ([address, _voteData]) =>\n        normalizeString(address) === normalizeString(account || '')\n    )\n  );\n\n  if (voteEntry) {\n    const voteData = Object.entries(voteEntry)[0][1];\n    const choice = voteData.msg.payload.choice;\n\n    return choice === VoteChoicesIndex.Yes ? VoteChoices.Yes : VoteChoices.No;\n  }\n\n  return undefined;\n}\n","import React, {useCallback, useEffect, useState} from 'react';\n\ntype ProposalPeriodProps = {\n  startLabel?: React.ReactNode;\n  startPeriodMs: number;\n  endLabel?: React.ReactNode;\n  endedLabel?: React.ReactNode;\n  endPeriodMs: number;\n};\n\nexport default function ProposalPeriod(props: ProposalPeriodProps) {\n  const {startLabel, startPeriodMs, endLabel, endedLabel, endPeriodMs} = props;\n\n  /**\n   * Variables\n   */\n\n  const getTimeRemaining = (endtime: Date) => {\n    const t =\n      Date.parse(endtime.toString()) - Date.parse(new Date().toString());\n    const seconds = Math.floor((t / 1000) % 60);\n    const minutes = Math.floor((t / 1000 / 60) % 60);\n    const hours = Math.floor((t / (1000 * 60 * 60)) % 24);\n    const days = Math.floor(t / (1000 * 60 * 60 * 24));\n\n    return {\n      total: t,\n      days: days,\n      hours: hours,\n      minutes: minutes,\n      seconds: seconds,\n    };\n  };\n\n  /**\n   * State\n   */\n\n  const [proposalPeriod, setProposalPeriod] = useState<React.ReactNode>(null);\n\n  /**\n   * Cached callbacks\n   */\n\n  const displayCountdownCached = useCallback(displayCountdown, []);\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const currentDate = new Date();\n      const startDate = new Date(startPeriodMs);\n      const endDate = new Date(endPeriodMs);\n\n      if (currentDate < startDate) {\n        const start = (\n          <span>\n            <span className=\"votingstatus\">{startLabel || 'Starts:'}</span>{' '}\n            <span className=\"votingstatus__timer\">\n              {displayCountdownCached(startDate, true)}\n            </span>\n          </span>\n        );\n\n        setProposalPeriod(start);\n      } else if (currentDate < endDate) {\n        const end = (\n          <span>\n            <span className=\"votingstatus\">{endLabel || 'Ends:'}</span>{' '}\n            <span className=\"votingstatus__timer\">\n              {displayCountdownCached(endDate)}\n            </span>\n          </span>\n        );\n\n        setProposalPeriod(end);\n      } else {\n        const ended = (\n          <span className=\"votingstatus\">{endedLabel || 'Ended'}</span>\n        );\n\n        setProposalPeriod(ended);\n        clearInterval(interval);\n      }\n    }, 1000);\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, [\n    displayCountdownCached,\n    endLabel,\n    endPeriodMs,\n    endedLabel,\n    startLabel,\n    startPeriodMs,\n  ]);\n\n  /**\n   * Functions\n   */\n\n  function displayCountdown(\n    countdown: Date,\n    showDaysOnly?: boolean\n  ): string | React.ReactNode {\n    const {days, hours, minutes, seconds} = getTimeRemaining(countdown);\n\n    if (days > 2 && showDaysOnly) {\n      return `~${days} days`;\n    } else if (days > 0) {\n      return `${formatTimePeriod(days, 'day')} : ${formatTimePeriod(\n        hours,\n        'hr'\n      )} : ${formatTimePeriod(minutes, 'min')}`;\n    } else if (hours > 0) {\n      return `${formatTimePeriod(hours, 'hr')} : ${formatTimePeriod(\n        minutes,\n        'min'\n      )}`;\n    } else if (minutes > 0) {\n      return `${formatTimePeriod(minutes, 'min')} : ${formatTimePeriod(\n        seconds,\n        'sec'\n      )}`;\n    } else {\n      return (\n        <span className=\"color-brightsalmon\">\n          {formatTimePeriod(seconds, 'sec')}\n        </span>\n      );\n    }\n  }\n\n  function formatTimePeriod(time: number, period: string) {\n    const formattedPeriod = time === 0 || time > 1 ? `${period}s` : period;\n\n    return `${time} ${formattedPeriod}`;\n  }\n\n  /**\n   * Render\n   */\n\n  return <div>{proposalPeriod}</div>;\n}\n","import {SVGAttributes} from 'react';\n\nexport default function StopwatchSVG(props: SVGAttributes<HTMLOrSVGElement>) {\n  return (\n    <svg\n      width=\"20px\"\n      height=\"20px\"\n      viewBox=\"0 0 21 24\"\n      version=\"1.1\"\n      {...props}>\n      <defs>\n        <path\n          d=\"M17.6516,6.408 C19.8162,8.36 21,11.02 21,13.844 C21,19.458 16.303,24 10.5,24 C4.69616,24 0,19.457 0,13.844 C0,8.506 4.22802,4.197 9.53077,3.731 L9.53077,1.875 L6.68768,1.875 C6.15238,1.875 5.71845,1.455 5.71845,0.938 C5.71845,0.42 6.15238,0 6.68768,0 L14.3123,0 C14.8476,0 15.2815,0.42 15.2815,0.938 C15.2815,1.455 14.8476,1.875 14.3123,1.875 L11.46923,1.875 L11.46923,3.731 C13.1316,3.877 14.7126,4.398 16.1059,5.252 L17.4392,3.962 C17.8177,3.596 18.4314,3.596 18.8099,3.962 C19.1885,4.328 19.1885,4.922 18.8099,5.288 L17.6516,6.408 Z M10.5,22.125 C15.2208,22.125 19.0615,18.41 19.0615,13.844 C19.0615,9.277 15.2209,5.562 10.5,5.562 C5.77913,5.562 1.93846,9.277 1.93846,13.844 C1.93846,18.41 5.77917,22.125 10.5,22.125 Z M11.46923,8.312 L11.46923,13.844 C11.46923,14.362 11.03531,14.781 10.5,14.781 C9.96469,14.781 9.53077,14.362 9.53077,13.844 L9.53077,8.312 C9.53077,7.795 9.96469,7.375 10.5,7.375 C11.03531,7.375 11.46923,7.795 11.46923,8.312 Z\"\n          id=\"path-1\"></path>\n      </defs>\n      <g\n        id=\"Page-1\"\n        stroke=\"none\"\n        strokeWidth=\"1\"\n        fill=\"none\"\n        fillRule=\"evenodd\">\n        <g id=\"Group-70\">\n          <mask id=\"mask-2\" fill=\"white\">\n            <use xlinkHref=\"#path-1\"></use>\n          </mask>\n          <use id=\"Clip-69\" fill=\"currentColor\" xlinkHref=\"#path-1\"></use>\n        </g>\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\n\nimport {SquareRootVotingBar} from '.';\nimport ProposalPeriod from '../ProposalPeriod';\nimport StopwatchSVG from '../../../assets/svg/StopwatchSVG';\n\ntype VotingStatusProps = {\n  hasVotingEnded: boolean;\n  noShares: number;\n  /**\n   * A render prop to display status to before / after the clock timer is shown.\n   */\n  renderStatus: () => React.ReactNode;\n  /**\n   * A render prop: display the `ProposalPeriod` timer.\n   * `renderTimer` Provides `ProposalPeriod` component as an argument.\n   *\n   * Passing the `ProposalPeriod` component via the render prop\n   * gives the opportunity to easily show a timer for voting, or grace period, for example,\n   * without adding more props.\n   */\n  renderTimer: (component: typeof ProposalPeriod) => React.ReactNode;\n  /**\n   * Set to `false` to hide percentage data under the voting progress bar.\n   * Defaults to `true`.\n   */\n  showPercentages?: boolean;\n  totalShares: number;\n  yesShares: number;\n};\n\nexport function VotingStatus(props: VotingStatusProps) {\n  const {\n    hasVotingEnded,\n    noShares,\n    renderStatus,\n    renderTimer,\n    showPercentages = true,\n    totalShares,\n    yesShares,\n  } = props;\n\n  const renderedStatus = renderStatus();\n\n  return (\n    <>\n      <div className=\"votingstatus-container\">\n        <StopwatchSVG aria-label=\"Counting down until voting ends\" role=\"img\" />\n\n        {renderedStatus && (\n          <span className=\"votingstatus\">{renderedStatus}</span>\n        )}\n\n        {renderTimer(ProposalPeriod)}\n      </div>\n\n      {/* VOTES */}\n      <SquareRootVotingBar\n        yesShares={yesShares}\n        noShares={noShares}\n        totalShares={totalShares}\n        votingExpired={hasVotingEnded}\n        showPercentages={showPercentages}\n      />\n    </>\n  );\n}\n","import {useEffect, useState} from 'react';\n\nimport {ContractDAOConfigKeys} from '../../web3/types';\nimport {CycleEllipsis} from '../../feedback';\nimport {getDAOConfigEntry} from '../../web3/helpers';\nimport {ProposalData} from '../types';\nimport {StoreState} from '../../../store/types';\nimport {useOffchainVotingStartEnd} from '../hooks';\nimport {useSelector} from 'react-redux';\nimport {VotingStatus} from './VotingStatus';\n\ntype OffchainVotingStatusProps = {\n  /**\n   * When the offchain grace period seconds are provided the grace period timer\n   * will display. The end seconds will be determined inside the component.\n   *\n   * Be sure to unset this value (`0`, `undefined`) if the grace period should not show.\n   */\n  countdownGracePeriodStartMs?: number;\n  proposal: ProposalData;\n  showPercentages?: boolean;\n};\n\n// Cached grace period label\nconst gracePeriodEndLabel = (\n  <span>\n    Grace period ends:\n    <br />\n  </span>\n);\n\n// Cached grace period ended label\nconst gracePeriodEndedLabel = (\n  <span>\n    Grace period ended <br />{' '}\n    <span style={{textTransform: 'none'}}>\n      Awaiting contract status&hellip;\n    </span>\n  </span>\n);\n\nconst cycleEllipsisFadeInProps = {duration: 150};\n\n/**\n * OffchainVotingStatus\n *\n * A read-only component to show voting status information.\n *\n * @param {OffchainVotingStatusProps} props\n * @returns {JSX.Element}\n */\nexport function OffchainVotingStatus({\n  countdownGracePeriodStartMs,\n  proposal,\n}: OffchainVotingStatusProps): JSX.Element {\n  const {snapshotProposal} = proposal;\n\n  /**\n   * Selectors\n   */\n\n  const daoRegistryInstance = useSelector(\n    (s: StoreState) => s.contracts.DaoRegistryContract?.instance\n  );\n\n  /**\n   * State\n   */\n\n  const [didVotePass, setDidVotePass] = useState<boolean>();\n  const [gracePeriodEndMs, setGracePeriodEndMs] = useState<number>(0);\n\n  /**\n   * Variables\n   */\n\n  const votingStartSeconds = snapshotProposal?.msg.payload.start || 0;\n  const votingEndSeconds = snapshotProposal?.msg.payload.end || 0;\n  // @todo Add function to calculate member voting power by shares\n  const yesShares = 0;\n  const noShares = 0;\n  const totalShares = 10000000;\n\n  /**\n   * Our hooks\n   */\n\n  const {\n    hasOffchainVotingStarted,\n    hasOffchainVotingEnded,\n    offchainVotingStartEndInitReady,\n  } = useOffchainVotingStartEnd(proposal);\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    if (!hasOffchainVotingEnded) return;\n\n    setDidVotePass(yesShares > noShares);\n  }, [hasOffchainVotingEnded]);\n\n  // Determine grace period end\n  useEffect(() => {\n    if (!countdownGracePeriodStartMs || !daoRegistryInstance) return;\n\n    getDAOConfigEntry(\n      ContractDAOConfigKeys.offchainVotingGracePeriod,\n      daoRegistryInstance\n    )\n      .then((r) => r && setGracePeriodEndMs(Number(r) * 1000))\n      .catch(() => setGracePeriodEndMs(0));\n  }, [countdownGracePeriodStartMs, daoRegistryInstance]);\n\n  /**\n   * Functions\n   */\n\n  function renderStatus() {\n    // On loading\n    if (!offchainVotingStartEndInitReady) {\n      return (\n        <CycleEllipsis\n          intervalMs={200}\n          fadeInProps={cycleEllipsisFadeInProps}\n        />\n      );\n    }\n\n    // Do not show a label as we provide one in addition to the timer.\n    if (countdownGracePeriodStartMs) {\n      return '';\n    }\n\n    // On voting ended\n    if (typeof didVotePass === 'boolean') {\n      return didVotePass ? 'Approved' : 'Failed';\n    }\n  }\n\n  function renderTimer(\n    ProposalPeriodComponent: Parameters<\n      Parameters<typeof VotingStatus>[0]['renderTimer']\n    >[0]\n  ) {\n    // Vote countdown timer\n    if (\n      offchainVotingStartEndInitReady &&\n      hasOffchainVotingStarted &&\n      !hasOffchainVotingEnded\n    ) {\n      return (\n        <ProposalPeriodComponent\n          startPeriodMs={votingStartSeconds * 1000}\n          endPeriodMs={votingEndSeconds * 1000}\n        />\n      );\n    }\n\n    // Grace period countdown timer\n    if (countdownGracePeriodStartMs && gracePeriodEndMs) {\n      return (\n        <ProposalPeriodComponent\n          startPeriodMs={countdownGracePeriodStartMs}\n          endLabel={gracePeriodEndLabel}\n          endedLabel={gracePeriodEndedLabel}\n          endPeriodMs={countdownGracePeriodStartMs + gracePeriodEndMs}\n        />\n      );\n    }\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <VotingStatus\n      renderTimer={renderTimer}\n      renderStatus={renderStatus}\n      hasVotingEnded={hasOffchainVotingEnded}\n      noShares={noShares}\n      totalShares={totalShares}\n      yesShares={yesShares}\n    />\n  );\n}\n","import {SVGAttributes} from 'react';\n\nexport default function CheckSVG(props: SVGAttributes<HTMLOrSVGElement>) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      width=\"18\"\n      height=\"18\"\n      viewBox=\"0 0 512 512\"\n      {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z\"></path>\n    </svg>\n  );\n}\n","import CheckSVG from '../../../assets/svg/CheckSVG';\n\ntype SquareRootVotingBarProps = {\n  yesShares: number;\n  noShares: number;\n  totalShares: number;\n  votingExpired: boolean;\n  showPercentages: boolean;\n};\n\nexport function SquareRootVotingBar({\n  yesShares = 0,\n  noShares = 0,\n  totalShares,\n  votingExpired,\n  showPercentages,\n}: SquareRootVotingBarProps) {\n  /**\n   * Variables\n   */\n\n  const percentYes = ((yesShares / totalShares) * 100).toFixed(0) || '0';\n  const percentNo = ((noShares / totalShares) * 100).toFixed(0) || '0';\n\n  /**\n   * Render\n   */\n\n  return (\n    <div className=\"votingbar-container\">\n      <div className=\"votingbar\">\n        {/* YES */}\n        <div\n          className=\"votingbar__segment--yes\"\n          aria-label={`${percentYes}% yes votes`}\n          style={{\n            width: `${percentYes}%`,\n          }}\n        />\n\n        {/* NO */}\n        <div\n          className=\"votingbar__segment--no\"\n          aria-label={`${percentNo}% no votes`}\n          style={{\n            width: `${percentNo}%`,\n          }}\n        />\n      </div>\n\n      <div className=\"votingbar__percentages\">\n        {showPercentages && (\n          <>\n            {/* YES */}\n            {votingExpired && yesShares > noShares && (\n              <span className=\"yes-check\">\n                <CheckSVG aria-label=\"Vote has passed\" />\n              </span>\n            )}\n            <span className=\"yes-percent\">{percentYes}%</span>\n\n            {/* NO */}\n            <span className=\"no-percent\">{percentNo}%</span>\n            {votingExpired && yesShares <= noShares && (\n              <span className=\"no-check\">\n                <CheckSVG aria-label=\"Vote has failed\" />\n              </span>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, {ButtonHTMLAttributes} from 'react';\nimport {VoteChoices} from '@openlaw/snapshot-js-erc712';\n\nimport Loader from '../../feedback/Loader';\n\ntype VotingActionButtonsProps = {\n  /**\n   * Common <button /> props for both buttons\n   */\n  buttonProps?: ButtonHTMLAttributes<HTMLButtonElement>;\n  onClick: (choice: VoteChoices) => void;\n  /**\n   * Which vote did the current connected user submit?\n   */\n  voteChosen?: VoteChoices;\n  /**\n   * Shows a loading spinner for a voting button.\n   */\n  voteProgress?: VoteChoices;\n};\n\n/**\n * @todo Implement vote chosen\n */\nexport function VotingActionButtons(\n  props: VotingActionButtonsProps\n): JSX.Element {\n  const {buttonProps, onClick, voteChosen, voteProgress} = props;\n\n  /**\n   * Functions\n   */\n\n  const getVotedClass = (choice: VoteChoices): string =>\n    voteChosen === choice ? 'votingbutton--voted' : '';\n\n  function getARIALabel(\n    choice: VoteChoices\n  ): Partial<React.HTMLAttributes<HTMLElement>> {\n    return voteProgress === choice\n      ? {'aria-label': `Voting ${choice} \\u2026`}\n      : {};\n  }\n\n  function getVotingText(choice: VoteChoices): React.ReactNode {\n    return voteProgress === choice ? (\n      <Loader aria-label={`Voting ${choice} spinner image`} role=\"img\" />\n    ) : voteChosen === choice ? (\n      `Voted ${choice}`\n    ) : (\n      `Vote ${choice}`\n    );\n  }\n\n  function handleClick(choice: VoteChoices) {\n    return () => {\n      onClick(choice);\n    };\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <>\n      <button\n        {...buttonProps}\n        {...getARIALabel(VoteChoices.Yes)}\n        className={`proposaldetails__button ${getVotedClass(VoteChoices.Yes)}`}\n        onClick={handleClick(VoteChoices.Yes)}>\n        {getVotingText(VoteChoices.Yes)}\n      </button>\n      <button\n        {...buttonProps}\n        {...getARIALabel(VoteChoices.No)}\n        className={`proposaldetails__button ${getVotedClass(VoteChoices.No)}`}\n        onClick={handleClick(VoteChoices.No)}>\n        {getVotingText(VoteChoices.No)}\n      </button>\n    </>\n  );\n}\n","import Web3 from 'web3';\nimport {AbiItem} from 'web3-utils/types';\nimport {Dispatch} from 'redux';\n\nimport {\n  ContractAdapterNames,\n  ContractExtensionNames,\n} from '../../components/web3/types';\nimport {ContractsStateEntry, StoreState} from '../types';\nimport {DAO_REGISTRY_CONTRACT_ADDRESS} from '../../config';\nimport {getAdapterAddress} from '../../components/web3/helpers';\nimport {getExtensionAddress} from '../../components/web3/helpers/getExtensionAddress';\nimport {DaoConstants, VotingAdapterName} from '../../components/adpaters/enums';\n\ntype ContractAction =\n  | typeof CONTRACT_BANK_EXTENSION\n  | typeof CONTRACT_DAO_REGISTRY\n  | typeof CONTRACT_MANAGING\n  | typeof CONTRACT_ONBOARDING\n  | typeof CONTRACT_TRIBUTE\n  | typeof CONTRACT_VOTING\n  | typeof CONTRACT_VOTING_OP_ROLLUP;\n\nexport const CONTRACT_BANK_EXTENSION = 'CONTRACT_BANK_EXTENSION';\nexport const CONTRACT_DAO_REGISTRY = 'CONTRACT_DAO_REGISTRY';\nexport const CONTRACT_MANAGING = 'CONTRACT_MANAGING';\nexport const CONTRACT_ONBOARDING = 'CONTRACT_ONBOARDING';\nexport const CONTRACT_TRIBUTE = 'CONTRACT_TRIBUTE';\nexport const CONTRACT_VOTING = 'CONTRACT_VOTING';\nexport const CONTRACT_VOTING_OP_ROLLUP = 'CONTRACT_VOTING_OP_ROLLUP';\n\nexport function initContractDaoRegistry(web3Instance: Web3) {\n  return async function (dispatch: Dispatch<any>) {\n    try {\n      if (web3Instance) {\n        const {default: lazyDaoRegistryABI} = await import(\n          '../../truffle-contracts/DaoRegistry.json'\n        );\n\n        const daoRegistryContract: AbiItem[] = lazyDaoRegistryABI as any;\n        const contractAddress = DAO_REGISTRY_CONTRACT_ADDRESS;\n\n        if (!contractAddress) {\n          throw new Error('No DAO Registry contract address was found.');\n        }\n\n        const instance = new web3Instance.eth.Contract(\n          daoRegistryContract,\n          contractAddress\n        );\n\n        dispatch(\n          createContractAction({\n            type: CONTRACT_DAO_REGISTRY,\n            abi: daoRegistryContract,\n            contractAddress,\n            instance,\n          })\n        );\n      }\n    } catch (error) {\n      throw error;\n    }\n  };\n}\n\nexport function initContractVoting(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_VOTING,\n    adapterOrExtensionName: ContractAdapterNames.voting,\n    adapterNameForRedux: VotingAdapterName.VotingContract,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/VotingContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractVotingOpRollup(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_VOTING_OP_ROLLUP,\n    adapterOrExtensionName: ContractAdapterNames.voting,\n    adapterNameForRedux: VotingAdapterName.OffchainVotingContract,\n    contractAddress,\n    lazyImport: () =>\n      import('../../truffle-contracts/OffchainVotingContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractOnboarding(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_ONBOARDING,\n    adapterNameForRedux: DaoConstants.ONBOARDING,\n    adapterOrExtensionName: ContractAdapterNames.onboarding,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/OnboardingContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractBankExtension(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_BANK_EXTENSION,\n    adapterNameForRedux: DaoConstants.BANK,\n    adapterOrExtensionName: ContractExtensionNames.bank,\n    contractAddress,\n    isExtension: true,\n    lazyImport: () => import('../../truffle-contracts/BankExtension.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractTribute(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_TRIBUTE,\n    adapterNameForRedux: DaoConstants.TRIBUTE,\n    adapterOrExtensionName: ContractAdapterNames.tribute,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/TributeContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractManaging(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_MANAGING,\n    adapterNameForRedux: DaoConstants.MANAGING,\n    adapterOrExtensionName: ContractAdapterNames.managing,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/ManagingContract.json'),\n    web3Instance,\n  });\n}\n\n/**\n * Inits the currently registered `voting` contract.\n *\n * @note The DaoRegistry and Managing contracts must be initialised beforehand.\n */\nexport function initRegisteredVotingAdapter(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return async function (dispatch: Dispatch<any>, getState: () => StoreState) {\n    try {\n      if (web3Instance) {\n        const daoRegistryContract = getState().contracts.DaoRegistryContract;\n        const managingContract = getState().contracts.ManagingContract;\n\n        if (!daoRegistryContract) {\n          console.warn(\n            'Please init the DaoRegistry contract before the voting contract.'\n          );\n          return;\n        }\n\n        if (!managingContract) {\n          console.warn(\n            'Please init the Managing contract before the voting contract.'\n          );\n          return;\n        }\n\n        const address =\n          contractAddress ||\n          (await getAdapterAddress(\n            ContractAdapterNames.voting,\n            daoRegistryContract.instance\n          ));\n\n        const votingAdapterName = await managingContract.instance.methods\n          .getVotingAdapterName(daoRegistryContract.contractAddress)\n          .call();\n\n        /**\n         * @todo Move voting adapter enum names (see contracts: `ADAPTER_NAME`)\n         *   to an appropriate adapter config file.\n         */\n        switch (votingAdapterName) {\n          case 'VotingContract':\n            return await initContractVoting(web3Instance, address)(\n              dispatch,\n              getState\n            );\n          case 'OffchainVotingContract':\n            return await initContractVotingOpRollup(web3Instance, address)(\n              dispatch,\n              getState\n            );\n          default:\n            throw new Error('Voting contract name could not be found.');\n        }\n      }\n    } catch (error) {\n      throw error;\n    }\n  };\n}\n\nexport function createContractAction({\n  type,\n  ...payload\n}: {\n  type: ContractAction;\n} & ContractsStateEntry) {\n  return {\n    type,\n    ...payload,\n  };\n}\n\nexport function initContractThunkFactory({\n  actionType,\n  adapterNameForRedux,\n  adapterOrExtensionName,\n  contractAddress,\n  isExtension = false,\n  lazyImport,\n  web3Instance,\n}: {\n  actionType: ContractAction;\n  adapterOrExtensionName: ContractAdapterNames | ContractExtensionNames;\n  /**\n   * The name to be shown in Redux state as `adapterName`.\n   */\n  adapterNameForRedux?: ContractsStateEntry['adapterName'];\n  contractAddress?: string;\n  /**\n   * If set to `true` an Extenion address will be searched for instead of an Adapter.\n   */\n  isExtension?: boolean;\n  /**\n   * Provide a Dynamic Import wrapped in a function.\n   *\n   * e.g. `() => import('./path/to/import')`\n   */\n  lazyImport: () => any;\n  web3Instance: Web3;\n}) {\n  // Return a Redux Thunk\n  return async function (dispatch: Dispatch<any>, getState: () => StoreState) {\n    try {\n      const {default: lazyABI} = await lazyImport();\n\n      const contractABI: AbiItem[] = lazyABI as any;\n\n      const address =\n        contractAddress ||\n        (isExtension\n          ? await getExtensionAddress(\n              (adapterOrExtensionName as unknown) as ContractExtensionNames,\n              getState().contracts.DaoRegistryContract?.instance\n            )\n          : await getAdapterAddress(\n              (adapterOrExtensionName as unknown) as ContractAdapterNames,\n              getState().contracts.DaoRegistryContract?.instance\n            ));\n\n      dispatch(\n        createContractAction({\n          type: actionType,\n          abi: contractABI,\n          contractAddress: address,\n          adapterName: adapterNameForRedux,\n          instance: new web3Instance.eth.Contract(contractABI, address),\n        })\n      );\n    } catch (error) {\n      // Warn instead of throwing as we want the Dapp to fail gracefully.\n      console.warn(\n        `The contract \"${adapterOrExtensionName}\" could not be found in the DAO. Are you sure you meant to add this contract's ABI?`\n      );\n    }\n  };\n}\n","import React from 'react';\n\nimport FadeIn from './FadeIn';\n\ntype ErrorMessageWithDetailsProps = {\n  error?: Error;\n  renderText: (() => React.ReactElement) | string;\n  detailsProps?: React.HTMLAttributes<HTMLDetailsElement>;\n};\n\nexport default function ErrorMessageWithDetails(\n  props: ErrorMessageWithDetailsProps\n) {\n  const {error, renderText} = props;\n\n  // @note Some wallets will provide proper error codes. The `4001` is a \"user rejected transaction\".\n  return error && (error as any)?.code !== 4001 ? (\n    <FadeIn>\n      <div className=\"text-center\">\n        <p className=\"error-message\">\n          {typeof renderText === 'string' ? renderText : renderText()}\n        </p>\n\n        {error && (\n          <details {...props.detailsProps}>\n            <summary\n              className=\"error-message\"\n              style={{cursor: 'pointer', outline: 'none'}}>\n              <small>Details</small>\n            </summary>\n            <p className=\"error-message\">\n              <small>{error.message}</small>\n            </p>\n          </details>\n        )}\n      </div>\n    </FadeIn>\n  ) : null;\n}\n","import {\n  SnapshotDraftData,\n  SnapshotProposalData,\n  SnapshotDraftResponseData,\n  SnapshotProposalResponseData,\n  SnapshotType,\n} from '@openlaw/snapshot-js-erc712';\n\n/**\n * ENUMS\n */\n\n/**\n * Reverse mapping of DaoRegistry proposal flags.\n * The formula used to create the `flags` entry is:\n *   `prevFlags + 2**nextFlagIndex`\n *    i.e. to get the flag after `flags: 1` the formula is: `1 + 2**1 = 3`\n *\n * @note Order matters\n *\n * @see `ProposalFlag` in laoland `DaoRegistry.sol`\n * @see `getFlag` in laoland `DaoConstants.sol`\n * @see `setFlag` in laoland `DaoConstants.sol`\n */\nexport enum ProposalFlag {\n  EXISTS = 1,\n  SPONSORED = 3,\n  PROCESSED = 7,\n}\n\n// @todo Need more information about the vote challenge flow.\nexport enum ProposalFlowStatus {\n  Sponsor = 'Sponsor',\n  OffchainVoting = 'OffchainVoting',\n  OffchainVotingSubmitResult = 'OffchainVotingSubmitResult',\n  OffchainVotingGracePeriod = 'OffchainVotingGracePeriod',\n  OnchainVoting = 'OnchainVoting',\n  Process = 'Process',\n  Completed = 'Completed',\n}\n\n/**\n * TYPES\n */\n\n// @todo Change the type to be precise\nexport type SubgraphProposal = Record<string, any>;\n\n/**\n * We augment the response data to add a few helpful data pieces.\n */\nexport type SnapshotDraft = {\n  /**\n   * The ID used to reference the DAO.\n   */\n  idInDAO: string;\n  /**\n   * An ID helper to reference the Draft hash\n   */\n  idInSnapshot: string;\n} & SnapshotDraftResponseData;\n\n/**\n * We augment the response data to add a few helpful data pieces.\n */\nexport type SnapshotProposal = {\n  /**\n   * The ID used to reference the DAO.\n   */\n  idInDAO: string;\n  /**\n   * An ID helper to reference the Proposal hash\n   */\n  idInSnapshot: string;\n} & SnapshotProposalResponseData;\n\n/**\n * Common data shared between a Snapshot Drafts and Proposals.\n * Helpful when we need to display information which is accessible on both.\n */\nexport type SnapshotProposalCommon = SnapshotDraft | SnapshotProposal;\n\nexport type ProposalData = {\n  daoProposal: SubgraphProposal | undefined;\n  /**\n   * Data for either a Draft or Proposal which is shared between the two types.\n   */\n  getCommonSnapshotProposalData: () => SnapshotProposalCommon | undefined;\n  refetchProposalOrDraft: () => void;\n  snapshotDraft: SnapshotDraft | undefined;\n  snapshotProposal: SnapshotProposal | undefined;\n  snapshotType: ProposalOrDraftSnapshotType | undefined;\n};\n\n/**\n * A conditional helper type for determining which data shape to use.\n *\n * @link https://www.typescriptlang.org/docs/handbook/2/conditional-types.html\n */\nexport type ProposalOrDraftSnapshotData =\n  | SnapshotDraftResponseData\n  | SnapshotProposalResponseData;\n\nexport type ProposalOrDraftSnapshotType =\n  | SnapshotType.proposal\n  | SnapshotType.draft;\n\n/**\n * A conditional helper type for determining which data shape to use based on the `ProposalOrDraftSnapshotType`.\n *\n * @link https://www.typescriptlang.org/docs/handbook/2/conditional-types.html\n */\nexport type ProposalOrDraftSignDataFromType<\n  T extends ProposalOrDraftSnapshotType\n> = T extends SnapshotType.proposal ? SnapshotProposalData : SnapshotDraftData;\n","import {Contract, SendOptions} from 'web3-eth-contract/types';\nimport {TransactionReceipt} from 'web3-core/types';\n\n/**\n * contractSend\n *\n * Returns the resolved transaction receipt or error\n *\n * @param {string} methodName\n * @param {Record<string, any>} contractInstanceMethods An object of the methods for the Web3 contract instance.\n * @param {any[]} methodArguments An array of any arguments for the contract's method.\n * @param {Record<string, any>} txArguments\n * @param {(txHash: string) => void} onProcess Callback which runs after a txHash has been received,\n *   but before the transaction is complete.\n * @returns {Promise<TransactionReceipt>} Resolved or rejected transaction.\n */\nexport async function contractSend(\n  methodName: string,\n  contractInstanceMethods: typeof Contract.prototype.methods,\n  methodArguments: any[],\n  txArguments: SendOptions,\n  onProcess?: (txHash: string) => void\n): Promise<TransactionReceipt> {\n  // Promisify so we can both `reject()` inside .on('error') and from transactions.\n  return new Promise<TransactionReceipt>(async (resolve, reject) => {\n    try {\n      const method = contractInstanceMethods[methodName];\n\n      // estimate gas limit for transaction\n      const gas = await method(...methodArguments).estimateGas({\n        from: txArguments.from,\n        value: txArguments.value,\n      });\n\n      await method(...methodArguments)\n        .send({\n          ...txArguments,\n          gas,\n        })\n        .on('transactionHash', function (txHash: string) {\n          // Call onProcess with transaction hash\n          onProcess && onProcess(txHash);\n        })\n        .on('receipt', function (receipt: TransactionReceipt) {\n          // resolve on transaction receipt; contains event returnValues\n          resolve(receipt);\n        })\n        .on('error', (error: Error) => {\n          // reject on transaction error\n          reject(error);\n        });\n    } catch (error) {\n      // reject on estimate gas or transaction error\n      reject(error);\n    }\n  });\n}\n","import Web3 from 'web3';\n\nimport {ContractsStateEntry} from '../../../store/types';\nimport {ContractAdapterNames} from '../types';\n\nexport async function getAdapterAddress(\n  adapterName: ContractAdapterNames,\n  daoContractInstance: ContractsStateEntry['instance'] | undefined\n): Promise<string> {\n  try {\n    if (!daoContractInstance) {\n      throw new Error('No DaoRegistry contract instance provided.');\n    }\n\n    return await daoContractInstance.methods\n      .getAdapterAddress(Web3.utils.sha3(adapterName))\n      .call();\n  } catch (error) {\n    throw error;\n  }\n}\n","import {ContractAdapterNames} from '../types';\nimport {ContractsStateEntry, StoreState} from '../../../store/types';\n\nfunction getContractAddressOrThrow(\n  contract: ContractsStateEntry | null\n): string {\n  try {\n    const address = contract?.contractAddress;\n\n    if (!address) {\n      throw new Error(`Contract address was not found in the store.`);\n    }\n\n    return address;\n  } catch (error) {\n    throw error;\n  }\n}\n\n/**\n * getAdapterAddressFromContracts\n *\n * Gets an adapter's address by its name (`type ContractAdapterNames`) from the Redux contracts state slice.\n *\n * @param {string} name\n * @param {StoreState['contracts']} contracts\n */\nexport function getAdapterAddressFromContracts(\n  name: ContractAdapterNames,\n  contracts: StoreState['contracts']\n): string {\n  try {\n    switch (name) {\n      case ContractAdapterNames.configuration:\n        return '';\n      case ContractAdapterNames.financing:\n        return '';\n      case ContractAdapterNames.guildkick:\n        return '';\n      case ContractAdapterNames.managing:\n        return getContractAddressOrThrow(contracts.ManagingContract);\n      case ContractAdapterNames.onboarding:\n        return getContractAddressOrThrow(contracts.OnboardingContract);\n      case ContractAdapterNames.ragequit:\n        return '';\n      case ContractAdapterNames.tribute:\n        return getContractAddressOrThrow(contracts.TributeContract);\n      case ContractAdapterNames.voting:\n        return getContractAddressOrThrow(contracts.VotingContract);\n      default:\n        throw new Error(`Contract address was not found in the store.`);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n","import {normalizeString} from '../../../util/helpers';\nimport {ContractsStateEntry, StoreState} from '../../../store/types';\n\n/**\n * getContractByAddress\n *\n * Gets a Contract from the Redux contracts state slice by its `contractAddress`, or throws an Error.\n * A use case for this would be when using ERC712 signing data `actionId` to get\n * the appropriate Contract for submitting on-chain transactions.\n *\n * @param {string} address\n * @param {StoreState['contracts']} contracts\n */\nexport function getContractByAddress(\n  address: string,\n  contracts: StoreState['contracts']\n): ContractsStateEntry {\n  try {\n    const contract = Object.values(contracts).find(\n      (c) =>\n        c?.contractAddress &&\n        normalizeString(c.contractAddress) === normalizeString(address)\n    );\n\n    if (!contract) {\n      throw new Error(`Contract was not found in the store.`);\n    }\n\n    return contract;\n  } catch (error) {\n    throw error;\n  }\n}\n","import Web3 from 'web3';\n\nimport {ContractsStateEntry} from '../../../store/types';\nimport {ContractDAOConfigKeys} from '../types';\n\nexport async function getDAOConfigEntry(\n  configKey: ContractDAOConfigKeys,\n  daoContractInstance: ContractsStateEntry['instance'] | undefined\n): Promise<string> {\n  try {\n    if (!daoContractInstance) {\n      throw new Error('No DaoRegistry contract instance provided.');\n    }\n\n    return await daoContractInstance.methods\n      .getConfiguration(Web3.utils.sha3(configKey))\n      .call();\n  } catch (error) {\n    throw error;\n  }\n}\n","/**\n * WEB3 TYPES\n */\n\n// ...\n\n/**\n * WEB3 ENUMS\n */\n\n/**\n * Should match laoland constants\n *\n * @todo Add other extensions as needs arise\n */\nexport enum ContractAdapterNames {\n  configuration = 'configuration',\n  financing = 'financing',\n  guildkick = 'guildkick',\n  managing = 'managing',\n  onboarding = 'onboarding',\n  ragequit = 'ragequit',\n  tribute = 'tribute',\n  voting = 'voting',\n}\n\n/**\n * Should match laoland constants\n *\n * @todo Add other extensions as needs arise\n */\nexport enum ContractExtensionNames {\n  bank = 'bank',\n}\n\n/**\n * Should match laoland constants\n *\n * @todo Add other extensions as needs arise\n */\nexport enum ContractDAOConfigKeys {\n  offchainVotingGracePeriod = 'offchainvoting.gracePeriod',\n  offchainVotingStakingAmount = 'offchainvoting.stakingAmount',\n  offchainVotingVotingPeriod = 'offchainvoting.votingPeriod',\n  onboardingChunkSize = 'onboarding.chunkSize',\n  onboardingMaximumChunks = 'onboarding.maximumChunks',\n  onboardingSharesPerChunk = 'onboarding.sharesPerChunk',\n  onboardingTokenAddr = 'onboarding.tokenAddr',\n  votingGracePeriod = 'voting.gracePeriod',\n  votingStakingAmount = 'voting.stakingAmount',\n  votingVotingPeriod = 'voting.votingPeriod',\n}\n\nexport enum VoteChoices {\n  Yes = 'Yes',\n  No = 'No',\n}\n\nexport enum Web3TxStatus {\n  STANDBY = 'STANDBY',\n  AWAITING_CONFIRM = 'AWAITING_CONFIRM',\n  PENDING = 'PENDING',\n  FULFILLED = 'FULFILLED',\n  REJECTED = 'REJECTED',\n}\n","import {useEffect, useRef, useState} from 'react';\nimport {SnapshotType} from '@openlaw/snapshot-js-erc712';\n\nimport {ProposalData} from '../types';\nimport {AsyncStatus} from '../../../util/types';\n\ntype UseOffchainVotingStartEndReturn = {\n  hasOffchainVotingEnded: boolean;\n  hasOffchainVotingStarted: boolean;\n  /**\n   * Informs if the initial async checks have run.\n   * This helps to tame UI false-positives that can arise when\n   * using only booleans to check status.\n   */\n  offchainVotingStartEndInitReady: boolean;\n};\n\ntype StartEndStatus = {start: AsyncStatus; end: AsyncStatus};\n\nexport function useOffchainVotingStartEnd(\n  proposal: ProposalData\n): UseOffchainVotingStartEndReturn {\n  const {snapshotProposal} = proposal;\n\n  /**\n   * Refs\n   */\n\n  const votingStartEndStatusRef = useRef<StartEndStatus>({\n    start: AsyncStatus.STANDBY,\n    end: AsyncStatus.STANDBY,\n  });\n\n  /**\n   * State\n   */\n\n  const [\n    hasOffchainVotingStarted,\n    setHasOffchainVotingStarted,\n  ] = useState<boolean>(false);\n  const [hasOffchainVotingEnded, setHasOffchainVotingEnded] = useState<boolean>(\n    false\n  );\n  const [\n    offchainVotingStartEndInitReady,\n    setOffchainVotingStartEndInitReady,\n  ] = useState<boolean>(isInitReady(votingStartEndStatusRef.current));\n\n  /**\n   * Effects\n   */\n\n  // Actively check if voting has started\n  useEffect(() => {\n    if (\n      snapshotProposal?.msg.type !== SnapshotType.proposal ||\n      hasOffchainVotingStarted\n    ) {\n      setOffchainVotingStartEndInitReady(() => {\n        votingStartEndStatusRef.current.start = AsyncStatus.FULFILLED;\n        return isInitReady(votingStartEndStatusRef.current);\n      });\n\n      return;\n    }\n\n    setOffchainVotingStartEndInitReady(() => {\n      votingStartEndStatusRef.current.start = AsyncStatus.PENDING;\n      return isInitReady(votingStartEndStatusRef.current);\n    });\n\n    // Check if voting has started every 1 second\n    const intervalID = setInterval(() => {\n      // Async process ran\n      setOffchainVotingStartEndInitReady(() => {\n        votingStartEndStatusRef.current.start = AsyncStatus.FULFILLED;\n        return isInitReady(votingStartEndStatusRef.current);\n      });\n\n      const hasStartedCheck =\n        Math.floor(Date.now() / 1000) > snapshotProposal.msg.payload.start;\n\n      if (!hasStartedCheck) return;\n\n      setHasOffchainVotingStarted(hasStartedCheck);\n    }, 1000);\n\n    return () => {\n      clearInterval(intervalID);\n    };\n  }, [\n    hasOffchainVotingStarted,\n    snapshotProposal?.msg.payload.start,\n    snapshotProposal?.msg.type,\n  ]);\n\n  // Actively check if voting has ended\n  useEffect(() => {\n    if (\n      snapshotProposal?.msg.type !== SnapshotType.proposal ||\n      hasOffchainVotingEnded\n    ) {\n      setOffchainVotingStartEndInitReady(() => {\n        votingStartEndStatusRef.current.end = AsyncStatus.FULFILLED;\n        return isInitReady(votingStartEndStatusRef.current);\n      });\n\n      return;\n    }\n\n    setOffchainVotingStartEndInitReady(() => {\n      votingStartEndStatusRef.current.end = AsyncStatus.PENDING;\n      return isInitReady(votingStartEndStatusRef.current);\n    });\n\n    // Check if voting has ended every 1 second\n    const intervalID = setInterval(() => {\n      // Async process ran\n      setOffchainVotingStartEndInitReady(() => {\n        votingStartEndStatusRef.current.end = AsyncStatus.FULFILLED;\n        return isInitReady(votingStartEndStatusRef.current);\n      });\n\n      const hasEndedCheck =\n        Math.ceil(Date.now() / 1000) > snapshotProposal.msg.payload.end;\n\n      if (!hasEndedCheck) return;\n\n      setHasOffchainVotingEnded(hasEndedCheck);\n    }, 1000);\n\n    return () => {\n      clearInterval(intervalID);\n    };\n  }, [\n    hasOffchainVotingEnded,\n    snapshotProposal?.msg.payload.end,\n    snapshotProposal?.msg.type,\n  ]);\n\n  /**\n   * Functions\n   */\n\n  function isInitReady(offchainVotingStartEndInitReady: StartEndStatus) {\n    return Object.values(offchainVotingStartEndInitReady).every(\n      (s) => s === AsyncStatus.FULFILLED\n    );\n  }\n\n  return {\n    hasOffchainVotingStarted,\n    hasOffchainVotingEnded,\n    offchainVotingStartEndInitReady,\n  };\n}\n","import {useCallback, useEffect, useState} from 'react';\nimport {\n  SnapshotDraftResponse,\n  SnapshotProposalResponse,\n  SnapshotType,\n} from '@openlaw/snapshot-js-erc712';\n\nimport {AsyncStatus} from '../../../util/types';\nimport {SNAPSHOT_HUB_API_URL, SPACE} from '../../../config';\nimport {\n  ProposalData,\n  ProposalOrDraftSnapshotType,\n  SnapshotDraft,\n  SnapshotProposal,\n  SnapshotProposalCommon,\n  SubgraphProposal,\n} from '../types';\nimport {useAbortController, useCounter} from '../../../hooks';\n\ntype UseProposalReturn = {\n  proposalData: ProposalData | undefined;\n  proposalError: Error | undefined;\n  proposalNotFound: boolean;\n  proposalStatus: AsyncStatus;\n};\n\nconst ERROR_PROPOSAL: string =\n  'Something went wrong while getting the proposal.';\nconst ERROR_PROPOSAL_NOT_FOUND: string = 'Proposal was not found.';\n\n/**\n * useProposalOrDraft\n *\n * Ahook which fetches a snapshot-hub `proposal` or `draft` type by an ID string.\n *\n * If no `type` argument is provided it will search first for a\n * `proposal`, then if not found, search for a `draft`.\n *\n * @todo Fetch subgraph proposal on mount before a draft or proposal has been fetched.\n *\n * @param {string} id A draft's or a proposal's ID to search for.\n * @param {SnapshotType?} type An optional snapshot-hub `type` to search by.\n * @returns {UseProposalReturn}\n */\nexport function useProposalOrDraft(\n  id: string,\n  type?: ProposalOrDraftSnapshotType\n): UseProposalReturn {\n  /**\n   * State\n   */\n\n  /**\n   * @todo Get subgraph data using useLazyQuery\n   * @link https://www.apollographql.com/docs/react/data/queries/#executing-queries-manually\n   */\n  const [daoProposal /* setDAOProposal */] = useState<SubgraphProposal>();\n  const [snapshotDraft, setSnapshotDraft] = useState<SnapshotDraft>();\n  const [snapshotProposal, setSnapshotProposal] = useState<SnapshotProposal>();\n  const [proposalNotFound, setProposalNotFound] = useState<boolean>(false);\n  const [proposalError, setProposalError] = useState<Error>();\n  const [proposalStatus, setProposalStatus] = useState<AsyncStatus>(\n    AsyncStatus.STANDBY\n  );\n\n  /**\n   * Our hooks\n   */\n\n  const {abortController, isMountedRef} = useAbortController();\n  const [refetchCount, updateRefetchCount] = useCounter();\n\n  /**\n   * Cached callbacks\n   */\n\n  const handleGetDraftCached = useCallback(handleGetDraft, [\n    abortController?.signal,\n    id,\n    isMountedRef,\n    refetchCount,\n  ]);\n  const handleGetProposalCached = useCallback(handleGetProposal, [\n    abortController?.signal,\n    id,\n    isMountedRef,\n    refetchCount,\n    type,\n  ]);\n  const handleGetProposalOrDraftCached = useCallback(handleGetProposalOrDraft, [\n    handleGetDraftCached,\n    handleGetProposalCached,\n  ]);\n\n  /**\n   * Variables\n   */\n\n  const snapshotType: ProposalOrDraftSnapshotType | undefined = snapshotProposal\n    ? SnapshotType.proposal\n    : snapshotDraft\n    ? SnapshotType.draft\n    : undefined;\n\n  /**\n   * We need to at least have Snapshot data to provide the proposal,\n   * otherwise we will have nothing to show the user.\n   */\n  const proposalData: UseProposalReturn['proposalData'] =\n    snapshotDraft || snapshotProposal\n      ? {\n          daoProposal,\n          getCommonSnapshotProposalData,\n          refetchProposalOrDraft,\n          snapshotDraft,\n          snapshotProposal,\n          snapshotType,\n        }\n      : undefined;\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    if (!abortController?.signal) return;\n\n    switch (type) {\n      case SnapshotType.draft:\n        handleGetDraftCached();\n        break;\n      case SnapshotType.proposal:\n        handleGetProposalCached();\n        break;\n      default:\n        handleGetProposalOrDraftCached();\n        break;\n    }\n  }, [\n    abortController?.signal,\n    handleGetDraftCached,\n    handleGetProposalCached,\n    handleGetProposalOrDraftCached,\n    type,\n  ]);\n\n  /**\n   * Functions\n   */\n\n  async function handleGetDraft(): Promise<SnapshotDraft | undefined> {\n    try {\n      // Do not trigger pending requests (UI will show loader) for refetches (meant to be silent).\n      if (refetchCount === 0) setProposalStatus(AsyncStatus.PENDING);\n\n      const response = await fetch(\n        `${SNAPSHOT_HUB_API_URL}/api/${SPACE}/draft/${id}`,\n        {signal: abortController?.signal}\n      );\n\n      if (!response.ok) {\n        throw new Error(ERROR_PROPOSAL);\n      }\n\n      const responseJSON: SnapshotDraftResponse = await response.json();\n\n      if (!isMountedRef.current) return;\n\n      // @note API does not provide a 404\n      if (!responseJSON || !Object.keys(responseJSON).length) {\n        setProposalNotFound(true);\n\n        throw new Error(ERROR_PROPOSAL_NOT_FOUND);\n      }\n\n      const idKey = Object.keys(responseJSON)[0];\n      // Get the `SnapshotDraftResponseData` by the address key of the single result.\n      const draft: SnapshotDraft = {\n        idInDAO: idKey,\n        idInSnapshot: idKey,\n        ...responseJSON[idKey],\n      };\n\n      setProposalStatus(AsyncStatus.FULFILLED);\n      setSnapshotDraft(draft);\n\n      return draft;\n    } catch (error) {\n      setProposalStatus(AsyncStatus.REJECTED);\n      setProposalError(error);\n    }\n  }\n\n  async function handleGetProposal(): Promise<SnapshotProposal | undefined> {\n    try {\n      // Do not trigger pending requests (UI will show loader) for refetches (meant to be silent).\n      if (refetchCount === 0) setProposalStatus(AsyncStatus.PENDING);\n\n      /**\n       * @note `searchUniqueDraftId` includes the draft id in the search for the proposal\n       *   as a Moloch proposal's ID hash could be the Snapshot Draft's ID.\n       */\n      const response = await fetch(\n        `${SNAPSHOT_HUB_API_URL}/api/${SPACE}/proposal/${id}?searchUniqueDraftId=true&includeVotes=true`,\n        {signal: abortController?.signal}\n      );\n\n      if (!response.ok) {\n        /**\n         * If `type` is set then we know we can determine `handleGetDraft`\n         * will not be called after in `handleGetProposalOrDraft`.\n         */\n        if (type === SnapshotType.proposal) {\n          throw new Error(ERROR_PROPOSAL);\n        }\n\n        return;\n      }\n\n      const responseJSON: SnapshotProposalResponse = await response.json();\n\n      if (!isMountedRef.current) return;\n\n      // @note API does not provide a 404\n      if (!responseJSON || !Object.keys(responseJSON).length) {\n        /**\n         * If `type` is set then we know we can determine `handleGetDraft`\n         * will not be called after in `handleGetProposalOrDraft`.\n         */\n        if (type === SnapshotType.proposal) {\n          setProposalNotFound(true);\n          throw new Error(ERROR_PROPOSAL_NOT_FOUND);\n        }\n\n        return;\n      }\n\n      const idKey = Object.keys(responseJSON)[0];\n      // Determine ID submitted to DAO, i.e. if there's a Draft ID hash, we should use that.\n      const proposalId: string =\n        responseJSON[idKey]?.data.erc712DraftHash || idKey;\n      // Get the `SnapshotProposalResponseData` by the address key of the single result.\n      const proposal: SnapshotProposal = {\n        idInDAO: proposalId,\n        idInSnapshot: idKey,\n        ...responseJSON[idKey],\n      };\n\n      setProposalStatus(AsyncStatus.FULFILLED);\n      setSnapshotProposal(proposal);\n\n      return proposal;\n    } catch (error) {\n      setProposalStatus(AsyncStatus.REJECTED);\n      setProposalError(error);\n    }\n  }\n\n  /**\n   * Searches all possible combinations to return a proposal or a draft:\n   *\n   * 1. Search for a proposal (including by using the `id` as the Draft's ID hash via `searchUniqueDraftId`)\n   * 2. Search for a draft, if nothing is returned for a proposal.\n   */\n  async function handleGetProposalOrDraft() {\n    // 1. Attempt to search for a proposal.\n    const proposal = await handleGetProposalCached();\n\n    if (!proposal) {\n      // 2. If not found, attempt a search for a draft.\n      const draft = await handleGetDraftCached();\n\n      setSnapshotDraft(draft);\n\n      return;\n    }\n\n    setSnapshotProposal(proposal);\n  }\n\n  /**\n   * getCommonSnapshotProposalData\n   *\n   * @returns `SnapshotProposalCommon | undefined` Data for either a Draft or Proposal which is shared between the two types.\n   */\n  function getCommonSnapshotProposalData(): SnapshotProposalCommon | undefined {\n    switch (snapshotType) {\n      case SnapshotType.draft:\n        return snapshotDraft;\n      case SnapshotType.proposal:\n        return snapshotProposal;\n      default:\n        return undefined;\n    }\n  }\n\n  function refetchProposalOrDraft(): void {\n    updateRefetchCount({type: 'increment'});\n  }\n\n  return {\n    proposalData,\n    proposalError,\n    proposalNotFound,\n    proposalStatus,\n  };\n}\n","/**\n * @see `IVoting.sol` in laoland\n */\nexport enum VotingState {\n  NOT_STARTED,\n  TIE,\n  PASS,\n  NOT_PASS,\n  IN_PROGRESS,\n  GRACE_PERIOD,\n}\n","import {useCallback, useEffect, useRef, useState} from 'react';\nimport {Contract} from 'web3-eth-contract/types';\n\ntype UseContractPollOptions = {\n  initialCallBeforeWait?: boolean;\n  pollInterval?: number;\n};\n\ntype UseContractPollReturn<T> = {\n  pollContract: (data: PollContractArgs) => void;\n  pollContractData: T | undefined;\n  pollContractError: Error | undefined;\n  stopPollingContract: () => void;\n};\n\ntype PollContractArgs = {\n  methodName: string;\n  contractInstanceMethods: typeof Contract.prototype.methods;\n  methodArguments: any[];\n};\n\nexport function useContractPoll<T>(\n  options?: UseContractPollOptions\n): UseContractPollReturn<T> {\n  const {\n    initialCallBeforeWait = true,\n    pollInterval = 15000 /* 15 sec default */,\n  } = options || {};\n\n  /**\n   * State\n   */\n\n  const [isPolling, setIsPolling] = useState<boolean>(false);\n  const [pollContractData, setPollContractData] = useState<T>();\n  const [pollContractError, setPollContractError] = useState<Error>();\n  const [stopPollingRequested, setStopPollingRequested] = useState<boolean>(\n    false\n  );\n\n  /**\n   * Cached callbacks\n   */\n\n  const callContractCached = useCallback(callContract, []);\n  const pollContractCached = useCallback(pollContract, [\n    callContractCached,\n    initialCallBeforeWait,\n    pollInterval,\n  ]);\n  const stopPollingContractCached = useCallback(stopPollingContract, []);\n\n  /**\n   * Refs\n   */\n\n  const intervalIdRef = useRef<NodeJS.Timeout>();\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    // Clean up on unmount\n    return () => {\n      intervalIdRef.current && clearInterval(intervalIdRef.current);\n    };\n  }, []);\n\n  /**\n   * Check if stop polling was requested\n   * (`stopPollingContract` called but possibly before an interval could be set)\n   */\n  useEffect(() => {\n    if (intervalIdRef.current && isPolling && stopPollingRequested) {\n      clearInterval(intervalIdRef.current);\n      setStopPollingRequested(false);\n      setIsPolling(false);\n    }\n  }, [isPolling, stopPollingRequested]);\n\n  /**\n   * Functions\n   */\n\n  async function callContract({\n    methodArguments,\n    methodName,\n    contractInstanceMethods,\n  }: PollContractArgs): Promise<T> {\n    try {\n      const method = contractInstanceMethods[methodName];\n\n      return await method(...methodArguments).call();\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  function pollContract(data: PollContractArgs): void {\n    try {\n      intervalIdRef.current && clearInterval(intervalIdRef.current);\n\n      const intervalFunction = async () => {\n        const responseData = await callContractCached(data);\n        setPollContractData(responseData);\n      };\n\n      setIsPolling(true);\n\n      initialCallBeforeWait && intervalFunction();\n\n      const intervalIdToSet = setInterval(intervalFunction, pollInterval);\n\n      intervalIdRef.current = intervalIdToSet;\n    } catch (error) {\n      setPollContractError(error);\n    }\n  }\n\n  function stopPollingContract() {\n    if (intervalIdRef.current) {\n      clearInterval(intervalIdRef.current);\n      setIsPolling(false);\n\n      return;\n    }\n\n    // Request stop\n    setStopPollingRequested(true);\n  }\n\n  return {\n    pollContract: pollContractCached,\n    pollContractData,\n    pollContractError,\n    stopPollingContract: stopPollingContractCached,\n  };\n}\n","import {useSelector} from 'react-redux';\nimport {useEffect} from 'react';\n\nimport {ProposalFlowStatus, ProposalData, ProposalFlag} from '../types';\nimport {StoreState} from '../../../store/types';\nimport {useContractPoll} from '../../web3/hooks/useContractPoll';\nimport {useOffchainVotingStartEnd} from '.';\nimport {VotingState} from '../voting/types';\n\n// @todo Stop polling votes once result submitted\n// @todo Stop polling proposal once processed\n// @todo Stop polling vote result once result submitted\n// @todo Be able to fall back to on-chain polling this if subgraph is not available\n\ntype UseProposalWithOffchainVoteStatusReturn = {\n  status: ProposalFlowStatus | undefined;\n  daoProposal: {adapterAddress: string; flags: number} | undefined;\n  daoProposalVotes:\n    | {\n        fallbackVotesCount: string;\n        gracePeriodStartingTime: string;\n        index: string;\n        isChallenged: boolean;\n        nbNo: string;\n        nbVoters: string;\n        nbYes: string;\n        proposalHash: string;\n        reporter: string;\n        resultRoot: string;\n        snapshot: string;\n        startingTime: string;\n      }\n    | undefined;\n  /**\n   * An enum index (string) of the DAO proposal's `VotingState`\n   */\n  daoProposalVoteResult: string | undefined;\n  transitionMessage: string | undefined;\n};\n\nexport function useProposalWithOffchainVoteStatus(\n  proposal: ProposalData\n): UseProposalWithOffchainVoteStatusReturn {\n  const {snapshotDraft, snapshotProposal} = proposal;\n  const proposalId = snapshotDraft?.idInDAO || snapshotProposal?.idInDAO;\n\n  /**\n   * Selectors\n   */\n\n  const daoRegistryAddress = useSelector(\n    (s: StoreState) => s.contracts.DaoRegistryContract?.contractAddress\n  );\n  const daoRegistryMethods = useSelector(\n    (s: StoreState) => s.contracts.DaoRegistryContract?.instance.methods\n  );\n  const offchainVotingMethods = useSelector(\n    (s: StoreState) => s.contracts.VotingContract?.instance.methods\n  );\n\n  /**\n   * Our hooks\n   */\n\n  const {\n    hasOffchainVotingStarted,\n    hasOffchainVotingEnded,\n    offchainVotingStartEndInitReady,\n  } = useOffchainVotingStartEnd(proposal);\n\n  const {\n    pollContract: pollProposal,\n    pollContractData: daoProposal,\n    stopPollingContract: stopPollProposal,\n  } = useContractPoll<UseProposalWithOffchainVoteStatusReturn['daoProposal']>({\n    pollInterval: 5000,\n  });\n\n  const {\n    pollContract: pollProposalVoteResult,\n    pollContractData: daoProposalVoteResult,\n    stopPollingContract: stopPollProposalVoteResult,\n  } = useContractPoll<\n    UseProposalWithOffchainVoteStatusReturn['daoProposalVoteResult']\n  >({\n    pollInterval: 5000,\n  });\n\n  const {\n    pollContract: pollProposalVotes,\n    pollContractData: daoProposalVotes,\n    stopPollingContract: stopPollProposalVotes,\n  } = useContractPoll<\n    UseProposalWithOffchainVoteStatusReturn['daoProposalVotes']\n  >({\n    pollInterval: 5000,\n  });\n\n  /**\n   * Variables\n   */\n\n  const atExistsInDAO = daoProposal\n    ? ProposalFlag[daoProposal.flags] === ProposalFlag[ProposalFlag.EXISTS]\n    : false;\n  const atSponsoredInDAO = daoProposal\n    ? ProposalFlag[daoProposal.flags] === ProposalFlag[ProposalFlag.SPONSORED]\n    : false;\n  const atProcessedInDAO = daoProposal\n    ? ProposalFlag[daoProposal.flags] === ProposalFlag[ProposalFlag.PROCESSED]\n    : false;\n\n  /**\n   * Check if vote result was submitted.\n   * We can do this by checking if `reporter` and `resultRoot` has been set.\n   *\n   * @see `submitVoteResult` in laoland off-chain voting adapters\n   */\n  const offchainResultSubmitted =\n    daoProposalVotes &&\n    daoProposalVotes.reporter &&\n    !daoProposalVotes.reporter.startsWith('0x00000000000') &&\n    daoProposalVotes.resultRoot &&\n    !daoProposalVotes.resultRoot.startsWith('0x00000000000');\n\n  const isInVotingGracePeriod =\n    daoProposalVoteResult &&\n    VotingState[daoProposalVoteResult] ===\n      VotingState[VotingState.GRACE_PERIOD];\n\n  useEffect(() => {\n    if (!daoRegistryMethods) return;\n\n    pollProposal({\n      methodName: 'proposals',\n      methodArguments: [proposalId],\n      contractInstanceMethods: daoRegistryMethods,\n    });\n  }, [daoRegistryMethods, pollProposal, proposalId]);\n\n  useEffect(() => {\n    if (!offchainVotingMethods || !daoRegistryAddress) return;\n\n    pollProposalVoteResult({\n      methodName: 'voteResult',\n      methodArguments: [daoRegistryAddress, proposalId],\n      contractInstanceMethods: offchainVotingMethods,\n    });\n  }, [\n    daoRegistryAddress,\n    offchainVotingMethods,\n    pollProposalVoteResult,\n    proposalId,\n  ]);\n\n  useEffect(() => {\n    if (!offchainVotingMethods || !daoRegistryAddress) return;\n\n    pollProposalVotes({\n      methodName: 'votes',\n      methodArguments: [daoRegistryAddress, proposalId],\n      contractInstanceMethods: offchainVotingMethods,\n    });\n  }, [\n    daoRegistryAddress,\n    offchainVotingMethods,\n    pollProposalVotes,\n    proposalId,\n  ]);\n\n  // Stop polling if processed\n  useEffect(() => {\n    if (atProcessedInDAO) {\n      stopPollProposal();\n      stopPollProposalVoteResult();\n      stopPollProposalVotes();\n    }\n  }, [\n    atProcessedInDAO,\n    stopPollProposal,\n    stopPollProposalVoteResult,\n    stopPollProposalVotes,\n  ]);\n\n  /**\n   * Functions\n   */\n\n  function getReturnData(\n    status: ProposalFlowStatus | undefined,\n    transitionMessage?: string\n  ): UseProposalWithOffchainVoteStatusReturn {\n    return {\n      status,\n      transitionMessage,\n      daoProposal,\n      daoProposalVoteResult,\n      daoProposalVotes,\n    };\n  }\n\n  // Status: Sponsor\n  if (\n    offchainVotingStartEndInitReady &&\n    !hasOffchainVotingStarted &&\n    atExistsInDAO\n  ) {\n    return getReturnData(ProposalFlowStatus.Sponsor);\n  }\n\n  // Status: Off-chain Voting\n  if (\n    offchainVotingStartEndInitReady &&\n    hasOffchainVotingStarted &&\n    !hasOffchainVotingEnded &&\n    atSponsoredInDAO\n  ) {\n    return getReturnData(ProposalFlowStatus.OffchainVoting);\n  }\n\n  // Status: Ready to Submit Vote Result\n  if (\n    offchainVotingStartEndInitReady &&\n    hasOffchainVotingEnded &&\n    atSponsoredInDAO &&\n    !offchainResultSubmitted\n  ) {\n    return getReturnData(ProposalFlowStatus.OffchainVotingSubmitResult);\n  }\n\n  // Status: Grace period\n  if (\n    offchainVotingStartEndInitReady &&\n    hasOffchainVotingEnded &&\n    atSponsoredInDAO &&\n    offchainResultSubmitted &&\n    isInVotingGracePeriod\n  ) {\n    return getReturnData(ProposalFlowStatus.OffchainVotingGracePeriod);\n  }\n\n  // Status: Process\n  if (\n    atSponsoredInDAO &&\n    offchainVotingStartEndInitReady &&\n    hasOffchainVotingEnded &&\n    offchainResultSubmitted &&\n    !isInVotingGracePeriod\n  ) {\n    return getReturnData(ProposalFlowStatus.Process);\n  }\n\n  // Status: Processed (completed)\n  if (atProcessedInDAO) {\n    return getReturnData(ProposalFlowStatus.Completed);\n  }\n\n  // Fallthrough\n  return {\n    status: undefined,\n    transitionMessage: undefined,\n    daoProposal,\n    daoProposalVoteResult,\n    daoProposalVotes,\n  };\n}\n","import {useState} from 'react';\nimport {useSelector} from 'react-redux';\nimport {\n  buildVoteMessage,\n  getDomainDefinition,\n  getSpace,\n  prepareVoteMessage,\n  signMessage,\n  SnapshotMessageVote,\n  SnapshotSubmitBaseReturn,\n  SnapshotType,\n  SnapshotVoteData,\n  SnapshotVoteProposal,\n  submitMessage,\n  VoteChoicesIndex,\n} from '@openlaw/snapshot-js-erc712';\n\nimport {ContractAdapterNames, Web3TxStatus} from '../../web3/types';\nimport {DEFAULT_CHAIN, SNAPSHOT_HUB_API_URL, SPACE} from '../../../config';\nimport {getAdapterAddressFromContracts} from '../../web3/helpers';\nimport {PRIMARY_TYPE_ERC712} from '../../web3/config';\nimport {StoreState} from '../../../store/types';\nimport {useWeb3Modal} from '../../web3/hooks/useWeb3Modal';\n\ntype SignAndSendVoteDataParam = {\n  choice: SnapshotMessageVote['choice'];\n  /**\n   * The address of a delegate voter for a member.\n   */\n  delegateAddress?: SnapshotMessageVote['metadata']['memberAddress'];\n  metadata?: Record<string, any>;\n};\n\ntype UseSignAndSendVoteReturn = {\n  signAndSendVote: (data: {\n    partialVoteData: SignAndSendVoteDataParam;\n    adapterName: ContractAdapterNames;\n    proposalIdInDAO: SnapshotVoteData['payload']['proposalHash'];\n    proposalIdInSnapshot: string;\n  }) => Promise<SignAndSendVoteReturn>;\n  voteData: SignAndSendVoteReturn | undefined;\n  voteDataError: Error | undefined;\n  voteDataStatus: Web3TxStatus;\n};\n\ntype SignAndSendVoteReturn = {\n  data: SnapshotVoteData;\n  signature: string;\n  uniqueId: SnapshotSubmitBaseReturn['uniqueId'];\n};\n\n/**\n * useSignAndSendVote\n *\n * React hook which prepares proposal data for submission\n * to Snapshot and Moloch v3 and signs it (ERC712)\n *\n * @returns {Promise<BuildAndSignProposalDataReturn>} An object with the proposal data and the ERC712 signature string.\n */\nexport function useSignAndSendVote(): UseSignAndSendVoteReturn {\n  /**\n   * Selectors\n   */\n\n  const daoRegistryAddress = useSelector(\n    (state: StoreState) => state.contracts.DaoRegistryContract?.contractAddress\n  );\n  const contracts = useSelector((state: StoreState) => state.contracts);\n\n  /**\n   * Our hooks\n   */\n\n  const {account, provider, web3Instance} = useWeb3Modal();\n\n  /**\n   * State\n   */\n\n  const [voteData, setVoteData] = useState<SignAndSendVoteReturn>();\n  const [voteDataError, setVoteDataError] = useState<Error>();\n  const [voteDataStatus, setVoteDataStatus] = useState<Web3TxStatus>(\n    Web3TxStatus.STANDBY\n  );\n\n  /**\n   * Functions\n   */\n\n  /**\n   * signAndSendVote\n   *\n   * Builds the vote data for submission to Snapshot and signs it (ERC712).\n   *\n   * @param {SignAndSendVoteDataParam}\n   * @param {adapterName} ContractAdapterNames - An adapter's contract address this data is related to.\n   *   @note Does not accept voting adapter names.\n   * @param {SnapshotVoteData['payload']['proposalHash']} proposalHash - The unique hash of the proposal from snapshot-hub.\n   * @returns {Promise<BuildAndSignProposalDataReturn>} An object with the vote data and the ERC712 signature string.\n   */\n  async function signAndSendVote({\n    partialVoteData,\n    adapterName,\n    proposalIdInDAO,\n    proposalIdInSnapshot,\n  }: {\n    partialVoteData: SignAndSendVoteDataParam;\n    adapterName: ContractAdapterNames;\n    /**\n     * This is the hash of the content as submitted to the DAO.\n     * The hash should be the same as the Snapshot draft's, or\n     * proposal's (if not submitted as a draft), ID.\n     *\n     * We need to make sure this matches what has been submitted to\n     * the DAO for later signature verifications.\n     */\n    proposalIdInDAO: SnapshotVoteData['payload']['proposalHash'];\n    /**\n     * Must match a `proposal` type's ID in Snapshot so a `vote` may be attached.\n     */\n    proposalIdInSnapshot: string;\n  }): Promise<SignAndSendVoteReturn> {\n    try {\n      if (!web3Instance) {\n        throw new Error('No Web3 instance was found.');\n      }\n\n      if (!account) {\n        throw new Error('No account was found.');\n      }\n\n      if (!daoRegistryAddress) {\n        throw new Error('No \"DaoRegistry\" address was found.');\n      }\n\n      if (!SNAPSHOT_HUB_API_URL) {\n        throw new Error('No \"SNAPSHOT_HUB_API_URL\" was found.');\n      }\n\n      setVoteDataStatus(Web3TxStatus.AWAITING_CONFIRM);\n\n      const adapterAddress = getAdapterAddressFromContracts(\n        adapterName,\n        contracts\n      );\n      const {choice, delegateAddress, metadata = {}} = partialVoteData;\n\n      const {data: snapshotSpace} = await getSpace(SNAPSHOT_HUB_API_URL, SPACE);\n\n      const voteData: SnapshotMessageVote = {\n        chainId: DEFAULT_CHAIN,\n        choice,\n        metadata: {\n          ...metadata,\n          memberAddress: delegateAddress || account,\n        },\n      };\n\n      const voteProposalData: SnapshotVoteProposal = {\n        proposalHash: proposalIdInDAO,\n        space: SPACE,\n        token: snapshotSpace.token,\n      };\n\n      // 1. Check proposal type and get appropriate message\n      const message = await buildVoteMessage(\n        voteData,\n        voteProposalData,\n        SNAPSHOT_HUB_API_URL\n      );\n\n      const erc712Message = prepareVoteMessage({\n        timestamp: message.timestamp,\n        payload: {\n          proposalHash: message.payload.proposalHash,\n          choice: VoteChoicesIndex[choice],\n        },\n      });\n\n      const {domain, types} = getDomainDefinition(\n        {...erc712Message, type: SnapshotType.vote},\n        daoRegistryAddress,\n        adapterAddress,\n        DEFAULT_CHAIN\n      );\n\n      const dataToSign = JSON.stringify({\n        types: types,\n        domain: domain,\n        primaryType: PRIMARY_TYPE_ERC712,\n        message: erc712Message,\n      });\n\n      const signature: string = await signMessage(\n        provider,\n        account,\n        dataToSign\n      );\n\n      setVoteDataStatus(Web3TxStatus.PENDING);\n\n      // 3. Send data to snapshot-hub\n      const {data} = await submitMessage<SnapshotSubmitBaseReturn>(\n        SNAPSHOT_HUB_API_URL,\n        account,\n        {\n          ...message,\n          // @note We pass the proposal's hash (ID) so we can vote on it.\n          payload: {...message.payload, proposalHash: proposalIdInSnapshot},\n        },\n        signature,\n        {\n          actionId: domain.actionId,\n          chainId: domain.chainId,\n          verifyingContract: domain.verifyingContract,\n          message: erc712Message,\n        }\n      );\n\n      const dataToReturn = {\n        data: message,\n        signature,\n        uniqueId: data.uniqueId,\n      };\n\n      setVoteDataStatus(Web3TxStatus.FULFILLED);\n      setVoteData(dataToReturn);\n\n      return dataToReturn;\n    } catch (error) {\n      setVoteDataStatus(Web3TxStatus.REJECTED);\n      setVoteDataError(error);\n\n      throw error;\n    }\n  }\n\n  return {\n    signAndSendVote,\n    voteData,\n    voteDataError,\n    voteDataStatus,\n  };\n}\n","import {useState} from 'react';\nimport {useSelector} from 'react-redux';\nimport {\n  buildDraftMessage,\n  buildProposalMessage,\n  getDomainDefinition,\n  getSpace,\n  prepareDraftMessage,\n  prepareProposalMessage,\n  signMessage,\n  SnapshotMessageBase,\n  SnapshotMessageProposal,\n  SnapshotProposalData,\n  SnapshotSubmitBaseReturn,\n  SnapshotSubmitProposalReturn,\n  SnapshotType,\n  submitMessage,\n} from '@openlaw/snapshot-js-erc712';\n\nimport {\n  ContractAdapterNames,\n  ContractDAOConfigKeys,\n  Web3TxStatus,\n} from '../../web3/types';\nimport {DEFAULT_CHAIN, SNAPSHOT_HUB_API_URL, SPACE} from '../../../config';\nimport {\n  getAdapterAddressFromContracts,\n  getDAOConfigEntry,\n} from '../../web3/helpers';\nimport {PRIMARY_TYPE_ERC712} from '../../web3/config';\nimport {\n  ProposalOrDraftSignDataFromType,\n  ProposalOrDraftSnapshotType,\n} from '../types';\nimport {StoreState} from '../../../store/types';\nimport {useWeb3Modal} from '../../web3/hooks/useWeb3Modal';\n\ntype SignAndSendData<T extends ProposalOrDraftSnapshotType> = {\n  partialProposalData: PrepareAndSignProposalDataParam;\n  adapterAddress?: string;\n  adapterName?: ContractAdapterNames;\n  type: T;\n};\n\ntype PrepareAndSignProposalDataParam = {\n  body: SnapshotProposalData['payload']['body'];\n  name: SnapshotProposalData['payload']['name'];\n  metadata: SnapshotProposalData['payload']['metadata'];\n  /**\n   * Helpful for Proposal types when hashes between created Drafts\n   * and yet to be created Proposals need to match.\n   */\n  timestamp?: SnapshotProposalData['timestamp'];\n};\n\ntype UseSignAndSubmitProposalReturn<T extends ProposalOrDraftSnapshotType> = {\n  signAndSendProposal: (\n    d: SignAndSendData<T>\n  ) => Promise<SignAndSendProposalReturn<T>>;\n  proposalData: SignAndSendProposalReturn<T> | undefined;\n  proposalSignAndSendError: Error | undefined;\n  proposalSignAndSendStatus: Web3TxStatus;\n};\n\ntype SignAndSendProposalReturn<T extends ProposalOrDraftSnapshotType> = {\n  data: ProposalOrDraftSignDataFromType<T>;\n  signature: string;\n  uniqueId: SnapshotSubmitBaseReturn['uniqueId'];\n  uniqueIdDraft: SnapshotSubmitProposalReturn['uniqueIdDraft'];\n};\n\n/**\n * useSignAndSubmitProposal\n *\n * React hook which prepares proposal data for submission\n * to Snapshot and Moloch v3 and signs it (ERC712)\n *\n * @returns {Promise<UseSignAndSubmitProposalReturn>} An object with the proposal data and the ERC712 signature string.\n */\nexport function useSignAndSubmitProposal<\n  T extends ProposalOrDraftSnapshotType\n>(): UseSignAndSubmitProposalReturn<T> {\n  /**\n   * Selectors\n   */\n\n  const daoRegistryAddress = useSelector(\n    (state: StoreState) => state.contracts.DaoRegistryContract?.contractAddress\n  );\n  const daoRegistryInstance = useSelector(\n    (state: StoreState) => state.contracts.DaoRegistryContract?.instance\n  );\n  const contracts = useSelector((state: StoreState) => state.contracts);\n\n  /**\n   * Our hooks\n   */\n\n  const {account, provider, web3Instance} = useWeb3Modal();\n\n  /**\n   * State\n   */\n\n  const [proposalData, setProposalData] = useState<\n    SignAndSendProposalReturn<T>\n  >();\n  const [\n    proposalSignAndSendError,\n    setProposalSignAndSendError,\n  ] = useState<Error>();\n  const [\n    proposalSignAndSendStatus,\n    setProposalSignAndSendStatus,\n  ] = useState<Web3TxStatus>(Web3TxStatus.STANDBY);\n\n  /**\n   * Functions\n   */\n\n  /**\n   * A wrapper to clearly separate the running of functions\n   * specific to Proposals.\n   *\n   * @param {SnapshotMessageBase & Partial<SnapshotMessageProposal>} commonData\n   * @returns {Promise<SnapshotProposalData>}\n   */\n  async function buildProposalMessageHelper(\n    commonData: SnapshotMessageBase & Partial<SnapshotMessageProposal>\n  ): Promise<SnapshotProposalData> {\n    if (!SNAPSHOT_HUB_API_URL) {\n      throw new Error('No \"SNAPSHOT_HUB_API_URL\" was found.');\n    }\n\n    const snapshot: number = await web3Instance.eth.getBlockNumber();\n\n    const votingTimeSeconds: number = parseInt(\n      await getDAOConfigEntry(\n        ContractDAOConfigKeys.offchainVotingVotingPeriod,\n        daoRegistryInstance\n      )\n    );\n\n    return await buildProposalMessage(\n      {\n        ...commonData,\n        votingTimeSeconds,\n        snapshot,\n      },\n      SNAPSHOT_HUB_API_URL\n    );\n  }\n\n  /**\n   * signAndSendProposal\n   *\n   * Builds the proposal data for submission to Moloch v3 and Snapshot and signs it (ERC712).\n   *\n   * @returns {Promise<SignAndSendProposalReturn>} An object with the proposal data, signature string, and propsal hash(es) from snapshot-hub.\n   */\n  async function signAndSendProposal({\n    partialProposalData,\n    adapterAddress,\n    adapterName,\n    type,\n  }: SignAndSendData<T>): Promise<SignAndSendProposalReturn<T>> {\n    try {\n      if (!account) {\n        throw new Error('No account was found to send.');\n      }\n\n      if (!web3Instance) {\n        throw new Error('No Web3 instance was found.');\n      }\n\n      if (!daoRegistryAddress) {\n        throw new Error('No \"DaoRegistry\" address was found.');\n      }\n\n      if (!SNAPSHOT_HUB_API_URL) {\n        throw new Error('No \"SNAPSHOT_HUB_API_URL\" was found.');\n      }\n\n      if (type !== SnapshotType.draft && type !== SnapshotType.proposal) {\n        throw new Error('Handling for type \"vote\" is not implemented.');\n      }\n\n      setProposalSignAndSendStatus(Web3TxStatus.AWAITING_CONFIRM);\n\n      const actionId = adapterAddress\n        ? adapterAddress\n        : adapterName\n        ? getAdapterAddressFromContracts(adapterName, contracts)\n        : '';\n\n      const {body, name, metadata, timestamp} = partialProposalData;\n\n      const {data: snapshotSpace} = await getSpace(SNAPSHOT_HUB_API_URL, SPACE);\n\n      const commonData: SnapshotMessageBase = {\n        name,\n        body,\n        metadata,\n        token: snapshotSpace.token,\n        space: SPACE,\n      };\n\n      // 1. Check proposal type and prepare appropriate message\n      const message = (type === SnapshotType.draft\n        ? await buildDraftMessage(commonData, SNAPSHOT_HUB_API_URL)\n        : await buildProposalMessageHelper({\n            ...commonData,\n            timestamp,\n          })) as ProposalOrDraftSignDataFromType<T>;\n\n      // 2. Prepare signing data. Snapshot and the contracts will verify this same data against the signature.\n      const erc712Message =\n        type === SnapshotType.draft\n          ? prepareDraftMessage(message)\n          : prepareProposalMessage(message as SnapshotProposalData);\n\n      const {domain, types} = getDomainDefinition(\n        {...erc712Message, type},\n        daoRegistryAddress,\n        actionId,\n        DEFAULT_CHAIN\n      );\n\n      const dataToSign = JSON.stringify({\n        types,\n        domain,\n        primaryType: PRIMARY_TYPE_ERC712,\n        message: erc712Message,\n      });\n\n      // 3. Sign data\n      const signature = await signMessage(provider, account, dataToSign);\n\n      setProposalSignAndSendStatus(Web3TxStatus.PENDING);\n\n      // 3. Send data to snapshot-hub\n      const {data} = await submitMessage<SnapshotSubmitProposalReturn>(\n        SNAPSHOT_HUB_API_URL,\n        account,\n        message,\n        signature,\n        {\n          actionId: domain.actionId,\n          chainId: domain.chainId,\n          verifyingContract: domain.verifyingContract,\n          message: erc712Message,\n        }\n      );\n\n      const dataToReturn = {\n        data: message,\n        signature,\n        uniqueId: data.uniqueId,\n        uniqueIdDraft: data.uniqueIdDraft || '',\n      };\n\n      setProposalSignAndSendStatus(Web3TxStatus.FULFILLED);\n      setProposalData(dataToReturn);\n\n      return dataToReturn;\n    } catch (error) {\n      setProposalSignAndSendStatus(Web3TxStatus.REJECTED);\n      setProposalSignAndSendError(error);\n\n      throw error;\n    }\n  }\n\n  return {\n    proposalData,\n    proposalSignAndSendError,\n    proposalSignAndSendStatus,\n    signAndSendProposal,\n  };\n}\n","import {CoreProposalVoteChoices} from '@openlaw/snapshot-js-erc712';\nimport {VoteChoices} from './types';\n\n/**\n * WEB3 CONFIG for MOLOCH v3\n */\n\n// Vote choices should be \"yes\", \"no\" unless Moloch v3 contracts change.\nexport const VOTE_CHOICES: CoreProposalVoteChoices = [\n  VoteChoices.Yes,\n  VoteChoices.No,\n];\n\n// When signing data this is the `primaryType` key's value which is part of the data to sign.\nexport const PRIMARY_TYPE_ERC712 = 'Message';\n\nexport const TX_CYCLE_MESSAGES: string[] = [\n  'Submitting\\u2026',\n  'Working\\u2026',\n  'DAOing\\u2026',\n  'Getting closer\\u2026',\n  'Dreaming of ETH\\u2026',\n];\n","import {useContext} from 'react';\n\nimport {Web3ModalContextValue, Web3ModalContext} from '../Web3ModalManager';\n\n/**\n * useWeb3Modal(): Web3ModalContextValue\n *\n * Internal hook to access wallet connectivity and connected state.\n *\n * @example\n * const {account, connected, networkId, ...} = useWeb3Modal();\n */\nexport function useWeb3Modal(): Web3ModalContextValue {\n  return useContext(Web3ModalContext);\n}\n","type EtherscanURLProps = {\n  url: string;\n  isPending?: boolean;\n};\n\nexport default function EtherscanURL(props: EtherscanURLProps) {\n  const {url, isPending = false} = props;\n\n  return (\n    <small>\n      <a href={url} rel=\"noopener noreferrer\" target=\"_blank\">\n        {isPending ? 'view progress' : 'view transaction'}\n      </a>\n    </small>\n  );\n}\n","import {useState, useEffect, useRef} from 'react';\n\ntype UseAbortControllerReturn = {\n  abortController: AbortController | undefined;\n  isMountedRef: React.MutableRefObject<boolean>;\n};\n\n/**\n * useAbortController\n *\n * Provides an `AbortController` to cancel requests.\n * Also provides a helper `isMountedRef` to see if the React component has\n * been unmounted and therefore should not run any setting of state.\n */\nexport function useAbortController(): UseAbortControllerReturn {\n  /**\n   * State\n   */\n\n  const [abortController, setAbortController] = useState<AbortController>();\n\n  /**\n   * Refs\n   */\n\n  const isMountedRef = useRef<boolean>(false);\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    isMountedRef.current = true;\n\n    !abortController && setAbortController(new AbortController());\n\n    return () => {\n      isMountedRef.current = false;\n\n      abortController && abortController.abort();\n    };\n  }, [abortController]);\n\n  return {\n    abortController,\n    isMountedRef,\n  };\n}\n","import {useReducer} from 'react';\n\ntype CounterState = {\n  count: number;\n};\n\ntype CounterAction = {\n  type: 'increment';\n};\n\ntype CounterReturn = [number, React.Dispatch<CounterAction>];\n\nconst initialState = {count: 0};\n\nfunction reducer(state: CounterState, action: CounterAction) {\n  switch (action.type) {\n    case 'increment':\n      return {count: state.count + 1};\n    default:\n      return state;\n  }\n}\n\n/**\n * useCounter\n *\n * A counter which is kept track of via a reducer.\n *\n * @note This is mainly to use inside a custom hook's callback resulting in a\n *  changed dependency for consumer's useEffect when a consumer higher up wants to trigger a \"re-run\"\n *  (i.e. re-fetch, refresh some data), similarly to dispatching a Redux action again to update the state.\n */\nexport function useCounter(): CounterReturn {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return [state.count, dispatch];\n}\n","import {useEffect, useRef} from 'react';\n\ntype UseIsMountedReturn = {\n  isMountedRef: React.MutableRefObject<boolean>;\n};\n\n/**\n * useIsMounted\n *\n * A hook that returns a React Ref which tells if the component is mounted, or not.\n * This is helpful when needing to stop state updates in hooks with effects.\n */\nexport function useIsMounted(): UseIsMountedReturn {\n  /**\n   * Refs\n   */\n\n  const isMountedRef = useRef<boolean>(false);\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    isMountedRef.current = true;\n\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  return {\n    isMountedRef,\n  };\n}\n","import React, {useCallback, useState} from 'react';\nimport ReactModal from 'react-modal';\n\nimport {StoreState} from '../store/types';\nimport {useSelector} from 'react-redux';\nimport {useWeb3Modal} from '../components/web3/hooks';\nimport FadeIn from '../components/common/FadeIn';\nimport TimesSVG from '../assets/svg/TimesSVG';\n\ntype UseMemberActionDisabledReturn = {\n  disabledReason: string;\n  isDisabled: boolean;\n  openWhyDisabledModal: () => void;\n  setOtherDisabledReasons: (r: string[]) => void;\n  WhyDisabledModal: (p: WhyDisabledModalProps) => JSX.Element | null;\n};\n\ntype WhyDisabledModalProps = {\n  title?: string;\n};\n\n/**\n * useMemberActionDisabled\n *\n * This component covers the most common cases for why a member action button should be disabled.\n * More reasons for disabling the button can be added via props using `setOtherDisabledReasons`.\n *\n * @param {ProposalActionWhyDisabledProps} props\n * @returns {UseMemberActionDisabledReturn}\n */\nexport function useMemberActionDisabled(): UseMemberActionDisabledReturn {\n  /**\n   * State\n   */\n\n  const [otherDisabledReasons, setOtherDisabledReasons] = useState<string[]>(\n    []\n  );\n  const [shouldShowWhyModal, setShouldShowWhyModal] = useState<boolean>(false);\n\n  /**\n   * Selectors\n   */\n\n  const isActiveMember = useSelector(\n    (s: StoreState) => s.connectedMember?.isActiveMember\n  );\n\n  /**\n   * Our hooks\n   */\n\n  const {connected} = useWeb3Modal();\n\n  /**\n   * Variables\n   */\n\n  // Get the first index of other reasons.\n  const otherReasonNext =\n    otherDisabledReasons && otherDisabledReasons.find((r) => r);\n  const isDisabled =\n    !connected || !isActiveMember || (otherReasonNext ? true : false);\n  const disabledReason = getDisabledReason();\n  const canShowDisabledReason = isDisabled && disabledReason ? true : false;\n\n  /**\n   * Cached callbacks\n   */\n\n  const WhyDisabledModalCached = useCallback(WhyDisabledModal, [\n    canShowDisabledReason,\n    disabledReason,\n    shouldShowWhyModal,\n  ]);\n\n  const handleSetOtherDisabledReasonsCached = useCallback(\n    handleSetOtherDisabledReasons,\n    []\n  );\n\n  /**\n   * Functions\n   */\n\n  function handleSetOtherDisabledReasons(otherReasons: string[]) {\n    setOtherDisabledReasons(otherReasons.filter(Boolean));\n  }\n\n  function getDisabledReason() {\n    if (!connected) {\n      return 'Your wallet is not connected.';\n    }\n\n    if (!isActiveMember) {\n      return 'Either you are not a member, or your membership is not active.';\n    }\n\n    return otherReasonNext || '';\n  }\n\n  function handleOpenWhyDisabledModal() {\n    setShouldShowWhyModal(true);\n  }\n\n  function WhyDisabledModal(props: WhyDisabledModalProps): JSX.Element | null {\n    if (!canShowDisabledReason) return null;\n\n    const {title} = props;\n\n    return (\n      <ReactModal\n        ariaHideApp={false}\n        className=\"modal-container\"\n        isOpen={shouldShowWhyModal}\n        onRequestClose={() => {\n          setShouldShowWhyModal(false);\n        }}\n        overlayClassName=\"modal-overlay\"\n        role=\"dialog\"\n        style={{overlay: {zIndex: 1000}}}>\n        <FadeIn>\n          <div className=\"modal\">\n            <button\n              className=\"modal__close-button modal__close-button--icon\"\n              onClick={() => {\n                setShouldShowWhyModal(false);\n              }}>\n              <TimesSVG />\n            </button>\n            <div className=\"card\">\n              <h2 className=\"modal__title\">{title || 'Why disabled?'}</h2>\n              <p>{disabledReason}</p>\n            </div>\n          </div>\n        </FadeIn>\n      </ReactModal>\n    );\n  }\n\n  return {\n    disabledReason,\n    isDisabled,\n    openWhyDisabledModal: handleOpenWhyDisabledModal,\n    setOtherDisabledReasons: handleSetOtherDisabledReasonsCached,\n    WhyDisabledModal: WhyDisabledModalCached,\n  };\n}\n","/**\n * DaoConstants as defined in the solidity DaoConstants.sol contract\n * and the available adapters as detailed here:\n * https://github.com/openlawteam/laoland\n */\nexport enum DaoConstants {\n  BANK = 'bank',\n  CONFIGURATION = 'configuration',\n  FINANCING = 'financing',\n  GUILDKICK = 'guildkick',\n  ONBOARDING = 'onboarding',\n  OFFCHAIN_VOTING = 'offchain-voting',\n  MANAGING = 'managing',\n  RAGEQUIT = 'ragequit',\n  TRIBUTE = 'tribute',\n  VOTING = 'voting',\n  WITHDRAW = 'withdraw',\n}\n\n/**\n * Voting adapter names as defined in the solidity voting adapter contracts\n * i.e. `string public constant ADAPTER_NAME = \"VotingContract\"`.\n *\n * @link https://github.com/openlawteam/laoland/blob/master/contracts/adapters/voting\n */\nexport enum VotingAdapterName {\n  OffchainVotingContract = 'OffchainVotingContract',\n  VotingContract = 'VotingContract',\n}\n","import React, {useEffect, useState} from 'react';\n\ninterface IProps {\n  // Show spinner after some time has elapsed.\n  // Prevents the \"sudden spinner\" UI/UX no-no.\n  // Esp. if we could have cached data.\n  showAfterMs?: number;\n  text?: string;\n  textProps?: {[key: string]: any};\n}\n\nfunction Spinner(props: Partial<IProps>) {\n  return <div className=\"loader\" {...props} />;\n}\n\nconst Loader = (\n  props: IProps & React.PropsWithoutRef<JSX.IntrinsicElements['div']>\n) => {\n  const {showAfterMs, text, textProps, ...loaderProps} = props;\n  const [showLoaderAfterMs, setShowLoaderAfterMs] = useState<boolean>(false);\n\n  useEffect(() => {\n    /* 200ms is approx. the time a user will notice a stalled, blank screen */\n    const timeoutId =\n      showAfterMs && setTimeout(() => setShowLoaderAfterMs(true), showAfterMs);\n\n    return function cleanup() {\n      timeoutId && clearTimeout(timeoutId);\n    };\n  }, [showAfterMs]);\n\n  return (!showAfterMs || (showAfterMs && showLoaderAfterMs)) && props.text ? (\n    <div className=\"loader-container\">\n      <Spinner {...loaderProps} />\n      <span className=\"loader-text\" {...textProps}>\n        {text}\n      </span>\n    </div>\n  ) : (!showAfterMs || (showAfterMs && showLoaderAfterMs)) && !props.text ? (\n    <Spinner {...loaderProps} />\n  ) : null;\n};\n\nexport default Loader;\n","import {CLEAR_CONNECTED_MEMBER, SET_CONNECTED_MEMBER} from './actions';\nimport {ConnectedMemberState} from '../types';\n\nconst INITIAL_STATE = null;\n\nexport default function reducer(\n  state: ConnectedMemberState = INITIAL_STATE,\n  action: any\n) {\n  const {type, ...payload} = action;\n\n  switch (type) {\n    case SET_CONNECTED_MEMBER:\n      return setConnectedMemberReducer(state, payload);\n    case CLEAR_CONNECTED_MEMBER:\n      return clearConnectedMemberReducer();\n    default:\n      return state;\n  }\n}\n\nfunction setConnectedMemberReducer(\n  state: Partial<ConnectedMemberState>,\n  payload: Record<string, any>\n) {\n  return {...state, ...payload};\n}\n\nfunction clearConnectedMemberReducer() {\n  return INITIAL_STATE;\n}\n","import {\n  CONTRACT_BANK_EXTENSION,\n  CONTRACT_DAO_REGISTRY,\n  CONTRACT_MANAGING,\n  CONTRACT_ONBOARDING,\n  CONTRACT_TRIBUTE,\n  CONTRACT_VOTING,\n  CONTRACT_VOTING_OP_ROLLUP,\n} from '../actions';\nimport {ContractsState} from '../types';\n\nconst initialState = {\n  BankExtensionContract: null,\n  DaoRegistryContract: null,\n  ManagingContract: null,\n  OnboardingContract: null,\n  TributeContract: null,\n  VotingContract: null,\n};\n\nexport default function reducer(\n  state: ContractsState = initialState,\n  action: any\n) {\n  const {type, ...payload} = action;\n\n  switch (type) {\n    case CONTRACT_BANK_EXTENSION:\n      return contractBankExtension(state, payload);\n    case CONTRACT_DAO_REGISTRY:\n      return contractDAORegistry(state, payload);\n    case CONTRACT_ONBOARDING:\n      return contractOnboarding(state, payload);\n    case CONTRACT_TRIBUTE:\n      return contractTribute(state, payload);\n    case CONTRACT_VOTING:\n      return contractVoting(state, payload);\n    case CONTRACT_VOTING_OP_ROLLUP:\n      return contractVoting(state, payload);\n    case CONTRACT_MANAGING:\n      return contractManaging(state, payload);\n    default:\n      return state;\n  }\n}\n\nfunction contractBankExtension(\n  state: ContractsState,\n  payload: any\n): ContractsState {\n  return {...state, BankExtensionContract: {...payload}};\n}\n\nfunction contractDAORegistry(\n  state: ContractsState,\n  payload: any\n): ContractsState {\n  return {...state, DaoRegistryContract: {...payload}};\n}\n\nfunction contractOnboarding(\n  state: ContractsState,\n  payload: any\n): ContractsState {\n  return {...state, OnboardingContract: {...payload}};\n}\n\nfunction contractTribute(state: ContractsState, payload: any): ContractsState {\n  return {...state, TributeContract: {...payload}};\n}\n\nfunction contractVoting(state: ContractsState, payload: any): ContractsState {\n  return {...state, VotingContract: {...payload}};\n}\n\nfunction contractManaging(state: ContractsState, payload: any): ContractsState {\n  return {...state, ManagingContract: {...payload}};\n}\n","import {combineReducers} from 'redux';\n\nimport connectedMember from './connectedMember/reducers';\nimport contracts from './contracts/reducers';\n\nexport default combineReducers({\n  connectedMember,\n  contracts,\n});\n","import {applyMiddleware, createStore} from 'redux';\nimport {composeWithDevTools} from 'redux-devtools-extension/logOnlyInProduction';\nimport thunk from 'redux-thunk';\n\nimport rootReducer from './reducers';\n\nexport const store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk))\n);\n","export default function Footer() {\n  return (\n    <div>{/* Footer @todo - there is no footer content in designs */}</div>\n  );\n}\n","interface LogoProps {\n  size?: 'small' | 'medium' | 'large' | '';\n}\n\nexport default function Logo(props: LogoProps) {\n  return (\n    <div className={`logo ${props.size ? `logo--${props.size}` : ''}`}>\n      MOLOCH v3\n    </div>\n  );\n}\n","import React from 'react';\n\nimport Logo from './Logo';\n\n/**\n * ModalLogo\n * This component is used for modal menu\n */\nexport function ModalLogo() {\n  return (\n    <div className=\"logo-container logo-container--center\">\n      <Logo size=\"small\" />\n    </div>\n  );\n}\n\n/**\n * LeftLogo\n * This component is used for main pages\n */\nexport function LeftLogo() {\n  return (\n    <div className=\"logo-container logo-container--header\">\n      <Logo size=\"medium\" />\n    </div>\n  );\n}\n\n/**\n * CenterLogo\n * This component is used for splash page\n */\nexport function CenterLogo() {\n  return (\n    <div className=\"logo-container logo-container--center\">\n      <Logo size=\"large\" />\n    </div>\n  );\n}\n","export default function MetaMaskSVG() {\n  const st0: React.CSSProperties = {\n    fill: '#e17726',\n    stroke: '#e17726',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st1: React.CSSProperties = {\n    fill: '#e27625',\n    stroke: '#e27625',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st2: React.CSSProperties = {\n    fill: '#d5bfb2',\n    stroke: '#d5bfb2',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st3: React.CSSProperties = {\n    fill: '#233447',\n    stroke: '#233447',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st4: React.CSSProperties = {\n    fill: '#cc6228',\n    stroke: '#cc6228',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st5: React.CSSProperties = {\n    fill: '#e27525',\n    stroke: '#e27525',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st6: React.CSSProperties = {\n    fill: '#f5841f',\n    stroke: '#f5841f',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st7: React.CSSProperties = {\n    fill: '#c0ac9d',\n    stroke: '#c0ac9d',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st8: React.CSSProperties = {\n    fill: '#161616',\n    stroke: '#161616',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st9: React.CSSProperties = {\n    fill: '#763e1a',\n    stroke: '#763e1a',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0\"\n      y=\"0\"\n      enableBackground=\"new 0 0 33.9 31.3\"\n      version=\"1.1\"\n      viewBox=\"0 0 33.9 31.3\"\n      xmlSpace=\"preserve\">\n      <path d=\"M32.1.1L18.9 9.8l2.4-5.7 10.8-4z\" style={st0}></path>\n      <path\n        d=\"M1.8.1l13 9.8-2.3-5.8L1.8.1zM27.4 22.7L23.9 28l7.5 2.1 2.1-7.3-6.1-.1zM.4 22.8l2.1 7.3L10 28l-3.5-5.3-6.1.1z\"\n        style={st1}></path>\n      <path\n        d=\"M9.6 13.6l-2.1 3.1 7.4.3-.2-8-5.1 4.6zM24.3 13.6L19.1 9l-.2 8.1 7.4-.3-2-3.2zM10 28l4.5-2.2-3.9-3L10 28zM19.4 25.8l4.5 2.2-.6-5.2-3.9 3z\"\n        style={st1}></path>\n      <path\n        d=\"M23.9 28l-4.5-2.2.4 2.9v1.2l4.1-1.9zM10 28l4.2 2v-1.2l.4-2.9L10 28z\"\n        style={st2}></path>\n      <path\n        d=\"M14.2 20.9l-3.7-1.1 2.6-1.2 1.1 2.3zM19.6 20.9l1.1-2.3 2.6 1.2-3.7 1.1z\"\n        style={st3}></path>\n      <path\n        d=\"M10 28l.6-5.3-4.1.1L10 28zM23.2 22.7l.6 5.3 3.5-5.2-4.1-.1zM26.4 16.8l-7.4.3.7 3.8 1.1-2.3 2.6 1.2 3-3zM10.5 19.8l2.6-1.2 1.1 2.3.7-3.8-7.4-.3 3 3z\"\n        style={st4}></path>\n      <path\n        d=\"M7.5 16.8l3.1 6.1-.1-3-3-3.1zM23.4 19.8l-.1 3 3.1-6.1-3 3.1zM14.9 17.1l-.7 3.8.9 4.5.2-5.9-.4-2.4zM18.9 17.1l-.4 2.4.2 5.9.9-4.5-.7-3.8z\"\n        style={st5}></path>\n      <path\n        d=\"M19.6 20.9l-.9 4.5.6.4 3.9-3 .1-3-3.7 1.1zM10.5 19.8l.1 3 3.9 3 .6-.4-.9-4.5-3.7-1.1z\"\n        style={st6}></path>\n      <path\n        d=\"M19.7 30v-1.2l-.3-.3h-5l-.3.3V30L10 28l1.5 1.2 2.9 2h5.1l3-2 1.4-1.2-4.2 2z\"\n        style={st7}></path>\n      <path\n        d=\"M19.4 25.8l-.6-.4h-3.7l-.6.4-.4 2.9.3-.3h5l.3.3-.3-2.9z\"\n        style={st8}></path>\n      <path\n        d=\"M32.6 10.5l1.1-5.4-1.7-5-12.6 9.4 4.9 4.1 6.9 2 1.5-1.8-.7-.4 1.1-1-.8-.6 1.1-.8-.8-.5zM.1 5.1l1.1 5.4-.7.5 1.1.8-.8.6 1.1 1-.7.5 1.5 1.8 6.9-2 4.9-4.1L1.8.1l-1.7 5z\"\n        style={st9}></path>\n      <path\n        d=\"M31.2 15.6l-6.9-2 2.1 3.1-3.1 6.1 4.1-.1h6.1l-2.3-7.1zM9.6 13.6l-6.9 2-2.3 7.1h6.1l4.1.1-3.1-6.1 2.1-3.1zM18.9 17.1l.4-7.6 2-5.4h-8.9l2 5.4.4 7.6.2 2.4v5.9h3.7v-5.9l.2-2.4z\"\n        style={st6}></path>\n    </svg>\n  );\n}\n","export default function WalletConnectSVG() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 300 185\">\n      <g fill=\"none\" fillRule=\"evenodd\" stroke=\"none\" strokeWidth=\"1\">\n        <g fill=\"#3B99FC\" fillRule=\"nonzero\">\n          <path d=\"M61.439 36.256c48.91-47.888 128.212-47.888 177.123 0l5.886 5.764a6.041 6.041 0 010 8.67l-20.136 19.716a3.179 3.179 0 01-4.428 0l-8.101-7.931c-34.122-33.408-89.444-33.408-123.566 0l-8.675 8.494a3.179 3.179 0 01-4.428 0L54.978 51.253a6.041 6.041 0 010-8.67l6.46-6.327zM280.206 77.03l17.922 17.547a6.041 6.041 0 010 8.67l-80.81 79.122c-2.446 2.394-6.41 2.394-8.856 0l-57.354-56.155a1.59 1.59 0 00-2.214 0L91.54 182.37c-2.446 2.394-6.411 2.394-8.857 0L1.872 103.247a6.041 6.041 0 010-8.671l17.922-17.547c2.445-2.394 6.41-2.394 8.856 0l57.355 56.155a1.59 1.59 0 002.214 0L145.57 77.03c2.446-2.394 6.41-2.395 8.856 0l57.355 56.155a1.59 1.59 0 002.214 0L271.35 77.03c2.446-2.394 6.41-2.394 8.856 0z\"></path>\n        </g>\n      </g>\n    </svg>\n  );\n}\n","import MetaMaskSVG from '../../assets/svg/MetaMaskSVG';\nimport WalletConnectSVG from '../../assets/svg/WalletConnectSVG';\n\nexport const svgWalletIcon: {\n  injected: JSX.Element;\n  walletconnect: JSX.Element;\n} = {\n  injected: <MetaMaskSVG />,\n  walletconnect: <WalletConnectSVG />,\n};\n","export default function LoaderWithEmoji() {\n  return (\n    <div className=\"loader--emoji\">\n      <span role=\"img\" aria-label=\"hourglass emoji\">\n        \n      </span>\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactModal from 'react-modal';\n\nimport FadeIn from './FadeIn';\n\ntype ModalProps = {\n  children: React.ReactNode;\n  isOpen: boolean;\n  isOpenHandler: (isOpen: boolean) => void;\n  keyProp: string;\n  styleProps?: Record<string, string>;\n};\n\nexport default function Modal({\n  children,\n  keyProp,\n  isOpen,\n  styleProps,\n  isOpenHandler,\n}: ModalProps) {\n  return (\n    <ReactModal\n      key={keyProp}\n      ariaHideApp={false}\n      className=\"modal-container\"\n      isOpen={isOpen}\n      onRequestClose={() => {\n        isOpenHandler(isOpen);\n      }}\n      overlayClassName=\"modal-overlay\"\n      role=\"dialog\"\n      style={\n        {\n          overlay: {zIndex: '99'},\n          ...styleProps,\n        } as any\n      }>\n      <FadeIn>\n        <div className=\"modal\">{children}</div>\n      </FadeIn>\n    </ReactModal>\n  );\n}\n","import React, {useState} from 'react';\nimport {isMobile} from 'react-device-detect';\n\nimport {ETHERSCAN_URLS, CHAINS} from '../../config';\nimport {svgWalletIcon} from './WalletIcons';\nimport {truncateEthAddress} from '../../util/helpers';\nimport {useIsDefaultChain} from './hooks';\nimport {useWeb3Modal} from './hooks';\nimport LoaderWithEmoji from '../feedback/LoaderWithEmoji';\nimport Modal from '../common/Modal';\n\nimport TimesSVG from '../../assets/svg/TimesSVG';\n\ntype Web3ModalButtonProps = {\n  // determines whether button should show account badge or custom text to\n  // trigger wallet moodal\n  showWalletETHBadge?: boolean;\n  customWalletText?: string;\n};\n\ntype ConnectWalletProps = {\n  customWalletText?: string;\n  showWalletETHBadge?: boolean;\n};\nfunction ConnectWallet({\n  customWalletText,\n  showWalletETHBadge,\n}: ConnectWalletProps): JSX.Element {\n  /**\n   * Hooks\n   */\n\n  const {\n    account,\n    connected,\n    providerOptions,\n    onConnectTo,\n    onDisconnect,\n    networkId,\n    web3Modal,\n  } = useWeb3Modal();\n\n  const {defaultChain, defaultChainError, isDefaultChain} = useIsDefaultChain();\n\n  /**\n   * State\n   */\n\n  const [openModal, setOpenModal] = useState<boolean>(false);\n\n  /**\n   * Variables\n   */\n\n  const isWrongNetwork: boolean = networkId !== defaultChain ?? isDefaultChain;\n  const isChainGanache = networkId === CHAINS.GANACHE;\n  const displayWalletText: string | undefined = getWalletText();\n\n  /**\n   * Functions\n   */\n\n  function getWalletText(): string {\n    if (isMobile) {\n      if (account) {\n        return truncateEthAddress(account);\n      } else {\n        return 'Connect';\n      }\n    } else {\n      if (showWalletETHBadge && account) {\n        return truncateEthAddress(account);\n      } else {\n        return customWalletText || '';\n      }\n    }\n  }\n\n  function handleNavigate(): void {\n    window.open(`${ETHERSCAN_URLS[defaultChain]}/address/${account}`, '_blank');\n  }\n\n  function displayProviders(): JSX.Element {\n    const providerOptionsFiltered = Object.entries(providerOptions).filter(\n      (p) => p[0] !== 'injected'\n    );\n    const maybeProviderOptions = isMobile\n      ? providerOptionsFiltered\n      : Object.entries(providerOptions);\n\n    const displayOptions: JSX.Element[] = maybeProviderOptions.map(\n      (provider: Record<number, any>) => (\n        <button\n          key={provider[0]}\n          className={`walletconnect__options-button \n            ${\n              connected && web3Modal?.cachedProvider === provider[0]\n                ? 'walletconnect__options-button--connected'\n                : ''\n            }`}\n          onClick={async () => await onConnectTo(provider[0])}\n          // disable WalletConnect button on Ganache network\n          disabled={isChainGanache && provider[0] === 'walletconnect'}>\n          <span className=\"wallet-name\">{provider[1].display.name}</span>\n\n          <ProviderSVG providerName={provider[0]} />\n        </button>\n      )\n    );\n\n    return (\n      <Modal\n        keyProp=\"web3modal\"\n        isOpen={openModal}\n        isOpenHandler={() => {\n          setOpenModal(false);\n        }}>\n        {/* MODEL CLOSE BUTTON */}\n        <span\n          className=\"modal__close-button\"\n          onClick={() => {\n            setOpenModal(false);\n          }}>\n          <TimesSVG />\n        </span>\n        <div>\n          {/* TITLE */}\n          <div className=\"modal__title\">Connect Wallet</div>\n\n          {/* SUBTITLE */}\n          {connected && isWrongNetwork ? null : (\n            <div className=\"modal__subtitle\">Choose Your Wallet</div>\n          )}\n\n          {/* CONNECTED ACCOUNT BUTTON LINK */}\n          {account && (\n            <button\n              className=\"walletconnect__connected-address-button\"\n              onClick={handleNavigate}\n              disabled={isChainGanache}>\n              {isMobile ? truncateEthAddress(account) : account}\n            </button>\n          )}\n\n          {/* SHOW; WRONG NETWORK MSG || PROVIDER OPTIONS */}\n          {connected && isWrongNetwork ? (\n            <DisplayChainError\n              defaultChainError={defaultChainError?.message || ''}\n            />\n          ) : (\n            <div className=\"walletconnect__options\">{displayOptions}</div>\n          )}\n\n          {/* DISCONNECT BUTTON LINK */}\n          {connected && (\n            <button\n              className=\"walletconnect__disconnect-link-button\"\n              onClick={onDisconnect}>\n              {'Disconnect Wallet'}\n            </button>\n          )}\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <button\n        className={`walletconnect__connect-button \n        ${\n          isWrongNetwork && connected\n            ? 'walletconnect__connect-button--error'\n            : ''\n        }`}\n        onClick={() => {\n          setOpenModal(true);\n        }}>\n        <span\n          className={`connect-button-text ${\n            connected ? 'connect-button-text--ethAddress' : ''\n          }`}>\n          {displayWalletText || 'Connect'}\n        </span>\n\n        {showWalletETHBadge && isWrongNetwork && connected && (\n          <span>Wrong Network</span>\n        )}\n\n        {showWalletETHBadge && (\n          <ProviderSVG providerName={web3Modal?.cachedProvider} />\n        )}\n      </button>\n\n      {openModal && displayProviders()}\n    </>\n  );\n}\n\ntype ProviderSVGType = {\n  providerName: string;\n};\nfunction ProviderSVG({providerName}: ProviderSVGType): JSX.Element | null {\n  if (!providerName) return null;\n  return (\n    <span className=\"walletconnect__wallet-icon\">\n      {svgWalletIcon[providerName]}\n    </span>\n  );\n}\n\ntype DisplayChainErrorProps = {\n  defaultChainError: string;\n};\nfunction DisplayChainError({\n  defaultChainError,\n}: DisplayChainErrorProps): JSX.Element {\n  return (\n    <>\n      <div className=\"error-message\">\n        <small>{defaultChainError}</small>\n      </div>\n      <div>\n        <div style={{width: '3rem', margin: '0 auto'}}>\n          <LoaderWithEmoji />\n        </div>\n        <div>\n          <small>Waiting for the right network&hellip;</small>\n          <br />\n          <small>Switch networks from your wallet</small>\n        </div>\n      </div>\n    </>\n  );\n}\n\n/**\n * Web3ModalButton\n * @param props: Web3ModalButtonProps\n */\nexport default React.memo(function Web3ModalButton({\n  customWalletText,\n  showWalletETHBadge,\n}: Web3ModalButtonProps): JSX.Element {\n  return (\n    <ConnectWallet\n      customWalletText={customWalletText}\n      showWalletETHBadge={showWalletETHBadge}\n    />\n  );\n});\n","export default function HamburgerSVG() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      aria-hidden=\"true\"\n      className=\"svg-inline--fa fa-bars fa-w-14 fa-3x\"\n      data-icon=\"bars\"\n      data-prefix=\"fal\"\n      viewBox=\"0 0 448 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M442 114H6a6 6 0 01-6-6V84a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6zm0 160H6a6 6 0 01-6-6v-24a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6zm0 160H6a6 6 0 01-6-6v-24a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6z\"></path>\n    </svg>\n  );\n}\n","import React, {useState} from 'react';\nimport {Transition} from 'react-transition-group';\nimport ReactModal from 'react-modal';\nimport Media from 'react-media';\nimport {NavLink, useLocation, useHistory} from 'react-router-dom';\n\nimport Web3ModalButton from './web3/Web3ModalButton';\nimport {useWeb3Modal} from './web3/hooks';\nimport {ModalLogo} from './logo';\nimport TimesSVG from '../assets/svg/TimesSVG';\nimport HamburgerSVG from '../assets/svg/HamburgerSVG';\n\n// see: http://reactcommunity.org/react-transition-group/transition\nconst duration = 200;\n\nconst defaultStyle = {\n  transition: '0.1s',\n};\n\nconst transitionOpeningStyles: Record<string, any> = {\n  entering: {right: '-300px'},\n  entered: {right: 0},\n  exiting: {right: 0, opacity: 0},\n  exited: {right: '-300px', opacity: 0},\n};\n\nconst transitionClosingStyles: Record<string, any> = {\n  entering: {right: 0, opacity: 1},\n  entered: {right: '-300px', opacity: 1},\n  exiting: {right: '-300px', opacity: 1},\n  exited: {right: 0, opacity: 1},\n};\n\n// Nav links displayed on the landing page and main pages\nexport function NavLinks() {\n  return (\n    <nav role=\"navigation\" id=\"navigation\">\n      <ul className=\"nav__list\" data-testid=\"nav__list\">\n        <li tabIndex={0}>\n          <NavLink to=\"/membership\">\n            <span>Membership</span>\n          </NavLink>\n        </li>\n        <li tabIndex={0}>\n          <NavLink to=\"/governance-proposals\">\n            <span>Governance</span>\n          </NavLink>\n        </li>\n        <li tabIndex={0}>\n          <NavLink to=\"/transfers\">\n            <span>Transfer</span>\n          </NavLink>\n        </li>\n        <li tabIndex={0}>\n          <NavLink to=\"/tributes\">\n            <span>Tribute</span>\n          </NavLink>\n        </li>\n      </ul>\n    </nav>\n  );\n}\n\nexport default function Nav() {\n  /**\n   * State\n   */\n\n  const [shouldShowMenuModal, setShouldShowMenuModal] = useState(false);\n  const [transitionStyles, setTransitionStyles] = useState<Record<string, any>>(\n    transitionOpeningStyles\n  );\n\n  /**\n   * Their hooks\n   */\n\n  const location = useLocation();\n  const history = useHistory();\n\n  /**\n   * Our hooks\n   */\n\n  const {account} = useWeb3Modal();\n\n  /**\n   * Variables\n   */\n\n  const isIndexPath = location.pathname === '/';\n\n  /**\n   * Functions\n   */\n\n  function handleMenuModalClose(close: boolean) {\n    // delay transition for closing\n    if (close) {\n      setShouldShowMenuModal(close);\n      setTransitionStyles(transitionOpeningStyles);\n    } else {\n      setTransitionStyles(transitionClosingStyles);\n      const closeMenu = setTimeout(() => setShouldShowMenuModal(close), 500);\n      return () => clearTimeout(closeMenu);\n    }\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <>\n      <Media query=\"(max-width: 62em)\">\n        {(matches: boolean) => (\n          <div className=\"nav-header\">\n            <div className=\"nav-header__menu-container\">\n              {/* NAV */}\n              {!isIndexPath && <NavLinks />}\n\n              <div tabIndex={0} className=\"nav__hamburger-wrapper\">\n                <div\n                  className=\"nav__hamburger\"\n                  aria-label=\"Menu\"\n                  aria-controls=\"navigation\"\n                  onClick={(event) => {\n                    event.preventDefault();\n                    handleMenuModalClose(true);\n                  }}>\n                  <HamburgerSVG />\n                </div>\n              </div>\n              <div className=\"nav-header__walletconnect-button-container\">\n                <Web3ModalButton showWalletETHBadge />\n              </div>\n            </div>\n          </div>\n        )}\n      </Media>\n      {/** MODAL MENU */}\n      <ReactModal\n        ariaHideApp={false}\n        className=\"nav-modal-container\"\n        isOpen={shouldShowMenuModal}\n        onRequestClose={() => {\n          handleMenuModalClose(false);\n        }}\n        overlayClassName=\"nav-modal-overlay\"\n        role=\"dialog\"\n        style={{overlay: {zIndex: '99'}} as any}>\n        <Transition appear in={shouldShowMenuModal} timeout={duration}>\n          {(transition) => (\n            <nav role=\"navigation\" id=\"navigation\">\n              <div\n                style={{\n                  ...defaultStyle,\n                  ...transitionStyles[transition],\n                }}\n                className=\"nav-modal\">\n                <button\n                  className=\"modal__close-button modal__close-button--icon\"\n                  onClick={(event) => {\n                    event.preventDefault();\n                    handleMenuModalClose(false);\n                  }}>\n                  <TimesSVG />\n                </button>\n\n                <ModalLogo />\n\n                <div className=\"nav-modal__walletconnect-button-container\">\n                  <Web3ModalButton showWalletETHBadge />\n                  {/* @todo Display Join button only if user is not a member */}\n                  <button\n                    className=\"button\"\n                    onClick={() => {\n                      handleMenuModalClose(false);\n                      history.push('/join');\n                    }}>\n                    Join\n                  </button>\n                </div>\n                <ul className=\"nav__list\">\n                  <li\n                    onClick={() => {\n                      handleMenuModalClose(false);\n                    }}>\n                    <NavLink to=\"/membership\">\n                      <span>Membership</span>\n                    </NavLink>\n                  </li>\n                  <li\n                    onClick={() => {\n                      handleMenuModalClose(false);\n                    }}>\n                    <NavLink to=\"/governance-proposals\">\n                      <span>Governance</span>\n                    </NavLink>\n                  </li>\n                  <li\n                    onClick={() => {\n                      handleMenuModalClose(false);\n                    }}>\n                    <NavLink to=\"/transfers\">\n                      <span>Transfer</span>\n                    </NavLink>\n                  </li>\n                  <li\n                    onClick={() => {\n                      handleMenuModalClose(false);\n                    }}>\n                    <NavLink to=\"/tributes\">\n                      <span>Tribute</span>\n                    </NavLink>\n                  </li>\n                  <li\n                    onClick={() => {\n                      handleMenuModalClose(false);\n                    }}>\n                    {/* @todo Add docs link when it's ready */}\n                    {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\n                    <a href=\"#\" rel=\"noopener noreferrer\" target=\"_blank\">\n                      <span>Help</span>\n                    </a>\n                  </li>\n                  {/* @todo Display Profile link only if user is an active member */}\n                  {account && (\n                    <li\n                      className=\"link-separated\"\n                      onClick={() => {\n                        handleMenuModalClose(false);\n                      }}>\n                      <NavLink to={`/members/${account}`}>\n                        <span>Profile</span>\n                      </NavLink>\n                    </li>\n                  )}\n                </ul>\n              </div>\n            </nav>\n          )}\n        </Transition>\n      </ReactModal>\n    </>\n  );\n}\n","import React from 'react';\nimport {Link, useLocation} from 'react-router-dom';\n\nimport {LeftLogo} from './logo';\nimport Nav from './Nav';\n\nexport default function Header() {\n  /**\n   * Variables\n   */\n\n  const location = useLocation();\n  const isIndexPath = location.pathname === '/';\n\n  /**\n   * Functions\n   */\n\n  // Don't display header if we're on the index page\n  if (isIndexPath) return null;\n\n  // Render the location with a link\n  function RenderLogo(props: React.PropsWithChildren<any>) {\n    return <Link to=\"/\">{props.children}</Link>;\n  }\n\n  return (\n    <>\n      <header className=\"header\">\n        <RenderLogo>\n          <LeftLogo />\n        </RenderLogo>\n\n        <div className=\"header__nav-container\">\n          <Nav />\n        </div>\n      </header>\n    </>\n  );\n}\n","import React from 'react';\nimport {Helmet} from 'react-helmet';\n\nexport default function Head() {\n  return (\n    <Helmet>\n      <title>MOLOCH v3</title>\n      <meta\n        name=\"description\"\n        content=\"A modular DAO framework developed and coordinated by its members\"\n      />\n    </Helmet>\n  );\n}\n","import React, {ReactNode} from 'react';\n\ninterface WrapProps {\n  children: ReactNode;\n  className?: string;\n}\n\nconst Wrap = ({\n  children,\n  ...rest\n}: WrapProps & React.HTMLAttributes<HTMLDivElement>) => (\n  <div style={{position: 'relative'}} {...rest}>\n    {children}\n  </div>\n);\n\nexport default Wrap;\n","import React, {useEffect} from 'react';\nimport {useHistory} from 'react-router-dom';\nimport AOS from 'aos';\nimport '../../../node_modules/aos/dist/aos.css';\n\nimport {CenterLogo} from '../../components/logo';\nimport {NavLinks} from '../../components/Nav';\nimport FadeIn from '../../components/common/FadeIn';\nimport Wrap from '../../components/common/Wrap';\n\nconst MolochV3Cube = React.memo(() => {\n  return (\n    <div\n      className=\"cube\"\n      data-testid=\"cube\"\n      data-aos=\"fade-up\"\n      data-aos-delay=\"150\">\n      <div className=\"cube__segment--top\"></div>\n      <div className=\"cube__segment--left\"></div>\n      <div className=\"cube__segment--right\"></div>\n    </div>\n  );\n});\n\nexport default function GetStarted() {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    AOS.init({\n      duration: 800,\n      offset: 40,\n      delay: 120,\n      mirror: false,\n      once: true,\n    });\n  }, []);\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <header className=\"header\">\n          <CenterLogo />\n        </header>\n\n        <div className=\"landing\">\n          <div className=\"landing__subtitle\">\n            <p>For the ongoing development of Moloch v3</p>\n          </div>\n\n          <div className=\"landing__img\">\n            <MolochV3Cube />\n          </div>\n\n          <div className=\"landing__button\">\n            {/* @todo Display Join button only if user is not a member */}\n            <button\n              className=\"button\"\n              onClick={() => {\n                history.push('/join');\n              }}>\n              Join\n            </button>\n          </div>\n\n          <div className=\"landing__navlinks\">\n            <NavLinks />\n          </div>\n        </div>\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import Web3 from 'web3';\n\nexport const isEthAddressValid = (ethAddress: string) =>\n  Web3.utils.isAddress(ethAddress);\n","import React from 'react';\n\nimport FadeIn from './FadeIn';\n\ntype InputErrorProps = {\n  error: string;\n};\n\nexport default function InputError(\n  props: InputErrorProps & React.HtmlHTMLAttributes<HTMLParagraphElement>\n) {\n  const {error, ...restProps} = props;\n\n  return (\n    <>\n      {error && (\n        <FadeIn>\n          <p\n            {...restProps}\n            className={`error-message ${restProps.className || ''}`}>\n            {error}\n          </p>\n        </FadeIn>\n      )}\n    </>\n  );\n}\n","import React, {useState, useCallback, useEffect} from 'react';\nimport {SnapshotType} from '@openlaw/snapshot-js-erc712';\nimport {useForm} from 'react-hook-form';\nimport {useSelector} from 'react-redux';\nimport Web3 from 'web3';\n\nimport {\n  getValidationError,\n  stripFormatNumber,\n  formatNumber,\n  formatDecimal,\n} from '../../util/helpers';\nimport {\n  useContractSend,\n  useETHGasPrice,\n  useIsDefaultChain,\n} from '../../components/web3/hooks';\nimport {ContractAdapterNames, Web3TxStatus} from '../../components/web3/types';\nimport {FormFieldErrors} from '../../util/enums';\nimport {isEthAddressValid} from '../../util/validation';\nimport {MetaMaskRPCError} from '../../util/types';\nimport {SHARES_ADDRESS} from '../../config';\nimport {StoreState} from '../../store/types';\nimport {TX_CYCLE_MESSAGES} from '../../components/web3/config';\nimport {useHistory} from 'react-router-dom';\nimport {useSignAndSubmitProposal} from '../../components/proposals/hooks';\nimport {useWeb3Modal} from '../../components/web3/hooks';\nimport CycleMessage from '../../components/feedback/CycleMessage';\nimport ErrorMessageWithDetails from '../../components/common/ErrorMessageWithDetails';\nimport FadeIn from '../../components/common/FadeIn';\nimport InputError from '../../components/common/InputError';\nimport Loader from '../../components/feedback/Loader';\nimport Wrap from '../../components/common/Wrap';\nimport EtherscanURL from '../../components/web3/EtherscanURL';\n\nenum Fields {\n  ethAddress = 'ethAddress',\n  ethAmount = 'ethAmount',\n}\n\ntype FormInputs = {\n  ethAddress: string;\n  ethAmount: string;\n};\n\ntype OnboardArguments = [\n  string, // `dao`\n  string, // `proposalId`\n  string, // `applicant`\n  string, // `tokenToMint`\n  string // `tokenAmount`\n];\n\ntype UserAccountBalance = {\n  wei: string;\n  eth: string;\n};\n\nexport default function CreateMembershipProposal() {\n  /**\n   * Selectors\n   */\n\n  const OnboardingContract = useSelector(\n    (state: StoreState) => state.contracts?.OnboardingContract\n  );\n  const DaoRegistryContract = useSelector(\n    (state: StoreState) => state.contracts?.DaoRegistryContract\n  );\n\n  /**\n   * Hooks\n   */\n\n  const {defaultChainError} = useIsDefaultChain();\n  const {connected, account, web3Instance} = useWeb3Modal();\n  const gasPrices = useETHGasPrice();\n  const {\n    txError,\n    txEtherscanURL,\n    txIsPromptOpen,\n    txSend,\n    txStatus,\n  } = useContractSend();\n\n  const {\n    proposalData,\n    proposalSignAndSendStatus,\n    signAndSendProposal,\n  } = useSignAndSubmitProposal<SnapshotType.draft>();\n\n  /**\n   * Their hooks\n   */\n\n  const form = useForm<FormInputs>({\n    mode: 'onBlur',\n    reValidateMode: 'onChange',\n  });\n  const history = useHistory();\n\n  /**\n   * State\n   */\n\n  const [submitError, setSubmitError] = useState<Error>();\n  const [\n    userAccountBalance,\n    setUserAccountBalance,\n  ] = useState<UserAccountBalance>();\n\n  /**\n   * Variables\n   */\n\n  const {\n    errors,\n    formState,\n    getValues,\n    setValue,\n    register,\n    triggerValidation,\n  } = form;\n\n  const createMemberError = submitError || txError;\n  const isConnected = connected && account;\n\n  /**\n   * @note From the docs: \"Read the formState before render to subscribe the form state through Proxy\"\n   * @see https://react-hook-form.com/api#formState\n   */\n  const {isValid} = formState;\n\n  const isInProcess =\n    txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    txStatus === Web3TxStatus.PENDING ||\n    proposalSignAndSendStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    proposalSignAndSendStatus === Web3TxStatus.PENDING;\n\n  const isDone =\n    txStatus === Web3TxStatus.FULFILLED &&\n    proposalSignAndSendStatus === Web3TxStatus.FULFILLED;\n\n  const isInProcessOrDone = isInProcess || isDone || txIsPromptOpen;\n\n  /**\n   * Cached callbacks\n   */\n\n  const getUserAccountBalanceCached = useCallback(getUserAccountBalance, [\n    account,\n    web3Instance,\n  ]);\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    getUserAccountBalanceCached();\n  }, [getUserAccountBalanceCached]);\n\n  // Set the value of `ethAddress` if the `account` changes\n  useEffect(() => {\n    setValue(Fields.ethAddress, account);\n  }, [account, setValue]);\n\n  /**\n   * Functions\n   */\n\n  async function getUserAccountBalance() {\n    if (!web3Instance || !account) {\n      setUserAccountBalance(undefined);\n      return;\n    }\n\n    try {\n      // Ether wallet balance\n      const accountBalanceInWei = await web3Instance.eth.getBalance(account);\n      setUserAccountBalance({\n        wei: accountBalanceInWei,\n        eth: web3Instance.utils.fromWei(accountBalanceInWei),\n      });\n    } catch (error) {\n      setUserAccountBalance(undefined);\n    }\n  }\n\n  async function handleSubmit(values: FormInputs) {\n    try {\n      if (!isConnected) {\n        throw new Error(\n          'No user account was found. Please makes sure your wallet is connected.'\n        );\n      }\n\n      if (!OnboardingContract) {\n        throw new Error('No OnboardingContract found.');\n      }\n\n      if (!DaoRegistryContract) {\n        throw new Error('No DaoRegistryContract found.');\n      }\n\n      if (!account) {\n        throw new Error('No account found.');\n      }\n\n      // Maybe set proposal ID from previous attempt\n      let proposalId: string = proposalData?.uniqueId || '';\n\n      const {ethAddress, ethAmount} = values;\n      const ethAmountInWei = Web3.utils.toWei(\n        stripFormatNumber(ethAmount),\n        'ether'\n      );\n\n      // Only submit to snapshot if there is not already a proposal ID returned from a previous attempt.\n      if (!proposalId) {\n        // Sign and submit draft for snapshot-hub\n        const {uniqueId} = await signAndSendProposal({\n          partialProposalData: {\n            name: ethAddress,\n            body: `Membership for ${ethAddress}.`,\n            metadata: {amountUnit: 'ETH'},\n          },\n          adapterName: ContractAdapterNames.onboarding,\n          type: SnapshotType.draft,\n        });\n\n        proposalId = uniqueId;\n      }\n\n      const onboardArguments: OnboardArguments = [\n        DaoRegistryContract.contractAddress,\n        proposalId,\n        ethAddress,\n        SHARES_ADDRESS,\n        ethAmountInWei,\n      ];\n\n      const txArguments = {\n        from: account || '',\n        value: ethAmountInWei,\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      // Execute contract call for `onboard`\n      await txSend(\n        'onboard',\n        OnboardingContract.instance.methods,\n        onboardArguments,\n        txArguments\n      );\n\n      // go to MemberDetails page for newly created member proposal\n      history.push(`/membership/${proposalId}`);\n    } catch (error) {\n      // Set any errors from Web3 utils or explicitly set above.\n      setSubmitError(error);\n    }\n  }\n\n  function renderSubmitStatus(): React.ReactNode {\n    // Either Snapshot or chain tx\n    if (\n      txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n      proposalSignAndSendStatus === Web3TxStatus.AWAITING_CONFIRM\n    ) {\n      return 'Awaiting your confirmation\\u2026';\n    }\n\n    // Only for chain tx\n    switch (txStatus) {\n      case Web3TxStatus.PENDING:\n        return (\n          <>\n            <CycleMessage\n              intervalMs={2000}\n              messages={TX_CYCLE_MESSAGES}\n              useFirstItemStart\n              render={(message) => {\n                return <FadeIn key={message}>{message}</FadeIn>;\n              }}\n            />\n\n            <EtherscanURL url={txEtherscanURL} isPending />\n          </>\n        );\n      case Web3TxStatus.FULFILLED:\n        return (\n          <>\n            <div>Proposal submitted!</div>\n\n            <EtherscanURL url={txEtherscanURL} />\n          </>\n        );\n      default:\n        return null;\n    }\n  }\n\n  /**\n   * Render\n   */\n\n  // Render wallet auth message if user is not connected\n  if (!isConnected) {\n    return (\n      <RenderWrapper>\n        <div className=\"form__description--unauthorized\">\n          <p>Connect your wallet to submit a member proposal.</p>\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render wrong network message if user is on wrong network\n  if (defaultChainError) {\n    return (\n      <RenderWrapper>\n        <div className=\"form__description--unauthorized\">\n          <p>{defaultChainError.message}</p>\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // @todo Consider adding check to see if user ethereum address is either\n  // already a member or has a pending member proposal.\n\n  return (\n    <RenderWrapper>\n      <form className=\"form\" onSubmit={(e) => e.preventDefault()}>\n        {/* ETH ADDRESS */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">Applicant Address</label>\n          <div className=\"form__input-row-fieldwrap\">\n            {/* @note We don't need the default value as it's handled in the useEffect above. */}\n            <input\n              aria-describedby={`error-${Fields.ethAddress}`}\n              aria-invalid={errors.ethAddress ? 'true' : 'false'}\n              name={Fields.ethAddress}\n              ref={register({\n                validate: (ethAddress: string): string | boolean => {\n                  return !ethAddress\n                    ? FormFieldErrors.REQUIRED\n                    : !isEthAddressValid(ethAddress)\n                    ? FormFieldErrors.INVALID_ETHEREUM_ADDRESS\n                    : true;\n                },\n              })}\n              type=\"text\"\n              disabled={isInProcessOrDone}\n            />\n\n            <InputError\n              error={getValidationError(Fields.ethAddress, errors)}\n              id={`error-${Fields.ethAddress}`}\n            />\n          </div>\n        </div>\n\n        {/* ETH AMOUNT */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">Amount</label>\n          <div className=\"form__input-row-fieldwrap--narrow\">\n            <div className=\"input__suffix-wrap\">\n              <input\n                className=\"input__suffix\"\n                aria-describedby={`error-${Fields.ethAmount}`}\n                aria-invalid={errors.ethAmount ? 'true' : 'false'}\n                name={Fields.ethAmount}\n                onChange={() =>\n                  setValue(\n                    Fields.ethAmount,\n                    formatNumber(getValues().ethAmount)\n                  )\n                }\n                ref={register({\n                  validate: (value: string): string | boolean => {\n                    const amount = Number(stripFormatNumber(value));\n\n                    return value === ''\n                      ? FormFieldErrors.REQUIRED\n                      : isNaN(amount)\n                      ? FormFieldErrors.INVALID_NUMBER\n                      : amount <= 0\n                      ? 'The value must be greater than 0 ETH.'\n                      : amount >= Number(userAccountBalance?.eth)\n                      ? 'Insufficient funds.'\n                      : true;\n                  },\n                })}\n                type=\"text\"\n                disabled={isInProcessOrDone}\n              />\n              <div className=\"input__suffix-item\">ETH</div>\n            </div>\n\n            <InputError\n              error={getValidationError(Fields.ethAmount, errors)}\n              id={`error-${Fields.ethAmount}`}\n            />\n          </div>\n          <div className=\"form__input-addon\">\n            available:{' '}\n            <span className=\"text-underline\">\n              {userAccountBalance\n                ? formatDecimal(Number(userAccountBalance.eth))\n                : '---'}{' '}\n              ETH\n            </span>\n          </div>\n        </div>\n\n        {/* SUBMIT */}\n        <button\n          className=\"button\"\n          disabled={isInProcessOrDone}\n          onClick={() => {\n            if (isInProcessOrDone) return;\n\n            if (!isValid) {\n              triggerValidation();\n              return;\n            }\n\n            handleSubmit(getValues());\n          }}\n          type=\"submit\">\n          {isInProcess ? <Loader /> : isDone ? 'Done' : 'Submit'}\n        </button>\n\n        {/* SUBMIT STATUS */}\n        <div className=\"form__submit-status-container\">\n          {isInProcessOrDone && renderSubmitStatus()}\n        </div>\n\n        {/* SUBMIT ERROR */}\n        {createMemberError &&\n          (createMemberError as MetaMaskRPCError).code !== 4001 && (\n            <div className=\"form__submit-error-container\">\n              <ErrorMessageWithDetails\n                renderText=\"Something went wrong while submitting the proposal.\"\n                error={createMemberError}\n              />\n            </div>\n          )}\n      </form>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Join</h2>\n        </div>\n\n        <div className=\"form-wrapper\">\n          <div className=\"form__description\">\n            <p>\n              Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla\n              consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut\n              lacus dictum fermentum vel tincidunt neque. Sed sed lacinia...\n            </p>\n          </div>\n\n          {/* RENDER CHILDREN */}\n          {props.children}\n        </div>\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import {FakeProposal} from './_mockData';\nimport {OffchainVotingStatus} from './voting';\n\ntype ProposalCardProps = {\n  buttonText?: string;\n  onClick: (proposalHash: string) => void;\n  proposal: FakeProposal; // placeholder prop\n  name: string;\n};\n\n/**\n * Shows a preview of a proposal's details\n *\n * @param {ProposalCardProps} props\n * @returns {JSX.Element}\n */\nexport default function ProposalCard(props: ProposalCardProps): JSX.Element {\n  const {buttonText = 'View Proposal', proposal, onClick, name} = props;\n\n  /**\n   * Functions\n   */\n\n  function handleClick() {\n    const proposalHash = proposal.snapshotProposal.hash;\n\n    onClick(proposalHash);\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <div className=\"proposalcard\" onClick={handleClick}>\n      {/* TITLE */}\n      <h3 className=\"proposalcard__title\">{name}</h3>\n\n      {/* VOTING PROGRESS STATUS AND BAR */}\n      {/* @todo fix */}\n      <OffchainVotingStatus proposal={proposal as any} />\n\n      {/* BUTTON (no click handler) */}\n      <button className=\"proposalcard__button\">{buttonText}</button>\n    </div>\n  );\n}\n","// @todo delete this file when no longer needed. (Fake data needed for\n// placeholder components to render styles)\n\nexport type FakeProposal = {\n  snapshotProposal: {\n    hash: string;\n    name: string;\n    body: string;\n    start: number;\n    end: number;\n    yesShares: number;\n    noShares: number;\n  };\n};\n\nexport const fakeMembershipProposalsVoting: FakeProposal[] = [\n  {\n    snapshotProposal: {\n      hash: 'dc5abd65bacfe1fa2d1ad3dd8fdb213e902c3b63a4f6b57c467e50dca1f913da',\n      name: '0xA089E0684BD87Be6e3F343e224Da191C500883Ec',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1612222285,\n      yesShares: 0,\n      noShares: 0,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: 'ffa6c0f8d1d992c9aa678340316c8246965ac07144291c04a4375be0324ebc27',\n      name: '0xE7deBE6565CD01b6152B345B689A15Eb710D21e6',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1612222285,\n      yesShares: 4500000,\n      noShares: 0,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: 'eec0cce4145d0b25c722ad182beec85de3959c475b1e4066552ec50717212769',\n      name: '0x80C6CF52720BeD578D3E446199516CB816F67e37',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1612222285,\n      yesShares: 0,\n      noShares: 3500000,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: '462b6c505af6061713f1a32c70fb6303040e7394d929d89a1c3cd1033eb5a605',\n      name: '0xE00BcCddD33E9578904570409E0283C0ef511472',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1612222285,\n      yesShares: 7000000,\n      noShares: 2500000,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: 'd137bfdd2e8ce83b5acc229827cfafaf32084ae253f2da974f931ef542b5bbfc',\n      name: '0x3D1AaFD15850544b358738c89afC4608F8351D2C',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1612222285,\n      yesShares: 3500000,\n      noShares: 5500000,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: '55af58ef30f602aa8e395dc41cc7e0598ea949e5730b1347d0fd0ebc02cb15ed',\n      name: '0x9b5D3d12055B7b70E839e12417a2B9cE5ED9965c',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1612222285,\n      yesShares: 5000000,\n      noShares: 5000000,\n    },\n  },\n];\n\nexport const fakeMembershipProposalsRequest: FakeProposal[] = [\n  {\n    snapshotProposal: {\n      hash: 'a28b59b9dce2132657c9db537f73063c01f33e04cc9ddf70ce61bfbc4690b16b',\n      name: '0xA089E0684BD87Be6e3F343e224Da191C500883Ec',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1613069882,\n      end: 1613415482,\n      yesShares: 0,\n      noShares: 0,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: '01f091d9e0e1bbe0201be6805ac174638cf2671fdcb8949691263ffa4c443b61',\n      name: '0xE7deBE6565CD01b6152B345B689A15Eb710D21e6',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1613069882,\n      end: 1613415482,\n      yesShares: 0,\n      noShares: 0,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: '1360b9d92677953e84ece64a0c0349b60b6c554f5f5e484b8731adca7f153318',\n      name: '0x80C6CF52720BeD578D3E446199516CB816F67e37',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1613069882,\n      end: 1613415482,\n      yesShares: 0,\n      noShares: 0,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: 'b4fcaf70b442fb5bf4a8d116f1b4eab4f8379be68e07bb8ba085043506a99fc2',\n      name: '0xE00BcCddD33E9578904570409E0283C0ef511472',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1613069882,\n      end: 1613415482,\n      yesShares: 0,\n      noShares: 0,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: '38745ec51d277636144fe6eac46c7378374bbfec2ead1265bbe5a76506313cb4',\n      name: '0x3D1AaFD15850544b358738c89afC4608F8351D2C',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1613069882,\n      end: 1613415482,\n      yesShares: 0,\n      noShares: 0,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: '244cc0016922eb37cf675e7d21e8ade6cc93ab435dcaa76cb1bd5beed5375ef4',\n      name: '0x9b5D3d12055B7b70E839e12417a2B9cE5ED9965c',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1613069882,\n      end: 1613415482,\n      yesShares: 0,\n      noShares: 0,\n    },\n  },\n];\n\nexport const fakeMembershipProposalsPassed: FakeProposal[] = [\n  {\n    snapshotProposal: {\n      hash: '3ba30491a6cf748cf3d0ecbb0961627bab8589eaef90726b0aa95f0839f95b44',\n      name: '0xc7B5d4391313E018F8BA1059E72659e306AA7276',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1610352716,\n      yesShares: 100000,\n      noShares: 0,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: 'f2bee4497f29ed36fda8fb04df71922e32f91f191a58689fd2ec0fa94a139202',\n      name: '0x9dA14D4F9789FA87A9A8cA3b8A309121F32f4dB3',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1610352716,\n      yesShares: 7000000,\n      noShares: 3000000,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: 'bf97fd71511f3505406a985f47cf901f89c22356817e7aefe0a4fc41f5b4edbc',\n      name: '0x273C63Cdd8Bb808550177d0b45De19cC763897E1',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1610352716,\n      yesShares: 5000000,\n      noShares: 2500000,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: 'a724f73ccb0cc9ae0edd8d80f6c75482534f0d3e3f1d7c27fbb17705ef7c61fb',\n      name: '0x88870d439b899a7A50D6d1371cAD5558608F366e',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1610352716,\n      yesShares: 7500000,\n      noShares: 2500000,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: '79a9b72c3ea3a3f1411a23f65f3f1d043ebf0bd6dbd3b6abe2f05423fd3e9013',\n      name: '0xbD63DB043c53f3C42c8D3Dd3AC17F31d7fcBF2Ab',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1610352716,\n      yesShares: 5500000,\n      noShares: 4500000,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: '44509e866a56482b8b3b2373cbe48d89cc0abff4a37626b5ff0e420fc5f3cc8d',\n      name: '0x9Ed4a0711DDF777084CC1623f6d8D4Ef9e328EF9',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1610352716,\n      yesShares: 10000000,\n      noShares: 0,\n    },\n  },\n];\n\nexport const fakeMembershipProposalsFailed: FakeProposal[] = [\n  {\n    snapshotProposal: {\n      hash: '1531a1656c7cb51414606bbe69795f0b9c7c624d3b74b539880e08eab6e5ad95',\n      name: '0xc7B5d4391313E018F8BA1059E72659e306AA7276',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1610352716,\n      yesShares: 0,\n      noShares: 100000,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: '0597d6387981ef338abfa8c801c8f07fe67377aaa9689619ed6a3128289d665c',\n      name: '0x9dA14D4F9789FA87A9A8cA3b8A309121F32f4dB3',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1610352716,\n      yesShares: 3000000,\n      noShares: 7000000,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: '7cedf63b766d881250e665da21bfb08944bbca56f04ac2ebcf9d37281fbada3b',\n      name: '0x273C63Cdd8Bb808550177d0b45De19cC763897E1',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1610352716,\n      yesShares: 2500000,\n      noShares: 5000000,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: 'b9f1d513670876b5af13534b30a14233c3371d3e58195c31086a47ef7d341fed',\n      name: '0x88870d439b899a7A50D6d1371cAD5558608F366e',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1610352716,\n      yesShares: 2500000,\n      noShares: 7500000,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: '05e5c09e12b2fe36cb4e4d6e4d7c7d23fc79f6e8d30e218d4b8f6a1be774b2c2',\n      name: '0xbD63DB043c53f3C42c8D3Dd3AC17F31d7fcBF2Ab',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1610352716,\n      yesShares: 4500000,\n      noShares: 5500000,\n    },\n  },\n  {\n    snapshotProposal: {\n      hash: '3fd0d42255683cd77fa2c8758f429094b2ece70e325c9f7e94728ed3c93155f4',\n      name: '0x9Ed4a0711DDF777084CC1623f6d8D4Ef9e328EF9',\n      body:\n        'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et',\n      start: 1610350810,\n      end: 1610352716,\n      yesShares: 0,\n      noShares: 10000000,\n    },\n  },\n];\n\nexport const fakeMembershipProposals = [\n  ...fakeMembershipProposalsVoting,\n  ...fakeMembershipProposalsRequest,\n  ...fakeMembershipProposalsPassed,\n  ...fakeMembershipProposalsFailed,\n];\n","import React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport {ProposalHeaderNames} from '../../util/enums';\nimport {truncateEthAddress} from '../../util/helpers';\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\nimport ProposalCard from '../../components/proposals/ProposalCard';\nimport {\n  fakeMembershipProposalsVoting,\n  fakeMembershipProposalsRequest,\n  fakeMembershipProposalsPassed,\n  fakeMembershipProposalsFailed,\n  FakeProposal,\n} from '../../components/proposals/_mockData';\n\nexport default function Membership() {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Variables\n   */\n\n  const votingProposals = renderProposalCards(fakeMembershipProposalsVoting);\n  const requestProposals = renderProposalCards(fakeMembershipProposalsRequest);\n  const passedProposals = renderProposalCards(fakeMembershipProposalsPassed);\n  const failedProposals = renderProposalCards(fakeMembershipProposalsFailed);\n\n  /**\n   * Functions\n   */\n\n  function renderProposalCards(proposals: FakeProposal[]) {\n    return proposals.map((proposal) => {\n      return (\n        <ProposalCard\n          key={proposal.snapshotProposal.hash}\n          onClick={handleClickProposalDetails(proposal.snapshotProposal.hash)}\n          proposal={proposal}\n          name={truncateEthAddress(proposal.snapshotProposal.name, 7)}\n        />\n      );\n    });\n  }\n\n  function handleClickProposalDetails(proposalHash: string) {\n    return () => {\n      if (!proposalHash) return;\n\n      history.push(`/membership/${proposalHash}`);\n    };\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div className=\"grid--fluid grid-container\">\n        {/* VOTING PROPOSALS */}\n        {votingProposals.length > 0 && (\n          <>\n            <div className=\"grid__header\">{ProposalHeaderNames.VOTING}</div>\n            <div className=\"grid__cards\">{votingProposals}</div>\n          </>\n        )}\n\n        {/* PENDING PROPOSALS (DRAFTS, NOT SPONSORED) */}\n        {requestProposals.length > 0 && (\n          <>\n            <div className=\"grid__header\">{ProposalHeaderNames.REQUESTS}</div>\n            <div className=\"grid__cards\">{requestProposals}</div>\n          </>\n        )}\n\n        {/* PASSED PROPOSALS */}\n        {passedProposals.length > 0 && (\n          <>\n            <div className=\"grid__header\">{ProposalHeaderNames.PASSED}</div>\n            <div className=\"grid__cards\">{passedProposals}</div>\n          </>\n        )}\n\n        {/* FAILED PROPOSALS */}\n        {failedProposals.length > 0 && (\n          <>\n            <div className=\"grid__header\">{ProposalHeaderNames.FAILED}</div>\n            <div className=\"grid__cards\">{failedProposals}</div>\n          </>\n        )}\n      </div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function viewMembers(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    history.push('/members');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Membership</h2>\n          <button className=\"titlebar__action\" onClick={viewMembers}>\n            View members\n          </button>\n        </div>\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\n\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n\nexport default function NotFound() {\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div style={{textAlign: 'center', fontSize: '5rem'}}>\n          <h3>\n            4\n            <span\n              className=\"pulse\"\n              role=\"img\"\n              aria-label=\"404, not found\"\n              style={{display: 'inline-block'}}>\n              \n            </span>\n            4\n          </h3>\n        </div>\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import {lazy, Suspense} from 'react';\nimport {useSelector} from 'react-redux';\n\nimport {ContractAdapterNames} from '../web3/types';\nimport {CycleEllipsis} from '../feedback';\nimport {ProposalData} from './types';\nimport {StoreState} from '../../store/types';\nimport {VotingAdapterName} from '../adpaters/enums';\nimport ErrorMessageWithDetails from '../common/ErrorMessageWithDetails';\n\ntype ProposalActionsProps = {\n  adapterName: ContractAdapterNames;\n  proposal: ProposalData;\n};\n\n/**\n * Lazy load action component tree\n */\nconst ProposalWithOffchainVoteActions = lazy(\n  () => import('./ProposalWithOffchainVoteActions')\n);\n\nconst fadeInProps = {duration: 150};\nconst cycleEllipsisStyles = {\n  display: 'inline-block',\n  width: '100%',\n  fontSize: '1.5rem',\n};\n\nexport default function ProposalActions(\n  props: ProposalActionsProps\n): JSX.Element {\n  const {adapterName, proposal} = props;\n\n  const votingAdapterName = useSelector(\n    (s: StoreState) => s.contracts.VotingContract?.adapterName\n  );\n\n  function renderActions() {\n    if (!votingAdapterName) {\n      return <></>;\n    }\n\n    switch (votingAdapterName) {\n      case VotingAdapterName.OffchainVotingContract:\n        return (\n          <ProposalWithOffchainVoteActions\n            adapterName={adapterName}\n            proposal={proposal}\n          />\n        );\n      // @todo On-chain Voting\n      // case VotingAdapterName.VotingContract:\n      //   return <></>\n      default:\n        const error = new Error(\n          `\"${votingAdapterName}\" is not a valid voting adapter name.`\n        );\n\n        return (\n          <ErrorMessageWithDetails\n            error={error}\n            renderText=\"Something went wrong\"\n          />\n        );\n    }\n  }\n\n  return (\n    <Suspense\n      fallback={\n        <span className=\"text-center\" style={cycleEllipsisStyles}>\n          <CycleEllipsis intervalMs={200} fadeInProps={fadeInProps} />\n        </span>\n      }>\n      {renderActions()}\n    </Suspense>\n  );\n}\n","type ProposalAmountProps = {\n  /**\n   * Amount in WEI\n   */\n  amount: string;\n  amountUnit: string;\n  amount2?: string;\n  amount2Unit?: string;\n};\n\nexport default function ProposalAmount(props: ProposalAmountProps) {\n  const {amount, amountUnit, amount2, amount2Unit} = props;\n\n  /**\n   * Render\n   */\n\n  return (\n    <div className=\"proposaldetails__amount\">\n      <span>\n        {`${amount} ${amountUnit}`}\n        {/* assumes second amount is value requested from the DAO */}\n        {amount2 && (\n          <>\n            <br />\n            <small>for</small>\n            <br />\n            {`${amount2} ${amount2Unit}`}\n          </>\n        )}\n      </span>\n    </div>\n  );\n}\n","import {ProposalData} from './types';\n\nimport {truncateEthAddress} from '../../util/helpers';\n\ntype ProposalDetailsProps = {\n  proposal: ProposalData;\n  /**\n   * A render prop to render amount(s) badge.\n   */\n  renderAmountBadge?: () => React.ReactNode;\n  /**\n   * A render prop to render any action button flows for a proposal.\n   */\n  renderActions: () => React.ReactNode;\n};\n\nexport default function ProposalDetails(props: ProposalDetailsProps) {\n  const {proposal, renderAmountBadge, renderActions} = props;\n\n  const commonData = proposal.getCommonSnapshotProposalData();\n\n  /**\n   * Render\n   */\n\n  if (!commonData) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className=\"proposaldetails__header\">Proposal Details</div>\n      <div className=\"proposaldetails\">\n        {/* PROPOSAL NAME (address) AND BODY */}\n        <div className=\"proposaldetails__content\">\n          <h3>{truncateEthAddress(commonData.msg.payload.name || '', 7)}</h3>\n\n          <p>{commonData.msg.payload.body}</p>\n        </div>\n\n        {/* SIDEBAR */}\n        <div className=\"proposaldetails__status\">\n          {/* AMOUNT(S) IF RELEVANT FOR PROPOSAL */}\n          {renderAmountBadge && renderAmountBadge()}\n\n          {/* SPONSOR & VOTING ACTIONS */}\n          {renderActions()}\n        </div>\n      </div>\n    </>\n  );\n}\n","import React from 'react';\nimport {useHistory, useParams} from 'react-router-dom';\nimport Web3 from 'web3';\n\nimport {AsyncStatus} from '../../util/types';\nimport {ContractAdapterNames} from '../../components/web3/types';\nimport {formatDecimal} from '../../util/helpers';\nimport {useProposalOrDraft} from '../../components/proposals/hooks';\nimport ErrorMessageWithDetails from '../../components/common/ErrorMessageWithDetails';\nimport FadeIn from '../../components/common/FadeIn';\nimport LoaderWithEmoji from '../../components/feedback/LoaderWithEmoji';\nimport NotFound from '../subpages/NotFound';\nimport ProposalActions from '../../components/proposals/ProposalActions';\nimport ProposalAmount from '../../components/proposals/ProposalAmount';\nimport ProposalDetails from '../../components/proposals/ProposalDetails';\nimport Wrap from '../../components/common/Wrap';\n\nexport default function MembershipDetails() {\n  /**\n   * @todo\n   *\n   * 1. Fetch proposal by ID from the subgraph.\n   * 2. Determine if sponsored\n   * 3. Get Snapshot data\n   *   3.1 If sponsored, get data about proposal from Snapshot (use flag to also search by draft hash).\n   *   3.2 If not sponsored, get data about draft from Snapshot.\n   */\n\n  /**\n   * Their hooks\n   */\n\n  // Get hash for fetching the proposal.\n  const {proposalId} = useParams<{proposalId: string}>();\n\n  /**\n   * @todo Get subgraph proposal and determine if it has been sponsored\n   *   so we know how to search snapshot-hub.\n   */\n\n  // ...\n\n  /**\n   * Our hooks\n   */\n\n  // @todo Use dynamic `SnapshotType` depending on subgraph data for `type` arg.\n  const {\n    proposalData,\n    proposalError,\n    proposalNotFound,\n    proposalStatus,\n  } = useProposalOrDraft(proposalId);\n\n  /**\n   * Render\n   */\n\n  // Render loading\n  if (proposalStatus === AsyncStatus.PENDING) {\n    return (\n      <RenderWrapper>\n        <div style={{width: '3rem', margin: '0 auto'}}>\n          <LoaderWithEmoji />\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render 404 no proposal found\n  if (proposalNotFound) {\n    return (\n      <RenderWrapper>\n        <NotFound />\n      </RenderWrapper>\n    );\n  }\n\n  // Render error\n  if (proposalStatus === AsyncStatus.REJECTED || proposalError) {\n    return (\n      <RenderWrapper>\n        <div className=\"text-center\">\n          <ErrorMessageWithDetails\n            error={proposalError}\n            renderText=\"Something went wrong.\"\n          />\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render proposal\n  if (proposalData) {\n    const {daoProposal} = proposalData;\n    const commonData = proposalData.getCommonSnapshotProposalData();\n\n    // @todo use amount from proposal.subgraphproposal\n    let amount = '\\u2026';\n    try {\n      amount = formatDecimal(\n        Number(Web3.utils.fromWei(daoProposal?.amount, 'ether'))\n      );\n    } catch (error) {\n      amount = '\\u2026';\n    }\n\n    return (\n      <RenderWrapper>\n        <ProposalDetails\n          proposal={proposalData}\n          renderAmountBadge={() => (\n            <ProposalAmount\n              amount={amount}\n              amountUnit={commonData?.msg.payload.metadata.amountUnit}\n            />\n          )}\n          renderActions={() => (\n            <ProposalActions\n              adapterName={ContractAdapterNames.onboarding}\n              proposal={proposalData}\n            />\n          )}\n        />\n      </RenderWrapper>\n    );\n  }\n\n  // Render nothing. Should never reach this case.\n  return <></>;\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function goToAll(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n\n    history.push('/membership');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Membership</h2>\n          <button className=\"titlebar__action\" onClick={goToAll}>\n            View all\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\n\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n\nexport default function CreateTransferProposal() {\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div>CreateTransferProposal @todo</div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Transfer Proposal</h2>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n\nexport default function Transfers() {\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div>Transfers @todo</div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function goToNewProposal(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    history.push('/transfer');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Transfers</h2>\n          <button className=\"titlebar__action\" onClick={goToNewProposal}>\n            Make Transfer\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n\nexport default function TransferDetails() {\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div>TransferDetails @todo</div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function viewAll(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    history.push('/transfers');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Transfers</h2>\n          <button className=\"titlebar__action\" onClick={viewAll}>\n            View all\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React, {useState, useCallback, useEffect} from 'react';\nimport {SnapshotType} from '@openlaw/snapshot-js-erc712';\nimport {useForm} from 'react-hook-form';\nimport {useSelector} from 'react-redux';\nimport {Link} from 'react-router-dom';\nimport {Contract as Web3Contract} from 'web3-eth-contract/types';\nimport {toBN, AbiItem} from 'web3-utils';\n\nimport {\n  getValidationError,\n  stripFormatNumber,\n  formatNumber,\n  formatDecimal,\n} from '../../util/helpers';\nimport {\n  useContractSend,\n  useETHGasPrice,\n  useIsDefaultChain,\n} from '../../components/web3/hooks';\nimport {ContractAdapterNames, Web3TxStatus} from '../../components/web3/types';\nimport {FormFieldErrors} from '../../util/enums';\nimport {isEthAddressValid} from '../../util/validation';\nimport {MetaMaskRPCError} from '../../util/types';\nimport {truncateEthAddress} from '../../util/helpers';\nimport {SHARES_ADDRESS} from '../../config';\nimport {StoreState} from '../../store/types';\nimport {TX_CYCLE_MESSAGES} from '../../components/web3/config';\nimport {useHistory} from 'react-router-dom';\nimport {useSignAndSubmitProposal} from '../../components/proposals/hooks';\nimport {useWeb3Modal} from '../../components/web3/hooks';\nimport CycleMessage from '../../components/feedback/CycleMessage';\nimport ErrorMessageWithDetails from '../../components/common/ErrorMessageWithDetails';\nimport FadeIn from '../../components/common/FadeIn';\nimport InputError from '../../components/common/InputError';\nimport Loader from '../../components/feedback/Loader';\nimport Wrap from '../../components/common/Wrap';\nimport EtherscanURL from '../../components/web3/EtherscanURL';\n\nenum Fields {\n  applicantAddress = 'applicantAddress',\n  erc20Address = 'erc20Address',\n  tributeAmount = 'tributeAmount',\n  requestAmount = 'requestAmount',\n  description = 'description',\n}\n\ntype FormInputs = {\n  applicantAddress: string;\n  erc20Address: string;\n  tributeAmount: string;\n  requestAmount: string;\n  description: string;\n};\n\ntype TributeArguments = [\n  string, // `dao`\n  string, // `proposalId`\n  string, // `applicant`\n  string, // `tokenToMint`\n  string, // `requestAmount`\n  string, // `tokenAddr`\n  string // `tributeAmount`\n];\n\ntype TokenApproveArguments = [\n  string, // `spender`\n  string // `value`\n];\n\ntype ERC20Details = {\n  symbol: string;\n  decimals: number;\n};\n\ntype BN = ReturnType<typeof toBN>;\n\nexport default function CreateTributeProposal() {\n  /**\n   * Selectors\n   */\n\n  const TributeContract = useSelector(\n    (state: StoreState) => state.contracts?.TributeContract\n  );\n  const DaoRegistryContract = useSelector(\n    (state: StoreState) => state.contracts?.DaoRegistryContract\n  );\n\n  /**\n   * Hooks\n   */\n\n  const {defaultChainError} = useIsDefaultChain();\n  const {connected, account, web3Instance} = useWeb3Modal();\n  const gasPrices = useETHGasPrice();\n  const {\n    txError,\n    txEtherscanURL,\n    txIsPromptOpen,\n    txSend,\n    txStatus,\n  } = useContractSend();\n  const {\n    txError: txErrorTokenApprove,\n    txEtherscanURL: txEtherscanURLTokenApprove,\n    txIsPromptOpen: txIsPromptOpenTokenApprove,\n    txSend: txSendTokenApprove,\n    txStatus: txStatusTokenApprove,\n  } = useContractSend();\n\n  const {\n    proposalData,\n    proposalSignAndSendStatus,\n    signAndSendProposal,\n  } = useSignAndSubmitProposal<SnapshotType.draft>();\n\n  /**\n   * Their hooks\n   */\n\n  const form = useForm<FormInputs>({\n    mode: 'onBlur',\n    reValidateMode: 'onChange',\n  });\n  const history = useHistory();\n\n  /**\n   * State\n   */\n\n  const [submitError, setSubmitError] = useState<Error>();\n  const [userERC20Balance, setUserERC20Balance] = useState<string>();\n  const [erc20Details, setERC20Details] = useState<ERC20Details>();\n  const [erc20Contract, setERC20Contract] = useState<Web3Contract>();\n\n  /**\n   * Variables\n   */\n\n  const {\n    errors,\n    formState,\n    getValues,\n    setValue,\n    register,\n    triggerValidation,\n  } = form;\n  const erc20AddressValue = getValues().erc20Address;\n\n  const createTributeError = submitError || txError || txErrorTokenApprove;\n  const isConnected = connected && account;\n\n  /**\n   * @note From the docs: \"Read the formState before render to subscribe the form state through Proxy\"\n   * @see https://react-hook-form.com/api#formState\n   */\n  const {isValid} = formState;\n\n  const isInProcess =\n    txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    txStatus === Web3TxStatus.PENDING ||\n    txStatusTokenApprove === Web3TxStatus.AWAITING_CONFIRM ||\n    txStatusTokenApprove === Web3TxStatus.PENDING ||\n    proposalSignAndSendStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    proposalSignAndSendStatus === Web3TxStatus.PENDING;\n\n  const isDone =\n    txStatus === Web3TxStatus.FULFILLED &&\n    proposalSignAndSendStatus === Web3TxStatus.FULFILLED;\n\n  const isInProcessOrDone =\n    isInProcess || isDone || txIsPromptOpen || txIsPromptOpenTokenApprove;\n\n  /**\n   * Cached callbacks\n   */\n\n  const getERC20ContractCached = useCallback(getERC20Contract, [\n    erc20AddressValue,\n    web3Instance,\n  ]);\n\n  const getERC20DetailsCached = useCallback(getERC20Details, [\n    account,\n    erc20Contract,\n  ]);\n\n  const getUserERC20BalanceCached = useCallback(getUserERC20Balance, [\n    account,\n    erc20Contract,\n  ]);\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    getERC20ContractCached();\n  }, [getERC20ContractCached]);\n\n  useEffect(() => {\n    getERC20DetailsCached();\n  }, [getERC20DetailsCached]);\n\n  useEffect(() => {\n    getUserERC20BalanceCached();\n  }, [getUserERC20BalanceCached]);\n\n  // Set the value of `applicantAddress` if the `account` changes\n  useEffect(() => {\n    setValue(Fields.applicantAddress, account);\n  }, [account, setValue]);\n\n  /**\n   * Functions\n   */\n\n  async function getERC20Contract() {\n    if (!web3Instance || !erc20AddressValue) {\n      setERC20Contract(undefined);\n      return;\n    }\n\n    try {\n      const {default: lazyERC20ABI} = await import(\n        '../../truffle-contracts/ERC20.json'\n      );\n      const erc20Contract: AbiItem[] = lazyERC20ABI as any;\n      const instance = new web3Instance.eth.Contract(\n        erc20Contract,\n        erc20AddressValue\n      );\n      setERC20Contract(instance);\n    } catch (error) {\n      console.error(error);\n      setERC20Contract(undefined);\n    }\n  }\n\n  async function getERC20Details() {\n    if (!account || !erc20Contract) {\n      setERC20Details(undefined);\n      return;\n    }\n\n    try {\n      const symbol = await erc20Contract.methods.symbol().call();\n      const decimals = await erc20Contract.methods.decimals().call();\n      setERC20Details({symbol, decimals: Number(decimals)});\n    } catch (error) {\n      console.error(error);\n      setERC20Details(undefined);\n    }\n  }\n\n  async function getUserERC20Balance() {\n    if (!account || !erc20Contract) {\n      setUserERC20Balance(undefined);\n      return;\n    }\n\n    try {\n      const balance = await erc20Contract.methods.balanceOf(account).call();\n      const balanceBN = toBN(balance);\n      const decimals = await erc20Contract.methods.decimals().call();\n      const divisor = toBN(10).pow(toBN(decimals));\n      const beforeDecimal = balanceBN.div(divisor);\n      const afterDecimal = balanceBN.mod(divisor);\n      const balanceReadable = afterDecimal.eq(toBN(0))\n        ? beforeDecimal.toString()\n        : `${beforeDecimal.toString()}.${afterDecimal.toString()}`;\n\n      setUserERC20Balance(balanceReadable);\n    } catch (error) {\n      console.error(error);\n      setUserERC20Balance(undefined);\n    }\n  }\n\n  async function handleSubmitTokenApprove(\n    tributeAmountWithDecimals: BN,\n    allowanceBN: BN\n  ) {\n    try {\n      if (!erc20Contract) {\n        throw new Error('No ERC20Contract found.');\n      }\n\n      if (!TributeContract) {\n        throw new Error('No TributeContract found.');\n      }\n\n      if (!account) {\n        throw new Error('No account found.');\n      }\n\n      const difference = tributeAmountWithDecimals.sub(allowanceBN);\n      const approveValue = allowanceBN.add(difference);\n      const tokenApproveArguments: TokenApproveArguments = [\n        TributeContract.contractAddress,\n        approveValue.toString(),\n      ];\n      const txArguments = {\n        from: account || '',\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      // Execute contract call for `approve`\n      await txSendTokenApprove(\n        'approve',\n        erc20Contract.methods,\n        tokenApproveArguments,\n        txArguments\n      );\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  async function handleSubmit(values: FormInputs) {\n    try {\n      if (!isConnected) {\n        throw new Error(\n          'No user account was found. Please makes sure your wallet is connected.'\n        );\n      }\n\n      if (!TributeContract) {\n        throw new Error('No TributeContract found.');\n      }\n\n      if (!DaoRegistryContract) {\n        throw new Error('No DaoRegistryContract found.');\n      }\n\n      if (!account) {\n        throw new Error('No account found.');\n      }\n\n      if (!erc20Contract) {\n        throw new Error('No ERC20Contract found.');\n      }\n\n      if (!erc20Details) {\n        throw new Error('No ERC20 details found.');\n      }\n\n      const {\n        applicantAddress,\n        erc20Address,\n        tributeAmount,\n        requestAmount,\n        description,\n      } = values;\n      const multiplier = toBN(10).pow(toBN(erc20Details.decimals));\n      const tributeAmountWithDecimals = toBN(\n        stripFormatNumber(tributeAmount)\n      ).mul(multiplier);\n      const requestAmountArg = stripFormatNumber(requestAmount);\n\n      // Check if adapter is allowed to spend amount of tribute tokens on behalf\n      // of user. If allowance is not sufficient, approve the adapter to spend\n      // the amount of tokens needed for the user to provide the full tribute\n      // amount.\n      const allowance = await erc20Contract.methods\n        .allowance(account, TributeContract.contractAddress)\n        .call();\n      const allowanceBN = toBN(allowance);\n\n      if (tributeAmountWithDecimals.gt(allowanceBN)) {\n        try {\n          await handleSubmitTokenApprove(\n            tributeAmountWithDecimals,\n            allowanceBN\n          );\n        } catch (error) {\n          console.error(error);\n          throw new Error(\n            'Your ERC20 tokens could not be approved for transfer.'\n          );\n        }\n      }\n\n      // Maybe set proposal ID from previous attempt\n      let proposalId: string = proposalData?.uniqueId || '';\n\n      // Only submit to snapshot if there is not already a proposal ID returned from a previous attempt.\n      if (!proposalId) {\n        const bodyIntro =\n          applicantAddress.toLowerCase() === account.toLowerCase()\n            ? `Tribute from ${applicantAddress}.`\n            : `Tribute from ${truncateEthAddress(\n                account,\n                7\n              )} for applicant ${truncateEthAddress(applicantAddress, 7)}.`;\n        const body = description ? `${bodyIntro}\\n${description}` : bodyIntro;\n\n        // Sign and submit draft for snapshot-hub\n        const {uniqueId} = await signAndSendProposal({\n          partialProposalData: {\n            name: applicantAddress,\n            body,\n            metadata: {\n              tributeAmountUnit: erc20Details.symbol,\n              tributeTokenDecimals: erc20Details.decimals,\n              requestAmountUnit: 'SHARES',\n            },\n          },\n          adapterName: ContractAdapterNames.tribute,\n          type: SnapshotType.draft,\n        });\n\n        proposalId = uniqueId;\n      }\n\n      const tributeArguments: TributeArguments = [\n        DaoRegistryContract.contractAddress,\n        proposalId,\n        applicantAddress,\n        SHARES_ADDRESS,\n        requestAmountArg,\n        erc20Address,\n        tributeAmountWithDecimals.toString(),\n      ];\n\n      const txArguments = {\n        from: account || '',\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      // Execute contract call for `provideTribute`\n      await txSend(\n        'provideTribute',\n        TributeContract.instance.methods,\n        tributeArguments,\n        txArguments\n      );\n\n      // go to TributeDetails page for newly created tribute proposal\n      history.push(`/tributes/${proposalId}`);\n    } catch (error) {\n      // Set any errors from Web3 utils or explicitly set above.\n      setSubmitError(error);\n    }\n  }\n\n  function renderSubmitStatus(): React.ReactNode {\n    // Either Snapshot or chain tx\n    if (\n      txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n      txStatusTokenApprove === Web3TxStatus.AWAITING_CONFIRM ||\n      proposalSignAndSendStatus === Web3TxStatus.AWAITING_CONFIRM\n    ) {\n      return 'Awaiting your confirmation\\u2026';\n    }\n\n    // If token approve transaction is confirmed\n    if (txStatusTokenApprove === Web3TxStatus.PENDING) {\n      return (\n        <>\n          <div>{'Approving your tokens for transfer\\u2026'}</div>\n\n          <EtherscanURL url={txEtherscanURLTokenApprove} isPending />\n        </>\n      );\n    }\n\n    // Only for chain tx\n    switch (txStatus) {\n      case Web3TxStatus.PENDING:\n        return (\n          <>\n            <CycleMessage\n              intervalMs={2000}\n              messages={TX_CYCLE_MESSAGES}\n              useFirstItemStart\n              render={(message) => {\n                return <FadeIn key={message}>{message}</FadeIn>;\n              }}\n            />\n\n            <EtherscanURL url={txEtherscanURL} isPending />\n          </>\n        );\n      case Web3TxStatus.FULFILLED:\n        return (\n          <>\n            <div>Proposal submitted!</div>\n\n            <EtherscanURL url={txEtherscanURL} />\n          </>\n        );\n      default:\n        return null;\n    }\n  }\n\n  function renderUserERC20Balance() {\n    if (!userERC20Balance) {\n      return '---';\n    }\n\n    const isBalanceInt = !userERC20Balance.includes('.');\n    return isBalanceInt\n      ? userERC20Balance\n      : formatDecimal(Number(userERC20Balance));\n  }\n\n  /**\n   * Render\n   */\n\n  // Render wallet auth message if user is not connected\n  if (!isConnected) {\n    return (\n      <RenderWrapper>\n        <div className=\"form__description--unauthorized\">\n          <p>Connect your wallet to submit a tribute proposal.</p>\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render wrong network message if user is on wrong network\n  if (defaultChainError) {\n    return (\n      <RenderWrapper>\n        <div className=\"form__description--unauthorized\">\n          <p>{defaultChainError.message}</p>\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  return (\n    <RenderWrapper>\n      <form className=\"form\" onSubmit={(e) => e.preventDefault()}>\n        {/* APPLICANT ADDRESS */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">Applicant Address</label>\n          <div className=\"form__input-row-fieldwrap\">\n            {/* @note We don't need the default value as it's handled in the useEffect above. */}\n            <input\n              aria-describedby={`error-${Fields.applicantAddress}`}\n              aria-invalid={errors.applicantAddress ? 'true' : 'false'}\n              name={Fields.applicantAddress}\n              ref={register({\n                validate: (applicantAddress: string): string | boolean => {\n                  return !applicantAddress\n                    ? FormFieldErrors.REQUIRED\n                    : !isEthAddressValid(applicantAddress)\n                    ? FormFieldErrors.INVALID_ETHEREUM_ADDRESS\n                    : true;\n                },\n              })}\n              type=\"text\"\n              disabled={isInProcessOrDone}\n            />\n\n            <InputError\n              error={getValidationError(Fields.applicantAddress, errors)}\n              id={`error-${Fields.applicantAddress}`}\n            />\n          </div>\n        </div>\n\n        {/* ERC20 ADDRESS */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">ERC20 Address</label>\n          <div className=\"form__input-row-fieldwrap\">\n            <input\n              aria-describedby={`error-${Fields.erc20Address}`}\n              aria-invalid={errors.erc20Address ? 'true' : 'false'}\n              name={Fields.erc20Address}\n              ref={register({\n                validate: (erc20Address: string): string | boolean => {\n                  return !erc20Address\n                    ? FormFieldErrors.REQUIRED\n                    : !isEthAddressValid(erc20Address)\n                    ? FormFieldErrors.INVALID_ETHEREUM_ADDRESS\n                    : true;\n                },\n              })}\n              type=\"text\"\n              disabled={isInProcessOrDone}\n            />\n\n            <InputError\n              error={getValidationError(Fields.erc20Address, errors)}\n              id={`error-${Fields.erc20Address}`}\n            />\n          </div>\n        </div>\n\n        {/* TRIBUTE AMOUNT */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">Amount</label>\n          <div className=\"form__input-row-fieldwrap--narrow\">\n            <div className=\"input__suffix-wrap\">\n              <input\n                className=\"input__suffix\"\n                aria-describedby={`error-${Fields.tributeAmount}`}\n                aria-invalid={errors.tributeAmount ? 'true' : 'false'}\n                name={Fields.tributeAmount}\n                onChange={() =>\n                  setValue(\n                    Fields.tributeAmount,\n                    formatNumber(getValues().tributeAmount)\n                  )\n                }\n                ref={register({\n                  validate: (tributeAmount: string): string | boolean => {\n                    const amount = Number(stripFormatNumber(tributeAmount));\n\n                    return tributeAmount === ''\n                      ? FormFieldErrors.REQUIRED\n                      : isNaN(amount)\n                      ? FormFieldErrors.INVALID_NUMBER\n                      : amount <= 0\n                      ? 'The value must be greater than 0.'\n                      : amount > Number(userERC20Balance)\n                      ? 'Insufficient funds.'\n                      : true;\n                  },\n                })}\n                type=\"text\"\n                disabled={isInProcessOrDone}\n              />\n\n              <div className=\"input__suffix-item\">\n                {erc20Details?.symbol || '___'}\n              </div>\n            </div>\n\n            <InputError\n              error={getValidationError(Fields.tributeAmount, errors)}\n              id={`error-${Fields.tributeAmount}`}\n            />\n\n            <div className=\"form__input-description\">\n              This amount will be held in escrow pending a member vote. If the\n              proposal is accepted, the funds will automatically be sent to the\n              DAO. If the proposal fails, the funds will be refunded to you.\n            </div>\n          </div>\n\n          <div className=\"form__input-addon\">\n            available:{' '}\n            <span className=\"text-underline\">{renderUserERC20Balance()}</span>\n          </div>\n        </div>\n\n        {/* REQUEST AMOUNT */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">Request Amount</label>\n          <div className=\"form__input-row-fieldwrap--narrow\">\n            <input\n              aria-describedby={`error-${Fields.requestAmount}`}\n              aria-invalid={errors.requestAmount ? 'true' : 'false'}\n              name={Fields.requestAmount}\n              onChange={() =>\n                setValue(\n                  Fields.requestAmount,\n                  formatNumber(getValues().requestAmount)\n                )\n              }\n              ref={register({\n                validate: (requestAmount: string): string | boolean => {\n                  const amount = Number(stripFormatNumber(requestAmount));\n\n                  return requestAmount === ''\n                    ? FormFieldErrors.REQUIRED\n                    : isNaN(amount)\n                    ? FormFieldErrors.INVALID_NUMBER\n                    : amount < 0\n                    ? 'The value must be at least 0.'\n                    : true;\n                },\n              })}\n              type=\"text\"\n              disabled={isInProcessOrDone}\n            />\n\n            <InputError\n              error={getValidationError(Fields.requestAmount, errors)}\n              id={`error-${Fields.requestAmount}`}\n            />\n\n            <div className=\"form__input-description\">\n              This is the amount of DAO tokens you are requesting be sent to the\n              Applicant Address in exchange for your tribute. Current member\n              allocations can be viewed{' '}\n              <Link to=\"/members\" target=\"_blank\" rel=\"noopener noreferrer\">\n                here\n              </Link>\n              .\n            </div>\n          </div>\n        </div>\n\n        {/* DESCRIPTION */}\n        <div className=\"form__textarea-row\">\n          <label className=\"form__input-row-label\">Description</label>\n          <div className=\"form__input-row-fieldwrap\">\n            <textarea\n              aria-describedby={`error-${Fields.description}`}\n              name={Fields.description}\n              placeholder=\"Say something about your tribute...\"\n              ref={register}\n            />\n          </div>\n        </div>\n\n        {/* SUBMIT */}\n        <button\n          className=\"button\"\n          disabled={isInProcessOrDone}\n          onClick={() => {\n            if (isInProcessOrDone) return;\n\n            if (!isValid) {\n              triggerValidation();\n              return;\n            }\n\n            handleSubmit(getValues());\n          }}\n          type=\"submit\">\n          {isInProcess ? <Loader /> : isDone ? 'Done' : 'Submit'}\n        </button>\n\n        {/* SUBMIT STATUS */}\n        <div className=\"form__submit-status-container\">\n          {isInProcessOrDone && renderSubmitStatus()}\n        </div>\n\n        {/* SUBMIT ERROR */}\n        {createTributeError &&\n          (createTributeError as MetaMaskRPCError).code !== 4001 && (\n            <div className=\"form__submit-error-container\">\n              <ErrorMessageWithDetails\n                renderText=\"Something went wrong while submitting the proposal.\"\n                error={createTributeError}\n              />\n            </div>\n          )}\n      </form>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Tribute Proposal</h2>\n        </div>\n\n        <div className=\"form-wrapper\">\n          <div className=\"form__description\">\n            <p>\n              Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla\n              consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut\n              lacus dictum fermentum vel tincidunt neque. Sed sed lacinia...\n            </p>\n          </div>\n\n          {/* RENDER CHILDREN */}\n          {props.children}\n        </div>\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n\nexport default function Tributes() {\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div>Tributes @todo</div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function goToNewProposal(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    history.push('/tribute');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Tributes</h2>\n          <button className=\"titlebar__action\" onClick={goToNewProposal}>\n            Provide Tribute\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {useHistory, useParams} from 'react-router-dom';\nimport {toBN} from 'web3-utils';\n\nimport {AsyncStatus} from '../../util/types';\nimport {ContractAdapterNames} from '../../components/web3/types';\nimport {formatDecimal, formatNumber} from '../../util/helpers';\nimport {useProposalOrDraft} from '../../components/proposals/hooks';\nimport ErrorMessageWithDetails from '../../components/common/ErrorMessageWithDetails';\nimport FadeIn from '../../components/common/FadeIn';\nimport LoaderWithEmoji from '../../components/feedback/LoaderWithEmoji';\nimport NotFound from '../subpages/NotFound';\nimport ProposalActions from '../../components/proposals/ProposalActions';\nimport ProposalAmount from '../../components/proposals/ProposalAmount';\nimport ProposalDetails from '../../components/proposals/ProposalDetails';\nimport Wrap from '../../components/common/Wrap';\n\nexport default function TributeDetails() {\n  /**\n   * @todo\n   *\n   * 1. Fetch proposal by ID from the subgraph.\n   * 2. Determine if sponsored\n   * 3. Get Snapshot data\n   *   3.1 If sponsored, get data about proposal from Snapshot (use flag to also search by draft hash).\n   *   3.2 If not sponsored, get data about draft from Snapshot.\n   */\n\n  /**\n   * Their hooks\n   */\n\n  // Get hash for fetching the proposal.\n  const {proposalId} = useParams<{proposalId: string}>();\n\n  /**\n   * @todo Get subgraph proposal and determine if it has been sponsored\n   *   so we know how to search snapshot-hub.\n   */\n\n  // ...\n\n  /**\n   * Our hooks\n   */\n\n  // @todo Use dynamic `SnapshotType` depending on subgraph data for `type` arg.\n  const {\n    proposalData,\n    proposalError,\n    proposalNotFound,\n    proposalStatus,\n  } = useProposalOrDraft(proposalId);\n\n  /**\n   * Render\n   */\n\n  // Render loading\n  if (proposalStatus === AsyncStatus.PENDING) {\n    return (\n      <RenderWrapper>\n        <div style={{width: '3rem', margin: '0 auto'}}>\n          <LoaderWithEmoji />\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render 404 no proposal found\n  if (proposalNotFound) {\n    return (\n      <RenderWrapper>\n        <NotFound />\n      </RenderWrapper>\n    );\n  }\n\n  // Render error\n  if (proposalStatus === AsyncStatus.REJECTED || proposalError) {\n    return (\n      <RenderWrapper>\n        <div className=\"text-center\">\n          <ErrorMessageWithDetails\n            error={proposalError}\n            renderText=\"Something went wrong.\"\n          />\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render proposal\n  if (proposalData) {\n    const {daoProposal} = proposalData;\n    const commonData = proposalData.getCommonSnapshotProposalData();\n\n    // @todo use amounts from proposal.subgraphproposal\n    let tributeAmount = '\\u2026';\n    try {\n      const divisor = toBN(10).pow(\n        toBN(commonData?.msg.payload.metadata.tributeTokenDecimals)\n      );\n      const beforeDecimal = toBN(daoProposal?.tributeAmount).div(divisor);\n      const afterDecimal = toBN(daoProposal?.tributeAmount).mod(divisor);\n      const balanceReadable = afterDecimal.eq(toBN(0))\n        ? beforeDecimal.toString()\n        : `${beforeDecimal.toString()}.${afterDecimal.toString()}`;\n      const isTributeAmountInt = !balanceReadable.includes('.');\n      tributeAmount = isTributeAmountInt\n        ? balanceReadable\n        : formatDecimal(Number(balanceReadable));\n    } catch (error) {\n      // Fallback gracefully to ellipsis\n    }\n\n    let requestAmount = '\\u2026';\n    try {\n      requestAmount = formatNumber(daoProposal?.requestAmount);\n    } catch (error) {\n      // Fallback gracefully to ellipsis\n    }\n\n    return (\n      <RenderWrapper>\n        <ProposalDetails\n          proposal={proposalData}\n          renderAmountBadge={() => (\n            <ProposalAmount\n              amount={tributeAmount}\n              amountUnit={commonData?.msg.payload.metadata.tributeAmountUnit}\n              amount2={requestAmount}\n              amount2Unit={commonData?.msg.payload.metadata.requestAmountUnit}\n            />\n          )}\n          renderActions={() => (\n            <ProposalActions\n              adapterName={ContractAdapterNames.tribute}\n              proposal={proposalData}\n            />\n          )}\n        />\n      </RenderWrapper>\n    );\n  }\n\n  // Render nothing. Should never reach this case.\n  return <></>;\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function goToAll(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n\n    history.push('/tributes');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Tributes</h2>\n          <button className=\"titlebar__action\" onClick={goToAll}>\n            View all\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\n\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n\nexport default function CreateGovernanceProposal() {\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div>CreateGovernanceProposal @todo</div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Governance Proposal</h2>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n\nexport default function GovernanceProposals() {\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div>GovernanceProposals @todo</div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function goToNewProposal(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    history.push('/governance-proposal');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Governance</h2>\n          <button className=\"titlebar__action\" onClick={goToNewProposal}>\n            New Proposal\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n\nexport default function GovernanceProposalDetails() {\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div>GovernanceProposalDetails @todo</div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function viewAll(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    history.push('/governance-proposals');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Governance</h2>\n          <button className=\"titlebar__action\" onClick={viewAll}>\n            View all\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import {FakeMember} from './_mockData';\n\ntype MemberCardProps = {\n  member: FakeMember; // placeholder prop\n  name: string;\n  onClick: (ethereumAddress: string) => void;\n};\n\n/**\n * Shows a preview of a members's profile\n *\n * @param {MemberCardProps} props\n * @returns {JSX.Element}\n */\nexport default function MemberCard(props: MemberCardProps): JSX.Element {\n  const {member, name, onClick} = props;\n\n  /**\n   * Functions\n   */\n\n  function handleClick() {\n    const ethereumAddress = member.address;\n\n    onClick(ethereumAddress);\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <div className=\"membercard\" onClick={handleClick}>\n      {/* TITLE */}\n      <h3 className=\"membercard__title\">{name}</h3>\n    </div>\n  );\n}\n","// @todo delete this file when no longer needed. (Fake data needed for\n// placeholder components to render styles)\n\nexport type FakeMember = {\n  address: string;\n};\n\nexport const fakeMembers: FakeMember[] = [\n  {\n    address: '0xd38f1A08f9894CE69Bdf796271dC9e4099fC5043',\n  },\n  {\n    address: '0x927A9928Fe2eD6415e4D7761314c3466C3dc78f9',\n  },\n  {\n    address: '0x2e4707940C2d65221ee352945f0551738BCd026E',\n  },\n  {\n    address: '0xF2603046726414C5Dd0B0AE07a842209010AfbC5',\n  },\n  {\n    address: '0x01410229072479e1e4d33490a7052439d7893ed6',\n  },\n  {\n    address: '0x69732A015EE3A371714C99CcF6291fF774638E77',\n  },\n];\n","import {useHistory} from 'react-router-dom';\n\nimport {truncateEthAddress} from '../../util/helpers';\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\nimport MemberCard from './MemberCard';\nimport {fakeMembers, FakeMember} from './_mockData';\n\nexport default function Members() {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Variables\n   */\n\n  const activeMembers = renderMemberCards(fakeMembers);\n\n  /**\n   * Functions\n   */\n\n  function renderMemberCards(members: FakeMember[]) {\n    return members.map((member) => {\n      return (\n        <MemberCard\n          key={member.address}\n          onClick={handleClickMemberProfile(member.address)}\n          member={member}\n          name={truncateEthAddress(member.address, 7)}\n        />\n      );\n    });\n  }\n\n  function handleClickMemberProfile(ethereumAddress: string) {\n    return () => {\n      if (!ethereumAddress) return;\n\n      history.push(`/members/${ethereumAddress}`);\n    };\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div className=\"grid--fluid grid-container\">\n        {/* ACTIVE MEMBERS */}\n        <>\n          <div className=\"grid__header\">Active Members</div>\n          <div className=\"grid__cards\">{activeMembers}</div>\n        </>\n      </div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Members</h2>\n        </div>\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import {useEffect} from 'react';\nimport {useHistory, useParams} from 'react-router-dom';\n\nimport {truncateEthAddress} from '../../util/helpers';\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\nimport {fakeMembers, FakeMember} from './_mockData';\n\nexport default function MemberProfile() {\n  /**\n   * Their hooks\n   */\n\n  // Get ethereumAddress for fetching the member.\n  // @todo Use this to check that active member exists.\n  const {ethereumAddress} = useParams<{ethereumAddress: string}>();\n  const history = useHistory();\n\n  /**\n   * Variables\n   */\n\n  // @todo replace with actual member fetch and member exists check\n  const activeMember: FakeMember | undefined = fakeMembers.find(\n    (member) => member.address.toLowerCase() === ethereumAddress.toLowerCase()\n  );\n\n  /**\n   * Effects\n   */\n\n  // Navigate to 404\n  useEffect(() => {\n    if (!activeMember) {\n      history.push('/404');\n    }\n  }, [history, activeMember]);\n\n  /**\n   * Render\n   */\n\n  if (activeMember) {\n    return (\n      <RenderWrapper>\n        <>\n          <div className=\"memberprofile__header\">Member Profile</div>\n          <div className=\"proposaldetails\">\n            {/* LEFT COLUMN */}\n\n            {/* MEMBER ADDRESS */}\n            <div className=\"memberprofile__left-column\">\n              <h3>\n                {truncateEthAddress((activeMember as FakeMember).address, 7)}\n              </h3>\n              <p>MemberProfile @todo</p>\n            </div>\n\n            {/* RIGHT COLUMN */}\n            <div className=\"memberprofile__right-column\">\n              MemberProfile @todo\n            </div>\n          </div>\n        </>\n      </RenderWrapper>\n    );\n  }\n\n  // Render nothing. Should never reach this case.\n  return <></>;\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function viewAll(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    history.push('/members');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Members</h2>\n          <button className=\"titlebar__action\" onClick={viewAll}>\n            View all\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {Route, Switch} from 'react-router-dom';\n\nimport GetStarted from './pages/start/GetStarted';\nimport CreateMembershipProposal from './pages/membership/CreateMembershipProposal';\nimport Membership from './pages/membership/Membership';\nimport MembershipDetails from './pages/membership/MembershipDetails';\nimport CreateTransferProposal from './pages/transfers/CreateTransferProposal';\nimport Transfers from './pages/transfers/Transfers';\nimport TransferDetails from './pages/transfers/TransferDetails';\nimport CreateTributeProposal from './pages/tributes/CreateTributeProposal';\nimport Tributes from './pages/tributes/Tributes';\nimport TributeDetails from './pages/tributes/TributeDetails';\nimport CreateGovernanceProposal from './pages/governance/CreateGovernanceProposal';\nimport GovernanceProposals from './pages/governance/GovernanceProposals';\nimport GovernanceProposalDetails from './pages/governance/GovernanceProposalDetails';\nimport Members from './pages/members/Members';\nimport MemberProfile from './pages/members/MemberProfile';\nimport NotFound from './pages/subpages/NotFound';\n\nexport default function Routes() {\n  return (\n    <Switch>\n      {[\n        <Route key=\"splash\" exact path=\"/\" render={() => <GetStarted />} />,\n        <Route\n          key=\"join\"\n          exact\n          path=\"/join\"\n          render={() => <CreateMembershipProposal />}\n        />,\n        <Route\n          key=\"membership\"\n          exact\n          path=\"/membership\"\n          render={() => <Membership />}\n        />,\n        <Route\n          key=\"membership-details\"\n          exact\n          path=\"/membership/:proposalId\"\n          render={() => <MembershipDetails />}\n        />,\n        <Route\n          key=\"transfer\"\n          exact\n          path=\"/transfer\"\n          render={() => <CreateTransferProposal />}\n        />,\n        <Route\n          key=\"transfers\"\n          exact\n          path=\"/transfers\"\n          render={() => <Transfers />}\n        />,\n        <Route\n          key=\"transfer-details\"\n          exact\n          path=\"/transfers/:proposalId\"\n          render={() => <TransferDetails />}\n        />,\n        <Route\n          key=\"tribute\"\n          exact\n          path=\"/tribute\"\n          render={() => <CreateTributeProposal />}\n        />,\n        <Route\n          key=\"tributes\"\n          exact\n          path=\"/tributes\"\n          render={() => <Tributes />}\n        />,\n        <Route\n          key=\"tribute-details\"\n          exact\n          path=\"/tributes/:proposalId\"\n          render={() => <TributeDetails />}\n        />,\n        <Route\n          key=\"governance-proposal\"\n          exact\n          path=\"/governance-proposal\"\n          render={() => <CreateGovernanceProposal />}\n        />,\n        <Route\n          key=\"governance-proposals\"\n          exact\n          path=\"/governance-proposals\"\n          render={() => <GovernanceProposals />}\n        />,\n        <Route\n          key=\"governance-proposal-details\"\n          exact\n          path=\"/governance-proposals/:proposalId\"\n          render={() => <GovernanceProposalDetails />}\n        />,\n        <Route\n          key=\"members\"\n          exact\n          path=\"/members\"\n          render={() => <Members />}\n        />,\n        <Route\n          key=\"member-profile\"\n          exact\n          path=\"/members/:ethereumAddress\"\n          render={() => <MemberProfile />}\n        />,\n        <Route key=\"no-match\" component={NotFound} />,\n      ]}\n    </Switch>\n  );\n}\n","import React from 'react';\n\nimport Footer from './components/Footer';\nimport Header from './components/Header';\nimport Head from './Head';\nimport Routes from './Routes';\n\nexport default function App() {\n  return (\n    <>\n      {/* HEAD (react-helmet) */}\n      <Head />\n\n      {/* HEADER */}\n      <Header />\n\n      <main>\n        <Routes />\n      </main>\n\n      {/* FOOTER */}\n      <Footer />\n    </>\n  );\n}\n","import React, {useCallback, useEffect, useState} from 'react';\nimport {getApiStatus as getSnapshotAPIStatus} from '@openlaw/snapshot-js-erc712';\n\nimport {AsyncStatus} from './util/types';\nimport {getConnectedMember} from './store/actions';\nimport {ContractsStateEntry, ReduxDispatch, StoreState} from './store/types';\nimport {SNAPSHOT_HUB_API_URL} from './config';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {useInitContracts, useIsDefaultChain} from './components/web3/hooks';\nimport {useIsMounted} from './hooks';\nimport {useWeb3Modal} from './components/web3/hooks';\nimport ErrorMessageWithDetails from './components/common/ErrorMessageWithDetails';\nimport FadeIn from './components/common/FadeIn';\nimport Header from './components/Header';\nimport Wrap from './components/common/Wrap';\n\ntype InitPropsRenderProps = {\n  error: Error | undefined;\n  isInitComplete: boolean;\n};\n\ntype InitProps = {\n  render: (p: InitPropsRenderProps) => React.ReactElement | null;\n};\n\ntype InitErrorProps = {\n  error: Error;\n};\n\n/**\n * Register any new async process names here.\n * It is mainly to check their progress before rendering.\n *\n * If the app is not dependent on a process before starting\n * do not add it here.\n */\nenum ProcessName {\n  initSnapshotAPI = 'initSnapshotAPI',\n}\n\n/**\n * Init Component\n *\n * Init will run any designated sync/async\n * setup processes and then render any child component\n * upon completion.\n *\n * In our case the children prop component to render is our app.\n *\n * @param {InitProps} props\n */\nexport default function Init(props: InitProps) {\n  const {render} = props;\n\n  /**\n   * Selectors\n   */\n\n  const daoRegistryContract = useSelector(\n    (s: StoreState) => s.contracts.DaoRegistryContract\n  );\n\n  /**\n   * State\n   */\n\n  const [error, setError] = useState<Error>();\n  const [isInitComplete, setIsInitComplete] = useState<boolean>(false);\n  const [processReadyMap, setProcessReadyMap] = useState<\n    Record<ProcessName, AsyncStatus>\n  >({\n    [ProcessName.initSnapshotAPI]: AsyncStatus.STANDBY,\n  });\n\n  /**\n   * Our hooks\n   */\n\n  const {initContracts} = useInitContracts();\n  const {account, connected, provider, web3Instance} = useWeb3Modal();\n  const {defaultChainError} = useIsDefaultChain();\n  const {isMountedRef} = useIsMounted();\n\n  /**\n   * Their hooks\n   */\n\n  const dispatch = useDispatch<ReduxDispatch>();\n\n  /**\n   * Cached callbacks\n   */\n\n  const handleInitContractsCached = useCallback(handleInitContracts, [\n    initContracts,\n  ]);\n  const handleGetMemberCached = useCallback(handleGetMember, [dispatch]);\n  const handleGetSnapshotAPIStatusCached = useCallback(\n    handleGetSnapshotAPIStatus,\n    [isMountedRef]\n  );\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    setIsInitComplete(\n      Object.values(processReadyMap).every((fs) => fs === AsyncStatus.FULFILLED)\n    );\n  }, [processReadyMap]);\n\n  useEffect(() => {\n    connected && provider && web3Instance && handleInitContractsCached();\n  }, [connected, handleInitContractsCached, provider, web3Instance]);\n\n  useEffect(() => {\n    connected &&\n      account &&\n      daoRegistryContract &&\n      handleGetMemberCached(account, daoRegistryContract);\n  }, [account, connected, daoRegistryContract, handleGetMemberCached]);\n\n  useEffect(() => {\n    setError(defaultChainError);\n  }, [defaultChainError]);\n\n  useEffect(() => {\n    handleGetSnapshotAPIStatusCached();\n  }, [handleGetSnapshotAPIStatusCached]);\n\n  /**\n   * Functions\n   */\n\n  async function handleGetSnapshotAPIStatus() {\n    try {\n      if (!SNAPSHOT_HUB_API_URL) {\n        throw new Error('No Snapshot Hub API URL was found.');\n      }\n\n      const {data} = await getSnapshotAPIStatus(SNAPSHOT_HUB_API_URL);\n\n      // Choosing a slice of the data to make sure we have a response, not just 200 OK.\n      if (!data.version) {\n        throw new Error('Snapshot API is not ready.');\n      }\n\n      if (!isMountedRef.current) return;\n\n      setProcessReadyMap((p) => ({\n        ...p,\n        [ProcessName.initSnapshotAPI]: AsyncStatus.FULFILLED,\n      }));\n    } catch (error) {\n      if (!isMountedRef.current) return;\n\n      setError(new Error('Snapshot API is not responding.'));\n    }\n  }\n\n  async function handleInitContracts() {\n    try {\n      await initContracts();\n    } catch (error) {\n      setError(error);\n    }\n  }\n\n  async function handleGetMember(\n    account: string,\n    daoRegistryContract: ContractsStateEntry\n  ) {\n    try {\n      await dispatch(getConnectedMember(account, daoRegistryContract));\n    } catch (error) {\n      setError(error);\n    }\n  }\n\n  // Render children\n  return render({error, isInitComplete});\n}\n\n/**\n * InitError\n *\n * An error component that is meant to be used if the <Init /> component\n * could not complete any of its processes to provide the app with vital data.\n *\n * @param {InitErrorProps} props\n */\nexport function InitError(props: InitErrorProps) {\n  const {error} = props;\n\n  return (\n    <>\n      <Header />\n\n      <Wrap className=\"section-wrapper\">\n        <main>\n          <FadeIn>\n            <div\n              style={{\n                padding: '2em 1em 1em',\n                textAlign: 'center',\n              }}>\n              <h1 style={{fontSize: '2rem'}}>\n                <span\n                  className=\"pulse\"\n                  role=\"img\"\n                  aria-label=\"Emoji with eyes crossed out.\"\n                  style={{display: 'inline-block'}}>\n                  \n                </span>{' '}\n                Oops, something went wrong.\n              </h1>\n            </div>\n\n            <div\n              style={{\n                textAlign: 'center',\n                maxWidth: 600,\n                display: 'block',\n                margin: '0 auto',\n              }}>\n              <ErrorMessageWithDetails error={error} renderText=\"\" />\n            </div>\n          </FadeIn>\n        </main>\n      </Wrap>\n    </>\n  );\n}\n","import {ReportHandler} from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({getCLS, getFID, getFCP, getLCP, getTTFB}) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport {BrowserRouter} from 'react-router-dom';\nimport WalletConnectProvider from '@walletconnect/web3-provider';\n\nimport {disableReactDevTools} from './util/helpers';\nimport {ENVIRONMENT, INFURA_PROJECT_ID} from './config';\nimport {DefaultTheme} from './components/web3/hooks/useWeb3ModalManager';\nimport {store} from './store';\nimport App from './App';\nimport Init, {InitError} from './Init';\nimport Web3ModalManager from './components/web3/Web3ModalManager';\nimport reportWebVitals from './reportWebVitals';\n\nimport './assets/scss/style.scss';\n\nconst root = document.getElementById('root');\n\n// disable React dev tools for production\nENVIRONMENT === 'production' && disableReactDevTools();\n\n// will be deprecated eventually, for now we set it to false to silence the\n// console warning\nwindow.ethereum &&\n  window.ethereum.autoRefreshOnNetworkChange &&\n  (window.ethereum.autoRefreshOnNetworkChange = false);\n\n// Tell Web3modal what providers we have available.\n// Built-in web browser provider (only one can exist at a time),\n// MetaMask, Brave or Opera is added automatically by Web3modal\nfunction getProviderOptions() {\n  const providerOptions = {\n    // Injected providers\n    injected: {\n      display: {\n        name: 'MetaMask',\n        description: 'Connect with the provider in your Browser',\n      },\n      package: null,\n    },\n    // WalletConnect provider\n    walletconnect: {\n      display: {\n        name: 'WalletConnect',\n        description: 'Connect with your mobile wallet',\n      },\n      package: WalletConnectProvider,\n      options: {\n        infuraId: INFURA_PROJECT_ID, // required\n        qrcodeModalOptions: {\n          mobileLinks: ['rainbow', 'metamask', 'argent', 'trust'],\n        },\n      },\n    },\n  };\n  return providerOptions;\n}\n\nif (root !== null) {\n  ReactDOM.render(\n    <Provider store={store}>\n      <BrowserRouter>\n        <Web3ModalManager\n          providerOptions={getProviderOptions()}\n          defaultTheme={DefaultTheme.LIGHT}>\n          <Init\n            render={({error, isInitComplete}) =>\n              error ? (\n                <InitError error={error} />\n              ) : isInitComplete ? (\n                <App />\n              ) : null\n            }\n          />\n        </Web3ModalManager>\n      </BrowserRouter>\n    </Provider>,\n    root\n  );\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import {useReducer, useCallback, useEffect} from 'react';\nimport Web3 from 'web3';\nimport Web3Modal from 'web3modal';\n\nimport {DEFAULT_CHAIN} from '../../../config';\nimport {NetworkNames, NetworkIDs} from '../../../util/enums';\n\ntype NetworkNameType = NetworkNames;\n\n// The `web3Modal` localStorage cached provider key\nconst WEB3_CONNECT_CACHED_PROVIDER: string = 'WEB3_CONNECT_CACHED_PROVIDER';\n\nexport enum DefaultTheme {\n  DARK = 'dark',\n  LIGHT = 'light',\n}\n\nenum ActionType {\n  INIT_WEB3MODAL,\n  ACTIVATE_PROVIDER,\n  UPDATE,\n  UPDATE_FROM_ERROR,\n  ERROR,\n  ERROR_FROM_ACTIVATION,\n  DEACTIVATE_PROVIDER,\n}\n\ninterface Action {\n  type: ActionType;\n  payload?: any;\n}\n\ninterface Web3ModalManagerState {\n  provider?: any;\n  networkId?: number;\n  account?: undefined | string;\n  connected?: boolean;\n  error?: Error;\n  web3Modal?: any;\n  web3Instance?: any;\n}\n\nfunction reducer(\n  state: Web3ModalManagerState,\n  {type, payload}: Action\n): Web3ModalManagerState {\n  switch (type) {\n    case ActionType.INIT_WEB3MODAL: {\n      const {web3Modal} = payload;\n      return {web3Modal};\n    }\n    case ActionType.ACTIVATE_PROVIDER: {\n      const {provider, networkId, account, web3Modal} = payload;\n      return {provider, networkId, account, web3Modal};\n    }\n    case ActionType.UPDATE: {\n      const {provider, networkId, account, connected, web3Instance} = payload;\n\n      return {\n        ...state,\n        ...(provider === undefined ? {} : {provider}),\n        ...(networkId === undefined ? {} : {networkId}),\n        ...(account === undefined ? {} : {account}),\n        ...(connected === undefined ? {} : {connected}),\n        ...(web3Instance === undefined ? {} : {web3Instance}),\n      };\n    }\n    case ActionType.UPDATE_FROM_ERROR: {\n      const {provider, networkId, account} = payload;\n      return {\n        ...state,\n        ...(provider === undefined ? {} : {provider}),\n        ...(networkId === undefined ? {} : {networkId}),\n        ...(account === undefined ? {} : {account}),\n        error: undefined,\n      };\n    }\n    case ActionType.ERROR: {\n      const {error} = payload;\n      const {provider} = state;\n      return {\n        provider,\n        error,\n      };\n    }\n    case ActionType.ERROR_FROM_ACTIVATION: {\n      const {provider, error} = payload;\n      return {\n        provider,\n        error,\n      };\n    }\n    case ActionType.DEACTIVATE_PROVIDER: {\n      return {};\n    }\n  }\n}\n\ninterface Web3ModalManagerInterface {\n  defaultChain?: number;\n  defaultTheme?: DefaultTheme;\n  providerOptions: Record<string, any>; //required\n}\n\nexport default function useWeb3ModalManager({\n  defaultChain,\n  defaultTheme,\n  providerOptions,\n}: Web3ModalManagerInterface) {\n  /**\n   * Context State\n   */\n  const [state, dispatch] = useReducer(reducer, {});\n\n  const web3ModalTheme = defaultTheme;\n  const web3ModalChain = defaultChain || DEFAULT_CHAIN;\n\n  /**\n   * @note\n   * Disable hooks checks for now as additional deps causes issues.\n   */\n  //eslint-disable-next-line react-hooks/exhaustive-deps\n  const onConnectToCached = useCallback(onConnectTo, [state.web3Modal]);\n  const getNetworkNameCached = useCallback(getNetworkName, [web3ModalChain]);\n\n  /**\n   * Init Web3Modal\n   */\n  useEffect(() => {\n    if (!state.web3Modal) {\n      dispatch({\n        type: ActionType.INIT_WEB3MODAL,\n        payload: {\n          web3Modal: new Web3Modal({\n            cacheProvider: true, // optional\n            network: getNetworkNameCached(), // optional\n            providerOptions, // required\n            theme: web3ModalTheme, // optional; `light` or `dark`. `dark` is default\n          }),\n        },\n      });\n    }\n  }, [getNetworkNameCached, providerOptions, web3ModalTheme, state.web3Modal]);\n\n  /**\n   * Automagically connect to cached provider `localStorage`\n   */\n  useEffect(() => {\n    async function activeWeb3ModalCached(cachedProvider: string) {\n      if (cachedProvider) {\n        await onConnectToCached(cachedProvider);\n      }\n    }\n\n    if (state.web3Modal && getCachedProvider()) {\n      activeWeb3ModalCached(state.web3Modal.cachedProvider);\n    }\n  }, [onConnectToCached, state.web3Modal]);\n\n  /**\n   * Double checking if a cached provider exists in `localStorage`\n   */\n  function getCachedProvider(): string | null {\n    return localStorage.getItem(WEB3_CONNECT_CACHED_PROVIDER);\n  }\n\n  /**\n   * Connect to a specfic wallet; get account assets and\n   * subscribe to provider events\n   */\n  async function onConnectTo(connectorId: string) {\n    try {\n      if (!state.web3Modal) return;\n\n      const provider = await state.web3Modal.connectTo(connectorId);\n\n      subscribeProvider(provider);\n\n      const web3: any = new Web3(provider);\n\n      // get accounts\n      const accounts = await web3.eth.getAccounts();\n      // get connected network id\n      const networkId = await web3.eth.net.getId();\n\n      dispatch({\n        type: ActionType.UPDATE,\n        payload: {\n          account: accounts[0],\n          connected: true,\n          provider,\n          networkId,\n          web3Instance: web3,\n        },\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  /**\n   * Disconnect wallet button pressed.\n   */\n  async function onDisconnect() {\n    try {\n      if (state.provider.close) {\n        await state.provider.close();\n      }\n\n      // If the cached provider is not cleared,\n      // WalletConnect will default to the existing session\n      // and does not allow to re-scan the QR code with a new wallet.\n      // Depending on your use case you may want or want not his behaviour.\n      state.web3Modal && (await state.web3Modal.clearCachedProvider());\n\n      // Reset all states; except for web3Modal?!\n      dispatch({type: ActionType.DEACTIVATE_PROVIDER});\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  function subscribeProvider(provider: any) {\n    if (!provider?.on) return;\n\n    // Subscribe to accounts change\n    provider.on('accountsChanged', (accounts: string[]) => {\n      dispatch({\n        type: ActionType.UPDATE,\n        payload: {\n          account: accounts[0],\n        },\n      });\n    });\n\n    // Subscribe to chainId change\n    provider.on('chainChanged', (chainId: string) => {\n      async function handleChainChanged(cachedProvider: string) {\n        // convert `chainId` hex string to number\n        const networkId = parseInt(chainId, 16);\n\n        dispatch({\n          type: ActionType.UPDATE,\n          payload: {\n            networkId,\n          },\n        });\n\n        // if we are connected to the correct network; connect to provider\n        Number(networkId) === Number(chainId) &&\n          (await onConnectToCached(cachedProvider));\n      }\n\n      if (state.web3Modal?.cachedProvider) {\n        handleChainChanged(state.web3Modal?.cachedProvider);\n      }\n    });\n\n    // Subscribe to provider connection\n    provider.on('connect', (info: {chainId: number}) => {\n      console.info('connect', info);\n    });\n\n    // Subscribe to provider disconnection\n    provider.on('disconnect', (error: {code: number; message: string}) => {\n      console.info('disconnect', error);\n    });\n  }\n\n  function getNetworkName(): NetworkNameType {\n    switch (web3ModalChain) {\n      case NetworkIDs.GOERLI:\n        return NetworkNames.GOERLI;\n      case NetworkIDs.KOVAN:\n        return NetworkNames.KOVAN;\n      case NetworkIDs.RINKEBY:\n        return NetworkNames.RINKEBY;\n      case NetworkIDs.ROPSTEN:\n        return NetworkNames.ROPSTEN;\n      case NetworkIDs.MAINNET:\n        return NetworkNames.MAINNET;\n      default:\n        return NetworkNames.MAINNET;\n    }\n  }\n\n  return {\n    ...state,\n    onConnectTo,\n    onDisconnect,\n    providerOptions,\n  };\n}\n"],"sourceRoot":""}