{"version":3,"sources":["util/validation.ts","components/feedback/CycleMessage.tsx","assets/svg/TimesSVG.tsx","config.ts","components/feedback/CycleEllipsis.tsx","components/web3/hooks/useWeb3ModalManager.ts","util/helpers/chooseRandom.ts","util/helpers/disableReactDevTools.ts","util/helpers/dontCloseWindowWarning.ts","util/helpers/formatDecimal.ts","util/helpers/formatNumber.ts","util/helpers/getValidationError.ts","util/helpers/normalizeString.ts","util/helpers/stripFormatNumber.ts","util/helpers/truncateEthAddress.ts","store/connectedMember/actions.ts","components/adapters-extensions/enums.ts","components/web3/helpers/getExtensionAddress.ts","components/web3/hooks/useContractSend.ts","components/web3/hooks/useETHGasPrice.ts","components/web3/hooks/useIsDefaultChain.ts","components/web3/hooks/useInitContracts.ts","components/web3/hooks/useIsAddressDelegated.ts","components/web3/Web3ModalManager.tsx","components/proposals/voting/types.ts","gql/queryDao.ts","gql/queryAdaptersAndExtensions.ts","components/common/FadeIn.tsx","util/enums.ts","components/proposals/voting/OffchainOpRollupVotingSubmitResultAction.tsx","components/proposals/voting/OffchainVotingAction.tsx","components/proposals/helpers/getVoteChosen.ts","components/proposals/ProposalPeriod.tsx","assets/svg/StopwatchSVG.tsx","components/proposals/voting/VotingStatus.tsx","components/proposals/voting/OffchainVotingStatus.tsx","assets/svg/CheckSVG.tsx","components/proposals/voting/SquareRootVotingBar.tsx","components/proposals/voting/VotingActionButtons.tsx","util/types.ts","store/contracts/actions.ts","components/common/ErrorMessageWithDetails.tsx","components/web3/helpers/contractSend.ts","components/web3/helpers/getAdapterAddress.ts","components/web3/helpers/getAdapterAddressFromContracts.ts","components/web3/helpers/getContractByAddress.ts","components/web3/helpers/getDAOConfigEntry.ts","components/web3/helpers/getDaoState.ts","components/web3/helpers/multicall.ts","components/proposals/hooks/useOffchainVotingResults.ts","components/proposals/hooks/useOffchainVotingStartEnd.ts","components/proposals/hooks/useProposalOrDraft.ts","components/proposals/hooks/useProposalWithOffchainVoteStatus.ts","util/constants.ts","components/proposals/hooks/useSignAndSendVote.ts","components/proposals/hooks/useSignAndSubmitProposal.ts","components/feedback/Loader.tsx","components/proposals/types.ts","components/web3/config.ts","components/web3/EtherscanURL.tsx","components/web3/types.ts","hooks/useAbortController.ts","hooks/useCounter.ts","hooks/useDao.ts","hooks/useIsMounted.ts","hooks/useMemberActionDisabled.tsx","store/connectedMember/reducers.ts","store/contracts/reducers.ts","store/reducers.ts","store/index.ts","components/Footer.tsx","components/logo/Logo.tsx","components/logo/index.tsx","assets/svg/MetaMaskSVG.tsx","assets/svg/WalletConnectSVG.tsx","components/web3/WalletIcons.tsx","components/feedback/LoaderWithEmoji.tsx","components/common/Modal.tsx","components/web3/Web3ModalButton.tsx","assets/svg/HamburgerSVG.tsx","components/Nav.tsx","components/Header.tsx","Head.tsx","components/common/InputError.tsx","components/common/PreviewInputMarkdown.tsx","components/common/Wrap.tsx","pages/governance/CreateGovernanceProposal.tsx","pages/membership/CreateMembershipProposal.tsx","pages/transfers/CreateTransferProposal.tsx","pages/tributes/CreateTributeProposal.tsx","pages/start/GetStarted.tsx","components/governance/GovernanceActions.tsx","pages/subpages/NotFound.tsx","components/proposals/ProposalDetails.tsx","pages/governance/GovernanceProposalDetails.tsx","pages/governance/GovernanceProposals.tsx","components/adapters-extensions/helpers.ts","components/adapters-extensions/config.ts","components/adapters-extensions/hooks/useAdaptersOrExtensions.ts","components/adapters-extensions/hooks/useValidation.ts","components/common/Checkbox.tsx","components/adapters-extensions/AdapterOrExtensionManager.tsx","components/adapters-extensions/ConfigurationForm.tsx","components/adapters-extensions/ConfigurationModal.tsx","components/adapters-extensions/AdapterOrExtensionSelectTarget.tsx","pages/members/_mockData.ts","pages/members/MemberProfile.tsx","pages/members/MemberCard.tsx","pages/members/Members.tsx","pages/membership/Membership.tsx","components/proposals/ProposalActions.tsx","components/proposals/ProposalAmount.tsx","pages/membership/MembershipDetails.tsx","pages/transfers/TransferDetails.tsx","pages/transfers/Transfers.tsx","pages/tributes/TributeDetails.tsx","pages/tributes/Tributes.tsx","Routes.tsx","Init.tsx","App.tsx","reportWebVitals.ts","index.tsx","components/web3/hooks/useWeb3Modal.ts"],"names":["isEthAddressValid","ethAddress","Web3","utils","isAddress","CycleMessage","props","intervalMs","messages","INITIAL_ITEM","useFirstItemStart","chooseRandom","useState","activeMessage","setActiveMessage","useEffect","intervalId","setInterval","prevMessage","clearInterval","render","TimesSVG","xmlns","aria-hidden","data-icon","data-prefix","viewBox","fill","d","process","REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS","REACT_APP_DEFAULT_CHAIN_NAME_LOCAL","REACT_APP_ENVIRONMENT","REACT_APP_INFURA_PROJECT_ID_DEV","REACT_APP_INFURA_PROJECT_ID_LOCAL","REACT_APP_INFURA_PROJECT_ID_PROD","REACT_APP_MULTICALL_CONTRACT_ADDRESS","REACT_APP_SNAPSHOT_HUB_API_URL","REACT_APP_GRAPH_API_URL","ENVIRONMENT","SNAPSHOT_HUB_API_URL","INFURA_PROJECT_ID","GRAPH_API_URL","CHAINS","MAINNET","ROPSTEN","RINKEBY","GOERLI","KOVAN","GANACHE","CHAIN_NAME","ETHERSCAN_URLS","DAO_REGISTRY_CONTRACT_ADDRESS","DAO_FACTORY_CONTRACT_ADDRESS","BANK_EXTENSION_CONTRACT_ADDRESS","VOTING_CONTRACT_ADDRESS","CONFIGURATION_CONTRACT_ADDRESS","RAGEQUIT_CONTRACT_ADDRESS","DISTRIBUTE_CONTRACT_ADDRESS","FINANCING_CONTRACT_ADDRESS","GUILDKICK_CONTRACT_ADDRESS","MANAGING_CONTRACT_ADDRESS","OFFCHAINVOTING_CONTRACT_ADDRESS","ONBOARDING_CONTRACT_ADDRESS","TRIBUTE_CONTRACT_ADDRESS","WITHDRAW_CONTRACT_ADDRESS","MULTICALL_CONTRACT_ADDRESS","DEFAULT_CHAIN","GUILD_ADDRESS","TOTAL_ADDRESS","SHARES_ADDRESS","ETH_TOKEN_ADDRESS","SPACE","development","localhost","production","GQL_QUERY_POLLING_INTERVAL","MESSAGES","rootStyles","position","nbspStyles","height","width","CycleEllipsis","fadeInProps","fadeInPropsMerged","inline","upToIndex","setUpToIndex","prevIndex","length","style","FadeIn","DefaultTheme","ActionType","WEB3_CONNECT_CACHED_PROVIDER","reducer","state","type","payload","INIT_WEB3MODAL","web3Modal","ACTIVATE_PROVIDER","provider","networkId","account","UPDATE","connected","web3Instance","undefined","UPDATE_FROM_ERROR","error","ERROR","ERROR_FROM_ACTIVATION","DEACTIVATE_PROVIDER","useWeb3ModalManager","defaultChain","defaultTheme","providerOptions","useReducer","dispatch","web3ModalTheme","web3ModalChain","onConnectToCached","useCallback","onConnectTo","getNetworkNameCached","NetworkIDs","NetworkNames","connectorId","a","connectTo","subscribeProvider","web3","eth","getAccounts","accounts","net","getId","console","close","clearCachedProvider","on","chainId","cachedProvider","parseInt","Number","handleChainChanged","info","Web3Modal","cacheProvider","network","theme","localStorage","getItem","activeWeb3ModalCached","onDisconnect","array","doNotChooseItem","arrayToUse","filter","Math","floor","random","disableReactDevTools","noop","DEV_TOOLS","window","__REACT_DEVTOOLS_GLOBAL_HOOK__","Object","entries","key","value","dontCloseWindowWarning","callback","event","preventDefault","returnValue","addEventListener","removeEventListener","formatDecimal","n","toFixed","formatNumber","regEx","RegExp","toString","replace","getValidationError","field","errors","message","normalizeString","stringToNormalize","toLowerCase","trim","stripFormatNumber","truncateEthAddress","addr","maxLength","firstSegment","substring","secondPart","SET_CONNECTED_MEMBER","CLEAR_CONNECTED_MEMBER","getConnectedMember","daoRegistryContract","daoRegistryInstance","instance","clearConnectedMember","methods","memberAddressesByDelegatedKey","call","from","memberAddressByDelegateKey","isActiveMember","getCurrentDelegateKey","currentDelegateKey","isActiveMemberChecks","startsWith","delegateKey","memberAddress","DaoConstants","VotingAdapterName","getExtensionAddress","extensionName","daoContractInstance","Error","sha3","useContractSend","txError","setTxError","txEtherscanURL","setTxEtherscanURL","txIsPromptOpen","setTxIsPromptOpen","txReceipt","setTxReceipt","Web3TxStatus","STANDBY","txStatus","setTxStatus","useWeb3Modal","handleOnTxProcess","txHash","PENDING","unsubscribeDontCloseWindow","AWAITING_CONFIRM","contractSendParams","contractSend","receipt","FULFILLED","REJECTED","txSend","URL","useETHGasPrice","gasURL","gasPrices","useRef","useIsDefaultChain","isDefaultChain","setIsDefaultChain","defaultChainError","setDefaultChainError","useInitContracts","useDispatch","initContractDaoRegistry","initContractDaoFactory","initContractConfiguration","initContractFinancing","initContractGuildKick","initContractManaging","initContractRagequit","initContractWithdraw","initContractBankExtension","initContractOnboarding","initContractTribute","initContractDistribute","initRegisteredVotingAdapter","useIsAddressDelegated","useSelector","s","connectedMember","Web3ModalContext","createContext","Web3ModalManager","children","DARK","web3ModalProviderArguments","web3ModalContext","Provider","VotingState","GET_DAO","gql","GET_ADAPTERS_AND_EXTENSIONS","defaultStyle","transition","duration","opacity","transitionStyles","entering","entered","exiting","exited","appear","in","show","timeout","FormFieldErrors","ProposalHeaderNames","OffchainOpRollupVotingSubmitResultAction","adapterName","snapshotProposal","proposal","signatureStatus","setSignatureStatus","submitError","setSubmitError","bankExtensionMethods","contracts","BankExtensionContract","offchainVotingMethods","VotingContract","daoRegistryAddress","DaoRegistryContract","contractAddress","useMemberActionDisabled","isDisabled","openWhyDisabledModal","WhyDisabledModal","isInProcess","isDone","isInProcessOrDone","votes","proposalHash","idInDAO","adapterAddress","getAdapterAddressFromContracts","voteEntriesPromises","map","v","voteData","values","createVote","address","msg","choice","VoteChoicesIndex","Yes","timestamp","sig","getPriorAmount","snapshot","voteYes","weight","prepareVoteResult","Promise","all","actionId","daoAddress","voteResultTree","voteResultTreeHexRoot","getHexRoot","result","toStepNode","merkleTree","step","verifyingContract","getVoteResultRootDomainDefinition","domain","types","messageParams","JSON","stringify","root","primaryType","PRIMARY_TYPE_ERC712","signMessage","signature","submitVoteResultArguments","rootSig","txArguments","gasPrice","fast","className","disabled","onClick","Loader","ErrorMessageWithDetails","renderText","TX_CYCLE_MESSAGES","EtherscanURL","url","isPending","renderSubmitStatus","title","OffchainVotingAction","voteChoiceClicked","setVoteChoiceClicked","votingDisabledReasonsRef","addressIsDelegatedMessage","alreadyVotedMessage","delegateAddress","useSignAndSendVote","signAndSendVote","voteDataStatus","isAddressDelegated","voteChosen","voteEntry","find","ve","VoteChoices","No","getVoteChosen","setOtherDisabledReasons","snapshotProposalId","idInSnapshot","isSubmitDisabled","voteChoiceProgress","partialVoteData","proposalIdInDAO","proposalIdInSnapshot","refetchProposalOrDraft","current","VotingActionButtons","buttonProps","voteProgress","ProposalPeriod","startLabel","startPeriodMs","endLabel","endedLabel","endPeriodMs","proposalPeriod","setProposalPeriod","displayCountdownCached","countdown","showDaysOnly","endtime","t","Date","parse","seconds","minutes","hours","total","days","getTimeRemaining","formatTimePeriod","time","period","formattedPeriod","interval","currentDate","startDate","endDate","start","end","StopwatchSVG","version","id","stroke","strokeWidth","fillRule","xlinkHref","VotingStatus","hasVotingEnded","noShares","renderStatus","renderTimer","showPercentages","totalShares","yesShares","renderedStatus","aria-label","role","SquareRootVotingBar","votingExpired","gracePeriodEndLabel","gracePeriodEndedLabel","textTransform","cycleEllipsisFadeInProps","OffchainVotingStatus","countdownGracePeriodStartMs","didVotePass","setDidVotePass","gracePeriodEndMs","setGracePeriodEndMs","useOffchainVotingStartEnd","hasOffchainVotingStarted","hasOffchainVotingEnded","offchainVotingStartEndInitReady","votingResults","useOffchainVotingResults","votingStartSeconds","votingEndSeconds","shares","getDAOConfigEntry","ContractDAOConfigKeys","offchainVotingGracePeriod","then","r","catch","ProposalPeriodComponent","CheckSVG","xmlnsXlink","getSharesPercent","percentYes","percentNo","getVotedClass","getARIALabel","getVotingText","handleClick","AsyncStatus","CONTRACT_BANK_EXTENSION","CONTRACT_CONFIGURATION","CONTRACT_DAO_FACTORY","CONTRACT_DAO_REGISTRY","CONTRACT_DISTRIBUTE","CONTRACT_FINANCING","CONTRACT_GUILDKICK","CONTRACT_MANAGING","CONTRACT_ONBOARDING","CONTRACT_RAGEQUIT","CONTRACT_TRIBUTE","CONTRACT_VOTING","CONTRACT_VOTING_OP_ROLLUP","CONTRACT_WITHDRAW","lazyDaoFactoryABI","default","daoFactoryContract","Contract","createContractAction","abi","lazyDaoRegistryABI","initContractVoting","initContractThunkFactory","actionType","adapterOrExtensionName","ContractAdapterNames","voting","adapterNameForRedux","lazyImport","initContractVotingOpRollup","OffchainVotingContract","ONBOARDING","onboarding","BANK","ContractExtensionNames","bank","isExtension","TRIBUTE","tribute","DISTRIBUTE","distribute","MANAGING","managing","WITHDRAW","withdraw","RAGEQUIT","ragequit","GUILDKICK","guildkick","FINANCING","financing","CONFIGURATION","configuration","getState","lazyIVotingABI","warn","votingAdapterName","getVotingAdapterName","getAdapterName","getAdapterAddress","lazyABI","contractABI","isWalletRejectedRequest","code","test","detailsProps","cursor","outline","methodName","contractInstanceMethods","methodArguments","onProcess","resolve","reject","method","estimateGas","gas","send","getContractAddressOrThrow","contract","name","DistributeContract","ManagingContract","OnboardingContract","TributeContract","getContractByAddress","c","configKey","getConfiguration","DaoState","getDaoState","daoRegistryMethods","CREATION","READY","multicall","blockNumber","calls","lazyMulticallABI","multicallMethods","aggregate","params","encodeFunctionCall","returnData","hexString","i","outputsABIItem","outputs","decodedOutputs","decodeParameters","__length__","bankABI","bankAddress","voterAddressesAndChoices","setVoterAddressesAndChoices","sharesResults","setSharesResults","getPriorAmountABI","item","getSharesPerChoiceCached","percentage","results","totalSharesCall","sharesCalls","totalSharesResult","forEach","prevState","voterEntries","vote","keys","metadata","fromEntries","votingStartEndStatusRef","setHasOffchainVotingStarted","setHasOffchainVotingEnded","isInitReady","setOffchainVotingStartEndInitReady","every","SnapshotType","intervalID","hasStartedCheck","now","hasEndedCheck","ceil","ERROR_PROPOSAL","ERROR_PROPOSAL_NOT_FOUND","useProposalOrDraft","daoProposal","snapshotDraft","setSnapshotDraft","setSnapshotProposal","proposalNotFound","setProposalNotFound","proposalError","setProposalError","proposalStatus","setProposalStatus","useAbortController","abortController","isMountedRef","useCounter","refetchCount","updateRefetchCount","handleGetDraftCached","signal","handleGetProposalCached","handleGetProposalOrDraftCached","snapshotType","draft","proposalData","getCommonSnapshotProposalData","fetch","response","ok","json","responseJSON","idKey","proposalId","data","erc712DraftHash","useProposalWithOffchainVoteStatus","daoRegistryABI","offchainVotingAddress","offchainVotingABI","setDAOProposal","daoProposalVotes","setDAOProposalVotes","daoProposalVoteResult","setDAOProposalVoteResult","pollingIntervalIdRef","pollStatusFromContractCached","atExistsInDAO","ProposalFlag","flags","EXISTS","atSponsoredInDAO","SPONSORED","atProcessedInDAO","PROCESSED","offchainResultSubmitted","reporter","resultRoot","isInVotingGracePeriod","GRACE_PERIOD","getReturnData","status","transitionMessage","proposalsABI","voteResultABI","votesABI","voteResult","ProposalFlowStatus","Sponsor","OffchainVoting","OffchainVotingSubmitResult","OffchainVotingGracePeriod","Process","Completed","BURN_ADDRESS","setVoteData","voteDataError","setVoteDataError","setVoteDataStatus","getSpace","snapshotSpace","voteProposalData","space","token","buildVoteMessage","erc712Message","prepareVoteMessage","getDomainDefinition","dataToSign","submitMessage","dataToReturn","uniqueId","useSignAndSubmitProposal","setProposalData","proposalSignAndSendError","setProposalSignAndSendError","proposalSignAndSendStatus","setProposalSignAndSendStatus","buildProposalMessageHelper","commonData","getBlockNumber","offchainVotingVotingPeriod","votingTimeSeconds","buildProposalMessage","partialProposalData","body","buildDraftMessage","prepareDraftMessage","prepareProposalMessage","uniqueIdDraft","signAndSendProposal","Spinner","showAfterMs","text","textProps","loaderProps","showLoaderAfterMs","setShowLoaderAfterMs","timeoutId","setTimeout","clearTimeout","DistributionStatus","href","rel","target","setAbortController","AbortController","abort","initialState","count","action","useDao","useLazyQuery","variables","getDao","called","loading","dao","setDao","gqlError","setGqlError","getDaoRegistryCallback","molochv3S","useIsMounted","otherDisabledReasons","shouldShowWhyModal","setShouldShowWhyModal","otherReasonNext","disabledReason","getDisabledReason","canShowDisabledReason","WhyDisabledModalCached","ariaHideApp","isOpen","onRequestClose","overlayClassName","overlay","zIndex","handleSetOtherDisabledReasonsCached","otherReasons","Boolean","INITIAL_STATE","setConnectedMemberReducer","clearConnectedMemberReducer","ConfigurationContract","DaoFactoryContract","FinancingContract","GuildBankContract","RagequitContract","WithdrawContract","contractDAOFactory","contractDAORegistry","contractBankExtension","contractConfiguration","contractDistribute","contractFinancing","contractGuildBank","contractOnboarding","contractRagequit","contractTribute","contractVoting","contractManaging","contractWithdraw","combineReducers","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","Footer","Logo","size","ModalLogo","LeftLogo","CenterLogo","MetaMaskSVG","st1","strokeLinecap","strokeLinejoin","st6","x","y","enableBackground","xmlSpace","WalletConnectSVG","svgWalletIcon","injected","walletconnect","LoaderWithEmoji","Modal","keyProp","styleProps","modalClassNames","isOpenHandler","ConnectWallet","customWalletText","showWalletETHBadge","history","useHistory","openModal","setOpenModal","isWrongNetwork","isChainGanache","displayWalletText","isMobile","handleNavigate","push","ProviderSVG","providerName","providerOptionsFiltered","p","displayOptions","display","DisplayChainError","displayProviders","margin","React","memo","HamburgerSVG","transitionOpeningStyles","right","transitionClosingStyles","NavLinks","data-testid","tabIndex","to","Nav","shouldShowMenuModal","setShouldShowMenuModal","setTransitionStyles","location","useLocation","isIndexPath","pathname","handleMenuModalClose","closeMenu","query","matches","aria-controls","Transition","Header","RenderLogo","Head","Helmet","content","InputError","restProps","PreviewInputMarkdown","marginTop","Fields","Wrap","rest","CreateGovernanceProposal","form","useForm","mode","reValidateMode","getValues","register","trigger","watch","isConnected","handleSubmit","description","log","RenderWrapper","onSubmit","e","htmlFor","aria-describedby","aria-invalid","ref","required","REQUIRED","placeholder","CreateMembershipProposal","userAccountBalance","setUserAccountBalance","setValue","createMemberError","getUserAccountBalanceCached","getBalance","accountBalanceInWei","wei","fromWei","ethAmount","ethAmountInWei","toWei","amountUnit","onboardArguments","validate","INVALID_ETHEREUM_ADDRESS","onChange","amount","isNaN","INVALID_NUMBER","CreateTransferProposal","daoTokens","setDaoTokens","selectedTokenBalance","setSelectedTokenBalance","isTypeAllMembers","selectedTokenValue","createTransferError","erc20ABI","ERC20ABI","getDaoTokensCached","getSelectedTokenBalanceCached","bankMethods","nbTokens","parsedAndSortedTokens","getTokenABI","getTokenCalls","Array","index","fetchedTokens","balanceOfABI","getDaoTokenBalanceCalls","daoTokenBalances","tokensArray","daoBalance","tokenObj","toBN","gt","ethToken","symbol","decimals","erc20Tokens","nameABI","nameCalls","symbolABI","symbolCalls","decimalsABI","decimalsCalls","erc20DetailsCalls","chunkedResults","splice","names","symbols","parsedAndSortedERC20Tokens","sort","b","localeCompare","selectedTokenObj","balance","balanceBN","divisor","pow","beforeDecimal","div","afterDecimal","mod","balanceReadable","eq","selectedToken","notes","tokenAddress","amountArg","multiplier","amountWithDecimals","mul","bodyIntro","tokenDecimals","returnSignature","memberAddressArg","preparedVoteVerificationBytes","prepareVoteProposalData","choices","transferArguments","isActiveMemberWithShares","balanceOf","sharesBalance","amountToNumber","isSelectedTokenEth","isInteger","CreateTributeProposal","txErrorTokenApprove","txEtherscanURLTokenApprove","txIsPromptOpenTokenApprove","txSendTokenApprove","txStatusTokenApprove","userERC20Balance","setUserERC20Balance","erc20Details","setERC20Details","erc20Contract","setERC20Contract","erc20AddressValue","createTributeError","getERC20ContractCached","getERC20DetailsCached","getUserERC20BalanceCached","lazyERC20ABI","handleSubmitTokenApprove","tributeAmountWithDecimals","allowanceBN","difference","sub","approveValue","add","tokenApproveArguments","applicantAddress","erc20Address","tributeAmount","requestAmount","requestAmountArg","allowance","tributeAmountUnit","tributeTokenDecimals","requestAmountUnit","tributeArguments","MolochV3Cube","data-aos","data-aos-delay","GetStarted","AOS","init","offset","delay","mirror","once","GovernanceActions","NotFound","textAlign","fontSize","ProposalDetails","renderAmountBadge","renderActions","GovernanceProposalDetails","useParams","GovernanceProposals","getAdapterOrExtensionId","getConfigurationABIFunction","OFFCHAINVOTING","VOTING","getAccessControlLayer","acl","accessFlags","SUBMIT_PROPOSAL","PROCESS_PROPOSAL","SPONSOR_PROPOSAL","SET_CONFIGURATION","INTERNAL_TRANSFER","NEW_MEMBER","ADD_TO_BALANCE","REGISTER_NEW_TOKEN","SUB_FROM_BALANCE","JAIL_MEMBER","UNJAIL_MEMBER","REMOVE_ADAPTER","ADD_ADAPTER","UPDATE_DELEGATE_KEY","idx","reduce","entry","ADD_EXTENSION","REMOVE_EXTENSION","defaultAdaptersAndExtensions","extensionId","adapterId","options","displayName","optionDefaultTarget","useAdaptersOrExtensions","adapterExtensionContracts","pollInterval","getRegisteredAdaptersAndExtensions","registeredAdaptersOrExtensions","setRegisteredAdaptersOrExtensions","unRegisteredAdaptersOrExtensions","setUnRegisteredAdaptersOrExtensions","adapterExtensionStatus","setAdapterExtensionStatus","getAdaptersAndExtensionsCached","registeredDaoAdapters","registeredDaoExtensions","registeredList","unRegisteredList","getAdapterFromGql","adapter","getExtensionFromGql","extension","adapterOrExtension","gqlExtension","maybeSomeAdapters","some","maybeSomeExtensions","shouldSkip","option","gqlAdapter","adapters","extensions","getAdapterOrExtensionFromRedux","ae","ParamType","CheckboxSize","WhyDisableModalTitles","useValidation","isParamInputValid","paramInput","paramType","parameter","ADDRESS","checkAddressChecksum","isAddressValid","BYTES32","isHex","isBytes32Valid","BYTES32_ARRAY","split","isBytes32ArrayValid","UINT256","isUint256Valid","UINT256_ARRAY","isUint256ArrayValid","getFormFieldError","INVALID_BYTES32","INVALID_BYTES32_ARRAY","INVALID_NUMBER_ARRAY","formatInputByType","inputValue","inputType","ConfigurationForm","abiConfigurationInputs","abiMethodName","closeHandler","configureAdapterStatus","setConfigureAdapterStatus","removeStatus","setRemoveStatus","formState","configureAdapterError","isValid","isConfigureInProcess","isRemoveInProcess","isConfigureDone","isRemoveDone","isConfigureInProcessOrDone","isRemoveInProcessOrDone","removeArguments","adapterConfigArguments","abiInput","formattedValue","input","ConfiguratorModal","configurationInputs","toUpperCase","AdapterExtensionSelectTarget","defaultTarget","renderCheckboxAction","selectedTargetOption","setSelectedTargetOption","selectedTargetOptionProps","setSelectedTargetOptionProps","selectedTargetProps","selectedOption","renderDescription","Checkbox","aria-checked","checked","SMALL","label","AdapterOrExtensionManager","setABIMethodName","daoState","setDaoState","setIsDone","inputParameters","setInputParameters","selectAll","setSelectAll","selectionCount","setSelectionCount","selections","setSelections","configureAdapterOrExtension","setConfigureAdapterOrExtension","setIsInProcess","whyDisabledReason","setWhyDisabledReason","isDAOExisting","isDAOReady","isAdaptersUnavailable","isLoadingAdapters","checkDaoStateCached","finalizedMessage","daoRegistryState","handleAddAdapter","addAdapterOrExtension","handleAddExtension","adapterOrExtensionAddress","adapterOrExtensionType","adapterOrExtensionId","addAdapterOrExtensionArguments","txSendMethod","errorMessage","adaptersArguments","addAdaptersArguments","checkboxesSelection","abiFunctionName","inputs","alert","scrollTo","top","left","behavior","LARGE","handleSelectTargetChange","handleConfigure","CONFIGURATION_REASON","confirm","handleFinalizeDao","FINALIZED_REASON","fakeMembers","MemberProfile","ethereumAddress","activeMember","member","MemberCard","Members","activeMembers","Membership","votingProposals","requestProposals","passedProposals","failedProposals","REQUESTS","PASSED","FAILED","ProposalWithOffchainVoteActions","lazy","cycleEllipsisStyles","ProposalActions","fallback","ProposalAmount","amount2","amount2Unit","MembershipDetails","TransferDetails","transferAmount","isTransferAmountInt","Transfers","TributeDetails","isTributeAmountInt","Tributes","ProcessName","proposalIdParameter","Routes","exact","path","component","App","Init","setError","isInitComplete","setIsInitComplete","initSnapshotAPI","processReadyMap","setProcessReadyMap","initContracts","handleInitContractsCached","handleGetMemberCached","handleGetSnapshotAPIStatusCached","getSnapshotAPIStatus","fs","InitError","padding","maxWidth","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","document","getElementById","ethereum","autoRefreshOnNetworkChange","apolloClient","ApolloClient","uri","cache","InMemoryCache","typePolicies","Adapter","fields","merge","existing","incoming","Extension","ReactDOM","package","WalletConnectProvider","infuraId","qrcodeModalOptions","mobileLinks","LIGHT","client","useContext"],"mappings":"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","file":"static/js/main.51c7d404.chunk.js","sourcesContent":["import Web3 from 'web3';\n\nexport const isEthAddressValid = (ethAddress: string) =>\n  Web3.utils.isAddress(ethAddress);\n","import React, {useState, useEffect} from 'react';\n\nimport {chooseRandom} from '../../util/helpers';\n\ntype CycleMessageProps = {\n  /**\n   * Use the first item as the default.\n   */\n  useFirstItemStart?: boolean;\n  /**\n   * What is the interval of cycling the message?\n   */\n  intervalMs: number;\n  /**\n   * Provide multiple strings to cycle through.\n   */\n  messages: string[];\n  /**\n   * Render a React Element.\n   * activeMessage is passed in.\n   */\n  render: (m: string) => React.ReactElement;\n};\n\nexport default function CycleMessage(props: CycleMessageProps) {\n  const {intervalMs, messages, useFirstItemStart} = props;\n\n  // Default item at start.\n  const INITIAL_ITEM = useFirstItemStart\n    ? messages[0]\n    : chooseRandom<string>(messages);\n\n  const [activeMessage, setActiveMessage] = useState<string>(INITIAL_ITEM);\n\n  useEffect(() => {\n    const intervalId = setInterval(\n      () =>\n        setActiveMessage((prevMessage) =>\n          chooseRandom<string>(messages, prevMessage)\n        ),\n      intervalMs\n    );\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [intervalMs, messages]);\n\n  return props.render(activeMessage);\n}\n","export default function TimesSVG() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      aria-hidden=\"true\"\n      data-icon=\"times\"\n      data-prefix=\"fal\"\n      viewBox=\"0 0 320 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z\"></path>\n    </svg>\n  );\n}\n","import {EnvironmentName} from './util/types';\n\n/**\n * Global DApp Config\n */\n\nconst {\n  REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS,\n  REACT_APP_DEFAULT_CHAIN_NAME_LOCAL,\n  REACT_APP_ENVIRONMENT,\n  REACT_APP_INFURA_PROJECT_ID_DEV,\n  REACT_APP_INFURA_PROJECT_ID_LOCAL,\n  REACT_APP_INFURA_PROJECT_ID_PROD,\n  REACT_APP_MULTICALL_CONTRACT_ADDRESS,\n  REACT_APP_SNAPSHOT_HUB_API_URL,\n  REACT_APP_GRAPH_API_URL,\n} = process.env;\n\nexport const ENVIRONMENT = REACT_APP_ENVIRONMENT as EnvironmentName | undefined;\n\n/**\n * SNAPSHOT_HUB_API_URL\n *\n * @note For `ENVIRONMENT=localhost` we need to use CRA's local proxy\n *   so that we can communicate with our develop Snapshot Hub API\n *   without any CORS issues.\n *\n * @see src/setupProxy.js\n */\nexport const SNAPSHOT_HUB_API_URL: string | undefined =\n  ENVIRONMENT === 'localhost'\n    ? '/snapshot-hub'\n    : REACT_APP_SNAPSHOT_HUB_API_URL;\n\n// Infura Project Id\nexport const INFURA_PROJECT_ID =\n  REACT_APP_ENVIRONMENT === 'production'\n    ? REACT_APP_INFURA_PROJECT_ID_PROD\n    : REACT_APP_ENVIRONMENT === 'development'\n    ? REACT_APP_INFURA_PROJECT_ID_DEV\n    : REACT_APP_INFURA_PROJECT_ID_LOCAL;\n\n// The Graph API URL\nexport const GRAPH_API_URL = REACT_APP_GRAPH_API_URL;\n\n// Network IDs, when users change wallet networks\nexport const CHAINS = {\n  MAINNET: 1,\n  ROPSTEN: 3,\n  RINKEBY: 4,\n  GOERLI: 5,\n  KOVAN: 42,\n  GANACHE: 1337,\n};\n\n// Network names for modal messaging\nexport const CHAIN_NAME = {\n  [CHAINS.MAINNET]: 'Main Ethereum Network',\n  [CHAINS.ROPSTEN]: 'Ropsten Test Network',\n  [CHAINS.RINKEBY]: 'Rinkeby Test Network',\n  [CHAINS.GOERLI]: 'Grli Test Network',\n  [CHAINS.KOVAN]: 'Kovan Test Network',\n  [CHAINS.GANACHE]: 'Ganache Test Network',\n};\n\nexport const ETHERSCAN_URLS: {[chainId: number]: string} = {\n  [CHAINS.MAINNET]: `https://etherscan.io`,\n  [CHAINS.ROPSTEN]: `https://ropsten.etherscan.io`,\n  [CHAINS.RINKEBY]: `https://rinkeby.etherscan.io`,\n  [CHAINS.GOERLI]: `https://goerli.etherscan.io`,\n  [CHAINS.KOVAN]: `https://kovan.etherscan.io`,\n};\n\n/**\n * CORE CONTRACTS\n * @note as per https://github.com/openlawteam/molochv3-contracts#architecture\n *\n * - DAO Registry (@note uses dao address for the contract address)\n * - DAO Factory\n * - Bank Extension\n */\n\n// If developing locally, include your DaoRegistry contract address in your `.env` file.\nexport const DAO_REGISTRY_CONTRACT_ADDRESS = REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS;\n\nexport const DAO_FACTORY_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0xCC7158B10515B266244c643A2527f7EFfc911421',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0xa549101aAD5143d89aEC2aa330754cEB2C0FF607',\n};\n\nexport const BANK_EXTENSION_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0xE02769bebC6b0A65d5ffaa58d9f981618077a4Ac',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0xCdfD73dCa055ada355142eDfDA22C90BC4CD5504',\n};\n\n/**\n * ADAPTER CONTRACTS\n * @note as per https://github.com/openlawteam/molochv3-contracts#architecture\n *\n * - Configuration\n * - CouponOnboardingContract @todo add to initContracts\n * - Managing\n * - Onboarding\n * - Voting\n * - Offchain voting\n * - Financing\n * - Tribute\n * - Distribute @todo add to initContracts\n * - Rage quit\n * - Guild kick\n * - Withdraw\n */\n\nexport const VOTING_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0x1bF6E52BBD3f8f7Ed6fE8a9621E639aca560A730',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0x87a7DF246f4c26E3352a2ecd147517d42D83dc07',\n};\n\nexport const CONFIGURATION_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0xEF2850b0067C276f65fAAeA9EBA0674819039342',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0x14f02614a3ffD9532b9F5C8Ff5dF3B52419cBF1F',\n};\n\nexport const RAGEQUIT_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0x3044286BFc20080A1D2C06feC1953a0410a4E74c',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0x81849Db26EAd5202fC67e69476a896c6950Eb126',\n};\n\nexport const COUPONONBOARDING_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0x7a28B101eC1eE1B484a07633c339667BDE3d7A52',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0xdfA0518846a46203131d52ECCd34965EE61346Fb',\n};\n\nexport const DISTRIBUTE_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0x54b038278f791c511d1ba330C7B9A1578B350Deb',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0xC3b7E041CF5Ee2d4372D12ED67a98DC87a3593Dd',\n};\n\nexport const FINANCING_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0x80017f240cAd3d761aD7f729796b6275d0Ec57c6',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0x4438bFC72E53eA66c24F8f4992997e9C8a425179',\n};\n\nexport const GUILDKICK_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0x7c3eE8016C8a4dF00672d2417DB7bbA18ff0b054',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0x2Ab0c81b017a3a926E40136E28ba3e9b231fFd5b',\n};\n\nexport const MANAGING_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0x01e79Fb7a697e871c763D681293eBae74f36CE88',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0xFc889988C6e177C6C3c7A6D98Ef4A09f66B445E7',\n};\n\nexport const OFFCHAINVOTING_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0x98ED73779Bd0eD4b8fdA8026F60236CBcbdbb1a6',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0xfBbE098b03865e5C6A64F81f0A475FD5c500DC9D',\n};\n\nexport const ONBOARDING_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0xF2Af0123caBad9Dc851C4BDcA1029b33287d2310',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0xe6bbddF90c76552CbE1D0973F22fb5a975D5825D',\n};\n\nexport const TRIBUTE_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0x36615f472822bD067A4746E37267090428874974',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0xF6677172474B23ae084347fF0c2E30E99aA9fAfd',\n};\n\nexport const WITHDRAW_CONTRACT_ADDRESS = {\n  [CHAINS.MAINNET]: '',\n  [CHAINS.ROPSTEN]: '',\n  [CHAINS.RINKEBY]: '0xa257cAa73C01B6748eA8edAfcC7c3B67538f773A',\n  [CHAINS.GOERLI]: '',\n  [CHAINS.KOVAN]: '',\n  [CHAINS.GANACHE]: '0xE62aEcA374e4a8486eB56FCC5e4091ee978e8005',\n};\n\n// If developing locally, include your Multicall contract address in your `.env` file.\nexport const MULTICALL_CONTRACT_ADDRESS = REACT_APP_MULTICALL_CONTRACT_ADDRESS;\n\nexport const DEFAULT_CHAIN =\n  REACT_APP_ENVIRONMENT === 'production'\n    ? CHAINS.MAINNET\n    : REACT_APP_ENVIRONMENT === 'development'\n    ? CHAINS.RINKEBY\n    : REACT_APP_DEFAULT_CHAIN_NAME_LOCAL // Set this to change local development chain\n    ? CHAINS[REACT_APP_DEFAULT_CHAIN_NAME_LOCAL]\n    : CHAINS.GANACHE; // Defaults to a Ganache private network (1337)\n\n/**\n * These addresses are important as the contracts use them in their configs.\n *\n * @todo Remove and get from the chain/subgraph?\n *\n * @see https://github.com/openlawteam/molochv3-contracts/blob/9e0e03616a00e41e666351e146ee109b9fe37fb2/utils/DaoFactory.js\n */\nexport const GUILD_ADDRESS: string =\n  '0x000000000000000000000000000000000000dead';\nexport const TOTAL_ADDRESS: string =\n  '0x000000000000000000000000000000000000babe';\nexport const SHARES_ADDRESS: string =\n  '0x00000000000000000000000000000000000FF1CE';\nexport const LOOT_ADDRESS: string =\n  '0x00000000000000000000000000000000B105F00D';\nexport const ETH_TOKEN_ADDRESS: string =\n  '0x0000000000000000000000000000000000000000';\nexport const DAI_TOKEN_ADDRESS: string =\n  '0x95b58a6bff3d14b7db2f5cb5f0ad413dc2940658';\n\n/**\n * Space is a unique key (typically a contract address)\n * used by Moloch and Snapshot for building core proposal data.\n *\n * It is also used inside a Snapshot Hub for matching a `space`\n * with its own proposals and votes.\n */\nexport const SPACES: Record<EnvironmentName, string> = {\n  development: 'thelao',\n  // @todo Get local Docker snapshot and \"registered\" space set up.\n  localhost: 'thelao',\n  production: 'thelao',\n};\n\n// Defaults to `localhost` space if `ENVIRONMENT` is `undefined`.\nexport const SPACE: string = SPACES[ENVIRONMENT || 'localhost'];\n\n/**\n * POLLING INTERVAL FOR GQL QUERIES\n * localhost | development - ms, poll every 5sec = 5000\n * production - ms, poll every 10sec = 10000\n */\nexport const GQL_QUERY_POLLING_INTERVAL: number =\n  REACT_APP_ENVIRONMENT === 'production' ? 10000 : 5000;\n","import React, {useState, useEffect, CSSProperties} from 'react';\nimport FadeIn from '../common/FadeIn';\n\ntype CycleEllipsisProps = {\n  /**\n   * What is the interval of cycling the message?\n   */\n  intervalMs?: number;\n  /**\n   * Optional settings for the inner `<FadeIn />` component.\n   */\n  fadeInProps?: Parameters<typeof FadeIn>[0];\n};\n\nconst MESSAGES = ['', '.', '.', '.'];\nconst rootStyles = {position: 'absolute'} as CSSProperties;\nconst nbspStyles = {\n  height: 1,\n  width: 1,\n} as CSSProperties;\n\nexport function CycleEllipsis(props: CycleEllipsisProps) {\n  const {intervalMs = 1000, fadeInProps} = props;\n  const fadeInPropsMerged = {...fadeInProps, inline: true};\n\n  const [upToIndex, setUpToIndex] = useState<number>(1);\n\n  useEffect(() => {\n    const intervalId = setInterval(\n      () => setUpToIndex((prevIndex) => (prevIndex + 1) % MESSAGES.length),\n      intervalMs\n    );\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [intervalMs]);\n\n  return (\n    <>\n      <span style={rootStyles}>\n        <span>{upToIndex >= 0 && MESSAGES[0]}</span>\n        <span>\n          {upToIndex >= 1 && (\n            <FadeIn {...fadeInPropsMerged}>{MESSAGES[1]}</FadeIn>\n          )}\n        </span>\n        <span>\n          {upToIndex >= 2 && (\n            <FadeIn {...fadeInPropsMerged}>{MESSAGES[2]}</FadeIn>\n          )}\n        </span>\n        <span>\n          {upToIndex >= 3 && (\n            <FadeIn {...fadeInPropsMerged}>{MESSAGES[3]}</FadeIn>\n          )}\n        </span>\n      </span>\n      {/* @note Keep as it's an alignment fallback in certain CSS situations when no other text is a sibiling */}\n      <span style={nbspStyles}>&nbsp;</span>\n    </>\n  );\n}\n","import {useReducer, useCallback, useEffect} from 'react';\nimport Web3 from 'web3';\nimport Web3Modal from 'web3modal';\n\nimport {DEFAULT_CHAIN} from '../../../config';\nimport {NetworkNames, NetworkIDs} from '../../../util/enums';\n\ntype NetworkNameType = NetworkNames;\n\n// The `web3Modal` localStorage cached provider key\nconst WEB3_CONNECT_CACHED_PROVIDER: string = 'WEB3_CONNECT_CACHED_PROVIDER';\n\nexport enum DefaultTheme {\n  DARK = 'dark',\n  LIGHT = 'light',\n}\n\nenum ActionType {\n  INIT_WEB3MODAL,\n  ACTIVATE_PROVIDER,\n  UPDATE,\n  UPDATE_FROM_ERROR,\n  ERROR,\n  ERROR_FROM_ACTIVATION,\n  DEACTIVATE_PROVIDER,\n}\n\ninterface Action {\n  type: ActionType;\n  payload?: any;\n}\n\ninterface Web3ModalManagerState {\n  provider?: any;\n  networkId?: number;\n  account?: undefined | string;\n  connected?: boolean;\n  error?: Error;\n  web3Modal?: any;\n  web3Instance?: any;\n}\n\nfunction reducer(\n  state: Web3ModalManagerState,\n  {type, payload}: Action\n): Web3ModalManagerState {\n  switch (type) {\n    case ActionType.INIT_WEB3MODAL: {\n      const {web3Modal} = payload;\n      return {web3Modal};\n    }\n    case ActionType.ACTIVATE_PROVIDER: {\n      const {provider, networkId, account, web3Modal} = payload;\n      return {provider, networkId, account, web3Modal};\n    }\n    case ActionType.UPDATE: {\n      const {provider, networkId, account, connected, web3Instance} = payload;\n\n      return {\n        ...state,\n        ...(provider === undefined ? {} : {provider}),\n        ...(networkId === undefined ? {} : {networkId}),\n        ...(account === undefined ? {} : {account}),\n        ...(connected === undefined ? {} : {connected}),\n        ...(web3Instance === undefined ? {} : {web3Instance}),\n      };\n    }\n    case ActionType.UPDATE_FROM_ERROR: {\n      const {provider, networkId, account} = payload;\n      return {\n        ...state,\n        ...(provider === undefined ? {} : {provider}),\n        ...(networkId === undefined ? {} : {networkId}),\n        ...(account === undefined ? {} : {account}),\n        error: undefined,\n      };\n    }\n    case ActionType.ERROR: {\n      const {error} = payload;\n      const {provider} = state;\n      return {\n        provider,\n        error,\n      };\n    }\n    case ActionType.ERROR_FROM_ACTIVATION: {\n      const {provider, error} = payload;\n      return {\n        provider,\n        error,\n      };\n    }\n    case ActionType.DEACTIVATE_PROVIDER: {\n      return {};\n    }\n  }\n}\n\ninterface Web3ModalManagerInterface {\n  defaultChain?: number;\n  defaultTheme?: DefaultTheme;\n  providerOptions: Record<string, any>; //required\n}\n\nexport default function useWeb3ModalManager({\n  defaultChain,\n  defaultTheme,\n  providerOptions,\n}: Web3ModalManagerInterface) {\n  /**\n   * Context State\n   */\n  const [state, dispatch] = useReducer(reducer, {});\n\n  const web3ModalTheme = defaultTheme;\n  const web3ModalChain = defaultChain || DEFAULT_CHAIN;\n\n  /**\n   * @note\n   * Disable hooks checks for now as additional deps causes issues.\n   */\n  //eslint-disable-next-line react-hooks/exhaustive-deps\n  const onConnectToCached = useCallback(onConnectTo, [state.web3Modal]);\n  const getNetworkNameCached = useCallback(getNetworkName, [web3ModalChain]);\n\n  /**\n   * Init Web3Modal\n   */\n  useEffect(() => {\n    if (!state.web3Modal) {\n      dispatch({\n        type: ActionType.INIT_WEB3MODAL,\n        payload: {\n          web3Modal: new Web3Modal({\n            cacheProvider: true, // optional\n            network: getNetworkNameCached(), // optional\n            providerOptions, // required\n            theme: web3ModalTheme, // optional; `light` or `dark`. `dark` is default\n          }),\n        },\n      });\n    }\n  }, [getNetworkNameCached, providerOptions, web3ModalTheme, state.web3Modal]);\n\n  /**\n   * Automagically connect to cached provider `localStorage`\n   */\n  useEffect(() => {\n    async function activeWeb3ModalCached(cachedProvider: string) {\n      if (cachedProvider) {\n        await onConnectToCached(cachedProvider);\n      }\n    }\n\n    if (state.web3Modal && getCachedProvider()) {\n      activeWeb3ModalCached(state.web3Modal.cachedProvider);\n    }\n  }, [onConnectToCached, state.web3Modal]);\n\n  /**\n   * Double checking if a cached provider exists in `localStorage`\n   */\n  function getCachedProvider(): string | null {\n    return localStorage.getItem(WEB3_CONNECT_CACHED_PROVIDER);\n  }\n\n  /**\n   * Connect to a specfic wallet; get account assets and\n   * subscribe to provider events\n   */\n  async function onConnectTo(connectorId: string) {\n    try {\n      if (!state.web3Modal) return;\n\n      const provider = await state.web3Modal.connectTo(connectorId);\n\n      subscribeProvider(provider);\n\n      const web3: any = new Web3(provider);\n\n      // get accounts\n      const accounts = await web3.eth.getAccounts();\n      // get connected network id\n      const networkId = await web3.eth.net.getId();\n\n      dispatch({\n        type: ActionType.UPDATE,\n        payload: {\n          account: accounts[0],\n          connected: true,\n          provider,\n          networkId,\n          web3Instance: web3,\n        },\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  /**\n   * Disconnect wallet button pressed.\n   */\n  async function onDisconnect() {\n    try {\n      if (state.provider.close) {\n        await state.provider.close();\n      }\n\n      // If the cached provider is not cleared,\n      // WalletConnect will default to the existing session\n      // and does not allow to re-scan the QR code with a new wallet.\n      // Depending on your use case you may want or want not his behaviour.\n      state.web3Modal && (await state.web3Modal.clearCachedProvider());\n\n      // Reset all states; except for web3Modal?!\n      dispatch({type: ActionType.DEACTIVATE_PROVIDER});\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  function subscribeProvider(provider: any) {\n    if (!provider?.on) return;\n\n    // Subscribe to accounts change\n    provider.on('accountsChanged', (accounts: string[]) => {\n      dispatch({\n        type: ActionType.UPDATE,\n        payload: {\n          account: accounts[0],\n        },\n      });\n    });\n\n    // Subscribe to chainId change\n    provider.on('chainChanged', (chainId: string) => {\n      async function handleChainChanged(cachedProvider: string) {\n        // convert `chainId` hex string to number\n        const networkId = parseInt(chainId, 16);\n\n        dispatch({\n          type: ActionType.UPDATE,\n          payload: {\n            networkId,\n          },\n        });\n\n        // if we are connected to the correct network; connect to provider\n        Number(networkId) === Number(chainId) &&\n          (await onConnectToCached(cachedProvider));\n      }\n\n      if (state.web3Modal?.cachedProvider) {\n        handleChainChanged(state.web3Modal?.cachedProvider);\n      }\n    });\n\n    // Subscribe to provider connection\n    provider.on('connect', (info: {chainId: number}) => {\n      console.info('connect', info);\n    });\n\n    // Subscribe to provider disconnection\n    provider.on('disconnect', (error: {code: number; message: string}) => {\n      console.info('disconnect', error);\n    });\n  }\n\n  function getNetworkName(): NetworkNameType {\n    switch (web3ModalChain) {\n      case NetworkIDs.GOERLI:\n        return NetworkNames.GOERLI;\n      case NetworkIDs.KOVAN:\n        return NetworkNames.KOVAN;\n      case NetworkIDs.RINKEBY:\n        return NetworkNames.RINKEBY;\n      case NetworkIDs.ROPSTEN:\n        return NetworkNames.ROPSTEN;\n      case NetworkIDs.MAINNET:\n        return NetworkNames.MAINNET;\n      default:\n        return NetworkNames.MAINNET;\n    }\n  }\n\n  return {\n    ...state,\n    onConnectTo,\n    onDisconnect,\n    providerOptions,\n  };\n}\n","/**\n * chooseRandom\n *\n * Choose a random item from an array.\n *\n * @param {array} array - The array to choose from.\n * @param doNotChooseItem - An item to not choose (e.g. previously chosen item)\n */\nexport function chooseRandom<T>(array: T[], doNotChooseItem?: T) {\n  const arrayToUse =\n    doNotChooseItem !== undefined\n      ? array.filter((a) => a !== doNotChooseItem)\n      : array;\n\n  return arrayToUse[Math.floor(Math.random() * arrayToUse.length)];\n}\n","/**\n * disableReactDevTools\n *\n * Run before the app mounts to disable React dev tools.\n * Ideally, this is run conditionally based on environment.\n *\n * @see: https://github.com/facebook/react-devtools/issues/191#issuecomment-443607190\n */\nexport function disableReactDevTools() {\n  const noop = (): void => undefined;\n  const DEV_TOOLS = (window as any).__REACT_DEVTOOLS_GLOBAL_HOOK__;\n\n  if (typeof DEV_TOOLS === 'object') {\n    for (const [key, value] of Object.entries(DEV_TOOLS)) {\n      DEV_TOOLS[key] = typeof value === 'function' ? noop : null;\n    }\n  }\n}\n","/**\n * dontCloseWindowWarning\n *\n * Warns user not to close the window.\n *\n * @returns {() => void} unsubscribe function to stop listening, and the callback from firing.\n */\nexport function dontCloseWindowWarning(): () => void {\n  // @see: https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload#Example\n  const callback = (event: BeforeUnloadEvent) => {\n    // Cancel the event\n    event.preventDefault();\n    // Chrome requires returnValue to be set\n    event.returnValue = '';\n  };\n\n  window.addEventListener('beforeunload', callback);\n\n  return function unsubscribe() {\n    window.removeEventListener('beforeunload', callback);\n  };\n}\n","/**\n * formatDecimal\n *\n * A simple formatter with respect for dynamic decimal places\n * from `toFixed(2)` to `toFixed(4)`. If the number provided\n * is less than `0.01`, then `toFixed(4)` is used, else `toFixed(2)`.\n *\n * This may not work for all cases where the number is tiny, as it could\n * result in `\"0.0000\"`.\n *\n * @param {number} n\n * @returns {string} A `.toFixed()` representation of the decimal number.\n */\nexport function formatDecimal(n: number): string {\n  return n < 0.01 ? n.toFixed(4) : n.toFixed(2);\n}\n","/**\n * formatNumber\n *\n * Formats a number (U.S. region) with commas (e.g. 1000 -> 1,000).\n *\n * @param {string | number} value\n * @returns {string}\n *\n * @todo maybe a more friendly way via Intl API in JS core?\n */\nexport const formatNumber = (value: number | string): string => {\n  const regEx = new RegExp(/(\\d)(?=(\\d{3})+(?:\\.\\d+)?$)/g);\n  return typeof value === 'number'\n    ? value.toString().replace(/,/g, '').replace(regEx, '$1,')\n    : value.replace(/,/g, '').replace(regEx, '$1,');\n};\n","/**\n * getValidationError\n *\n * Used with react-hook-form (mostly to solve a TS incorrect behavior)\n * Gets the associated error message with a field.\n *\n * @param {string} field\n * @param {Record<string, any>} errors\n * @returns string\n */\nexport function getValidationError(\n  field: string,\n  errors: Record<string, any>\n): string {\n  return errors[field] && 'message' in errors[field]\n    ? (errors[field].message as string)\n    : '';\n}\n","/**\n * normalizeString\n *\n * Converts string case to lowerCase and trims whitespace.\n *\n * @param {string} stringToNormalize\n * @returns {string} The normalized string lowercased and trimmed.\n */\nexport function normalizeString(stringToNormalize: string): string {\n  return stringToNormalize.toLowerCase().trim();\n}\n","/**\n * stripFormatNumber\n *\n * Strips a number string formatting (via `formatNumber`) (e.g. 10,000 -> 10000).\n *\n * @param {string} value Number string to strip formatting (via `formatNumber`) from.\n * @returns {string} A Number string without any formatting form `formatNumber`.\n *\n * @todo maybe a more friendly way via Intl API in JS core?\n */\nexport const stripFormatNumber = (value: string): string =>\n  value.toString().replace(/,/g, '');\n","import {isEthAddressValid} from '../validation';\n\n/**\n * truncateEthAddress\n *\n * Truncates Ethereum address.\n *\n * @param {string} addr\n * @param {number} [maxLength=5]\n * @returns {string}\n */\nexport function truncateEthAddress(\n  addr: string,\n  maxLength: number = 5\n): string {\n  if (addr === null || typeof addr === 'undefined') return '---';\n\n  if (isEthAddressValid(addr)) {\n    const firstSegment = addr.substring(0, maxLength);\n    const secondPart = addr.substring(addr.length - 3);\n    return firstSegment + '...' + secondPart;\n  } else {\n    // in case string argument is not actually an Ethereum address\n    return addr;\n  }\n}\n","import {Dispatch} from 'redux';\n\nimport {ConnectedMemberState, ContractsStateEntry} from '../types';\n\nexport const SET_CONNECTED_MEMBER = 'SET_CONNECTED_MEMBER';\nexport const CLEAR_CONNECTED_MEMBER = 'CLEAR_CONNECTED_MEMBER';\n\n/**\n * getConnectedMember\n *\n * Gets information about a connected address from the DAO's `members`.\n * If the user is not a member, the defaults for a non-existent member of the DAO are returned (e.g. \"0x000000...\")\n * and `isActiveMember` will be `false`.\n *\n * The reason state is set for both a member and a non-member\n * is to ensure we're not too restrictive in our Dapp logic and\n * letting the contract do its job.\n */\nexport function getConnectedMember(\n  account: string,\n  daoRegistryContract: ContractsStateEntry\n) {\n  return async function (dispatch: Dispatch<any>) {\n    const daoRegistryInstance = daoRegistryContract.instance;\n\n    if (!daoRegistryInstance || !account) {\n      dispatch(clearConnectedMember());\n\n      return;\n    }\n\n    try {\n      const memberAddressByDelegateKey: string = await daoRegistryInstance.methods\n        .memberAddressesByDelegatedKey(account)\n        .call({from: account});\n      const isActiveMember: boolean = await daoRegistryInstance.methods\n        .isActiveMember(memberAddressByDelegateKey)\n        .call({from: account});\n      const currentDelegateKey: string = await daoRegistryInstance.methods\n        .getCurrentDelegateKey(memberAddressByDelegateKey)\n        .call({from: account});\n\n      const isActiveMemberChecks: boolean =\n        isActiveMember &&\n        !memberAddressByDelegateKey.startsWith('0x0000000000');\n\n      dispatch(\n        setConnectedMember({\n          delegateKey: currentDelegateKey,\n          isActiveMember: isActiveMemberChecks,\n          memberAddress: memberAddressByDelegateKey,\n        })\n      );\n    } catch (error) {\n      dispatch(clearConnectedMember());\n\n      throw error;\n    }\n  };\n}\n\nexport function setConnectedMember(payload: ConnectedMemberState) {\n  return {type: SET_CONNECTED_MEMBER, ...payload};\n}\n\nexport function clearConnectedMember() {\n  return {type: CLEAR_CONNECTED_MEMBER};\n}\n","/**\n * DaoConstants as defined in the solidity DaoConstants.sol contract\n * and the available adapters as detailed here:\n * https://github.com/openlawteam/molochv3-contracts\n */\nexport enum DaoConstants {\n  BANK = 'bank',\n  CONFIGURATION = 'configuration',\n  DISTRIBUTE = 'distribute',\n  FINANCING = 'financing',\n  GUILDKICK = 'guildkick',\n  ONBOARDING = 'onboarding',\n  OFFCHAINVOTING = 'offchainvoting',\n  MANAGING = 'managing',\n  RAGEQUIT = 'ragequit',\n  TRIBUTE = 'tribute',\n  VOTING = 'voting',\n  WITHDRAW = 'withdraw',\n}\n\n/**\n * Voting adapter names as defined in the solidity voting adapter contracts\n * i.e. `string public constant ADAPTER_NAME = \"VotingContract\"`.\n *\n * @link https://github.com/openlawteam/molochv3-contracts/blob/master/contracts/adapters/voting\n */\nexport enum VotingAdapterName {\n  OffchainVotingContract = 'OffchainVotingContract',\n  VotingContract = 'VotingContract',\n}\n","import Web3 from 'web3';\n\nimport {ContractsStateEntry} from '../../../store/types';\nimport {ContractExtensionNames} from '../types';\n\nexport async function getExtensionAddress(\n  extensionName: ContractExtensionNames,\n  daoContractInstance: ContractsStateEntry['instance'] | undefined\n): Promise<string> {\n  try {\n    if (!daoContractInstance) {\n      throw new Error('No DaoRegistry contract instance provided.');\n    }\n\n    return await daoContractInstance.methods\n      .getExtensionAddress(Web3.utils.sha3(extensionName))\n      .call();\n  } catch (error) {\n    throw error;\n  }\n}\n","import {useState} from 'react';\nimport {TransactionReceipt} from 'web3-core/types';\n\nimport {CHAINS, ETHERSCAN_URLS} from '../../../config';\nimport {contractSend} from '../helpers';\nimport {dontCloseWindowWarning} from '../../../util/helpers';\nimport {useWeb3Modal} from './useWeb3Modal';\nimport {Web3TxStatus} from '../types';\n\ntype UseContractSendReturn = {\n  txError: Error | undefined;\n  txEtherscanURL: string;\n  txIsPromptOpen: boolean;\n  txReceipt: TransactionReceipt | undefined;\n  txSend: (\n    ...p: Parameters<typeof contractSend>\n  ) => Promise<TransactionReceipt | undefined>;\n  txStatus: Web3TxStatus;\n};\n\n/**\n * useContractSend\n *\n * A React hook which encapsulates the call and related values of `contractSend`.\n *\n * @returns {UseContractSendReturn}\n */\nexport function useContractSend(): UseContractSendReturn {\n  const [txError, setTxError] = useState<Error>();\n  const [txEtherscanURL, setTxEtherscanURL] = useState<string>('');\n  const [txIsPromptOpen, setTxIsPromptOpen] = useState<boolean>(false);\n  const [txReceipt, setTxReceipt] = useState<TransactionReceipt>();\n  const [txStatus, setTxStatus] = useState<Web3TxStatus>(Web3TxStatus.STANDBY);\n\n  /**\n   * Our hooks\n   */\n\n  const {networkId} = useWeb3Modal();\n\n  /**\n   * Functions\n   */\n\n  function handleOnTxProcess(callback?: (txh: string) => void) {\n    return (txHash: string) => {\n      setTxStatus(Web3TxStatus.PENDING);\n      setTxIsPromptOpen(false);\n\n      // Ganache transactions do not show on Etherscan.\n      if (networkId && networkId !== CHAINS.GANACHE) {\n        setTxEtherscanURL(`${ETHERSCAN_URLS[networkId]}/tx/${txHash}`);\n      }\n\n      callback && callback(txHash);\n    };\n  }\n\n  async function txSend(\n    ...contractSendParams: Parameters<typeof contractSend>\n  ) {\n    // Activate \"don't close window\" warning\n    const unsubscribeDontCloseWindow = dontCloseWindowWarning();\n\n    try {\n      // Reset state in case trying again after error.\n      setTxError(undefined);\n      setTxEtherscanURL('');\n\n      setTxStatus(Web3TxStatus.AWAITING_CONFIRM);\n      setTxIsPromptOpen(true);\n\n      // Intercept the on process callback to allow us to set our internal state.\n      contractSendParams[4] = handleOnTxProcess(contractSendParams[4]);\n\n      const receipt = await contractSend(...contractSendParams);\n\n      setTxReceipt(receipt);\n      setTxStatus(Web3TxStatus.FULFILLED);\n\n      unsubscribeDontCloseWindow();\n\n      return receipt;\n    } catch (error) {\n      setTxError(error);\n      setTxStatus(Web3TxStatus.REJECTED);\n      setTxIsPromptOpen(false);\n\n      unsubscribeDontCloseWindow();\n\n      throw error;\n    }\n  }\n\n  return {\n    txError,\n    txEtherscanURL,\n    txIsPromptOpen,\n    txReceipt,\n    txSend,\n    txStatus,\n  };\n}\n","import {useEffect, useState, useRef} from 'react';\n\ntype GasStationResponse = {\n  average: number;\n  avgWait: number;\n  block_time: number;\n  blockNum: number;\n  fast: number;\n  fastest: number;\n  fastestWait: number;\n  fastWait: number;\n  safeLow: number;\n  safeLowWait: number;\n  speed: number;\n  standard: number;\n};\n\ntype GasPrices = {\n  average?: string;\n  fast: string;\n  fastest: string;\n  safeLow: string;\n  standard?: string;\n};\n\nconst REQUEST_TIMEOUT_MS = 5000;\nconst URL = 'https://ethgasstation.info/json/ethgasAPI.json';\nconst SECONDARY_URL = 'https://www.etherchain.org/api/gasPriceOracle';\n\n/**\n * useETHGasPrice\n *\n * Returns the latest mainnet gas prices, converted to WEI string.\n * If ETHGasStation is not returning quick enough (or fails), it tries etherchain's\n * gasPriceOracle API endpoint.\n *\n * @returns {GasPrices}\n */\nexport function useETHGasPrice() {\n  /**\n   * State\n   */\n\n  const [gasURL, setGasURL] = useState<string>(URL);\n  const [gasPrices, setGasPrices] = useState<GasPrices>();\n\n  const isMounted = useRef<boolean>();\n\n  useEffect(() => {\n    /**\n     * If the environment is not production, then exit.\n     * Sometimes using mainnet gas prices for Rinkeby won't work well with wallets.\n     */\n    if (process.env.REACT_APP_ENVIRONMENT !== 'production') return;\n\n    isMounted.current = true;\n\n    const abortController = new AbortController();\n    // If the request takes longer than 2 seconds,\n    // abort the request and try the secondary URL.\n    const timeoutId = setTimeout(() => {\n      abortController.abort();\n\n      setGasURL(SECONDARY_URL);\n    }, REQUEST_TIMEOUT_MS);\n\n    // To convert the provided values to gwei, divide by 10\n    const convertGasToWEI = (price: number) =>\n      ((gasURL === URL ? price / 10 : price) * 1000000000).toString();\n\n    fetch(gasURL, {signal: abortController.signal})\n      .then((response) => {\n        if (!isMounted.current) return;\n\n        if (!response.ok) {\n          // try a new endpoint\n          setGasURL(SECONDARY_URL);\n\n          throw new Error(\n            'Something went wrong while getting the latest gas price.'\n          );\n        }\n\n        clearTimeout(timeoutId);\n\n        return response.json();\n      })\n      .then((jsonResponse: GasStationResponse) => {\n        if (!isMounted.current) return;\n\n        const {average, fast, fastest, safeLow, standard} = jsonResponse;\n\n        setGasPrices({\n          average: convertGasToWEI(average || standard),\n          fast: convertGasToWEI(fast),\n          fastest: convertGasToWEI(fastest),\n          safeLow: convertGasToWEI(safeLow),\n        });\n      })\n      .catch(() => {\n        clearTimeout(timeoutId);\n\n        if (!isMounted.current) return;\n\n        // try a new endpoint\n        setGasURL(SECONDARY_URL);\n        setGasPrices(undefined);\n      });\n\n    return () => {\n      isMounted.current = false;\n\n      abortController.abort();\n\n      clearTimeout(timeoutId);\n    };\n  }, [gasURL]);\n\n  return gasPrices;\n}\n","import {useEffect, useState} from 'react';\n\nimport {useWeb3Modal} from '.';\nimport {CHAIN_NAME, DEFAULT_CHAIN} from '../../../config';\n\n/**\n * useIsDefaultChain\n *\n * Checks if the connected account it connected to the default chain\n * @returns {\n *  defaultChain: number,\n *  defaultChainError: string,\n *  isDefaultChain: boolean\n * }\n */\nexport function useIsDefaultChain(): {\n  defaultChain: number;\n  defaultChainError: Error | undefined;\n  isDefaultChain: boolean;\n} {\n  /**\n   * Our hooks\n   */\n\n  const {networkId, connected} = useWeb3Modal();\n\n  /**\n   * State\n   */\n\n  const [isDefaultChain, setIsDefaultChain] = useState<boolean>(false);\n  const [defaultChainError, setDefaultChainError] = useState<Error>();\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    setIsDefaultChain(networkId === DEFAULT_CHAIN);\n\n    if (connected && networkId !== DEFAULT_CHAIN) {\n      setDefaultChainError(\n        new Error(`Please connect to the ${CHAIN_NAME[DEFAULT_CHAIN]}.`)\n      );\n\n      return;\n    }\n\n    // If we make it here, reset after running checks.\n    setDefaultChainError(undefined);\n  }, [connected, networkId]);\n\n  return {\n    defaultChain: DEFAULT_CHAIN,\n    defaultChainError,\n    isDefaultChain,\n  };\n}\n","import {useCallback} from 'react';\nimport {useDispatch} from 'react-redux';\n\nimport {\n  initContractDaoFactory,\n  initContractBankExtension,\n  initContractDaoRegistry,\n  initContractDistribute,\n  initContractManaging,\n  initContractOnboarding,\n  initContractConfiguration,\n  initContractFinancing,\n  initContractGuildKick,\n  initContractRagequit,\n  initContractTribute,\n  initRegisteredVotingAdapter,\n  initContractWithdraw,\n} from '../../../store/actions';\nimport {ReduxDispatch} from '../../../store/types';\nimport {useIsDefaultChain} from './useIsDefaultChain';\nimport {useWeb3Modal} from '.';\n\n/**\n * useInitContracts\n *\n * Initiates all contracts used in the app.\n *\n * @todo Use subgraph to pass the address to each init function, so it skips chain calls.\n */\nexport function useInitContracts(): () => Promise<void> {\n  /**\n   * Our hooks\n   */\n\n  const {isDefaultChain} = useIsDefaultChain();\n  const {web3Instance} = useWeb3Modal();\n\n  /**\n   * Their hooks\n   */\n\n  const dispatch = useDispatch<ReduxDispatch>();\n\n  /**\n   * Cached callbacks\n   */\n\n  const initContractsCached = useCallback(initContracts, [\n    dispatch,\n    isDefaultChain,\n    web3Instance,\n  ]);\n\n  /**\n   * Init contracts\n   */\n  async function initContracts() {\n    try {\n      if (!isDefaultChain) return;\n\n      // Must init registry first\n      await dispatch(initContractDaoRegistry(web3Instance));\n\n      // Init more contracts\n      await dispatch(initContractDaoFactory(web3Instance));\n      await dispatch(initContractConfiguration(web3Instance));\n      await dispatch(initContractFinancing(web3Instance));\n      await dispatch(initContractGuildKick(web3Instance));\n      await dispatch(initContractManaging(web3Instance));\n      await dispatch(initContractRagequit(web3Instance));\n      await dispatch(initContractWithdraw(web3Instance));\n      // Init other contracts\n      await dispatch(initContractBankExtension(web3Instance));\n      await dispatch(initContractManaging(web3Instance));\n      await dispatch(initContractOnboarding(web3Instance));\n      await dispatch(initContractTribute(web3Instance));\n      await dispatch(initContractDistribute(web3Instance));\n      await dispatch(initRegisteredVotingAdapter(web3Instance));\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  return initContractsCached;\n}\n","import {useSelector} from 'react-redux';\n\nimport {normalizeString} from '../../../util/helpers';\nimport {StoreState} from '../../../store/types';\nimport {useWeb3Modal} from './useWeb3Modal';\n\nexport function useIsAddressDelegated(): boolean {\n  /**\n   * Selectors\n   */\n\n  const delegateKey =\n    useSelector((s: StoreState) => s.connectedMember?.delegateKey) || '';\n  const memberAddress =\n    useSelector((s: StoreState) => s.connectedMember?.memberAddress) || '';\n\n  /**\n   * Our hooks\n   */\n\n  const {account = ''} = useWeb3Modal();\n\n  return (\n    normalizeString(account) === normalizeString(memberAddress) &&\n    normalizeString(account) !== normalizeString(delegateKey)\n  );\n}\n","import React, {createContext} from 'react';\nimport Web3 from 'web3';\n\nimport useWeb3ModalManager, {DefaultTheme} from './hooks/useWeb3ModalManager';\n\ntype Web3ModalProviderArguments = {\n  defaultChain?: number;\n  defaultTheme?: DefaultTheme;\n  providerOptions: Record<string, any>; // required\n};\n\ntype Web3ModalManagerProps = {\n  children: JSX.Element;\n} & Web3ModalProviderArguments;\n\nexport type Web3ModalContextValue = {\n  account: string | undefined;\n  connected: boolean | undefined;\n  providerOptions: Record<string, any>;\n  onConnectTo: (providerName: string) => void;\n  onDisconnect: () => void;\n  networkId: number | undefined;\n  provider: any;\n  web3Instance: Web3;\n  web3Modal: any;\n};\n\nexport const Web3ModalContext = createContext<Web3ModalContextValue>(\n  {} as Web3ModalContextValue\n);\n\n/**\n * Web3ModalManager\n *\n * A provider for the `web3modal` wallet connection, provides access to\n * the wallet states, enables connections and disconnections.\n *\n * @example\n * <Web3ModalManager defaultChain={1} defaultTheme={'dark'} providerOptions={...}>\n *   ...\n * </Web3ModalManager>\n *\n * @param children: React.JSX\n * @param defaultChain?: number\n * @param defaultTheme?: DefaultTheme; default is `dark`\n * @param providerOptions: Record<string, any>\n */\n\nexport default function Web3ModalManager({\n  children,\n  defaultChain,\n  defaultTheme = DefaultTheme.DARK,\n  providerOptions,\n}: Web3ModalManagerProps) {\n  const web3ModalProviderArguments: Web3ModalProviderArguments = {\n    defaultChain,\n    defaultTheme,\n    providerOptions,\n  };\n  const {\n    account,\n    connected,\n    onConnectTo,\n    onDisconnect,\n    networkId,\n    provider,\n    web3Instance,\n    web3Modal,\n  } = useWeb3ModalManager(web3ModalProviderArguments);\n\n  const web3ModalContext = {\n    account,\n    connected,\n    onConnectTo,\n    onDisconnect,\n    networkId,\n    provider,\n    providerOptions,\n    web3Instance,\n    web3Modal,\n  };\n\n  return (\n    <Web3ModalContext.Provider value={web3ModalContext}>\n      {children}\n    </Web3ModalContext.Provider>\n  );\n}\n","/**\n * @see `IVoting.sol` in molochv3-contracts\n */\nexport enum VotingState {\n  NOT_STARTED,\n  TIE,\n  PASS,\n  NOT_PASS,\n  IN_PROGRESS,\n  GRACE_PERIOD,\n}\n","import {gql} from '@apollo/client';\n\nexport const GET_DAO = gql`\n  query GetDao($id: ID) {\n    molochv3S(where: {id: $id}) {\n      id # dao address\n      daoAddress\n      name\n      totalShares\n      bank {\n        id\n        bankAddress\n      }\n    }\n  }\n`;\n","import {gql} from '@apollo/client';\n\nexport const GET_ADAPTERS_AND_EXTENSIONS = gql`\n  query GetAdaptersAndExtensions($daoAddress: String) {\n    molochv3S(where: {daoAddress: $daoAddress}) {\n      adapters {\n        id\n        acl\n        adapterId\n        adapterAddress\n      }\n      extensions {\n        id\n        extensionId\n        extensionAddress\n      }\n    }\n  }\n`;\n","// see: http://reactcommunity.org/react-transition-group/transition\nimport React from 'react';\nimport {Transition} from 'react-transition-group';\n\ntype FadeInProps = {\n  children?: React.ReactNode;\n  duration?: number;\n  /**\n   * Defaults to `true`\n   */\n  show?: boolean;\n  /**\n   * Renders a `<span>` wrapper where the animation CSS is applied.\n   */\n  inline?: boolean;\n};\n\nconst DEFAULT_DURATION = 300;\n\nconst defaultStyle = (props: FadeInProps) => ({\n  transition: `opacity ${\n    props.duration || 300\n  }ms cubic-bezier(0, 0.69, 0.32, 0.64)`,\n  opacity: 0,\n});\n\nconst transitionStyles: Record<string, any> = {\n  entering: {opacity: 0},\n  entered: {opacity: 1},\n  exiting: {opacity: 0},\n  exited: {opacity: 0},\n};\n\nexport default function FadeIn(props: FadeInProps) {\n  const {inline} = props;\n\n  return (\n    <Transition\n      appear\n      in={props.show !== undefined ? props.show : true}\n      timeout={props.duration || DEFAULT_DURATION}>\n      {(transition) =>\n        inline ? (\n          <span\n            style={{\n              ...defaultStyle(props),\n              ...transitionStyles[transition],\n            }}>\n            {props.children}\n          </span>\n        ) : (\n          <div\n            style={{\n              ...defaultStyle(props),\n              ...transitionStyles[transition],\n            }}>\n            {props.children}\n          </div>\n        )\n      }\n    </Transition>\n  );\n}\n","/**\n * FOR HIGH REUSE ENUMS\n *\n * For any other more specific enum types, co-locate them in either:\n *\n * 1) The actual code file.\n * 2) In a type file in the location of the code files which mainly use the types.\n *\n * @see https://kentcdodds.com/blog/colocation\n */\n\n/**\n * @see https://chainid.network/\n */\nexport enum NetworkIDs {\n  GOERLI = 5,\n  KOVAN = 42,\n  RINKEBY = 4,\n  ROPSTEN = 3,\n  MAINNET = 1,\n}\n\n/**\n * @see https://chainid.network/\n */\nexport enum NetworkNames {\n  GOERLI = 'goerli',\n  KOVAN = 'kovan',\n  RINKEBY = 'rinkeby',\n  ROPSTEN = 'ropsten',\n  MAINNET = 'mainnet',\n}\n\nexport enum FormFieldErrors {\n  REQUIRED = 'This field is required.',\n  INVALID_BYTES32 = 'The value is not a bytes32.',\n  INVALID_BYTES32_ARRAY = 'The value is not a comma-separated bytes32 format, ie. 0x...,0x...',\n  INVALID_ETHEREUM_ADDRESS = 'The ethereum address is invalid.',\n  INVALID_NUMBER = 'The value is not a number.',\n  INVALID_NUMBER_ARRAY = 'The value is not a comma-separated number format, ie. 42,5,124',\n}\n\nexport enum ProposalHeaderNames {\n  FAILED = 'Failed',\n  PASSED = 'Passed',\n  REQUESTS = 'Proposals',\n  VOTING = 'Voting',\n}\n","import React, {useState} from 'react';\nimport {useSelector} from 'react-redux';\nimport {\n  createVote,\n  getVoteResultRootDomainDefinition,\n  prepareVoteResult,\n  signMessage,\n  SnapshotVoteResponseData,\n  toStepNode,\n  VoteChoicesIndex,\n} from '@openlaw/snapshot-js-erc712';\nimport {VoteEntry} from '@openlaw/snapshot-js-erc712/dist/types';\n\nimport {ContractAdapterNames, Web3TxStatus} from '../../web3/types';\nimport {getAdapterAddressFromContracts} from '../../web3/helpers';\nimport {DEFAULT_CHAIN, SHARES_ADDRESS} from '../../../config';\nimport {PRIMARY_TYPE_ERC712, TX_CYCLE_MESSAGES} from '../../web3/config';\nimport {ProposalData} from '../types';\nimport {StoreState} from '../../../store/types';\nimport {useMemberActionDisabled} from '../../../hooks';\nimport {useWeb3Modal, useContractSend, useETHGasPrice} from '../../web3/hooks';\nimport CycleMessage from '../../feedback/CycleMessage';\nimport ErrorMessageWithDetails from '../../common/ErrorMessageWithDetails';\nimport EtherscanURL from '../../web3/EtherscanURL';\nimport FadeIn from '../../common/FadeIn';\nimport Loader from '../../feedback/Loader';\n\ntype OffchainVotingSubmitResultActionProps = {\n  adapterName: ContractAdapterNames;\n  proposal: ProposalData;\n};\n\ntype SubmitVoteResultArguments = [\n  string, // `dao`\n  string, // `proposalId`\n  string, // `proposal data`,\n  {\n    account: string;\n    choice: VoteChoicesIndex;\n    index: number;\n    nbNo: string;\n    nbYes: string;\n    proof: string[];\n    proposalHash: string;\n    rootSig: string;\n    sig: string;\n    timestamp: number;\n  }\n];\n\nexport function OffchainOpRollupVotingSubmitResultAction(\n  props: OffchainVotingSubmitResultActionProps\n) {\n  const {\n    adapterName,\n    proposal: {snapshotProposal},\n  } = props;\n\n  /**\n   * State\n   */\n\n  const [signatureStatus, setSignatureStatus] = useState<Web3TxStatus>(\n    Web3TxStatus.STANDBY\n  );\n  const [submitError, setSubmitError] = useState<Error>();\n\n  /**\n   * Selectors\n   */\n\n  const bankExtensionMethods = useSelector(\n    (s: StoreState) => s.contracts.BankExtensionContract?.instance.methods\n  );\n  const offchainVotingMethods = useSelector(\n    (s: StoreState) => s.contracts.VotingContract?.instance.methods\n  );\n  const daoRegistryAddress = useSelector(\n    (s: StoreState) => s.contracts.DaoRegistryContract?.contractAddress\n  );\n  const contracts = useSelector((s: StoreState) => s.contracts);\n\n  /**\n   * Our hooks\n   */\n\n  const {account, provider} = useWeb3Modal();\n\n  const {txEtherscanURL, txIsPromptOpen, txSend, txStatus} = useContractSend();\n\n  const {\n    isDisabled,\n    openWhyDisabledModal,\n    WhyDisabledModal,\n  } = useMemberActionDisabled();\n\n  const gasPrices = useETHGasPrice();\n\n  /**\n   * Variables\n   */\n\n  const isInProcess =\n    signatureStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    signatureStatus === Web3TxStatus.PENDING ||\n    txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    txStatus === Web3TxStatus.PENDING;\n\n  const isDone =\n    txStatus === Web3TxStatus.FULFILLED &&\n    signatureStatus === Web3TxStatus.FULFILLED;\n\n  const isInProcessOrDone = isInProcess || isDone || txIsPromptOpen;\n\n  /**\n   * Functions\n   */\n\n  async function handleSubmit() {\n    try {\n      if (!daoRegistryAddress) {\n        throw new Error('No DAO Registry address was found.');\n      }\n\n      if (!snapshotProposal) {\n        throw new Error('No Snapshot proposal was found.');\n      }\n\n      if (!snapshotProposal.votes) {\n        throw new Error('No Snapshot proposal votes were found.');\n      }\n\n      setSignatureStatus(Web3TxStatus.AWAITING_CONFIRM);\n\n      const {idInDAO: proposalHash} = snapshotProposal;\n      const adapterAddress = getAdapterAddressFromContracts(\n        adapterName,\n        contracts\n      );\n\n      // 1. Create vote entries\n      const voteEntriesPromises: Promise<VoteEntry>[] = snapshotProposal.votes.map(\n        async (v) => {\n          const voteData: SnapshotVoteResponseData = Object.values(v)[0];\n\n          return createVote({\n            proposalHash,\n            account: voteData.address,\n            voteYes: voteData.msg.payload.choice === VoteChoicesIndex.Yes,\n            timestamp: Number(voteData.msg.timestamp),\n            sig: voteData.sig,\n            // @todo conditionally use subgraph weight data\n            weight: await bankExtensionMethods\n              .getPriorAmount(\n                voteData.address,\n                SHARES_ADDRESS,\n                snapshotProposal.msg.payload.snapshot\n              )\n              .call(),\n          });\n        }\n      );\n\n      // 2. Prepare vote Result\n      const {voteResultTree, votes} = await prepareVoteResult({\n        actionId: adapterAddress,\n        chainId: DEFAULT_CHAIN,\n        daoAddress: daoRegistryAddress,\n        votes: await Promise.all(voteEntriesPromises),\n      });\n\n      const voteResultTreeHexRoot = voteResultTree.getHexRoot();\n\n      const result = toStepNode({\n        actionId: adapterAddress,\n        chainId: DEFAULT_CHAIN,\n        merkleTree: voteResultTree,\n        // @note Should use last entry\n        step: votes[votes.length - 1],\n        verifyingContract: daoRegistryAddress,\n      });\n\n      const {domain, types} = getVoteResultRootDomainDefinition(\n        daoRegistryAddress,\n        adapterAddress,\n        DEFAULT_CHAIN\n      );\n\n      const messageParams = JSON.stringify({\n        domain,\n        message: {root: voteResultTreeHexRoot},\n        primaryType: PRIMARY_TYPE_ERC712,\n        types,\n      });\n\n      // 3. Sign message\n      const signature = await signMessage(provider, account, messageParams);\n\n      setSignatureStatus(Web3TxStatus.FULFILLED);\n\n      const submitVoteResultArguments: SubmitVoteResultArguments = [\n        daoRegistryAddress,\n        proposalHash,\n        voteResultTreeHexRoot,\n        {...result, rootSig: signature},\n      ];\n\n      const txArguments = {\n        from: account || '',\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      // 4. Send the tx\n      await txSend(\n        'submitVoteResult',\n        offchainVotingMethods,\n        submitVoteResultArguments,\n        txArguments\n      );\n    } catch (error) {\n      setSubmitError(error);\n      setSignatureStatus(Web3TxStatus.REJECTED);\n    }\n  }\n\n  function renderSubmitStatus(): React.ReactNode {\n    // Either Snapshot or chain tx\n    if (\n      txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n      signatureStatus === Web3TxStatus.AWAITING_CONFIRM\n    ) {\n      return 'Awaiting your confirmation\\u2026';\n    }\n\n    // Only for chain tx\n    switch (txStatus) {\n      case Web3TxStatus.PENDING:\n        return (\n          <>\n            <CycleMessage\n              intervalMs={2000}\n              messages={TX_CYCLE_MESSAGES}\n              useFirstItemStart\n              render={(message) => {\n                return <FadeIn key={message}>{message}</FadeIn>;\n              }}\n            />\n\n            <EtherscanURL url={txEtherscanURL} isPending />\n          </>\n        );\n      case Web3TxStatus.FULFILLED:\n        return (\n          <>\n            <div>Result submitted!</div>\n\n            <EtherscanURL url={txEtherscanURL} />\n          </>\n        );\n      default:\n        return null;\n    }\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <>\n      <div>\n        <button\n          className=\"proposaldetails__button\"\n          disabled={isDisabled || isInProcessOrDone}\n          onClick={isDisabled || isInProcessOrDone ? () => {} : handleSubmit}>\n          {isInProcess ? <Loader /> : isDone ? 'Done' : 'Submit Vote Result'}\n        </button>\n\n        <ErrorMessageWithDetails\n          error={submitError}\n          renderText=\"Something went wrong\"\n        />\n\n        {/* SUBMIT STATUS */}\n        {isInProcessOrDone && (\n          <div className=\"form__submit-status-container\">\n            {renderSubmitStatus()}\n          </div>\n        )}\n\n        {isDisabled && (\n          <button className=\"button--help\" onClick={openWhyDisabledModal}>\n            Why is submitting disabled?\n          </button>\n        )}\n      </div>\n\n      <WhyDisabledModal title=\"Why is this disabled?\" />\n    </>\n  );\n}\n","import {useEffect, useRef, useState} from 'react';\n\nimport {ContractAdapterNames, Web3TxStatus} from '../../web3/types';\nimport {getVoteChosen} from '../helpers';\nimport {ProposalData} from '../types';\nimport {StoreState} from '../../../store/types';\nimport {useIsAddressDelegated, useWeb3Modal} from '../../web3/hooks';\nimport {useMemberActionDisabled} from '../../../hooks';\nimport {useSelector} from 'react-redux';\nimport {useSignAndSendVote} from '../hooks';\nimport {VoteChoices} from '@openlaw/snapshot-js-erc712';\nimport {VotingActionButtons} from '.';\nimport ErrorMessageWithDetails from '../../common/ErrorMessageWithDetails';\n\ntype OffchainVotingActionProps = {\n  adapterName?: ContractAdapterNames;\n  proposal: ProposalData;\n};\n\ntype VotingDisabledReasons = {\n  addressIsDelegatedMessage: string;\n  alreadyVotedMessage: string;\n};\n\nconst getDelegatedAddressMessage = (a: string) =>\n  `Your member address is delegated to ${a}. You must use that address to vote.`;\n\n/**\n * OffchainVotingAction\n *\n * An off-chain voting action component which facilitates submitting to Snapshot Hub.\n *\n * @returns {JSX.Element}\n */\nexport function OffchainVotingAction(\n  props: OffchainVotingActionProps\n): JSX.Element | null {\n  const {adapterName, proposal} = props;\n\n  /**\n   * State\n   */\n\n  const [voteChoiceClicked, setVoteChoiceClicked] = useState<VoteChoices>();\n  const [submitError, setSubmitError] = useState<Error>();\n\n  /**\n   * Refs\n   */\n\n  const votingDisabledReasonsRef = useRef<VotingDisabledReasons>({\n    addressIsDelegatedMessage: '',\n    alreadyVotedMessage: '',\n  });\n\n  /**\n   * Selectors\n   */\n\n  const delegateAddress = useSelector(\n    (s: StoreState) => s.connectedMember?.delegateKey\n  );\n\n  /**\n   * Our hooks\n   */\n\n  const {account} = useWeb3Modal();\n  const {signAndSendVote, voteDataStatus} = useSignAndSendVote();\n  const isAddressDelegated = useIsAddressDelegated();\n  const voteChosen = getVoteChosen(\n    proposal.snapshotProposal?.votes,\n    account || ''\n  );\n  const {\n    isDisabled,\n    openWhyDisabledModal,\n    setOtherDisabledReasons,\n    WhyDisabledModal,\n  } = useMemberActionDisabled();\n\n  /**\n   * Variables\n   */\n\n  const proposalHash: string = proposal.snapshotProposal?.idInDAO || '';\n  const snapshotProposalId: string =\n    proposal.snapshotProposal?.idInSnapshot || '';\n\n  const isInProcess =\n    voteDataStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    voteDataStatus === Web3TxStatus.PENDING;\n\n  const isDone = voteDataStatus === Web3TxStatus.FULFILLED;\n\n  const isInProcessOrDone = isInProcess || isDone;\n\n  const isSubmitDisabled = isDisabled || isInProcessOrDone;\n\n  const voteChoiceProgress: VoteChoices | undefined = isInProcess\n    ? voteChoiceClicked\n    : undefined;\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    // 1. Determine and set local reasons why voting would be disabled\n\n    // Reason: address is delegated\n    if (delegateAddress) {\n      // Set or unset\n      const addressIsDelegatedMessage = isAddressDelegated\n        ? getDelegatedAddressMessage(delegateAddress)\n        : '';\n\n      votingDisabledReasonsRef.current = {\n        ...votingDisabledReasonsRef.current,\n        addressIsDelegatedMessage,\n      };\n    }\n\n    // Reason: already voted\n    votingDisabledReasonsRef.current = {\n      ...votingDisabledReasonsRef.current,\n      alreadyVotedMessage: voteChosen ? 'You have already voted.' : '',\n    };\n\n    // 2. Set reasons\n    setOtherDisabledReasons(Object.values(votingDisabledReasonsRef.current));\n  }, [\n    delegateAddress,\n    isAddressDelegated,\n    setOtherDisabledReasons,\n    voteChosen,\n  ]);\n\n  /**\n   * Functions\n   */\n\n  async function handleSubmitVote(choice: VoteChoices) {\n    try {\n      if (!proposalHash) {\n        throw new Error('No proposal hash was found.');\n      }\n      if (!snapshotProposalId) {\n        throw new Error('No proposal ID was found.');\n      }\n\n      setVoteChoiceClicked(VoteChoices[choice]);\n\n      await signAndSendVote({\n        ...(adapterName ? {adapterName} : undefined),\n        partialVoteData: {choice},\n        proposalIdInDAO: proposalHash,\n        proposalIdInSnapshot: snapshotProposalId,\n      });\n\n      // Refetch to show the vote the user submitted\n      await proposal.refetchProposalOrDraft();\n    } catch (error) {\n      setSubmitError(error);\n    }\n  }\n\n  return (\n    <>\n      <VotingActionButtons\n        onClick={isSubmitDisabled ? () => {} : handleSubmitVote}\n        buttonProps={{\n          disabled: isSubmitDisabled,\n          'aria-disabled': isSubmitDisabled,\n        }}\n        voteChosen={voteChosen}\n        voteProgress={voteChoiceProgress}\n      />\n\n      <ErrorMessageWithDetails\n        error={submitError}\n        renderText=\"Something went wrong\"\n      />\n\n      {isDisabled && (\n        <button className=\"button--help\" onClick={openWhyDisabledModal}>\n          Why is voting disabled?\n        </button>\n      )}\n\n      <WhyDisabledModal title=\"Why is voting disabled?\" />\n    </>\n  );\n}\n","import {VoteChoicesIndex} from '@openlaw/snapshot-js-erc712';\n\nimport {normalizeString} from '../../../util/helpers';\nimport {SnapshotProposal} from '../types';\nimport {VoteChoices} from '../../web3/types';\n\nexport function getVoteChosen(\n  votes: SnapshotProposal['votes'],\n  account: string\n): VoteChoices | undefined {\n  const voteEntry = (votes || []).find((ve) =>\n    Object.entries(ve).find(\n      ([address, _voteData]) =>\n        normalizeString(address) === normalizeString(account || '')\n    )\n  );\n\n  if (voteEntry) {\n    const voteData = Object.entries(voteEntry)[0][1];\n    const choice = voteData.msg.payload.choice;\n\n    return choice === VoteChoicesIndex.Yes ? VoteChoices.Yes : VoteChoices.No;\n  }\n\n  return undefined;\n}\n","import React, {useCallback, useEffect, useState} from 'react';\n\ntype ProposalPeriodProps = {\n  startLabel?: React.ReactNode;\n  startPeriodMs: number;\n  endLabel?: React.ReactNode;\n  endedLabel?: React.ReactNode;\n  endPeriodMs: number;\n};\n\nexport default function ProposalPeriod(props: ProposalPeriodProps) {\n  const {startLabel, startPeriodMs, endLabel, endedLabel, endPeriodMs} = props;\n\n  /**\n   * Variables\n   */\n\n  const getTimeRemaining = (endtime: Date) => {\n    const t =\n      Date.parse(endtime.toString()) - Date.parse(new Date().toString());\n    const seconds = Math.floor((t / 1000) % 60);\n    const minutes = Math.floor((t / 1000 / 60) % 60);\n    const hours = Math.floor((t / (1000 * 60 * 60)) % 24);\n    const days = Math.floor(t / (1000 * 60 * 60 * 24));\n\n    return {\n      total: t,\n      days: days,\n      hours: hours,\n      minutes: minutes,\n      seconds: seconds,\n    };\n  };\n\n  /**\n   * State\n   */\n\n  const [proposalPeriod, setProposalPeriod] = useState<React.ReactNode>(null);\n\n  /**\n   * Cached callbacks\n   */\n\n  const displayCountdownCached = useCallback(displayCountdown, []);\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const currentDate = new Date();\n      const startDate = new Date(startPeriodMs);\n      const endDate = new Date(endPeriodMs);\n\n      if (currentDate < startDate) {\n        const start = (\n          <span>\n            <span className=\"votingstatus\">{startLabel || 'Starts:'}</span>{' '}\n            <span className=\"votingstatus__timer\">\n              {displayCountdownCached(startDate, true)}\n            </span>\n          </span>\n        );\n\n        setProposalPeriod(start);\n      } else if (currentDate < endDate) {\n        const end = (\n          <span>\n            <span className=\"votingstatus\">{endLabel || 'Ends:'}</span>{' '}\n            <span className=\"votingstatus__timer\">\n              {displayCountdownCached(endDate)}\n            </span>\n          </span>\n        );\n\n        setProposalPeriod(end);\n      } else {\n        const ended = (\n          <span className=\"votingstatus\">{endedLabel || 'Ended'}</span>\n        );\n\n        setProposalPeriod(ended);\n        clearInterval(interval);\n      }\n    }, 1000);\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, [\n    displayCountdownCached,\n    endLabel,\n    endPeriodMs,\n    endedLabel,\n    startLabel,\n    startPeriodMs,\n  ]);\n\n  /**\n   * Functions\n   */\n\n  function displayCountdown(\n    countdown: Date,\n    showDaysOnly?: boolean\n  ): string | React.ReactNode {\n    const {days, hours, minutes, seconds} = getTimeRemaining(countdown);\n\n    if (days > 2 && showDaysOnly) {\n      return `~${days} days`;\n    } else if (days > 0) {\n      return `${formatTimePeriod(days, 'day')} : ${formatTimePeriod(\n        hours,\n        'hr'\n      )} : ${formatTimePeriod(minutes, 'min')}`;\n    } else if (hours > 0) {\n      return `${formatTimePeriod(hours, 'hr')} : ${formatTimePeriod(\n        minutes,\n        'min'\n      )}`;\n    } else if (minutes > 0) {\n      return `${formatTimePeriod(minutes, 'min')} : ${formatTimePeriod(\n        seconds,\n        'sec'\n      )}`;\n    } else {\n      return (\n        <span className=\"color-brightsalmon\">\n          {formatTimePeriod(seconds, 'sec')}\n        </span>\n      );\n    }\n  }\n\n  function formatTimePeriod(time: number, period: string) {\n    const formattedPeriod = time === 0 || time > 1 ? `${period}s` : period;\n\n    return `${time} ${formattedPeriod}`;\n  }\n\n  /**\n   * Render\n   */\n\n  return <div>{proposalPeriod}</div>;\n}\n","import {SVGAttributes} from 'react';\n\nexport default function StopwatchSVG(props: SVGAttributes<HTMLOrSVGElement>) {\n  return (\n    <svg\n      width=\"20px\"\n      height=\"20px\"\n      viewBox=\"0 0 21 24\"\n      version=\"1.1\"\n      {...props}>\n      <defs>\n        <path\n          d=\"M17.6516,6.408 C19.8162,8.36 21,11.02 21,13.844 C21,19.458 16.303,24 10.5,24 C4.69616,24 0,19.457 0,13.844 C0,8.506 4.22802,4.197 9.53077,3.731 L9.53077,1.875 L6.68768,1.875 C6.15238,1.875 5.71845,1.455 5.71845,0.938 C5.71845,0.42 6.15238,0 6.68768,0 L14.3123,0 C14.8476,0 15.2815,0.42 15.2815,0.938 C15.2815,1.455 14.8476,1.875 14.3123,1.875 L11.46923,1.875 L11.46923,3.731 C13.1316,3.877 14.7126,4.398 16.1059,5.252 L17.4392,3.962 C17.8177,3.596 18.4314,3.596 18.8099,3.962 C19.1885,4.328 19.1885,4.922 18.8099,5.288 L17.6516,6.408 Z M10.5,22.125 C15.2208,22.125 19.0615,18.41 19.0615,13.844 C19.0615,9.277 15.2209,5.562 10.5,5.562 C5.77913,5.562 1.93846,9.277 1.93846,13.844 C1.93846,18.41 5.77917,22.125 10.5,22.125 Z M11.46923,8.312 L11.46923,13.844 C11.46923,14.362 11.03531,14.781 10.5,14.781 C9.96469,14.781 9.53077,14.362 9.53077,13.844 L9.53077,8.312 C9.53077,7.795 9.96469,7.375 10.5,7.375 C11.03531,7.375 11.46923,7.795 11.46923,8.312 Z\"\n          id=\"path-1\"></path>\n      </defs>\n      <g\n        id=\"Page-1\"\n        stroke=\"none\"\n        strokeWidth=\"1\"\n        fill=\"none\"\n        fillRule=\"evenodd\">\n        <g id=\"Group-70\">\n          <mask id=\"mask-2\" fill=\"white\">\n            <use xlinkHref=\"#path-1\"></use>\n          </mask>\n          <use id=\"Clip-69\" fill=\"currentColor\" xlinkHref=\"#path-1\"></use>\n        </g>\n      </g>\n    </svg>\n  );\n}\n","import React from 'react';\n\nimport {SquareRootVotingBar} from '.';\nimport ProposalPeriod from '../ProposalPeriod';\nimport StopwatchSVG from '../../../assets/svg/StopwatchSVG';\n\ntype VotingStatusProps = {\n  hasVotingEnded: boolean;\n  /**\n   * A render prop to display status to before / after the clock timer is shown.\n   */\n  renderStatus: () => React.ReactNode;\n  /**\n   * A render prop: display the `ProposalPeriod` timer.\n   * `renderTimer` Provides `ProposalPeriod` component as an argument.\n   *\n   * Passing the `ProposalPeriod` component via the render prop\n   * gives the opportunity to easily show a timer for voting, or grace period, for example,\n   * without adding more props.\n   */\n  renderTimer: (component: typeof ProposalPeriod) => React.ReactNode;\n  /**\n   * Set to `false` to hide percentage data under the voting progress bar.\n   * Defaults to `true`.\n   */\n  showPercentages?: boolean;\n  noShares: Parameters<typeof SquareRootVotingBar>[0]['noShares'];\n  totalShares: Parameters<typeof SquareRootVotingBar>[0]['totalShares'];\n  yesShares: Parameters<typeof SquareRootVotingBar>[0]['yesShares'];\n};\n\nexport function VotingStatus(props: VotingStatusProps) {\n  const {\n    hasVotingEnded,\n    noShares,\n    renderStatus,\n    renderTimer,\n    showPercentages = true,\n    totalShares,\n    yesShares,\n  } = props;\n\n  const renderedStatus = renderStatus();\n\n  return (\n    <>\n      <div className=\"votingstatus-container\">\n        <StopwatchSVG aria-label=\"Counting down until voting ends\" role=\"img\" />\n\n        {renderedStatus && (\n          <span className=\"votingstatus\">{renderedStatus}</span>\n        )}\n\n        {renderTimer(ProposalPeriod)}\n      </div>\n\n      {/* VOTES */}\n      <SquareRootVotingBar\n        yesShares={yesShares}\n        noShares={noShares}\n        totalShares={totalShares}\n        votingExpired={hasVotingEnded}\n        showPercentages={showPercentages}\n      />\n    </>\n  );\n}\n","import {useEffect, useState} from 'react';\n\nimport {ContractDAOConfigKeys} from '../../web3/types';\nimport {CycleEllipsis} from '../../feedback';\nimport {getDAOConfigEntry} from '../../web3/helpers';\nimport {ProposalData} from '../types';\nimport {StoreState} from '../../../store/types';\nimport {useOffchainVotingResults, useOffchainVotingStartEnd} from '../hooks';\nimport {useSelector} from 'react-redux';\nimport {VotingStatus} from './VotingStatus';\n\ntype OffchainVotingStatusProps = {\n  /**\n   * When the offchain grace period seconds are provided the grace period timer\n   * will display. The end seconds will be determined inside the component.\n   *\n   * Be sure to unset this value (`0`, `undefined`) if the grace period should not show.\n   */\n  countdownGracePeriodStartMs?: number;\n  proposal: ProposalData;\n  showPercentages?: boolean;\n};\n\n// Cached grace period label\nconst gracePeriodEndLabel = (\n  <span>\n    Grace period ends:\n    <br />\n  </span>\n);\n\n// Cached grace period ended label\nconst gracePeriodEndedLabel = (\n  <span>\n    Grace period ended <br />{' '}\n    <span style={{textTransform: 'none'}}>\n      Awaiting contract status&hellip;\n    </span>\n  </span>\n);\n\nconst cycleEllipsisFadeInProps = {duration: 150};\n\n/**\n * OffchainVotingStatus\n *\n * A read-only component to show voting status information.\n *\n * @param {OffchainVotingStatusProps} props\n * @returns {JSX.Element}\n */\nexport function OffchainVotingStatus({\n  countdownGracePeriodStartMs,\n  proposal,\n}: OffchainVotingStatusProps): JSX.Element {\n  const {snapshotProposal} = proposal;\n\n  /**\n   * Selectors\n   */\n\n  const daoRegistryInstance = useSelector(\n    (s: StoreState) => s.contracts.DaoRegistryContract?.instance\n  );\n\n  /**\n   * State\n   */\n\n  const [didVotePass, setDidVotePass] = useState<boolean>();\n  const [gracePeriodEndMs, setGracePeriodEndMs] = useState<number>(0);\n\n  /**\n   * Our hooks\n   */\n\n  const {\n    hasOffchainVotingStarted,\n    hasOffchainVotingEnded,\n    offchainVotingStartEndInitReady,\n  } = useOffchainVotingStartEnd(proposal);\n\n  const votingResults = useOffchainVotingResults(proposal);\n\n  /**\n   * Variables\n   */\n\n  const votingStartSeconds = snapshotProposal?.msg.payload.start || 0;\n  const votingEndSeconds = snapshotProposal?.msg.payload.end || 0;\n  const yesShares = votingResults?.Yes.shares || 0;\n  const noShares = votingResults?.No.shares || 0;\n  const totalShares = votingResults?.totalShares;\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    if (!hasOffchainVotingEnded) return;\n\n    setDidVotePass(yesShares > noShares);\n  }, [hasOffchainVotingEnded, noShares, yesShares]);\n\n  // Determine grace period end\n  useEffect(() => {\n    if (!countdownGracePeriodStartMs || !daoRegistryInstance) return;\n\n    getDAOConfigEntry(\n      ContractDAOConfigKeys.offchainVotingGracePeriod,\n      daoRegistryInstance\n    )\n      .then((r) => r && setGracePeriodEndMs(Number(r) * 1000))\n      .catch(() => setGracePeriodEndMs(0));\n  }, [countdownGracePeriodStartMs, daoRegistryInstance]);\n\n  /**\n   * Functions\n   */\n\n  function renderStatus() {\n    // On loading\n    if (!offchainVotingStartEndInitReady) {\n      return (\n        <CycleEllipsis\n          intervalMs={200}\n          fadeInProps={cycleEllipsisFadeInProps}\n        />\n      );\n    }\n\n    // Do not show a label as we provide one in addition to the timer.\n    if (countdownGracePeriodStartMs) {\n      return '';\n    }\n\n    // On voting ended\n    if (typeof didVotePass === 'boolean') {\n      return didVotePass ? 'Approved' : 'Failed';\n    }\n  }\n\n  function renderTimer(\n    ProposalPeriodComponent: Parameters<\n      Parameters<typeof VotingStatus>[0]['renderTimer']\n    >[0]\n  ) {\n    // Vote countdown timer\n    if (\n      offchainVotingStartEndInitReady &&\n      hasOffchainVotingStarted &&\n      !hasOffchainVotingEnded\n    ) {\n      return (\n        <ProposalPeriodComponent\n          startPeriodMs={votingStartSeconds * 1000}\n          endPeriodMs={votingEndSeconds * 1000}\n        />\n      );\n    }\n\n    // Grace period countdown timer\n    if (countdownGracePeriodStartMs && gracePeriodEndMs) {\n      return (\n        <ProposalPeriodComponent\n          startPeriodMs={countdownGracePeriodStartMs}\n          endLabel={gracePeriodEndLabel}\n          endedLabel={gracePeriodEndedLabel}\n          endPeriodMs={countdownGracePeriodStartMs + gracePeriodEndMs}\n        />\n      );\n    }\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <VotingStatus\n      renderTimer={renderTimer}\n      renderStatus={renderStatus}\n      hasVotingEnded={hasOffchainVotingEnded}\n      noShares={noShares}\n      totalShares={totalShares}\n      yesShares={yesShares}\n    />\n  );\n}\n","import {SVGAttributes} from 'react';\n\nexport default function CheckSVG(props: SVGAttributes<HTMLOrSVGElement>) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n      width=\"18\"\n      height=\"18\"\n      viewBox=\"0 0 512 512\"\n      {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z\"></path>\n    </svg>\n  );\n}\n","import CheckSVG from '../../../assets/svg/CheckSVG';\n\ntype SquareRootVotingBarProps = {\n  /**\n   * Allow values to not be set as they may not be ready\n   */\n  yesShares: number | undefined;\n  /**\n   * Allow values to not be set as they may not be ready\n   */\n  noShares: number | undefined;\n  /**\n   * Allow values to not be set as they may not be ready\n   */\n  totalShares: number | undefined;\n  votingExpired: boolean;\n  showPercentages: boolean;\n};\n\nfunction getSharesPercent(shares: number, totalShares: number) {\n  return ((shares / totalShares) * 100).toFixed(0);\n}\n\nexport function SquareRootVotingBar({\n  yesShares = 0,\n  noShares = 0,\n  totalShares,\n  votingExpired,\n  showPercentages,\n}: SquareRootVotingBarProps) {\n  /**\n   * Variables\n   */\n\n  const percentYes = totalShares\n    ? getSharesPercent(yesShares, totalShares)\n    : '0';\n  const percentNo = totalShares ? getSharesPercent(noShares, totalShares) : '0';\n\n  /**\n   * Render\n   */\n\n  return (\n    <div className=\"votingbar-container\">\n      <div className=\"votingbar\">\n        {/* YES */}\n        <div\n          className=\"votingbar__segment--yes\"\n          aria-label={`${percentYes}% yes votes`}\n          style={{\n            width: `${percentYes}%`,\n          }}\n        />\n\n        {/* NO */}\n        <div\n          className=\"votingbar__segment--no\"\n          aria-label={`${percentNo}% no votes`}\n          style={{\n            width: `${percentNo}%`,\n          }}\n        />\n      </div>\n\n      <div className=\"votingbar__percentages\">\n        {showPercentages && (\n          <>\n            {/* YES */}\n            {votingExpired && yesShares > noShares && (\n              <span className=\"yes-check\">\n                <CheckSVG aria-label=\"Vote has passed\" />\n              </span>\n            )}\n            <span className=\"yes-percent\">{percentYes}%</span>\n\n            {/* NO */}\n            <span className=\"no-percent\">{percentNo}%</span>\n            {votingExpired && yesShares <= noShares && (\n              <span className=\"no-check\">\n                <CheckSVG aria-label=\"Vote has failed\" />\n              </span>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, {ButtonHTMLAttributes} from 'react';\nimport {VoteChoices} from '@openlaw/snapshot-js-erc712';\n\nimport Loader from '../../feedback/Loader';\n\ntype VotingActionButtonsProps = {\n  /**\n   * Common <button /> props for both buttons\n   */\n  buttonProps?: ButtonHTMLAttributes<HTMLButtonElement>;\n  onClick: (choice: VoteChoices) => void;\n  /**\n   * Which vote did the current connected user submit?\n   */\n  voteChosen?: VoteChoices;\n  /**\n   * Shows a loading spinner for a voting button.\n   */\n  voteProgress?: VoteChoices;\n};\n\n/**\n * @todo Implement vote chosen\n */\nexport function VotingActionButtons(\n  props: VotingActionButtonsProps\n): JSX.Element {\n  const {buttonProps, onClick, voteChosen, voteProgress} = props;\n\n  /**\n   * Functions\n   */\n\n  const getVotedClass = (choice: VoteChoices): string =>\n    voteChosen === choice ? 'votingbutton--voted' : '';\n\n  function getARIALabel(\n    choice: VoteChoices\n  ): Partial<React.HTMLAttributes<HTMLElement>> {\n    return voteProgress === choice\n      ? {'aria-label': `Voting ${choice} \\u2026`}\n      : {};\n  }\n\n  function getVotingText(choice: VoteChoices): React.ReactNode {\n    return voteProgress === choice ? (\n      <Loader aria-label={`Voting ${choice} spinner image`} role=\"img\" />\n    ) : voteChosen === choice ? (\n      `Voted ${choice}`\n    ) : (\n      `Vote ${choice}`\n    );\n  }\n\n  function handleClick(choice: VoteChoices) {\n    return () => {\n      onClick(choice);\n    };\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <>\n      <button\n        {...buttonProps}\n        {...getARIALabel(VoteChoices.Yes)}\n        className={`proposaldetails__button ${getVotedClass(VoteChoices.Yes)}`}\n        onClick={handleClick(VoteChoices.Yes)}>\n        {getVotingText(VoteChoices.Yes)}\n      </button>\n      <button\n        {...buttonProps}\n        {...getARIALabel(VoteChoices.No)}\n        className={`proposaldetails__button ${getVotedClass(VoteChoices.No)}`}\n        onClick={handleClick(VoteChoices.No)}>\n        {getVotingText(VoteChoices.No)}\n      </button>\n    </>\n  );\n}\n","/**\n * FOR HIGH REUSE TYPES\n *\n * For any other more specific types, co-locate them in either:\n *\n * 1) The actual code file.\n * 2) In a type file in the location of the code files which mainly use the types.\n *\n * @see https://kentcdodds.com/blog/colocation\n */\n\nexport type EnvironmentName = 'localhost' | 'development' | 'production';\n\nexport enum AsyncStatus {\n  STANDBY = 'STANDBY',\n  PENDING = 'PENDING',\n  FULFILLED = 'FULFILLED',\n  REJECTED = 'REJECTED',\n}\n\nexport interface MetaMaskRPCError extends Error {\n  code: number;\n}\n","import Web3 from 'web3';\nimport {AbiItem} from 'web3-utils/types';\nimport {Dispatch} from 'redux';\n\nimport {\n  ContractAdapterNames,\n  ContractExtensionNames,\n} from '../../components/web3/types';\nimport {\n  DEFAULT_CHAIN,\n  DAO_FACTORY_CONTRACT_ADDRESS,\n  DAO_REGISTRY_CONTRACT_ADDRESS,\n} from '../../config';\nimport {ContractsStateEntry, StoreState} from '../types';\nimport {getAdapterAddress} from '../../components/web3/helpers';\nimport {getExtensionAddress} from '../../components/web3/helpers/getExtensionAddress';\nimport {\n  DaoConstants,\n  VotingAdapterName,\n} from '../../components/adapters-extensions/enums';\n\ntype ContractAction =\n  | typeof CONTRACT_BANK_EXTENSION\n  | typeof CONTRACT_CONFIGURATION\n  | typeof CONTRACT_DAO_FACTORY\n  | typeof CONTRACT_DAO_REGISTRY\n  | typeof CONTRACT_DISTRIBUTE\n  | typeof CONTRACT_FINANCING\n  | typeof CONTRACT_GUILDKICK\n  | typeof CONTRACT_MANAGING\n  | typeof CONTRACT_ONBOARDING\n  | typeof CONTRACT_RAGEQUIT\n  | typeof CONTRACT_TRIBUTE\n  | typeof CONTRACT_VOTING\n  | typeof CONTRACT_VOTING_OP_ROLLUP\n  | typeof CONTRACT_WITHDRAW;\n\nexport const CONTRACT_BANK_EXTENSION = 'CONTRACT_BANK_EXTENSION';\nexport const CONTRACT_CONFIGURATION = 'CONTRACT_CONFIGURATION';\nexport const CONTRACT_DAO_FACTORY = 'CONTRACT_DAO_FACTORY';\nexport const CONTRACT_DAO_REGISTRY = 'CONTRACT_DAO_REGISTRY';\nexport const CONTRACT_DISTRIBUTE = 'CONTRACT_DISTRIBUTE';\nexport const CONTRACT_FINANCING = 'CONTRACT_FINANCING';\nexport const CONTRACT_GUILDKICK = 'CONTRACT_GUILDKICK';\nexport const CONTRACT_MANAGING = 'CONTRACT_MANAGING';\nexport const CONTRACT_ONBOARDING = 'CONTRACT_ONBOARDING';\nexport const CONTRACT_RAGEQUIT = 'CONTRACT_RAGEQUIT';\nexport const CONTRACT_TRIBUTE = 'CONTRACT_TRIBUTE';\nexport const CONTRACT_VOTING = 'CONTRACT_VOTING';\nexport const CONTRACT_VOTING_OP_ROLLUP = 'CONTRACT_VOTING_OP_ROLLUP';\nexport const CONTRACT_WITHDRAW = 'CONTRACT_WITHDRAW';\n\nexport function initContractDaoFactory(web3Instance: Web3) {\n  return async function (dispatch: Dispatch<any>) {\n    try {\n      if (web3Instance) {\n        const {default: lazyDaoFactoryABI} = await import(\n          '../../truffle-contracts/DaoFactory.json'\n        );\n        const daoFactoryContract: AbiItem[] = lazyDaoFactoryABI as any;\n        const contractAddress = DAO_FACTORY_CONTRACT_ADDRESS[DEFAULT_CHAIN];\n        const instance = new web3Instance.eth.Contract(\n          daoFactoryContract,\n          contractAddress\n        );\n\n        dispatch(\n          createContractAction({\n            type: CONTRACT_DAO_FACTORY,\n            abi: daoFactoryContract,\n            contractAddress,\n            instance,\n          })\n        );\n      }\n    } catch (error) {\n      throw error;\n    }\n  };\n}\n\nexport function initContractDaoRegistry(web3Instance: Web3) {\n  return async function (dispatch: Dispatch<any>) {\n    try {\n      if (web3Instance) {\n        const {default: lazyDaoRegistryABI} = await import(\n          '../../truffle-contracts/DaoRegistry.json'\n        );\n\n        const daoRegistryContract: AbiItem[] = lazyDaoRegistryABI as any;\n        const contractAddress = DAO_REGISTRY_CONTRACT_ADDRESS;\n\n        if (!contractAddress) {\n          throw new Error('No DAO Registry contract address was found.');\n        }\n\n        const instance = new web3Instance.eth.Contract(\n          daoRegistryContract,\n          contractAddress\n        );\n\n        dispatch(\n          createContractAction({\n            type: CONTRACT_DAO_REGISTRY,\n            abi: daoRegistryContract,\n            contractAddress,\n            instance,\n          })\n        );\n      }\n    } catch (error) {\n      throw error;\n    }\n  };\n}\n\nexport function initContractVoting(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_VOTING,\n    adapterOrExtensionName: ContractAdapterNames.voting,\n    adapterNameForRedux: VotingAdapterName.VotingContract,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/VotingContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractVotingOpRollup(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_VOTING_OP_ROLLUP,\n    adapterOrExtensionName: ContractAdapterNames.voting,\n    adapterNameForRedux: VotingAdapterName.OffchainVotingContract,\n    contractAddress,\n    lazyImport: () =>\n      import('../../truffle-contracts/OffchainVotingContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractOnboarding(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_ONBOARDING,\n    adapterNameForRedux: DaoConstants.ONBOARDING,\n    adapterOrExtensionName: ContractAdapterNames.onboarding,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/OnboardingContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractBankExtension(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_BANK_EXTENSION,\n    adapterNameForRedux: DaoConstants.BANK,\n    adapterOrExtensionName: ContractExtensionNames.bank,\n    contractAddress,\n    isExtension: true,\n    lazyImport: () => import('../../truffle-contracts/BankExtension.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractTribute(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_TRIBUTE,\n    adapterNameForRedux: DaoConstants.TRIBUTE,\n    adapterOrExtensionName: ContractAdapterNames.tribute,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/TributeContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractDistribute(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_DISTRIBUTE,\n    adapterNameForRedux: DaoConstants.DISTRIBUTE,\n    adapterOrExtensionName: ContractAdapterNames.distribute,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/DistributeContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractManaging(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_MANAGING,\n    adapterNameForRedux: DaoConstants.MANAGING,\n    adapterOrExtensionName: ContractAdapterNames.managing,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/ManagingContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractWithdraw(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_WITHDRAW,\n    adapterNameForRedux: DaoConstants.WITHDRAW,\n    adapterOrExtensionName: ContractAdapterNames.withdraw,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/WithdrawContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractRagequit(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_RAGEQUIT,\n    adapterNameForRedux: DaoConstants.RAGEQUIT,\n    adapterOrExtensionName: ContractAdapterNames.ragequit,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/RagequitContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractGuildKick(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_GUILDKICK,\n    adapterNameForRedux: DaoConstants.GUILDKICK,\n    adapterOrExtensionName: ContractAdapterNames.guildkick,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/GuildKickContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractFinancing(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_FINANCING,\n    adapterNameForRedux: DaoConstants.FINANCING,\n    adapterOrExtensionName: ContractAdapterNames.financing,\n    contractAddress,\n    lazyImport: () => import('../../truffle-contracts/FinancingContract.json'),\n    web3Instance,\n  });\n}\n\nexport function initContractConfiguration(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return initContractThunkFactory({\n    actionType: CONTRACT_CONFIGURATION,\n    adapterNameForRedux: DaoConstants.CONFIGURATION,\n    adapterOrExtensionName: ContractAdapterNames.configuration,\n    contractAddress,\n    lazyImport: () =>\n      import('../../truffle-contracts/ConfigurationContract.json'),\n    web3Instance,\n  });\n}\n\n/**\n * Inits the currently registered `voting` contract.\n *\n * @note The DaoRegistry and Managing contracts must be initialised beforehand.\n */\nexport function initRegisteredVotingAdapter(\n  web3Instance: Web3,\n  contractAddress?: string\n) {\n  return async function (dispatch: Dispatch<any>, getState: () => StoreState) {\n    try {\n      if (web3Instance) {\n        const daoRegistryContract = getState().contracts.DaoRegistryContract;\n        const {default: lazyIVotingABI} = await import(\n          '../../truffle-contracts/IVoting.json'\n        );\n\n        if (!daoRegistryContract) {\n          console.warn(\n            'Please init the DaoRegistry contract before the voting contract.'\n          );\n          return;\n        }\n\n        let votingAdapterName: string = '';\n        let address: string = contractAddress || '';\n\n        const getVotingAdapterName = async (a: string) =>\n          await new web3Instance.eth.Contract(\n            lazyIVotingABI as AbiItem[],\n            a\n          ).methods\n            .getAdapterName()\n            .call();\n\n        if (address) {\n          votingAdapterName = await getVotingAdapterName(address);\n        }\n\n        if (!address && !votingAdapterName) {\n          address = await getAdapterAddress(\n            ContractAdapterNames.voting,\n            getState().contracts.DaoRegistryContract?.instance\n          );\n\n          votingAdapterName = await getVotingAdapterName(address);\n        }\n\n        /**\n         * @todo Move voting adapter enum names (see contracts: `ADAPTER_NAME`)\n         *   to an appropriate adapter config file.\n         */\n        switch (votingAdapterName) {\n          case 'VotingContract':\n            return await initContractVoting(web3Instance, address)(\n              dispatch,\n              getState\n            );\n          case 'OffchainVotingContract':\n            return await initContractVotingOpRollup(web3Instance, address)(\n              dispatch,\n              getState\n            );\n          default:\n            throw new Error('Voting contract name could not be found.');\n        }\n      }\n    } catch (error) {\n      console.warn(\n        `The voting contract could not be found in the DAO. Are you sure you meant to add this contract's ABI?`\n      );\n    }\n  };\n}\n\nexport function createContractAction({\n  type,\n  ...payload\n}: {\n  type: ContractAction;\n} & ContractsStateEntry) {\n  return {\n    type,\n    ...payload,\n  };\n}\n\nexport function initContractThunkFactory({\n  actionType,\n  adapterNameForRedux,\n  adapterOrExtensionName,\n  contractAddress,\n  isExtension = false,\n  lazyImport,\n  web3Instance,\n}: {\n  actionType: ContractAction;\n  adapterOrExtensionName: ContractAdapterNames | ContractExtensionNames;\n  /**\n   * The name to be shown in Redux state as `adapterOrExtensionName`.\n   */\n  adapterNameForRedux?: ContractsStateEntry['adapterOrExtensionName'];\n  contractAddress?: string;\n  /**\n   * If set to `true` an Extenion address will be searched for instead of an Adapter.\n   */\n  isExtension?: boolean;\n  /**\n   * Provide a Dynamic Import wrapped in a function.\n   *\n   * e.g. `() => import('./path/to/import')`\n   */\n  lazyImport: () => any;\n  web3Instance: Web3;\n}) {\n  // Return a Redux Thunk\n  return async function (dispatch: Dispatch<any>, getState: () => StoreState) {\n    try {\n      const {default: lazyABI} = await lazyImport();\n\n      const contractABI: AbiItem[] = lazyABI as any;\n\n      const address =\n        contractAddress ||\n        (isExtension\n          ? await getExtensionAddress(\n              (adapterOrExtensionName as unknown) as ContractExtensionNames,\n              getState().contracts.DaoRegistryContract?.instance\n            )\n          : await getAdapterAddress(\n              (adapterOrExtensionName as unknown) as ContractAdapterNames,\n              getState().contracts.DaoRegistryContract?.instance\n            ));\n\n      dispatch(\n        createContractAction({\n          type: actionType,\n          abi: contractABI,\n          contractAddress: address,\n          adapterOrExtensionName: adapterNameForRedux,\n          instance: new web3Instance.eth.Contract(contractABI, address),\n        })\n      );\n    } catch (error) {\n      // Warn instead of throwing as we want the Dapp to fail gracefully.\n      console.warn(\n        `The contract \"${adapterOrExtensionName}\" could not be found in the DAO. Are you sure you meant to add this contract's ABI?`\n      );\n    }\n  };\n}\n","import React from 'react';\n\nimport {MetaMaskRPCError} from '../../util/types';\nimport {normalizeString} from '../../util/helpers';\n\nimport FadeIn from './FadeIn';\n\ntype ErrorMessageWithDetailsProps = {\n  error?: Error;\n  renderText: (() => React.ReactElement) | string;\n  detailsProps?: React.HTMLAttributes<HTMLDetailsElement>;\n};\n\nexport default function ErrorMessageWithDetails(\n  props: ErrorMessageWithDetailsProps\n) {\n  const {error, renderText} = props;\n\n  // @link https://github.com/ethereum/EIPs/blob/master/EIPS/eip-1193.md#provider-errors\n  const isWalletRejectedRequest =\n    (error as MetaMaskRPCError)?.code === 4001 ||\n    /^(the )?user rejected (the )?request$/g.test(\n      normalizeString(error?.message || '')\n    );\n\n  // @note Some wallets will provide proper error codes. The `4001` is a \"user rejected transaction\".\n  return error && !isWalletRejectedRequest ? (\n    <FadeIn>\n      <div className=\"text-center\">\n        <p className=\"error-message\">\n          {typeof renderText === 'string' ? renderText : renderText()}\n        </p>\n\n        {error && (\n          <details {...props.detailsProps}>\n            <summary\n              className=\"error-message\"\n              style={{cursor: 'pointer', outline: 'none'}}>\n              <small>Details</small>\n            </summary>\n            <p className=\"error-message\">\n              <small>{error.message}</small>\n            </p>\n          </details>\n        )}\n      </div>\n    </FadeIn>\n  ) : null;\n}\n","import {Contract, SendOptions} from 'web3-eth-contract/types';\nimport {TransactionReceipt} from 'web3-core/types';\n\n/**\n * contractSend\n *\n * Returns the resolved transaction receipt or error\n *\n * @param {string} methodName\n * @param {Record<string, any>} contractInstanceMethods An object of the methods for the Web3 contract instance.\n * @param {any[]} methodArguments An array of any arguments for the contract's method.\n * @param {Record<string, any>} txArguments\n * @param {(txHash: string) => void} onProcess Callback which runs after a txHash has been received,\n *   but before the transaction is complete.\n * @returns {Promise<TransactionReceipt>} Resolved or rejected transaction.\n */\nexport async function contractSend(\n  methodName: string,\n  contractInstanceMethods: typeof Contract.prototype.methods,\n  methodArguments: any[],\n  txArguments: SendOptions,\n  onProcess?: (txHash: string) => void\n): Promise<TransactionReceipt> {\n  // Promisify so we can both `reject()` inside .on('error') and from transactions.\n  return new Promise<TransactionReceipt>(async (resolve, reject) => {\n    try {\n      const method = contractInstanceMethods[methodName];\n\n      // estimate gas limit for transaction\n      const gas = await method(...methodArguments).estimateGas({\n        from: txArguments.from,\n        value: txArguments.value,\n      });\n\n      await method(...methodArguments)\n        .send({\n          ...txArguments,\n          gas,\n        })\n        .on('transactionHash', function (txHash: string) {\n          // Call onProcess with transaction hash\n          onProcess && onProcess(txHash);\n        })\n        .on('receipt', function (receipt: TransactionReceipt) {\n          // resolve on transaction receipt; contains event returnValues\n          resolve(receipt);\n        })\n        .on('error', (error: Error) => {\n          // reject on transaction error\n          reject(error);\n        });\n    } catch (error) {\n      // reject on estimate gas or transaction error\n      reject(error);\n    }\n  });\n}\n","import Web3 from 'web3';\n\nimport {ContractsStateEntry} from '../../../store/types';\nimport {ContractAdapterNames} from '../types';\n\nexport async function getAdapterAddress(\n  adapterName: ContractAdapterNames,\n  daoContractInstance: ContractsStateEntry['instance'] | undefined\n): Promise<string> {\n  try {\n    if (!daoContractInstance) {\n      throw new Error('No DaoRegistry contract instance provided.');\n    }\n\n    return await daoContractInstance.methods\n      .getAdapterAddress(Web3.utils.sha3(adapterName))\n      .call();\n  } catch (error) {\n    throw error;\n  }\n}\n","import {ContractAdapterNames} from '../types';\nimport {ContractsStateEntry, StoreState} from '../../../store/types';\n\nfunction getContractAddressOrThrow(\n  contract: ContractsStateEntry | null\n): string {\n  try {\n    const address = contract?.contractAddress;\n\n    if (!address) {\n      throw new Error(`Contract address was not found in the store.`);\n    }\n\n    return address;\n  } catch (error) {\n    throw error;\n  }\n}\n\n/**\n * getAdapterAddressFromContracts\n *\n * Gets an adapter's address by its name (`type ContractAdapterNames`) from the Redux contracts state slice.\n *\n * @param {string} name\n * @param {StoreState['contracts']} contracts\n */\nexport function getAdapterAddressFromContracts(\n  name: ContractAdapterNames,\n  contracts: StoreState['contracts']\n): string {\n  try {\n    switch (name) {\n      case ContractAdapterNames.configuration:\n        return '';\n      case ContractAdapterNames.distribute:\n        return getContractAddressOrThrow(contracts.DistributeContract);\n      case ContractAdapterNames.financing:\n        return '';\n      case ContractAdapterNames.guildkick:\n        return '';\n      case ContractAdapterNames.managing:\n        return getContractAddressOrThrow(contracts.ManagingContract);\n      case ContractAdapterNames.onboarding:\n        return getContractAddressOrThrow(contracts.OnboardingContract);\n      case ContractAdapterNames.ragequit:\n        return '';\n      case ContractAdapterNames.tribute:\n        return getContractAddressOrThrow(contracts.TributeContract);\n      case ContractAdapterNames.voting:\n        return getContractAddressOrThrow(contracts.VotingContract);\n      default:\n        throw new Error(`Contract address was not found in the store.`);\n    }\n  } catch (error) {\n    throw error;\n  }\n}\n","import {normalizeString} from '../../../util/helpers';\nimport {ContractsStateEntry, StoreState} from '../../../store/types';\n\n/**\n * getContractByAddress\n *\n * Gets a Contract from the Redux contracts state slice by its `contractAddress`, or throws an Error.\n * A use case for this would be when using ERC712 signing data `actionId` to get\n * the appropriate Contract for submitting on-chain transactions.\n *\n * @param {string} address\n * @param {StoreState['contracts']} contracts\n */\nexport function getContractByAddress(\n  address: string,\n  contracts: StoreState['contracts']\n): ContractsStateEntry {\n  try {\n    const contract = Object.values(contracts).find(\n      (c) =>\n        c?.contractAddress &&\n        normalizeString(c.contractAddress) === normalizeString(address)\n    );\n\n    if (!contract) {\n      throw new Error(`Contract was not found in the store.`);\n    }\n\n    return contract;\n  } catch (error) {\n    throw error;\n  }\n}\n","import Web3 from 'web3';\n\nimport {ContractsStateEntry} from '../../../store/types';\nimport {ContractDAOConfigKeys} from '../types';\n\nexport async function getDAOConfigEntry(\n  configKey: ContractDAOConfigKeys,\n  daoContractInstance: ContractsStateEntry['instance'] | undefined\n): Promise<string> {\n  try {\n    if (!daoContractInstance) {\n      throw new Error('No DaoRegistry contract instance provided.');\n    }\n\n    return await daoContractInstance.methods\n      .getConfiguration(Web3.utils.sha3(configKey))\n      .call();\n  } catch (error) {\n    throw error;\n  }\n}\n","import {ContractsStateEntry} from '../../../store/types';\n\nexport enum DaoState {\n  CREATION = 'CREATION',\n  READY = 'READY',\n}\n\nexport async function getDaoState(\n  daoContractInstance: ContractsStateEntry['instance'] | undefined\n): Promise<DaoState> {\n  try {\n    if (!daoContractInstance) {\n      throw new Error('No DaoRegistry contract instance provided.');\n    }\n\n    const daoRegistryMethods = daoContractInstance.methods;\n    const state = await daoRegistryMethods.state().call();\n\n    return Number(state) === 0 ? DaoState.CREATION : DaoState.READY;\n  } catch (error) {\n    throw error;\n  }\n}\n","import Web3 from 'web3';\nimport {AbiItem} from 'web3-utils/types';\n\nimport {MULTICALL_CONTRACT_ADDRESS} from '../../../config';\n\nexport type MulticallTuple = [\n  contractAddress: string,\n  functionABI: AbiItem,\n  parameters: string[]\n];\n\nexport async function multicall({\n  blockNumber = 'latest',\n  calls,\n  web3Instance,\n}: {\n  /**\n   * Defaults to `latest`\n   */\n  blockNumber?: number | string | ReturnType<typeof Web3.utils.toBN>;\n  calls: MulticallTuple[];\n  web3Instance: Web3;\n}) {\n  const {default: lazyMulticallABI} = await import(\n    '../../../truffle-contracts/Multicall.json'\n  );\n\n  // Let's `console.error` and exit instead of throwing.\n  if (!MULTICALL_CONTRACT_ADDRESS) {\n    console.error('No Multicall address was found. Are you sure it is set?');\n    return;\n  }\n\n  try {\n    const {methods: multicallMethods} = new web3Instance.eth.Contract(\n      lazyMulticallABI as AbiItem[],\n      MULTICALL_CONTRACT_ADDRESS\n    );\n\n    const {returnData} = await multicallMethods\n      .aggregate(\n        calls.map(([address, abi, params]) => [\n          address.toLowerCase(),\n          web3Instance.eth.abi.encodeFunctionCall(abi, params),\n        ])\n      )\n      .call({}, blockNumber);\n\n    return returnData.map((hexString: string, i: number) => {\n      const outputsABIItem = calls[i][1].outputs || [];\n      const decodedOutputs = web3Instance.eth.abi.decodeParameters(\n        outputsABIItem,\n        hexString\n      );\n\n      // Output as single result\n      if (\n        decodedOutputs.__length__ === 1 &&\n        decodedOutputs['0'] !== undefined\n      ) {\n        return decodedOutputs['0'];\n      }\n\n      return web3Instance.eth.abi.decodeParameters(\n        outputsABIItem || [],\n        hexString\n      );\n    });\n  } catch (error) {\n    throw error;\n  }\n}\n","import {VoteChoicesIndex} from '@openlaw/snapshot-js-erc712';\nimport {useCallback, useEffect, useState} from 'react';\nimport {useSelector} from 'react-redux';\n\nimport {multicall, MulticallTuple} from '../../web3/helpers';\nimport {ProposalData} from '../types';\nimport {SHARES_ADDRESS, TOTAL_ADDRESS} from '../../../config';\nimport {StoreState} from '../../../store/types';\nimport {useWeb3Modal} from '../../web3/hooks';\nimport {VoteChoices} from '../../web3/types';\n\ntype VoteChoiceResult = {\n  percentage: number;\n  shares: number;\n};\n\ntype OffchainVotingResult = {\n  [VoteChoices.Yes]: VoteChoiceResult;\n  [VoteChoices.No]: VoteChoiceResult;\n  totalShares: number;\n};\n\n/**\n * @todo Polling\n * @todo Attempt to use subgraph data first.\n */\nexport function useOffchainVotingResults(\n  proposal: ProposalData\n): OffchainVotingResult | undefined {\n  const {snapshotProposal} = proposal;\n  const votes = snapshotProposal?.votes;\n  const snapshot = snapshotProposal?.msg.payload.snapshot;\n\n  /**\n   * Selectors\n   */\n\n  const bankABI = useSelector(\n    (s: StoreState) => s.contracts.BankExtensionContract?.abi\n  );\n  const bankAddress = useSelector(\n    (s: StoreState) => s.contracts.BankExtensionContract?.contractAddress\n  );\n\n  /**\n   * State\n   */\n\n  const [voterAddressesAndChoices, setVoterAddressesAndChoices] = useState<\n    [string, number][]\n  >();\n  const [sharesResults, setSharesResults] = useState<OffchainVotingResult>();\n\n  /**\n   * Our hooks\n   */\n\n  const {web3Instance} = useWeb3Modal();\n\n  /**\n   * Variables\n   */\n\n  const getPriorAmountABI = bankABI?.find(\n    (item) => item.name === 'getPriorAmount'\n  );\n\n  /**\n   * Cached callbacks\n   */\n\n  const getSharesPerChoiceCached = useCallback(getSharesPerChoiceFromContract, [\n    bankAddress,\n    getPriorAmountABI,\n    snapshot,\n    voterAddressesAndChoices,\n    web3Instance,\n  ]);\n\n  /**\n   * Effects\n   */\n\n  // Collect voter addresses\n  useEffect(() => {\n    if (!votes) return;\n\n    const voterEntries = votes.map((v) => {\n      const vote = v[Object.keys(v)[0]];\n\n      return [vote.msg.payload.metadata.memberAddress, vote.msg.payload.choice];\n    });\n\n    setVoterAddressesAndChoices(\n      // Dedupe any duplicate addresses to be safe.\n      Object.entries(Object.fromEntries(voterEntries))\n    );\n  }, [votes]);\n\n  useEffect(() => {\n    // @todo If subgraph active, then exit.\n\n    getSharesPerChoiceCached();\n  }, [getSharesPerChoiceCached]);\n\n  /**\n   * Functions\n   */\n\n  async function getSharesPerChoiceFromContract() {\n    try {\n      if (!bankAddress || !getPriorAmountABI || !voterAddressesAndChoices) {\n        return;\n      }\n\n      if (!snapshot) {\n        throw new Error('No snapshot was found.');\n      }\n\n      // Create results object to set later\n      const results = {\n        [VoteChoices.Yes]: {\n          percentage: 0,\n          shares: 0,\n        },\n        [VoteChoices.No]: {\n          percentage: 0,\n          shares: 0,\n        },\n        totalShares: 0,\n      };\n\n      // Build a call for total shares\n      const totalSharesCall: MulticallTuple = [\n        bankAddress,\n        getPriorAmountABI,\n        [\n          TOTAL_ADDRESS, // account\n          SHARES_ADDRESS, // tokenAddr\n          snapshot.toString(), // blockNumber\n        ],\n      ];\n\n      // Build calls to Bank contract\n      const sharesCalls = voterAddressesAndChoices.map(\n        ([address]): MulticallTuple => [\n          bankAddress,\n          getPriorAmountABI,\n          [\n            address, // account\n            SHARES_ADDRESS, // tokenAddr\n            snapshot.toString(), // blockNumber\n          ],\n        ]\n      );\n\n      const calls = [totalSharesCall, ...sharesCalls];\n\n      const [totalSharesResult, ...sharesResults]: string[] = await multicall({\n        calls,\n        web3Instance,\n      });\n\n      // Set shares values for choices\n      sharesResults.forEach((shares, i) => {\n        const isYes =\n          VoteChoicesIndex[voterAddressesAndChoices[i][1]] ===\n          VoteChoicesIndex[VoteChoicesIndex.Yes];\n        const choice = isYes ? VoteChoices.Yes : VoteChoices.No;\n\n        results[choice].shares += Number(shares);\n      });\n\n      // Set percentages\n      results[VoteChoices.Yes].percentage =\n        (results[VoteChoices.Yes].shares / Number(totalSharesResult)) * 100;\n\n      results[VoteChoices.No].percentage =\n        (results[VoteChoices.No].shares / Number(totalSharesResult)) * 100;\n\n      // Set total shares\n      results.totalShares = Number(totalSharesResult);\n\n      setSharesResults((prevState) => ({\n        ...prevState,\n        ...results,\n      }));\n    } catch (error) {\n      setSharesResults(undefined);\n    }\n  }\n\n  return sharesResults;\n}\n","import {useEffect, useRef, useState} from 'react';\nimport {SnapshotType} from '@openlaw/snapshot-js-erc712';\n\nimport {ProposalData} from '../types';\nimport {AsyncStatus} from '../../../util/types';\n\ntype UseOffchainVotingStartEndReturn = {\n  hasOffchainVotingEnded: boolean;\n  hasOffchainVotingStarted: boolean;\n  /**\n   * Informs if the initial async checks have run.\n   * This helps to tame UI false-positives that can arise when\n   * using only booleans to check status.\n   */\n  offchainVotingStartEndInitReady: boolean;\n};\n\ntype StartEndStatus = {start: AsyncStatus; end: AsyncStatus};\n\nexport function useOffchainVotingStartEnd(\n  proposal: ProposalData\n): UseOffchainVotingStartEndReturn {\n  const {snapshotProposal} = proposal;\n\n  /**\n   * Refs\n   */\n\n  const votingStartEndStatusRef = useRef<StartEndStatus>({\n    start: AsyncStatus.STANDBY,\n    end: AsyncStatus.STANDBY,\n  });\n\n  /**\n   * State\n   */\n\n  const [\n    hasOffchainVotingStarted,\n    setHasOffchainVotingStarted,\n  ] = useState<boolean>(false);\n  const [hasOffchainVotingEnded, setHasOffchainVotingEnded] = useState<boolean>(\n    false\n  );\n  const [\n    offchainVotingStartEndInitReady,\n    setOffchainVotingStartEndInitReady,\n  ] = useState<boolean>(isInitReady(votingStartEndStatusRef.current));\n\n  /**\n   * Effects\n   */\n\n  // Actively check if voting has started\n  useEffect(() => {\n    if (\n      snapshotProposal?.msg.type !== SnapshotType.proposal ||\n      hasOffchainVotingStarted\n    ) {\n      setOffchainVotingStartEndInitReady(() => {\n        votingStartEndStatusRef.current.start = AsyncStatus.FULFILLED;\n        return isInitReady(votingStartEndStatusRef.current);\n      });\n\n      return;\n    }\n\n    setOffchainVotingStartEndInitReady(() => {\n      votingStartEndStatusRef.current.start = AsyncStatus.PENDING;\n      return isInitReady(votingStartEndStatusRef.current);\n    });\n\n    // Check if voting has started every 1 second\n    const intervalID = setInterval(() => {\n      // Async process ran\n      setOffchainVotingStartEndInitReady(() => {\n        votingStartEndStatusRef.current.start = AsyncStatus.FULFILLED;\n        return isInitReady(votingStartEndStatusRef.current);\n      });\n\n      const hasStartedCheck =\n        Math.floor(Date.now() / 1000) > snapshotProposal.msg.payload.start;\n\n      if (!hasStartedCheck) return;\n\n      setHasOffchainVotingStarted(hasStartedCheck);\n    }, 1000);\n\n    return () => {\n      clearInterval(intervalID);\n    };\n  }, [\n    hasOffchainVotingStarted,\n    snapshotProposal?.msg.payload.start,\n    snapshotProposal?.msg.type,\n  ]);\n\n  // Actively check if voting has ended\n  useEffect(() => {\n    if (\n      snapshotProposal?.msg.type !== SnapshotType.proposal ||\n      hasOffchainVotingEnded\n    ) {\n      setOffchainVotingStartEndInitReady(() => {\n        votingStartEndStatusRef.current.end = AsyncStatus.FULFILLED;\n        return isInitReady(votingStartEndStatusRef.current);\n      });\n\n      return;\n    }\n\n    setOffchainVotingStartEndInitReady(() => {\n      votingStartEndStatusRef.current.end = AsyncStatus.PENDING;\n      return isInitReady(votingStartEndStatusRef.current);\n    });\n\n    // Check if voting has ended every 1 second\n    const intervalID = setInterval(() => {\n      // Async process ran\n      setOffchainVotingStartEndInitReady(() => {\n        votingStartEndStatusRef.current.end = AsyncStatus.FULFILLED;\n        return isInitReady(votingStartEndStatusRef.current);\n      });\n\n      const hasEndedCheck =\n        Math.ceil(Date.now() / 1000) > snapshotProposal.msg.payload.end;\n\n      if (!hasEndedCheck) return;\n\n      setHasOffchainVotingEnded(hasEndedCheck);\n    }, 1000);\n\n    return () => {\n      clearInterval(intervalID);\n    };\n  }, [\n    hasOffchainVotingEnded,\n    snapshotProposal?.msg.payload.end,\n    snapshotProposal?.msg.type,\n  ]);\n\n  /**\n   * Functions\n   */\n\n  function isInitReady(offchainVotingStartEndInitReady: StartEndStatus) {\n    return Object.values(offchainVotingStartEndInitReady).every(\n      (s) => s === AsyncStatus.FULFILLED\n    );\n  }\n\n  return {\n    hasOffchainVotingStarted,\n    hasOffchainVotingEnded,\n    offchainVotingStartEndInitReady,\n  };\n}\n","import {useCallback, useEffect, useState} from 'react';\nimport {\n  SnapshotDraftResponse,\n  SnapshotProposalResponse,\n  SnapshotType,\n} from '@openlaw/snapshot-js-erc712';\n\nimport {AsyncStatus} from '../../../util/types';\nimport {SNAPSHOT_HUB_API_URL, SPACE} from '../../../config';\nimport {\n  ProposalData,\n  ProposalOrDraftSnapshotType,\n  SnapshotDraft,\n  SnapshotProposal,\n  SnapshotProposalCommon,\n  SubgraphProposal,\n} from '../types';\nimport {useAbortController, useCounter} from '../../../hooks';\n\ntype UseProposalReturn = {\n  proposalData: ProposalData | undefined;\n  proposalError: Error | undefined;\n  proposalNotFound: boolean;\n  proposalStatus: AsyncStatus;\n};\n\nconst ERROR_PROPOSAL: string =\n  'Something went wrong while getting the proposal.';\nconst ERROR_PROPOSAL_NOT_FOUND: string = 'Proposal was not found.';\n\n/**\n * useProposalOrDraft\n *\n * Ahook which fetches a snapshot-hub `proposal` or `draft` type by an ID string.\n *\n * If no `type` argument is provided it will search first for a\n * `proposal`, then if not found, search for a `draft`.\n *\n * @todo Fetch subgraph proposal on mount before a draft or proposal has been fetched.\n *\n * @param {string} id A draft's or a proposal's ID to search for.\n * @param {SnapshotType?} type An optional snapshot-hub `type` to search by.\n * @returns {UseProposalReturn}\n */\nexport function useProposalOrDraft(\n  id: string,\n  type?: ProposalOrDraftSnapshotType\n): UseProposalReturn {\n  /**\n   * State\n   */\n\n  /**\n   * @todo Get subgraph data using useLazyQuery\n   * @link https://www.apollographql.com/docs/react/data/queries/#executing-queries-manually\n   */\n  const [daoProposal /* setDAOProposal */] = useState<SubgraphProposal>();\n  const [snapshotDraft, setSnapshotDraft] = useState<SnapshotDraft>();\n  const [snapshotProposal, setSnapshotProposal] = useState<SnapshotProposal>();\n  const [proposalNotFound, setProposalNotFound] = useState<boolean>(false);\n  const [proposalError, setProposalError] = useState<Error>();\n  const [proposalStatus, setProposalStatus] = useState<AsyncStatus>(\n    AsyncStatus.STANDBY\n  );\n\n  /**\n   * Our hooks\n   */\n\n  const {abortController, isMountedRef} = useAbortController();\n  const [refetchCount, updateRefetchCount] = useCounter();\n\n  /**\n   * Cached callbacks\n   */\n\n  const handleGetDraftCached = useCallback(handleGetDraft, [\n    abortController?.signal,\n    id,\n    isMountedRef,\n    refetchCount,\n  ]);\n  const handleGetProposalCached = useCallback(handleGetProposal, [\n    abortController?.signal,\n    id,\n    isMountedRef,\n    refetchCount,\n    type,\n  ]);\n  const handleGetProposalOrDraftCached = useCallback(handleGetProposalOrDraft, [\n    handleGetDraftCached,\n    handleGetProposalCached,\n  ]);\n\n  /**\n   * Variables\n   */\n\n  const snapshotType: ProposalOrDraftSnapshotType | undefined = snapshotProposal\n    ? SnapshotType.proposal\n    : snapshotDraft\n    ? SnapshotType.draft\n    : undefined;\n\n  /**\n   * We need to at least have Snapshot data to provide the proposal,\n   * otherwise we will have nothing to show the user.\n   */\n  const proposalData: UseProposalReturn['proposalData'] =\n    snapshotDraft || snapshotProposal\n      ? {\n          daoProposal,\n          getCommonSnapshotProposalData,\n          refetchProposalOrDraft,\n          snapshotDraft,\n          snapshotProposal,\n          snapshotType,\n        }\n      : undefined;\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    if (!abortController?.signal) return;\n\n    switch (type) {\n      case SnapshotType.draft:\n        handleGetDraftCached();\n        break;\n      case SnapshotType.proposal:\n        handleGetProposalCached();\n        break;\n      default:\n        handleGetProposalOrDraftCached();\n        break;\n    }\n  }, [\n    abortController?.signal,\n    handleGetDraftCached,\n    handleGetProposalCached,\n    handleGetProposalOrDraftCached,\n    type,\n  ]);\n\n  /**\n   * Functions\n   */\n\n  async function handleGetDraft(): Promise<SnapshotDraft | undefined> {\n    try {\n      // Do not trigger pending requests (UI will show loader) for refetches (meant to be silent).\n      if (refetchCount === 0) setProposalStatus(AsyncStatus.PENDING);\n\n      const response = await fetch(\n        `${SNAPSHOT_HUB_API_URL}/api/${SPACE}/draft/${id}`,\n        {signal: abortController?.signal}\n      );\n\n      if (!response.ok) {\n        throw new Error(ERROR_PROPOSAL);\n      }\n\n      const responseJSON: SnapshotDraftResponse = await response.json();\n\n      if (!isMountedRef.current) return;\n\n      // @note API does not provide a 404\n      if (!responseJSON || !Object.keys(responseJSON).length) {\n        setProposalNotFound(true);\n\n        throw new Error(ERROR_PROPOSAL_NOT_FOUND);\n      }\n\n      const idKey = Object.keys(responseJSON)[0];\n      // Get the `SnapshotDraftResponseData` by the address key of the single result.\n      const draft: SnapshotDraft = {\n        idInDAO: idKey,\n        idInSnapshot: idKey,\n        ...responseJSON[idKey],\n      };\n\n      setProposalStatus(AsyncStatus.FULFILLED);\n      setSnapshotDraft(draft);\n\n      return draft;\n    } catch (error) {\n      setProposalStatus(AsyncStatus.REJECTED);\n      setProposalError(error);\n    }\n  }\n\n  async function handleGetProposal(): Promise<SnapshotProposal | undefined> {\n    try {\n      // Do not trigger pending requests (UI will show loader) for refetches (meant to be silent).\n      if (refetchCount === 0) setProposalStatus(AsyncStatus.PENDING);\n\n      /**\n       * @note `searchUniqueDraftId` includes the draft id in the search for the proposal\n       *   as a Moloch proposal's ID hash could be the Snapshot Draft's ID.\n       */\n      const response = await fetch(\n        `${SNAPSHOT_HUB_API_URL}/api/${SPACE}/proposal/${id}?searchUniqueDraftId=true&includeVotes=true`,\n        {signal: abortController?.signal}\n      );\n\n      if (!response.ok) {\n        /**\n         * If `type` is set then we know we can determine `handleGetDraft`\n         * will not be called after in `handleGetProposalOrDraft`.\n         */\n        if (type === SnapshotType.proposal) {\n          throw new Error(ERROR_PROPOSAL);\n        }\n\n        return;\n      }\n\n      const responseJSON: SnapshotProposalResponse = await response.json();\n\n      if (!isMountedRef.current) return;\n\n      // @note API does not provide a 404\n      if (!responseJSON || !Object.keys(responseJSON).length) {\n        /**\n         * If `type` is set then we know we can determine `handleGetDraft`\n         * will not be called after in `handleGetProposalOrDraft`.\n         */\n        if (type === SnapshotType.proposal) {\n          setProposalNotFound(true);\n          throw new Error(ERROR_PROPOSAL_NOT_FOUND);\n        }\n\n        return;\n      }\n\n      const idKey = Object.keys(responseJSON)[0];\n      // Determine ID submitted to DAO, i.e. if there's a Draft ID hash, we should use that.\n      const proposalId: string =\n        responseJSON[idKey]?.data.erc712DraftHash || idKey;\n      // Get the `SnapshotProposalResponseData` by the address key of the single result.\n      const proposal: SnapshotProposal = {\n        idInDAO: proposalId,\n        idInSnapshot: idKey,\n        ...responseJSON[idKey],\n      };\n\n      setProposalStatus(AsyncStatus.FULFILLED);\n      setSnapshotProposal(proposal);\n\n      return proposal;\n    } catch (error) {\n      setProposalStatus(AsyncStatus.REJECTED);\n      setProposalError(error);\n    }\n  }\n\n  /**\n   * Searches all possible combinations to return a proposal or a draft:\n   *\n   * 1. Search for a proposal (including by using the `id` as the Draft's ID hash via `searchUniqueDraftId`)\n   * 2. Search for a draft, if nothing is returned for a proposal.\n   */\n  async function handleGetProposalOrDraft() {\n    // 1. Attempt to search for a proposal.\n    const proposal = await handleGetProposalCached();\n\n    if (!proposal) {\n      // 2. If not found, attempt a search for a draft.\n      const draft = await handleGetDraftCached();\n\n      setSnapshotDraft(draft);\n\n      return;\n    }\n\n    setSnapshotProposal(proposal);\n  }\n\n  /**\n   * getCommonSnapshotProposalData\n   *\n   * @returns `SnapshotProposalCommon | undefined` Data for either a Draft or Proposal which is shared between the two types.\n   */\n  function getCommonSnapshotProposalData(): SnapshotProposalCommon | undefined {\n    switch (snapshotType) {\n      case SnapshotType.draft:\n        return snapshotDraft;\n      case SnapshotType.proposal:\n        return snapshotProposal;\n      default:\n        return undefined;\n    }\n  }\n\n  function refetchProposalOrDraft(): void {\n    updateRefetchCount({type: 'increment'});\n  }\n\n  return {\n    proposalData,\n    proposalError,\n    proposalNotFound,\n    proposalStatus,\n  };\n}\n","import {useSelector} from 'react-redux';\nimport {useCallback, useEffect, useRef, useState} from 'react';\n\nimport {multicall, MulticallTuple} from '../../web3/helpers';\nimport {ProposalFlowStatus, ProposalData, ProposalFlag} from '../types';\nimport {StoreState} from '../../../store/types';\nimport {useOffchainVotingStartEnd} from '.';\nimport {useWeb3Modal} from '../../web3/hooks';\nimport {VotingState} from '../voting/types';\n\n// @todo Logic to fall back to on-chain polling this if subgraph is not available\n\ntype UseProposalWithOffchainVoteStatusReturn = {\n  status: ProposalFlowStatus | undefined;\n  daoProposal: {adapterAddress: string; flags: number} | undefined;\n  daoProposalVotes:\n    | {\n        fallbackVotesCount: string;\n        gracePeriodStartingTime: string;\n        index: string;\n        isChallenged: boolean;\n        nbNo: string;\n        nbVoters: string;\n        nbYes: string;\n        proposalHash: string;\n        reporter: string;\n        resultRoot: string;\n        snapshot: string;\n        startingTime: string;\n      }\n    | undefined;\n  /**\n   * An enum index (string) of the DAO proposal's `VotingState`\n   */\n  daoProposalVoteResult: string | undefined;\n  transitionMessage: string | undefined;\n};\n\nexport function useProposalWithOffchainVoteStatus(\n  proposal: ProposalData\n): UseProposalWithOffchainVoteStatusReturn {\n  const {snapshotDraft, snapshotProposal} = proposal;\n  const proposalId = snapshotDraft?.idInDAO || snapshotProposal?.idInDAO;\n\n  /**\n   * Selectors\n   */\n\n  const {web3Instance} = useWeb3Modal();\n  const daoRegistryAddress = useSelector(\n    (s: StoreState) => s.contracts.DaoRegistryContract?.contractAddress\n  );\n  const daoRegistryABI = useSelector(\n    (s: StoreState) => s.contracts.DaoRegistryContract?.abi\n  );\n  const offchainVotingAddress = useSelector(\n    (s: StoreState) => s.contracts.VotingContract?.contractAddress\n  );\n  const offchainVotingABI = useSelector(\n    (s: StoreState) => s.contracts.VotingContract?.abi\n  );\n\n  /**\n   * State\n   */\n\n  const [daoProposal, setDAOProposal] = useState<\n    UseProposalWithOffchainVoteStatusReturn['daoProposal']\n  >();\n  const [daoProposalVotes, setDAOProposalVotes] = useState<\n    UseProposalWithOffchainVoteStatusReturn['daoProposalVotes']\n  >();\n  const [daoProposalVoteResult, setDAOProposalVoteResult] = useState<\n    UseProposalWithOffchainVoteStatusReturn['daoProposalVoteResult']\n  >();\n\n  /**\n   * Refs\n   */\n\n  const pollingIntervalIdRef = useRef<NodeJS.Timeout>();\n\n  /**\n   * Our hooks\n   */\n\n  const {\n    hasOffchainVotingStarted,\n    hasOffchainVotingEnded,\n    offchainVotingStartEndInitReady,\n  } = useOffchainVotingStartEnd(proposal);\n\n  /**\n   * Cached callbacks\n   */\n\n  const pollStatusFromContractCached = useCallback(pollStatusFromContract, [\n    daoRegistryABI,\n    daoRegistryAddress,\n    offchainVotingABI,\n    offchainVotingAddress,\n    proposalId,\n    web3Instance,\n  ]);\n\n  /**\n   * Variables\n   */\n\n  const atExistsInDAO = daoProposal\n    ? ProposalFlag[daoProposal.flags] === ProposalFlag[ProposalFlag.EXISTS]\n    : false;\n  const atSponsoredInDAO = daoProposal\n    ? ProposalFlag[daoProposal.flags] === ProposalFlag[ProposalFlag.SPONSORED]\n    : false;\n  const atProcessedInDAO = daoProposal\n    ? ProposalFlag[daoProposal.flags] === ProposalFlag[ProposalFlag.PROCESSED]\n    : false;\n\n  /**\n   * Check if vote result was submitted.\n   * We can do this by checking if `reporter` and `resultRoot` has been set.\n   *\n   * @see `submitVoteResult` in molochv3-contracts off-chain voting adapters\n   */\n  const offchainResultSubmitted =\n    daoProposalVotes &&\n    daoProposalVotes.reporter &&\n    !daoProposalVotes.reporter.startsWith('0x00000000000') &&\n    daoProposalVotes.resultRoot &&\n    !daoProposalVotes.resultRoot.startsWith('0x00000000000');\n\n  const isInVotingGracePeriod =\n    daoProposalVoteResult &&\n    VotingState[daoProposalVoteResult] ===\n      VotingState[VotingState.GRACE_PERIOD];\n\n  useEffect(() => {\n    // Call as soon as possible.\n    pollStatusFromContractCached();\n\n    // Then, poll every `x` Ms\n    const intervalId = setInterval(pollStatusFromContractCached, 5000);\n\n    pollingIntervalIdRef.current = intervalId;\n  }, [pollStatusFromContractCached]);\n\n  // Stop polling if propsal is processed\n  useEffect(() => {\n    if (atProcessedInDAO && pollingIntervalIdRef.current) {\n      clearInterval(pollingIntervalIdRef.current);\n    }\n\n    return () => {\n      pollingIntervalIdRef.current &&\n        clearInterval(pollingIntervalIdRef.current);\n    };\n  }, [atProcessedInDAO]);\n\n  /**\n   * Functions\n   */\n\n  function getReturnData(\n    status: ProposalFlowStatus | undefined,\n    transitionMessage?: string\n  ): UseProposalWithOffchainVoteStatusReturn {\n    return {\n      status,\n      transitionMessage,\n      daoProposal,\n      daoProposalVoteResult,\n      daoProposalVotes,\n    };\n  }\n\n  async function pollStatusFromContract() {\n    try {\n      if (\n        !daoRegistryABI ||\n        !daoRegistryAddress ||\n        !offchainVotingABI ||\n        !offchainVotingAddress ||\n        !proposalId\n      ) {\n        return;\n      }\n\n      const proposalsABI = daoRegistryABI.filter(\n        (item) => item.name === 'proposals'\n      )[0];\n      const voteResultABI = offchainVotingABI.filter(\n        (item) => item.name === 'voteResult'\n      )[0];\n      const votesABI = offchainVotingABI.filter(\n        (item) => item.name === 'votes'\n      )[0];\n\n      const calls: MulticallTuple[] = [\n        // DAO proposals call\n        [daoRegistryAddress, proposalsABI, [proposalId]],\n        // Votes call\n        [offchainVotingAddress, votesABI, [daoRegistryAddress, proposalId]],\n        // Vote result call\n        [\n          offchainVotingAddress,\n          voteResultABI,\n          [daoRegistryAddress, proposalId],\n        ],\n      ];\n\n      const [proposal, votes, voteResult] = await multicall({\n        calls,\n        web3Instance,\n      });\n\n      setDAOProposal(proposal);\n      setDAOProposalVotes(votes);\n      setDAOProposalVoteResult(voteResult);\n    } catch (error) {}\n  }\n\n  // Status: Sponsor\n  if (\n    offchainVotingStartEndInitReady &&\n    !hasOffchainVotingStarted &&\n    atExistsInDAO\n  ) {\n    return getReturnData(ProposalFlowStatus.Sponsor);\n  }\n\n  // Status: Off-chain Voting\n  if (\n    offchainVotingStartEndInitReady &&\n    hasOffchainVotingStarted &&\n    !hasOffchainVotingEnded &&\n    atSponsoredInDAO\n  ) {\n    return getReturnData(ProposalFlowStatus.OffchainVoting);\n  }\n\n  // Status: Ready to Submit Vote Result\n  if (\n    offchainVotingStartEndInitReady &&\n    hasOffchainVotingEnded &&\n    atSponsoredInDAO &&\n    !offchainResultSubmitted\n  ) {\n    return getReturnData(ProposalFlowStatus.OffchainVotingSubmitResult);\n  }\n\n  // Status: Grace period\n  if (\n    offchainVotingStartEndInitReady &&\n    hasOffchainVotingEnded &&\n    atSponsoredInDAO &&\n    offchainResultSubmitted &&\n    isInVotingGracePeriod\n  ) {\n    return getReturnData(ProposalFlowStatus.OffchainVotingGracePeriod);\n  }\n\n  // Status: Process\n  if (\n    atSponsoredInDAO &&\n    offchainVotingStartEndInitReady &&\n    hasOffchainVotingEnded &&\n    offchainResultSubmitted &&\n    !isInVotingGracePeriod\n  ) {\n    return getReturnData(ProposalFlowStatus.Process);\n  }\n\n  // Status: Processed (completed)\n  if (atProcessedInDAO) {\n    return getReturnData(ProposalFlowStatus.Completed);\n  }\n\n  // Fallthrough\n  return {\n    status: undefined,\n    transitionMessage: undefined,\n    daoProposal,\n    daoProposalVoteResult,\n    daoProposalVotes,\n  };\n}\n","/**\n * BURN_ADDRESS\n *\n * - e.g. Helpful when detecting no address.\n * - e.g. Helpful for ERC-712 signatures which have no action id (like Governance).\n */\nexport const BURN_ADDRESS: '0x0000000000000000000000000000000000000000' =\n  '0x0000000000000000000000000000000000000000';\n","import {useState} from 'react';\nimport {useSelector} from 'react-redux';\nimport {\n  buildVoteMessage,\n  getDomainDefinition,\n  getSpace,\n  prepareVoteMessage,\n  signMessage,\n  SnapshotMessageVote,\n  SnapshotSubmitBaseReturn,\n  SnapshotType,\n  SnapshotVoteData,\n  SnapshotVoteProposal,\n  submitMessage,\n  VoteChoicesIndex,\n} from '@openlaw/snapshot-js-erc712';\n\nimport {BURN_ADDRESS} from '../../../util/constants';\nimport {ContractAdapterNames, Web3TxStatus} from '../../web3/types';\nimport {DEFAULT_CHAIN, SNAPSHOT_HUB_API_URL, SPACE} from '../../../config';\nimport {getAdapterAddressFromContracts} from '../../web3/helpers';\nimport {PRIMARY_TYPE_ERC712} from '../../web3/config';\nimport {StoreState} from '../../../store/types';\nimport {useWeb3Modal} from '../../web3/hooks/useWeb3Modal';\n\ntype SignAndSendVoteDataParam = {\n  choice: SnapshotMessageVote['choice'];\n  /**\n   * The address of a delegate voter for a member.\n   */\n  delegateAddress?: SnapshotMessageVote['metadata']['memberAddress'];\n  metadata?: Record<string, any>;\n};\n\ntype UseSignAndSendVoteReturn = {\n  signAndSendVote: (data: {\n    partialVoteData: SignAndSendVoteDataParam;\n    // e.g. Governance does not have an adpater name\n    adapterName?: ContractAdapterNames;\n    proposalIdInDAO: SnapshotVoteData['payload']['proposalHash'];\n    proposalIdInSnapshot: string;\n  }) => Promise<SignAndSendVoteReturn>;\n  voteData: SignAndSendVoteReturn | undefined;\n  voteDataError: Error | undefined;\n  voteDataStatus: Web3TxStatus;\n};\n\ntype SignAndSendVoteReturn = {\n  data: SnapshotVoteData;\n  signature: string;\n  uniqueId: SnapshotSubmitBaseReturn['uniqueId'];\n};\n\n/**\n * useSignAndSendVote\n *\n * React hook which prepares proposal data for submission\n * to Snapshot and Moloch v3 and signs it (ERC712)\n *\n * @returns {Promise<BuildAndSignProposalDataReturn>} An object with the proposal data and the ERC712 signature string.\n */\nexport function useSignAndSendVote(): UseSignAndSendVoteReturn {\n  /**\n   * Selectors\n   */\n\n  const daoRegistryAddress = useSelector(\n    (state: StoreState) => state.contracts.DaoRegistryContract?.contractAddress\n  );\n  const contracts = useSelector((state: StoreState) => state.contracts);\n\n  /**\n   * Our hooks\n   */\n\n  const {account, provider, web3Instance} = useWeb3Modal();\n\n  /**\n   * State\n   */\n\n  const [voteData, setVoteData] = useState<SignAndSendVoteReturn>();\n  const [voteDataError, setVoteDataError] = useState<Error>();\n  const [voteDataStatus, setVoteDataStatus] = useState<Web3TxStatus>(\n    Web3TxStatus.STANDBY\n  );\n\n  /**\n   * Functions\n   */\n\n  /**\n   * signAndSendVote\n   *\n   * Builds the vote data for submission to Snapshot and signs it (ERC712).\n   *\n   * @param {SignAndSendVoteDataParam}\n   * @param {adapterName} ContractAdapterNames - An adapter's contract address this data is related to.\n   *   @note Does not accept voting adapter names.\n   * @param {SnapshotVoteData['payload']['proposalHash']} proposalHash - The unique hash of the proposal from snapshot-hub.\n   * @returns {Promise<BuildAndSignProposalDataReturn>} An object with the vote data and the ERC712 signature string.\n   */\n  async function signAndSendVote({\n    partialVoteData,\n    adapterName,\n    proposalIdInDAO,\n    proposalIdInSnapshot,\n  }: {\n    partialVoteData: SignAndSendVoteDataParam;\n    // e.g. Governance does not have an adpater name\n    adapterName?: ContractAdapterNames;\n    /**\n     * This is the hash of the content as submitted to the DAO.\n     * The hash should be the same as the Snapshot draft's, or\n     * proposal's (if not submitted as a draft), ID.\n     *\n     * We need to make sure this matches what has been submitted to\n     * the DAO for later signature verifications.\n     */\n    proposalIdInDAO: SnapshotVoteData['payload']['proposalHash'];\n    /**\n     * Must match a `proposal` type's ID in Snapshot so a `vote` may be attached.\n     */\n    proposalIdInSnapshot: string;\n  }): Promise<SignAndSendVoteReturn> {\n    try {\n      if (!web3Instance) {\n        throw new Error('No Web3 instance was found.');\n      }\n\n      if (!account) {\n        throw new Error('No account was found.');\n      }\n\n      if (!daoRegistryAddress) {\n        throw new Error('No \"DaoRegistry\" address was found.');\n      }\n\n      if (!SNAPSHOT_HUB_API_URL) {\n        throw new Error('No \"SNAPSHOT_HUB_API_URL\" was found.');\n      }\n\n      setVoteDataStatus(Web3TxStatus.AWAITING_CONFIRM);\n\n      const adapterAddress = adapterName\n        ? getAdapterAddressFromContracts(adapterName, contracts)\n        : BURN_ADDRESS;\n\n      const {choice, delegateAddress, metadata = {}} = partialVoteData;\n\n      const {data: snapshotSpace} = await getSpace(SNAPSHOT_HUB_API_URL, SPACE);\n\n      const voteData: SnapshotMessageVote = {\n        chainId: DEFAULT_CHAIN,\n        choice,\n        metadata: {\n          ...metadata,\n          memberAddress: delegateAddress || account,\n        },\n      };\n\n      const voteProposalData: SnapshotVoteProposal = {\n        proposalHash: proposalIdInDAO,\n        space: SPACE,\n        token: snapshotSpace.token,\n      };\n\n      // 1. Check proposal type and get appropriate message\n      const message = await buildVoteMessage(\n        voteData,\n        voteProposalData,\n        SNAPSHOT_HUB_API_URL\n      );\n\n      const erc712Message = prepareVoteMessage({\n        timestamp: message.timestamp,\n        payload: {\n          proposalHash: message.payload.proposalHash,\n          choice: VoteChoicesIndex[choice],\n        },\n      });\n\n      const {domain, types} = getDomainDefinition(\n        {...erc712Message, type: SnapshotType.vote},\n        daoRegistryAddress,\n        adapterAddress,\n        DEFAULT_CHAIN\n      );\n\n      const dataToSign = JSON.stringify({\n        types: types,\n        domain: domain,\n        primaryType: PRIMARY_TYPE_ERC712,\n        message: erc712Message,\n      });\n\n      const signature: string = await signMessage(\n        provider,\n        account,\n        dataToSign\n      );\n\n      setVoteDataStatus(Web3TxStatus.PENDING);\n\n      // 3. Send data to snapshot-hub\n      const {data} = await submitMessage<SnapshotSubmitBaseReturn>(\n        SNAPSHOT_HUB_API_URL,\n        account,\n        {\n          ...message,\n          // @note We pass the proposal's hash (ID) so we can vote on it.\n          payload: {...message.payload, proposalHash: proposalIdInSnapshot},\n        },\n        signature,\n        {\n          actionId: domain.actionId,\n          chainId: domain.chainId,\n          verifyingContract: domain.verifyingContract,\n          message: erc712Message,\n        }\n      );\n\n      const dataToReturn = {\n        data: message,\n        signature,\n        uniqueId: data.uniqueId,\n      };\n\n      setVoteDataStatus(Web3TxStatus.FULFILLED);\n      setVoteData(dataToReturn);\n\n      return dataToReturn;\n    } catch (error) {\n      setVoteDataStatus(Web3TxStatus.REJECTED);\n      setVoteDataError(error);\n\n      throw error;\n    }\n  }\n\n  return {\n    signAndSendVote,\n    voteData,\n    voteDataError,\n    voteDataStatus,\n  };\n}\n","import {useState} from 'react';\nimport {useSelector} from 'react-redux';\nimport {\n  buildDraftMessage,\n  buildProposalMessage,\n  getDomainDefinition,\n  getSpace,\n  prepareDraftMessage,\n  prepareProposalMessage,\n  signMessage,\n  SnapshotMessageBase,\n  SnapshotMessageProposal,\n  SnapshotProposalData,\n  SnapshotSubmitBaseReturn,\n  SnapshotSubmitProposalReturn,\n  SnapshotType,\n  submitMessage,\n} from '@openlaw/snapshot-js-erc712';\n\nimport {\n  ContractAdapterNames,\n  ContractDAOConfigKeys,\n  Web3TxStatus,\n} from '../../web3/types';\nimport {DEFAULT_CHAIN, SNAPSHOT_HUB_API_URL, SPACE} from '../../../config';\nimport {\n  getAdapterAddressFromContracts,\n  getDAOConfigEntry,\n} from '../../web3/helpers';\nimport {PRIMARY_TYPE_ERC712} from '../../web3/config';\nimport {\n  ProposalOrDraftSignDataFromType,\n  ProposalOrDraftSnapshotType,\n} from '../types';\nimport {StoreState} from '../../../store/types';\nimport {useWeb3Modal} from '../../web3/hooks/useWeb3Modal';\nimport {BURN_ADDRESS} from '../../../util/constants';\n\ntype SignAndSendData<T extends ProposalOrDraftSnapshotType> = {\n  partialProposalData: PrepareAndSignProposalDataParam;\n  adapterAddress?: string;\n  adapterName?: ContractAdapterNames;\n  type: T;\n};\n\ntype PrepareAndSignProposalDataParam = {\n  body: SnapshotProposalData['payload']['body'];\n  name: SnapshotProposalData['payload']['name'];\n  metadata: SnapshotProposalData['payload']['metadata'];\n  /**\n   * Helpful for Proposal types when hashes between created Drafts\n   * and yet to be created Proposals need to match.\n   */\n  timestamp?: SnapshotProposalData['timestamp'];\n};\n\ntype UseSignAndSubmitProposalReturn<T extends ProposalOrDraftSnapshotType> = {\n  signAndSendProposal: (\n    d: SignAndSendData<T>\n  ) => Promise<SignAndSendProposalReturn<T>>;\n  proposalData: SignAndSendProposalReturn<T> | undefined;\n  proposalSignAndSendError: Error | undefined;\n  proposalSignAndSendStatus: Web3TxStatus;\n};\n\ntype SignAndSendProposalReturn<T extends ProposalOrDraftSnapshotType> = {\n  data: ProposalOrDraftSignDataFromType<T>;\n  signature: string;\n  uniqueId: SnapshotSubmitBaseReturn['uniqueId'];\n  uniqueIdDraft: SnapshotSubmitProposalReturn['uniqueIdDraft'];\n};\n\n/**\n * useSignAndSubmitProposal\n *\n * React hook which prepares proposal data for submission\n * to Snapshot and Moloch v3 and signs it (ERC712)\n *\n * @returns {Promise<UseSignAndSubmitProposalReturn>} An object with the proposal data and the ERC712 signature string.\n */\nexport function useSignAndSubmitProposal<\n  T extends ProposalOrDraftSnapshotType\n>(): UseSignAndSubmitProposalReturn<T> {\n  /**\n   * Selectors\n   */\n\n  const daoRegistryAddress = useSelector(\n    (state: StoreState) => state.contracts.DaoRegistryContract?.contractAddress\n  );\n  const daoRegistryInstance = useSelector(\n    (state: StoreState) => state.contracts.DaoRegistryContract?.instance\n  );\n  const contracts = useSelector((state: StoreState) => state.contracts);\n\n  /**\n   * Our hooks\n   */\n\n  const {account, provider, web3Instance} = useWeb3Modal();\n\n  /**\n   * State\n   */\n\n  const [proposalData, setProposalData] = useState<\n    SignAndSendProposalReturn<T>\n  >();\n  const [\n    proposalSignAndSendError,\n    setProposalSignAndSendError,\n  ] = useState<Error>();\n  const [\n    proposalSignAndSendStatus,\n    setProposalSignAndSendStatus,\n  ] = useState<Web3TxStatus>(Web3TxStatus.STANDBY);\n\n  /**\n   * Functions\n   */\n\n  /**\n   * A wrapper to clearly separate the running of functions\n   * specific to Proposals.\n   *\n   * @param {SnapshotMessageBase & Partial<SnapshotMessageProposal>} commonData\n   * @returns {Promise<SnapshotProposalData>}\n   */\n  async function buildProposalMessageHelper(\n    commonData: SnapshotMessageBase & Partial<SnapshotMessageProposal>\n  ): Promise<SnapshotProposalData> {\n    if (!SNAPSHOT_HUB_API_URL) {\n      throw new Error('No \"SNAPSHOT_HUB_API_URL\" was found.');\n    }\n\n    const snapshot: number = await web3Instance.eth.getBlockNumber();\n\n    const votingTimeSeconds: number = parseInt(\n      await getDAOConfigEntry(\n        ContractDAOConfigKeys.offchainVotingVotingPeriod,\n        daoRegistryInstance\n      )\n    );\n\n    return await buildProposalMessage(\n      {\n        ...commonData,\n        votingTimeSeconds,\n        snapshot,\n      },\n      SNAPSHOT_HUB_API_URL\n    );\n  }\n\n  /**\n   * signAndSendProposal\n   *\n   * Builds the proposal data for submission to Moloch v3 and Snapshot and signs it (ERC712).\n   *\n   * @returns {Promise<SignAndSendProposalReturn>} An object with the proposal data, signature string, and propsal hash(es) from snapshot-hub.\n   */\n  async function signAndSendProposal({\n    partialProposalData,\n    adapterAddress,\n    adapterName,\n    type,\n  }: SignAndSendData<T>): Promise<SignAndSendProposalReturn<T>> {\n    try {\n      if (!account) {\n        throw new Error('No account was found to send.');\n      }\n\n      if (!web3Instance) {\n        throw new Error('No Web3 instance was found.');\n      }\n\n      if (!daoRegistryAddress) {\n        throw new Error('No \"DaoRegistry\" address was found.');\n      }\n\n      if (!SNAPSHOT_HUB_API_URL) {\n        throw new Error('No \"SNAPSHOT_HUB_API_URL\" was found.');\n      }\n\n      if (type !== SnapshotType.draft && type !== SnapshotType.proposal) {\n        throw new Error('Handling for type \"vote\" is not implemented.');\n      }\n\n      setProposalSignAndSendStatus(Web3TxStatus.AWAITING_CONFIRM);\n\n      const actionId = adapterAddress\n        ? adapterAddress\n        : adapterName\n        ? getAdapterAddressFromContracts(adapterName, contracts)\n        : BURN_ADDRESS;\n\n      const {body, name, metadata, timestamp} = partialProposalData;\n\n      const {data: snapshotSpace} = await getSpace(SNAPSHOT_HUB_API_URL, SPACE);\n\n      const commonData: SnapshotMessageBase = {\n        name,\n        body,\n        metadata,\n        token: snapshotSpace.token,\n        space: SPACE,\n      };\n\n      // 1. Check proposal type and prepare appropriate message\n      const message = (type === SnapshotType.draft\n        ? await buildDraftMessage(commonData, SNAPSHOT_HUB_API_URL)\n        : await buildProposalMessageHelper({\n            ...commonData,\n            timestamp,\n          })) as ProposalOrDraftSignDataFromType<T>;\n\n      // 2. Prepare signing data. Snapshot and the contracts will verify this same data against the signature.\n      const erc712Message =\n        type === SnapshotType.draft\n          ? prepareDraftMessage(message)\n          : prepareProposalMessage(message as SnapshotProposalData);\n\n      const {domain, types} = getDomainDefinition(\n        {...erc712Message, type},\n        daoRegistryAddress,\n        actionId,\n        DEFAULT_CHAIN\n      );\n\n      const dataToSign = JSON.stringify({\n        types,\n        domain,\n        primaryType: PRIMARY_TYPE_ERC712,\n        message: erc712Message,\n      });\n\n      // 3. Sign data\n      const signature = await signMessage(provider, account, dataToSign);\n\n      setProposalSignAndSendStatus(Web3TxStatus.PENDING);\n\n      // 3. Send data to snapshot-hub\n      const {data} = await submitMessage<SnapshotSubmitProposalReturn>(\n        SNAPSHOT_HUB_API_URL,\n        account,\n        message,\n        signature,\n        {\n          actionId: domain.actionId,\n          chainId: domain.chainId,\n          verifyingContract: domain.verifyingContract,\n          message: erc712Message,\n        }\n      );\n\n      const dataToReturn = {\n        data: message,\n        signature,\n        uniqueId: data.uniqueId,\n        uniqueIdDraft: data.uniqueIdDraft || '',\n      };\n\n      setProposalSignAndSendStatus(Web3TxStatus.FULFILLED);\n      setProposalData(dataToReturn);\n\n      return dataToReturn;\n    } catch (error) {\n      setProposalSignAndSendStatus(Web3TxStatus.REJECTED);\n      setProposalSignAndSendError(error);\n\n      throw error;\n    }\n  }\n\n  return {\n    proposalData,\n    proposalSignAndSendError,\n    proposalSignAndSendStatus,\n    signAndSendProposal,\n  };\n}\n","import React, {useEffect, useState} from 'react';\n\ninterface IProps {\n  // Show spinner after some time has elapsed.\n  // Prevents the \"sudden spinner\" UI/UX no-no.\n  // Esp. if we could have cached data.\n  showAfterMs?: number;\n  text?: string;\n  textProps?: {[key: string]: any};\n}\n\nfunction Spinner(props: Partial<IProps>) {\n  return <div className=\"loader\" {...props} />;\n}\n\nconst Loader = (\n  props: IProps & React.PropsWithoutRef<JSX.IntrinsicElements['div']>\n) => {\n  const {showAfterMs, text, textProps, ...loaderProps} = props;\n  const [showLoaderAfterMs, setShowLoaderAfterMs] = useState<boolean>(false);\n\n  useEffect(() => {\n    /* 200ms is approx. the time a user will notice a stalled, blank screen */\n    const timeoutId =\n      showAfterMs && setTimeout(() => setShowLoaderAfterMs(true), showAfterMs);\n\n    return function cleanup() {\n      timeoutId && clearTimeout(timeoutId);\n    };\n  }, [showAfterMs]);\n\n  return (!showAfterMs || (showAfterMs && showLoaderAfterMs)) && props.text ? (\n    <div className=\"loader-container\">\n      <Spinner {...loaderProps} />\n      <span className=\"loader-text\" {...textProps}>\n        {text}\n      </span>\n    </div>\n  ) : (!showAfterMs || (showAfterMs && showLoaderAfterMs)) && !props.text ? (\n    <Spinner {...loaderProps} />\n  ) : null;\n};\n\nexport default Loader;\n","import {\n  SnapshotDraftData,\n  SnapshotProposalData,\n  SnapshotDraftResponseData,\n  SnapshotProposalResponseData,\n  SnapshotType,\n} from '@openlaw/snapshot-js-erc712';\n\n/**\n * ENUMS\n */\n\n/**\n * Reverse mapping of DaoRegistry proposal flags.\n * The formula used to create the `flags` entry is:\n *   `prevFlags + 2**nextFlagIndex`\n *    i.e. to get the flag after `flags: 1` the formula is: `1 + 2**1 = 3`\n *\n * @note Order matters\n *\n * @see `ProposalFlag` in molochv3-contracts `DaoRegistry.sol`\n * @see `getFlag` in molochv3-contracts `DaoConstants.sol`\n * @see `setFlag` in molochv3-contracts `DaoConstants.sol`\n */\nexport enum ProposalFlag {\n  EXISTS = 1,\n  SPONSORED = 3,\n  PROCESSED = 7,\n}\n\n// @todo Need more information about the vote challenge flow.\nexport enum ProposalFlowStatus {\n  Sponsor = 'Sponsor',\n  OffchainVoting = 'OffchainVoting',\n  OffchainVotingSubmitResult = 'OffchainVotingSubmitResult',\n  OffchainVotingGracePeriod = 'OffchainVotingGracePeriod',\n  OnchainVoting = 'OnchainVoting',\n  Process = 'Process',\n  Completed = 'Completed',\n}\n\n/**\n * @see `Distribute.sol` in molochv3-contracts\n */\nexport enum DistributionStatus {\n  NOT_STARTED,\n  IN_PROGRESS,\n  DONE,\n  FAILED,\n}\n\n/**\n * TYPES\n */\n\n// @todo Change the type to be precise\nexport type SubgraphProposal = Record<string, any>;\n\n/**\n * We augment the response data to add a few helpful data pieces.\n */\nexport type SnapshotDraft = {\n  /**\n   * The ID used to reference the DAO.\n   */\n  idInDAO: string;\n  /**\n   * An ID helper to reference the Draft hash\n   */\n  idInSnapshot: string;\n} & SnapshotDraftResponseData;\n\n/**\n * We augment the response data to add a few helpful data pieces.\n */\nexport type SnapshotProposal = {\n  /**\n   * The ID used to reference the DAO.\n   */\n  idInDAO: string;\n  /**\n   * An ID helper to reference the Proposal hash\n   */\n  idInSnapshot: string;\n} & SnapshotProposalResponseData;\n\n/**\n * Common data shared between a Snapshot Drafts and Proposals.\n * Helpful when we need to display information which is accessible on both.\n */\nexport type SnapshotProposalCommon = SnapshotDraft | SnapshotProposal;\n\nexport type ProposalData = {\n  daoProposal: SubgraphProposal | undefined;\n  /**\n   * Data for either a Draft or Proposal which is shared between the two types.\n   */\n  getCommonSnapshotProposalData: () => SnapshotProposalCommon | undefined;\n  refetchProposalOrDraft: () => void;\n  snapshotDraft: SnapshotDraft | undefined;\n  snapshotProposal: SnapshotProposal | undefined;\n  snapshotType: ProposalOrDraftSnapshotType | undefined;\n};\n\n/**\n * A conditional helper type for determining which data shape to use.\n *\n * @link https://www.typescriptlang.org/docs/handbook/2/conditional-types.html\n */\nexport type ProposalOrDraftSnapshotData =\n  | SnapshotDraftResponseData\n  | SnapshotProposalResponseData;\n\nexport type ProposalOrDraftSnapshotType =\n  | SnapshotType.proposal\n  | SnapshotType.draft;\n\n/**\n * A conditional helper type for determining which data shape to use based on the `ProposalOrDraftSnapshotType`.\n *\n * @link https://www.typescriptlang.org/docs/handbook/2/conditional-types.html\n */\nexport type ProposalOrDraftSignDataFromType<\n  T extends ProposalOrDraftSnapshotType\n> = T extends SnapshotType.proposal ? SnapshotProposalData : SnapshotDraftData;\n","import {CoreProposalVoteChoices} from '@openlaw/snapshot-js-erc712';\nimport {VoteChoices} from './types';\n\n/**\n * WEB3 CONFIG for MOLOCH v3\n */\n\n// Vote choices should be \"yes\", \"no\" unless Moloch v3 contracts change.\nexport const VOTE_CHOICES: CoreProposalVoteChoices = [\n  VoteChoices.Yes,\n  VoteChoices.No,\n];\n\n// When signing data this is the `primaryType` key's value which is part of the data to sign.\nexport const PRIMARY_TYPE_ERC712 = 'Message';\n\nexport const TX_CYCLE_MESSAGES: string[] = [\n  'Submitting\\u2026',\n  'Working\\u2026',\n  'DAOing\\u2026',\n  'Getting closer\\u2026',\n  'Dreaming of ETH\\u2026',\n];\n","type EtherscanURLProps = {\n  url: string;\n  isPending?: boolean;\n};\n\nexport default function EtherscanURL(props: EtherscanURLProps) {\n  const {url, isPending = false} = props;\n\n  return (\n    <small>\n      <a href={url} rel=\"noopener noreferrer\" target=\"_blank\">\n        {isPending ? 'view progress' : 'view transaction'}\n      </a>\n    </small>\n  );\n}\n","/**\n * WEB3 TYPES\n */\n\n// ...\n\n/**\n * WEB3 ENUMS\n */\n\n/**\n * Should match molochv3-contracts constants\n *\n * @todo Add other extensions as needs arise\n */\nexport enum ContractAdapterNames {\n  configuration = 'configuration',\n  distribute = 'distribute',\n  financing = 'financing',\n  guildkick = 'guildkick',\n  managing = 'managing',\n  onboarding = 'onboarding',\n  ragequit = 'ragequit',\n  tribute = 'tribute',\n  voting = 'voting',\n  withdraw = 'withdraw',\n}\n\n/**\n * Should match molochv3-contracts constants\n *\n * @todo Add other extensions as needs arise\n */\nexport enum ContractExtensionNames {\n  bank = 'bank',\n}\n\n/**\n * Should match molochv3-contracts constants\n *\n * @todo Add other extensions as needs arise\n */\nexport enum ContractDAOConfigKeys {\n  offchainVotingGracePeriod = 'offchainvoting.gracePeriod',\n  offchainVotingStakingAmount = 'offchainvoting.stakingAmount',\n  offchainVotingVotingPeriod = 'offchainvoting.votingPeriod',\n  onboardingChunkSize = 'onboarding.chunkSize',\n  onboardingMaximumChunks = 'onboarding.maximumChunks',\n  onboardingSharesPerChunk = 'onboarding.sharesPerChunk',\n  onboardingTokenAddr = 'onboarding.tokenAddr',\n  votingGracePeriod = 'voting.gracePeriod',\n  votingStakingAmount = 'voting.stakingAmount',\n  votingVotingPeriod = 'voting.votingPeriod',\n}\n\nexport enum VoteChoices {\n  Yes = 'Yes',\n  No = 'No',\n}\n\nexport enum Web3TxStatus {\n  STANDBY = 'STANDBY',\n  AWAITING_CONFIRM = 'AWAITING_CONFIRM',\n  PENDING = 'PENDING',\n  FULFILLED = 'FULFILLED',\n  REJECTED = 'REJECTED',\n}\n","import {useState, useEffect, useRef} from 'react';\n\ntype UseAbortControllerReturn = {\n  abortController: AbortController | undefined;\n  isMountedRef: React.MutableRefObject<boolean>;\n};\n\n/**\n * useAbortController\n *\n * Provides an `AbortController` to cancel requests.\n * Also provides a helper `isMountedRef` to see if the React component has\n * been unmounted and therefore should not run any setting of state.\n */\nexport function useAbortController(): UseAbortControllerReturn {\n  /**\n   * State\n   */\n\n  const [abortController, setAbortController] = useState<AbortController>();\n\n  /**\n   * Refs\n   */\n\n  const isMountedRef = useRef<boolean>(false);\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    isMountedRef.current = true;\n\n    !abortController && setAbortController(new AbortController());\n\n    return () => {\n      isMountedRef.current = false;\n\n      abortController && abortController.abort();\n    };\n  }, [abortController]);\n\n  return {\n    abortController,\n    isMountedRef,\n  };\n}\n","import {useReducer} from 'react';\n\ntype CounterState = {\n  count: number;\n};\n\ntype CounterAction = {\n  type: 'increment';\n};\n\ntype CounterReturn = [number, React.Dispatch<CounterAction>];\n\nconst initialState = {count: 0};\n\nfunction reducer(state: CounterState, action: CounterAction) {\n  switch (action.type) {\n    case 'increment':\n      return {count: state.count + 1};\n    default:\n      return state;\n  }\n}\n\n/**\n * useCounter\n *\n * A counter which is kept track of via a reducer.\n *\n * @note This is mainly to use inside a custom hook's callback resulting in a\n *  changed dependency for consumer's useEffect when a consumer higher up wants to trigger a \"re-run\"\n *  (i.e. re-fetch, refresh some data), similarly to dispatching a Redux action again to update the state.\n */\nexport function useCounter(): CounterReturn {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return [state.count, dispatch];\n}\n","import {useCallback, useEffect, useState} from 'react';\nimport {useLazyQuery} from '@apollo/react-hooks';\n\nimport {StoreState} from '../store/types';\nimport {useSelector} from 'react-redux';\n\nimport {GET_DAO} from '../gql';\n\ntype UseDaoReturn = {\n  dao: Record<string, any> | undefined;\n  gqlError: Error | undefined;\n};\n\n/**\n * useDao\n *\n * This component queries The Graph API to get data on the dao\n *\n * @returns {UseDaoReturn}\n */\nexport function useDao(): UseDaoReturn {\n  const daoRegistryContract = useSelector(\n    (s: StoreState) => s.contracts.DaoRegistryContract\n  );\n\n  const [getDao, {called, loading, data, error}] = useLazyQuery(GET_DAO, {\n    variables: {id: daoRegistryContract?.contractAddress.toLowerCase()},\n  });\n\n  const [dao, setDao] = useState<Record<string, any> | undefined>();\n  const [gqlError, setGqlError] = useState<Error>();\n\n  const getDaoRegistryCallback = useCallback(getDaoRegistry, [\n    daoRegistryContract?.contractAddress,\n    data,\n    error,\n    loading,\n  ]);\n\n  useEffect(() => {\n    if (!called) {\n      getDao();\n    }\n  }, [called, getDao]);\n\n  useEffect(() => {\n    if (!loading && daoRegistryContract?.contractAddress) {\n      getDaoRegistryCallback();\n    }\n  }, [daoRegistryContract?.contractAddress, getDaoRegistryCallback, loading]);\n\n  function getDaoRegistry() {\n    try {\n      if (!loading && data) {\n        setDao(data.molochv3S[0]);\n\n        if (data.molochv3S.length === 0) {\n          const error = new Error(\n            `\"${daoRegistryContract?.contractAddress}\" dao address not found.`\n          );\n\n          throw error;\n        }\n      } else {\n        if (error) {\n          const error = new Error(\n            `\"${daoRegistryContract?.contractAddress}\" is not a valid dao address.`\n          );\n\n          throw error;\n        }\n      }\n    } catch (error) {\n      setGqlError(error);\n    }\n  }\n\n  return {dao, gqlError};\n}\n","import {useEffect, useRef} from 'react';\n\ntype UseIsMountedReturn = {\n  isMountedRef: React.MutableRefObject<boolean>;\n};\n\n/**\n * useIsMounted\n *\n * A hook that returns a React Ref which tells if the component is mounted, or not.\n * This is helpful when needing to stop state updates in hooks with effects.\n */\nexport function useIsMounted(): UseIsMountedReturn {\n  /**\n   * Refs\n   */\n\n  const isMountedRef = useRef<boolean>(false);\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    isMountedRef.current = true;\n\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  return {\n    isMountedRef,\n  };\n}\n","import React, {useCallback, useState} from 'react';\nimport ReactModal from 'react-modal';\n\nimport {StoreState} from '../store/types';\nimport {useSelector} from 'react-redux';\nimport {useWeb3Modal} from '../components/web3/hooks';\nimport FadeIn from '../components/common/FadeIn';\nimport TimesSVG from '../assets/svg/TimesSVG';\n\ntype UseMemberActionDisabledReturn = {\n  disabledReason: string;\n  isDisabled: boolean;\n  openWhyDisabledModal: () => void;\n  setOtherDisabledReasons: (r: string[]) => void;\n  WhyDisabledModal: (p: WhyDisabledModalProps) => JSX.Element | null;\n};\n\ntype WhyDisabledModalProps = {\n  title?: string;\n};\n\n/**\n * useMemberActionDisabled\n *\n * This component covers the most common cases for why a member action button should be disabled.\n * More reasons for disabling the button can be added via props using `setOtherDisabledReasons`.\n *\n * @param {ProposalActionWhyDisabledProps} props\n * @returns {UseMemberActionDisabledReturn}\n */\nexport function useMemberActionDisabled(): UseMemberActionDisabledReturn {\n  /**\n   * State\n   */\n\n  const [otherDisabledReasons, setOtherDisabledReasons] = useState<string[]>(\n    []\n  );\n  const [shouldShowWhyModal, setShouldShowWhyModal] = useState<boolean>(false);\n\n  /**\n   * Selectors\n   */\n\n  const isActiveMember = useSelector(\n    (s: StoreState) => s.connectedMember?.isActiveMember\n  );\n\n  /**\n   * Our hooks\n   */\n\n  const {connected} = useWeb3Modal();\n\n  /**\n   * Variables\n   */\n\n  // Get the first index of other reasons.\n  const otherReasonNext =\n    otherDisabledReasons && otherDisabledReasons.find((r) => r);\n  const isDisabled =\n    !connected || !isActiveMember || (otherReasonNext ? true : false);\n  const disabledReason = getDisabledReason();\n  const canShowDisabledReason = isDisabled && disabledReason ? true : false;\n\n  /**\n   * Cached callbacks\n   */\n\n  const WhyDisabledModalCached = useCallback(WhyDisabledModal, [\n    canShowDisabledReason,\n    disabledReason,\n    shouldShowWhyModal,\n  ]);\n\n  const handleSetOtherDisabledReasonsCached = useCallback(\n    handleSetOtherDisabledReasons,\n    []\n  );\n\n  /**\n   * Functions\n   */\n\n  function handleSetOtherDisabledReasons(otherReasons: string[]) {\n    setOtherDisabledReasons(otherReasons.filter(Boolean));\n  }\n\n  function getDisabledReason() {\n    if (!connected) {\n      return 'Your wallet is not connected.';\n    }\n\n    if (!isActiveMember) {\n      return 'Either you are not a member, or your membership is not active.';\n    }\n\n    return otherReasonNext || '';\n  }\n\n  function handleOpenWhyDisabledModal() {\n    setShouldShowWhyModal(true);\n  }\n\n  function WhyDisabledModal(props: WhyDisabledModalProps): JSX.Element | null {\n    if (!canShowDisabledReason) return null;\n\n    const {title} = props;\n\n    return (\n      <ReactModal\n        ariaHideApp={false}\n        className=\"modal-container\"\n        isOpen={shouldShowWhyModal}\n        onRequestClose={() => {\n          setShouldShowWhyModal(false);\n        }}\n        overlayClassName=\"modal-overlay\"\n        role=\"dialog\"\n        style={{overlay: {zIndex: 1000}}}>\n        <FadeIn>\n          <div className=\"modal\">\n            <button\n              className=\"modal__close-button modal__close-button--icon\"\n              onClick={() => {\n                setShouldShowWhyModal(false);\n              }}>\n              <TimesSVG />\n            </button>\n            <div className=\"card\">\n              <h2 className=\"modal__title\">{title || 'Why disabled?'}</h2>\n              <p>{disabledReason}</p>\n            </div>\n          </div>\n        </FadeIn>\n      </ReactModal>\n    );\n  }\n\n  return {\n    disabledReason,\n    isDisabled,\n    openWhyDisabledModal: handleOpenWhyDisabledModal,\n    setOtherDisabledReasons: handleSetOtherDisabledReasonsCached,\n    WhyDisabledModal: WhyDisabledModalCached,\n  };\n}\n","import {CLEAR_CONNECTED_MEMBER, SET_CONNECTED_MEMBER} from './actions';\nimport {ConnectedMemberState} from '../types';\n\nconst INITIAL_STATE = null;\n\nexport default function reducer(\n  state: ConnectedMemberState = INITIAL_STATE,\n  action: any\n) {\n  const {type, ...payload} = action;\n\n  switch (type) {\n    case SET_CONNECTED_MEMBER:\n      return setConnectedMemberReducer(state, payload);\n    case CLEAR_CONNECTED_MEMBER:\n      return clearConnectedMemberReducer();\n    default:\n      return state;\n  }\n}\n\nfunction setConnectedMemberReducer(\n  state: Partial<ConnectedMemberState>,\n  payload: Record<string, any>\n) {\n  return {...state, ...payload};\n}\n\nfunction clearConnectedMemberReducer() {\n  return INITIAL_STATE;\n}\n","import {\n  CONTRACT_BANK_EXTENSION,\n  CONTRACT_CONFIGURATION,\n  CONTRACT_DAO_FACTORY,\n  CONTRACT_DAO_REGISTRY,\n  CONTRACT_DISTRIBUTE,\n  CONTRACT_FINANCING,\n  CONTRACT_GUILDKICK,\n  CONTRACT_MANAGING,\n  CONTRACT_ONBOARDING,\n  CONTRACT_RAGEQUIT,\n  CONTRACT_TRIBUTE,\n  CONTRACT_VOTING_OP_ROLLUP,\n  CONTRACT_VOTING,\n  CONTRACT_WITHDRAW,\n} from '../actions';\nimport {ContractsState} from '../types';\n\nconst initialState = {\n  BankExtensionContract: null,\n  ConfigurationContract: null,\n  DaoFactoryContract: null,\n  DaoRegistryContract: null,\n  DistributeContract: null,\n  FinancingContract: null,\n  GuildBankContract: null,\n  ManagingContract: null,\n  OnboardingContract: null,\n  RagequitContract: null,\n  TributeContract: null,\n  VotingContract: null,\n  WithdrawContract: null,\n};\n\nexport default function reducer(\n  state: ContractsState = initialState,\n  action: any\n) {\n  const {type, ...payload} = action;\n\n  switch (type) {\n    case CONTRACT_BANK_EXTENSION:\n      return contractBankExtension(state, payload);\n    case CONTRACT_CONFIGURATION:\n      return contractConfiguration(state, payload);\n    case CONTRACT_DAO_FACTORY:\n      return contractDAOFactory(state, payload);\n    case CONTRACT_DAO_REGISTRY:\n      return contractDAORegistry(state, payload);\n    case CONTRACT_DISTRIBUTE:\n      return contractDistribute(state, payload);\n    case CONTRACT_FINANCING:\n      return contractFinancing(state, payload);\n    case CONTRACT_GUILDKICK:\n      return contractGuildBank(state, payload);\n    case CONTRACT_MANAGING:\n      return contractManaging(state, payload);\n    case CONTRACT_ONBOARDING:\n      return contractOnboarding(state, payload);\n    case CONTRACT_RAGEQUIT:\n      return contractRagequit(state, payload);\n    case CONTRACT_TRIBUTE:\n      return contractTribute(state, payload);\n    case CONTRACT_VOTING:\n      return contractVoting(state, payload);\n    case CONTRACT_VOTING_OP_ROLLUP:\n      return contractVoting(state, payload);\n    case CONTRACT_WITHDRAW:\n      return contractWithdraw(state, payload);\n    default:\n      return state;\n  }\n}\n\nfunction contractDAOFactory(state: ContractsState, payload: any) {\n  return {...state, DaoFactoryContract: {...payload}};\n}\n\nfunction contractDAORegistry(state: ContractsState, payload: any) {\n  return {...state, DaoRegistryContract: {...payload}};\n}\n\nfunction contractBankExtension(\n  state: ContractsState,\n  payload: any\n): ContractsState {\n  return {...state, BankExtensionContract: {...payload}};\n}\n\nfunction contractConfiguration(state: ContractsState, payload: any) {\n  return {...state, ConfigurationContract: {...payload}};\n}\n\nfunction contractDistribute(\n  state: ContractsState,\n  payload: any\n): ContractsState {\n  return {...state, DistributeContract: {...payload}};\n}\n\nfunction contractFinancing(state: ContractsState, payload: any) {\n  return {...state, FinancingContract: {...payload}};\n}\n\nfunction contractGuildBank(state: ContractsState, payload: any) {\n  return {...state, GuildBankContract: {...payload}};\n}\n\nfunction contractOnboarding(state: ContractsState, payload: any) {\n  return {...state, OnboardingContract: {...payload}};\n}\n\nfunction contractRagequit(state: ContractsState, payload: any) {\n  return {...state, RagequitContract: {...payload}};\n}\n\nfunction contractTribute(state: ContractsState, payload: any): ContractsState {\n  return {...state, TributeContract: {...payload}};\n}\n\nfunction contractVoting(state: ContractsState, payload: any): ContractsState {\n  return {...state, VotingContract: {...payload}};\n}\n\nfunction contractManaging(state: ContractsState, payload: any): ContractsState {\n  return {...state, ManagingContract: {...payload}};\n}\n\nfunction contractWithdraw(state: ContractsState, payload: any): ContractsState {\n  return {...state, WithdrawContract: {...payload}};\n}\n","import {combineReducers} from 'redux';\n\nimport connectedMember from './connectedMember/reducers';\nimport contracts from './contracts/reducers';\n\nexport default combineReducers({\n  connectedMember,\n  contracts,\n});\n","import {applyMiddleware, createStore} from 'redux';\nimport {composeWithDevTools} from 'redux-devtools-extension/logOnlyInProduction';\nimport thunk from 'redux-thunk';\n\nimport rootReducer from './reducers';\n\nexport const store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk))\n);\n","export default function Footer() {\n  return (\n    <div>{/* Footer @todo - there is no footer content in designs */}</div>\n  );\n}\n","interface LogoProps {\n  size?: 'small' | 'medium' | 'large' | '';\n}\n\nexport default function Logo(props: LogoProps) {\n  return (\n    <div className={`logo ${props.size ? `logo--${props.size}` : ''}`}>\n      MOLOCH v3\n    </div>\n  );\n}\n","import React from 'react';\n\nimport Logo from './Logo';\n\n/**\n * ModalLogo\n * This component is used for modal menu\n */\nexport function ModalLogo() {\n  return (\n    <div className=\"logo-container logo-container--center\">\n      <Logo size=\"small\" />\n    </div>\n  );\n}\n\n/**\n * LeftLogo\n * This component is used for main pages\n */\nexport function LeftLogo() {\n  return (\n    <div className=\"logo-container logo-container--header\">\n      <Logo size=\"medium\" />\n    </div>\n  );\n}\n\n/**\n * CenterLogo\n * This component is used for splash page\n */\nexport function CenterLogo() {\n  return (\n    <div className=\"logo-container logo-container--center\">\n      <Logo size=\"large\" />\n    </div>\n  );\n}\n","export default function MetaMaskSVG() {\n  const st0: React.CSSProperties = {\n    fill: '#e17726',\n    stroke: '#e17726',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st1: React.CSSProperties = {\n    fill: '#e27625',\n    stroke: '#e27625',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st2: React.CSSProperties = {\n    fill: '#d5bfb2',\n    stroke: '#d5bfb2',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st3: React.CSSProperties = {\n    fill: '#233447',\n    stroke: '#233447',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st4: React.CSSProperties = {\n    fill: '#cc6228',\n    stroke: '#cc6228',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st5: React.CSSProperties = {\n    fill: '#e27525',\n    stroke: '#e27525',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st6: React.CSSProperties = {\n    fill: '#f5841f',\n    stroke: '#f5841f',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st7: React.CSSProperties = {\n    fill: '#c0ac9d',\n    stroke: '#c0ac9d',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st8: React.CSSProperties = {\n    fill: '#161616',\n    stroke: '#161616',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n  const st9: React.CSSProperties = {\n    fill: '#763e1a',\n    stroke: '#763e1a',\n    strokeWidth: '0.25',\n    strokeLinecap: 'round',\n    strokeLinejoin: 'round',\n  };\n\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      x=\"0\"\n      y=\"0\"\n      enableBackground=\"new 0 0 33.9 31.3\"\n      version=\"1.1\"\n      viewBox=\"0 0 33.9 31.3\"\n      xmlSpace=\"preserve\">\n      <path d=\"M32.1.1L18.9 9.8l2.4-5.7 10.8-4z\" style={st0}></path>\n      <path\n        d=\"M1.8.1l13 9.8-2.3-5.8L1.8.1zM27.4 22.7L23.9 28l7.5 2.1 2.1-7.3-6.1-.1zM.4 22.8l2.1 7.3L10 28l-3.5-5.3-6.1.1z\"\n        style={st1}></path>\n      <path\n        d=\"M9.6 13.6l-2.1 3.1 7.4.3-.2-8-5.1 4.6zM24.3 13.6L19.1 9l-.2 8.1 7.4-.3-2-3.2zM10 28l4.5-2.2-3.9-3L10 28zM19.4 25.8l4.5 2.2-.6-5.2-3.9 3z\"\n        style={st1}></path>\n      <path\n        d=\"M23.9 28l-4.5-2.2.4 2.9v1.2l4.1-1.9zM10 28l4.2 2v-1.2l.4-2.9L10 28z\"\n        style={st2}></path>\n      <path\n        d=\"M14.2 20.9l-3.7-1.1 2.6-1.2 1.1 2.3zM19.6 20.9l1.1-2.3 2.6 1.2-3.7 1.1z\"\n        style={st3}></path>\n      <path\n        d=\"M10 28l.6-5.3-4.1.1L10 28zM23.2 22.7l.6 5.3 3.5-5.2-4.1-.1zM26.4 16.8l-7.4.3.7 3.8 1.1-2.3 2.6 1.2 3-3zM10.5 19.8l2.6-1.2 1.1 2.3.7-3.8-7.4-.3 3 3z\"\n        style={st4}></path>\n      <path\n        d=\"M7.5 16.8l3.1 6.1-.1-3-3-3.1zM23.4 19.8l-.1 3 3.1-6.1-3 3.1zM14.9 17.1l-.7 3.8.9 4.5.2-5.9-.4-2.4zM18.9 17.1l-.4 2.4.2 5.9.9-4.5-.7-3.8z\"\n        style={st5}></path>\n      <path\n        d=\"M19.6 20.9l-.9 4.5.6.4 3.9-3 .1-3-3.7 1.1zM10.5 19.8l.1 3 3.9 3 .6-.4-.9-4.5-3.7-1.1z\"\n        style={st6}></path>\n      <path\n        d=\"M19.7 30v-1.2l-.3-.3h-5l-.3.3V30L10 28l1.5 1.2 2.9 2h5.1l3-2 1.4-1.2-4.2 2z\"\n        style={st7}></path>\n      <path\n        d=\"M19.4 25.8l-.6-.4h-3.7l-.6.4-.4 2.9.3-.3h5l.3.3-.3-2.9z\"\n        style={st8}></path>\n      <path\n        d=\"M32.6 10.5l1.1-5.4-1.7-5-12.6 9.4 4.9 4.1 6.9 2 1.5-1.8-.7-.4 1.1-1-.8-.6 1.1-.8-.8-.5zM.1 5.1l1.1 5.4-.7.5 1.1.8-.8.6 1.1 1-.7.5 1.5 1.8 6.9-2 4.9-4.1L1.8.1l-1.7 5z\"\n        style={st9}></path>\n      <path\n        d=\"M31.2 15.6l-6.9-2 2.1 3.1-3.1 6.1 4.1-.1h6.1l-2.3-7.1zM9.6 13.6l-6.9 2-2.3 7.1h6.1l4.1.1-3.1-6.1 2.1-3.1zM18.9 17.1l.4-7.6 2-5.4h-8.9l2 5.4.4 7.6.2 2.4v5.9h3.7v-5.9l.2-2.4z\"\n        style={st6}></path>\n    </svg>\n  );\n}\n","export default function WalletConnectSVG() {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 300 185\">\n      <g fill=\"none\" fillRule=\"evenodd\" stroke=\"none\" strokeWidth=\"1\">\n        <g fill=\"#3B99FC\" fillRule=\"nonzero\">\n          <path d=\"M61.439 36.256c48.91-47.888 128.212-47.888 177.123 0l5.886 5.764a6.041 6.041 0 010 8.67l-20.136 19.716a3.179 3.179 0 01-4.428 0l-8.101-7.931c-34.122-33.408-89.444-33.408-123.566 0l-8.675 8.494a3.179 3.179 0 01-4.428 0L54.978 51.253a6.041 6.041 0 010-8.67l6.46-6.327zM280.206 77.03l17.922 17.547a6.041 6.041 0 010 8.67l-80.81 79.122c-2.446 2.394-6.41 2.394-8.856 0l-57.354-56.155a1.59 1.59 0 00-2.214 0L91.54 182.37c-2.446 2.394-6.411 2.394-8.857 0L1.872 103.247a6.041 6.041 0 010-8.671l17.922-17.547c2.445-2.394 6.41-2.394 8.856 0l57.355 56.155a1.59 1.59 0 002.214 0L145.57 77.03c2.446-2.394 6.41-2.395 8.856 0l57.355 56.155a1.59 1.59 0 002.214 0L271.35 77.03c2.446-2.394 6.41-2.394 8.856 0z\"></path>\n        </g>\n      </g>\n    </svg>\n  );\n}\n","import MetaMaskSVG from '../../assets/svg/MetaMaskSVG';\nimport WalletConnectSVG from '../../assets/svg/WalletConnectSVG';\n\nexport const svgWalletIcon: {\n  injected: JSX.Element;\n  walletconnect: JSX.Element;\n} = {\n  injected: <MetaMaskSVG />,\n  walletconnect: <WalletConnectSVG />,\n};\n","export default function LoaderWithEmoji() {\n  return (\n    <div className=\"loader--emoji\">\n      <span role=\"img\" aria-label=\"Loading content...\">\n        \n      </span>\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactModal from 'react-modal';\n\nimport FadeIn from './FadeIn';\n\ntype ModalProps = {\n  children: React.ReactNode;\n  isOpen: boolean;\n  isOpenHandler: (isOpen: boolean) => void;\n  keyProp: string;\n  modalClassNames?: string;\n  styleProps?: Record<string, string>;\n};\n\nexport default function Modal({\n  children,\n  keyProp,\n  isOpen,\n  styleProps,\n  modalClassNames,\n  isOpenHandler,\n}: ModalProps) {\n  return (\n    <ReactModal\n      key={keyProp}\n      ariaHideApp={false}\n      className={`modal-container ${modalClassNames}`}\n      isOpen={isOpen}\n      onRequestClose={() => {\n        isOpenHandler(isOpen);\n      }}\n      overlayClassName=\"modal-overlay\"\n      role=\"dialog\"\n      style={\n        {\n          overlay: {zIndex: '99'},\n          ...styleProps,\n        } as any\n      }>\n      <FadeIn>\n        <div className=\"modal\">{children}</div>\n      </FadeIn>\n    </ReactModal>\n  );\n}\n","import React, {useState} from 'react';\nimport {isMobile} from 'react-device-detect';\nimport {useHistory} from 'react-router-dom';\n\nimport {CHAINS} from '../../config';\nimport {svgWalletIcon} from './WalletIcons';\nimport {truncateEthAddress} from '../../util/helpers';\nimport {useIsDefaultChain} from './hooks';\nimport {useWeb3Modal} from './hooks';\nimport LoaderWithEmoji from '../feedback/LoaderWithEmoji';\nimport Modal from '../common/Modal';\n\nimport TimesSVG from '../../assets/svg/TimesSVG';\n\ntype Web3ModalButtonProps = {\n  // determines whether button should show account badge or custom text to\n  // trigger wallet moodal\n  showWalletETHBadge?: boolean;\n  customWalletText?: string;\n};\n\ntype ConnectWalletProps = {\n  customWalletText?: string;\n  showWalletETHBadge?: boolean;\n};\nfunction ConnectWallet({\n  customWalletText,\n  showWalletETHBadge,\n}: ConnectWalletProps): JSX.Element {\n  /**\n   * Hooks\n   */\n\n  const {\n    account,\n    connected,\n    providerOptions,\n    onConnectTo,\n    onDisconnect,\n    networkId,\n    web3Modal,\n  } = useWeb3Modal();\n\n  const {defaultChain, defaultChainError, isDefaultChain} = useIsDefaultChain();\n\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * State\n   */\n\n  const [openModal, setOpenModal] = useState<boolean>(false);\n\n  /**\n   * Variables\n   */\n\n  const isWrongNetwork: boolean = networkId !== defaultChain ?? isDefaultChain;\n  const isChainGanache = networkId === CHAINS.GANACHE;\n  const displayWalletText: string | undefined = getWalletText();\n\n  /**\n   * Functions\n   */\n\n  function getWalletText(): string {\n    if (isMobile) {\n      if (account) {\n        return truncateEthAddress(account);\n      } else {\n        return 'Connect';\n      }\n    } else {\n      if (showWalletETHBadge && account) {\n        return truncateEthAddress(account);\n      } else {\n        return customWalletText || '';\n      }\n    }\n  }\n\n  function handleNavigate(): void {\n    setOpenModal(false);\n    history.push(`/members/${account}`);\n  }\n\n  function displayProviders(): JSX.Element {\n    const providerOptionsFiltered = Object.entries(providerOptions).filter(\n      (p) => p[0] !== 'injected'\n    );\n    const maybeProviderOptions = isMobile\n      ? providerOptionsFiltered\n      : Object.entries(providerOptions);\n\n    const displayOptions: JSX.Element[] = maybeProviderOptions.map(\n      (provider: Record<number, any>) => (\n        <button\n          key={provider[0]}\n          className={`walletconnect__options-button \n            ${\n              connected && web3Modal?.cachedProvider === provider[0]\n                ? 'walletconnect__options-button--connected'\n                : ''\n            }`}\n          onClick={async () => await onConnectTo(provider[0])}\n          // disable WalletConnect button on Ganache network\n          disabled={isChainGanache && provider[0] === 'walletconnect'}>\n          <span className=\"wallet-name\">{provider[1].display.name}</span>\n\n          <ProviderSVG providerName={provider[0]} />\n        </button>\n      )\n    );\n\n    return (\n      <Modal\n        keyProp=\"web3modal\"\n        isOpen={openModal}\n        isOpenHandler={() => {\n          setOpenModal(false);\n        }}>\n        {/* MODEL CLOSE BUTTON */}\n        <span\n          className=\"modal__close-button\"\n          onClick={() => {\n            setOpenModal(false);\n          }}>\n          <TimesSVG />\n        </span>\n        <div>\n          {/* TITLE */}\n          <div className=\"modal__title\">Connect Wallet</div>\n\n          {/* SUBTITLE */}\n          {connected && isWrongNetwork ? null : (\n            <div className=\"modal__subtitle\">Choose Your Wallet</div>\n          )}\n\n          {/* CONNECTED ACCOUNT BUTTON LINK */}\n          {account && (\n            <button\n              className=\"walletconnect__connected-address-button\"\n              onClick={handleNavigate}>\n              {isMobile ? truncateEthAddress(account) : account}\n            </button>\n          )}\n\n          {/* SHOW; WRONG NETWORK MSG || PROVIDER OPTIONS */}\n          {connected && isWrongNetwork ? (\n            <DisplayChainError\n              defaultChainError={defaultChainError?.message || ''}\n            />\n          ) : (\n            <div className=\"walletconnect__options\">{displayOptions}</div>\n          )}\n\n          {/* DISCONNECT BUTTON LINK */}\n          {connected && (\n            <button\n              className=\"walletconnect__disconnect-link-button\"\n              onClick={onDisconnect}>\n              {'Disconnect Wallet'}\n            </button>\n          )}\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <button\n        className={`walletconnect__connect-button \n        ${\n          isWrongNetwork && connected\n            ? 'walletconnect__connect-button--error'\n            : ''\n        }`}\n        onClick={() => {\n          setOpenModal(true);\n        }}>\n        <span\n          className={`connect-button-text ${\n            connected ? 'connect-button-text--ethAddress' : ''\n          }`}>\n          {displayWalletText || 'Connect'}\n        </span>\n\n        {showWalletETHBadge && isWrongNetwork && connected && (\n          <span>Wrong Network</span>\n        )}\n\n        {showWalletETHBadge && (\n          <ProviderSVG providerName={web3Modal?.cachedProvider} />\n        )}\n      </button>\n\n      {openModal && displayProviders()}\n    </>\n  );\n}\n\ntype ProviderSVGType = {\n  providerName: string;\n};\nfunction ProviderSVG({providerName}: ProviderSVGType): JSX.Element | null {\n  if (!providerName) return null;\n  return (\n    <span className=\"walletconnect__wallet-icon\">\n      {svgWalletIcon[providerName]}\n    </span>\n  );\n}\n\ntype DisplayChainErrorProps = {\n  defaultChainError: string;\n};\nfunction DisplayChainError({\n  defaultChainError,\n}: DisplayChainErrorProps): JSX.Element {\n  return (\n    <>\n      <div className=\"error-message\">\n        <small>{defaultChainError}</small>\n      </div>\n      <div>\n        <div style={{width: '3rem', margin: '0 auto'}}>\n          <LoaderWithEmoji />\n        </div>\n        <div>\n          <small>Waiting for the right network&hellip;</small>\n          <br />\n          <small>Switch networks from your wallet</small>\n        </div>\n      </div>\n    </>\n  );\n}\n\n/**\n * Web3ModalButton\n * @param props: Web3ModalButtonProps\n */\nexport default React.memo(function Web3ModalButton({\n  customWalletText,\n  showWalletETHBadge,\n}: Web3ModalButtonProps): JSX.Element {\n  return (\n    <ConnectWallet\n      customWalletText={customWalletText}\n      showWalletETHBadge={showWalletETHBadge}\n    />\n  );\n});\n","export default function HamburgerSVG() {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      aria-hidden=\"true\"\n      className=\"svg-inline--fa fa-bars fa-w-14 fa-3x\"\n      data-icon=\"bars\"\n      data-prefix=\"fal\"\n      viewBox=\"0 0 448 512\">\n      <path\n        fill=\"currentColor\"\n        d=\"M442 114H6a6 6 0 01-6-6V84a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6zm0 160H6a6 6 0 01-6-6v-24a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6zm0 160H6a6 6 0 01-6-6v-24a6 6 0 016-6h436a6 6 0 016 6v24a6 6 0 01-6 6z\"></path>\n    </svg>\n  );\n}\n","import React, {useState} from 'react';\nimport {Transition} from 'react-transition-group';\nimport ReactModal from 'react-modal';\nimport Media from 'react-media';\nimport {NavLink, useLocation, useHistory} from 'react-router-dom';\n\nimport Web3ModalButton from './web3/Web3ModalButton';\nimport {useWeb3Modal} from './web3/hooks';\nimport {ModalLogo} from './logo';\nimport TimesSVG from '../assets/svg/TimesSVG';\nimport HamburgerSVG from '../assets/svg/HamburgerSVG';\n\n// see: http://reactcommunity.org/react-transition-group/transition\nconst duration = 200;\n\nconst defaultStyle = {\n  transition: '0.1s',\n};\n\nconst transitionOpeningStyles: Record<string, any> = {\n  entering: {right: '-300px'},\n  entered: {right: 0},\n  exiting: {right: 0, opacity: 0},\n  exited: {right: '-300px', opacity: 0},\n};\n\nconst transitionClosingStyles: Record<string, any> = {\n  entering: {right: 0, opacity: 1},\n  entered: {right: '-300px', opacity: 1},\n  exiting: {right: '-300px', opacity: 1},\n  exited: {right: 0, opacity: 1},\n};\n\n// Nav links displayed on the landing page and main pages\nexport function NavLinks() {\n  return (\n    <nav role=\"navigation\" id=\"navigation\">\n      <ul className=\"nav__list\" data-testid=\"nav__list\">\n        <li tabIndex={0}>\n          <NavLink to=\"/membership\">\n            <span>Membership</span>\n          </NavLink>\n        </li>\n        <li tabIndex={0}>\n          <NavLink to=\"/governance-proposals\">\n            <span>Governance</span>\n          </NavLink>\n        </li>\n        <li tabIndex={0}>\n          <NavLink to=\"/transfers\">\n            <span>Transfer</span>\n          </NavLink>\n        </li>\n        <li tabIndex={0}>\n          <NavLink to=\"/tributes\">\n            <span>Tribute</span>\n          </NavLink>\n        </li>\n      </ul>\n    </nav>\n  );\n}\n\nexport default function Nav() {\n  /**\n   * State\n   */\n\n  const [shouldShowMenuModal, setShouldShowMenuModal] = useState(false);\n  const [transitionStyles, setTransitionStyles] = useState<Record<string, any>>(\n    transitionOpeningStyles\n  );\n\n  /**\n   * Their hooks\n   */\n\n  const location = useLocation();\n  const history = useHistory();\n\n  /**\n   * Our hooks\n   */\n\n  const {account} = useWeb3Modal();\n\n  /**\n   * Variables\n   */\n\n  const isIndexPath = location.pathname === '/';\n\n  /**\n   * Functions\n   */\n\n  function handleMenuModalClose(close: boolean) {\n    // delay transition for closing\n    if (close) {\n      setShouldShowMenuModal(close);\n      setTransitionStyles(transitionOpeningStyles);\n    } else {\n      setTransitionStyles(transitionClosingStyles);\n      const closeMenu = setTimeout(() => setShouldShowMenuModal(close), 500);\n      return () => clearTimeout(closeMenu);\n    }\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <>\n      <Media query=\"(max-width: 62em)\">\n        {(matches: boolean) => (\n          <div className=\"nav-header\">\n            <div className=\"nav-header__menu-container\">\n              {/* NAV */}\n              {!isIndexPath && <NavLinks />}\n\n              <div tabIndex={0} className=\"nav__hamburger-wrapper\">\n                <div\n                  className=\"nav__hamburger\"\n                  aria-label=\"Menu\"\n                  aria-controls=\"navigation\"\n                  onClick={(event) => {\n                    event.preventDefault();\n                    handleMenuModalClose(true);\n                  }}>\n                  <HamburgerSVG />\n                </div>\n              </div>\n              <div className=\"nav-header__walletconnect-button-container\">\n                <Web3ModalButton showWalletETHBadge />\n              </div>\n            </div>\n          </div>\n        )}\n      </Media>\n      {/** MODAL MENU */}\n      <ReactModal\n        ariaHideApp={false}\n        className=\"nav-modal-container\"\n        isOpen={shouldShowMenuModal}\n        onRequestClose={() => {\n          handleMenuModalClose(false);\n        }}\n        overlayClassName=\"nav-modal-overlay\"\n        role=\"dialog\"\n        style={{overlay: {zIndex: '99'}} as any}>\n        <Transition appear in={shouldShowMenuModal} timeout={duration}>\n          {(transition) => (\n            <nav role=\"navigation\" id=\"navigation\">\n              <div\n                style={{\n                  ...defaultStyle,\n                  ...transitionStyles[transition],\n                }}\n                className=\"nav-modal\">\n                <button\n                  className=\"modal__close-button modal__close-button--icon\"\n                  onClick={(event) => {\n                    event.preventDefault();\n                    handleMenuModalClose(false);\n                  }}>\n                  <TimesSVG />\n                </button>\n\n                <ModalLogo />\n\n                <div className=\"nav-modal__walletconnect-button-container\">\n                  <Web3ModalButton showWalletETHBadge />\n                  {/* @todo Display Join button only if user is not a member */}\n                  <button\n                    className=\"button\"\n                    onClick={() => {\n                      handleMenuModalClose(false);\n                      history.push('/join');\n                    }}>\n                    Join\n                  </button>\n                </div>\n                <ul className=\"nav__list\">\n                  <li\n                    onClick={() => {\n                      handleMenuModalClose(false);\n                    }}>\n                    <NavLink to=\"/membership\">\n                      <span>Membership</span>\n                    </NavLink>\n                  </li>\n                  <li\n                    onClick={() => {\n                      handleMenuModalClose(false);\n                    }}>\n                    <NavLink to=\"/governance-proposals\">\n                      <span>Governance</span>\n                    </NavLink>\n                  </li>\n                  <li\n                    onClick={() => {\n                      handleMenuModalClose(false);\n                    }}>\n                    <NavLink to=\"/transfers\">\n                      <span>Transfer</span>\n                    </NavLink>\n                  </li>\n                  <li\n                    onClick={() => {\n                      handleMenuModalClose(false);\n                    }}>\n                    <NavLink to=\"/tributes\">\n                      <span>Tribute</span>\n                    </NavLink>\n                  </li>\n                  <li\n                    onClick={() => {\n                      handleMenuModalClose(false);\n                    }}>\n                    {/* @todo Add docs link when it's ready */}\n                    {/* eslint-disable-next-line jsx-a11y/anchor-is-valid */}\n                    <a href=\"#\" rel=\"noopener noreferrer\" target=\"_blank\">\n                      <span>Help</span>\n                    </a>\n                  </li>\n                  {/* @todo Display Profile link only if user is an active member */}\n                  {account && (\n                    <li\n                      className=\"link-separated\"\n                      onClick={() => {\n                        handleMenuModalClose(false);\n                      }}>\n                      <NavLink to={`/members/${account}`}>\n                        <span>Profile</span>\n                      </NavLink>\n                    </li>\n                  )}\n                </ul>\n              </div>\n            </nav>\n          )}\n        </Transition>\n      </ReactModal>\n    </>\n  );\n}\n","import React from 'react';\nimport {Link, useLocation} from 'react-router-dom';\n\nimport {LeftLogo} from './logo';\nimport Nav from './Nav';\n\nexport default function Header() {\n  /**\n   * Variables\n   */\n\n  const location = useLocation();\n  const isIndexPath = location.pathname === '/';\n\n  /**\n   * Functions\n   */\n\n  // Don't display header if we're on the index page\n  if (isIndexPath) return null;\n\n  // Render the location with a link\n  function RenderLogo(props: React.PropsWithChildren<any>) {\n    return <Link to=\"/\">{props.children}</Link>;\n  }\n\n  return (\n    <>\n      <header className=\"header\">\n        <RenderLogo>\n          <LeftLogo />\n        </RenderLogo>\n\n        <div className=\"header__nav-container\">\n          <Nav />\n        </div>\n      </header>\n    </>\n  );\n}\n","import React from 'react';\nimport {Helmet} from 'react-helmet';\n\nexport default function Head() {\n  return (\n    <Helmet>\n      <title>MOLOCH v3</title>\n      <meta\n        name=\"description\"\n        content=\"A modular DAO framework developed and coordinated by its members\"\n      />\n    </Helmet>\n  );\n}\n","import React from 'react';\n\nimport FadeIn from './FadeIn';\n\ntype InputErrorProps = {\n  error: string;\n};\n\nexport default function InputError(\n  props: InputErrorProps & React.HtmlHTMLAttributes<HTMLParagraphElement>\n) {\n  const {error, ...restProps} = props;\n\n  return (\n    <>\n      {error && (\n        <FadeIn>\n          <p\n            {...restProps}\n            className={`error-message ${restProps.className || ''}`}>\n            {error}\n          </p>\n        </FadeIn>\n      )}\n    </>\n  );\n}\n","import Markdown from 'markdown-to-jsx';\n\ntype PreviewInputMarkdownProps = {\n  value: string;\n};\n\nexport default function PreviewInputMarkdown(props: PreviewInputMarkdownProps) {\n  const {value} = props;\n\n  if (!value) return null;\n\n  return (\n    <details>\n      <summary style={{cursor: 'pointer', outline: 'none'}}>\n        <small>Preview Markdown</small>\n      </summary>\n\n      <div style={{marginTop: '1em'}}>\n        <Markdown>{value}</Markdown>\n      </div>\n    </details>\n  );\n}\n","import React, {ReactNode} from 'react';\n\ninterface WrapProps {\n  children: ReactNode;\n  className?: string;\n}\n\nconst Wrap = ({\n  children,\n  ...rest\n}: WrapProps & React.HTMLAttributes<HTMLDivElement>) => (\n  <div style={{position: 'relative'}} {...rest}>\n    {children}\n  </div>\n);\n\nexport default Wrap;\n","import React, {useState} from 'react';\nimport {useForm} from 'react-hook-form';\nimport {useHistory} from 'react-router';\nimport {useSelector} from 'react-redux';\nimport {SnapshotType} from '@openlaw/snapshot-js-erc712';\n\nimport {CycleEllipsis} from '../../components/feedback';\nimport {FormFieldErrors} from '../../util/enums';\nimport {getValidationError} from '../../util/helpers';\nimport {StoreState} from '../../store/types';\nimport {useSignAndSubmitProposal} from '../../components/proposals/hooks';\nimport {useWeb3Modal} from '../../components/web3/hooks';\nimport {Web3TxStatus} from '../../components/web3/types';\nimport ErrorMessageWithDetails from '../../components/common/ErrorMessageWithDetails';\nimport FadeIn from '../../components/common/FadeIn';\nimport InputError from '../../components/common/InputError';\nimport Loader from '../../components/feedback/Loader';\nimport PreviewInputMarkdown from '../../components/common/PreviewInputMarkdown';\nimport Wrap from '../../components/common/Wrap';\n\nenum Fields {\n  title = 'title',\n  description = 'description',\n}\n\ntype FormInputs = {\n  title: string;\n  description: string;\n};\n\nexport default function CreateGovernanceProposal() {\n  /**\n   * Selectors\n   */\n\n  const isActiveMember = useSelector(\n    (s: StoreState) => s.connectedMember?.isActiveMember\n  );\n\n  /**\n   * State\n   */\n\n  const [submitError, setSubmitError] = useState<Error>();\n\n  /**\n   * Our hooks\n   */\n\n  const {connected, account} = useWeb3Modal();\n  const {\n    proposalSignAndSendStatus,\n    signAndSendProposal,\n  } = useSignAndSubmitProposal<SnapshotType.proposal>();\n\n  /**\n   * Their hooks\n   */\n\n  const form = useForm<FormInputs>({\n    mode: 'onBlur',\n    reValidateMode: 'onChange',\n  });\n  const history = useHistory();\n\n  /**\n   * Variables\n   */\n\n  const {errors, getValues, register, trigger, watch} = form;\n  const isConnected = connected && account;\n  const isInProcess =\n    proposalSignAndSendStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    proposalSignAndSendStatus === Web3TxStatus.PENDING;\n\n  const isDone = proposalSignAndSendStatus === Web3TxStatus.FULFILLED;\n  const isInProcessOrDone = isInProcess || isDone;\n\n  /**\n   * Functions\n   */\n\n  function getUnauthorizedMessage() {\n    // user is not connected\n    if (!isConnected) {\n      return 'Connect your wallet to submit a governance proposal.';\n    }\n\n    // user is not an active member\n    if (!isActiveMember) {\n      return 'Either you are not a member, or your membership is not active.';\n    }\n  }\n\n  async function handleSubmit(values: FormInputs) {\n    try {\n      // Sign and submit proposal for Snapshot Hub\n      const {uniqueId} = await signAndSendProposal({\n        partialProposalData: {\n          name: values.title,\n          body: values.description,\n          metadata: {},\n        },\n        type: SnapshotType.proposal,\n      });\n\n      // Go to newly creatd governance proposal's page\n      history.push(`/governance-proposals/${uniqueId}`);\n    } catch (error) {\n      console.log('error', error);\n\n      setSubmitError(error);\n    }\n  }\n\n  function renderSubmitStatus(): React.ReactNode {\n    switch (proposalSignAndSendStatus) {\n      case Web3TxStatus.AWAITING_CONFIRM:\n        return (\n          <>\n            Awaiting your confirmation\n            <CycleEllipsis intervalMs={500} />\n          </>\n        );\n      case Web3TxStatus.PENDING:\n        return (\n          <>\n            Submitting\n            <CycleEllipsis intervalMs={500} />\n          </>\n        );\n      case Web3TxStatus.FULFILLED:\n        return 'Done!';\n      default:\n        return '';\n    }\n  }\n\n  /**\n   * Render\n   */\n\n  // Render unauthorized message\n  if (!isConnected || !isActiveMember) {\n    return (\n      <RenderWrapper>\n        <div className=\"form__description--unauthorized\">\n          <p>{getUnauthorizedMessage()}</p>\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  return (\n    <RenderWrapper>\n      <form className=\"form\" onSubmit={(e) => e.preventDefault()}>\n        {/* PROPOSAL TITLE */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\" htmlFor={Fields.title}>\n            Title\n          </label>\n          <div className=\"form__input-row-fieldwrap\">\n            <input\n              aria-describedby={`error-${Fields.title}`}\n              aria-invalid={errors.title ? 'true' : 'false'}\n              id={Fields.title}\n              name={Fields.title}\n              ref={register({\n                required: FormFieldErrors.REQUIRED,\n              })}\n              type=\"text\"\n              disabled={isInProcessOrDone}\n            />\n\n            <InputError\n              error={getValidationError(Fields.title, errors)}\n              id={`error-${Fields.title}`}\n            />\n          </div>\n        </div>\n\n        {/* PROPOSAL DESCRIPTION */}\n        <div className=\"form__textarea-row\">\n          <label className=\"form__input-row-label\" htmlFor={Fields.description}>\n            Description\n          </label>\n          <div className=\"form__input-row-fieldwrap\">\n            <textarea\n              aria-describedby={`error-${Fields.description}`}\n              aria-invalid={errors.description ? 'true' : 'false'}\n              id={Fields.description}\n              name={Fields.description}\n              placeholder=\"Say something about your governance proposal...\"\n              ref={register({\n                required: FormFieldErrors.REQUIRED,\n              })}\n              disabled={isInProcessOrDone}\n            />\n\n            <InputError\n              error={getValidationError(Fields.description, errors)}\n              id={`error-${Fields.description}`}\n            />\n\n            <PreviewInputMarkdown value={watch(Fields.description)} />\n          </div>\n        </div>\n\n        {/* SUBMIT */}\n        <button\n          aria-label={isInProcess ? 'Submitting your proposal...' : ''}\n          className=\"button\"\n          disabled={isInProcessOrDone}\n          onClick={async () => {\n            if (isInProcessOrDone) return;\n\n            if (!(await trigger())) {\n              return;\n            }\n\n            handleSubmit(getValues());\n          }}\n          type=\"submit\">\n          {isInProcess ? <Loader /> : isDone ? 'Done' : 'Submit'}\n        </button>\n\n        {/* SUBMIT STATUS */}\n        {isInProcessOrDone && (\n          <div className=\"form__submit-status-container\">\n            {renderSubmitStatus()}\n          </div>\n        )}\n\n        {/* SUBMIT ERROR */}\n        {submitError && (\n          <div className=\"form__submit-error-container\">\n            <ErrorMessageWithDetails\n              renderText=\"Something went wrong while submitting the proposal.\"\n              error={submitError}\n            />\n          </div>\n        )}\n      </form>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Governance Proposal</h2>\n        </div>\n\n        <div className=\"form-wrapper\">\n          <div className=\"form__description\">\n            <p>\n              Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla\n              consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut\n              lacus dictum fermentum vel tincidunt neque. Sed sed lacinia...\n            </p>\n          </div>\n\n          {/* RENDER CHILDREN */}\n          {props.children}\n        </div>\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React, {useState, useCallback, useEffect} from 'react';\nimport {SnapshotType} from '@openlaw/snapshot-js-erc712';\nimport {useForm} from 'react-hook-form';\nimport {useSelector} from 'react-redux';\nimport Web3 from 'web3';\n\nimport {\n  getValidationError,\n  stripFormatNumber,\n  formatNumber,\n  formatDecimal,\n} from '../../util/helpers';\nimport {\n  useContractSend,\n  useETHGasPrice,\n  useIsDefaultChain,\n} from '../../components/web3/hooks';\nimport {ContractAdapterNames, Web3TxStatus} from '../../components/web3/types';\nimport {FormFieldErrors} from '../../util/enums';\nimport {isEthAddressValid} from '../../util/validation';\nimport {SHARES_ADDRESS} from '../../config';\nimport {StoreState} from '../../store/types';\nimport {TX_CYCLE_MESSAGES} from '../../components/web3/config';\nimport {useHistory} from 'react-router-dom';\nimport {useSignAndSubmitProposal} from '../../components/proposals/hooks';\nimport {useWeb3Modal} from '../../components/web3/hooks';\nimport CycleMessage from '../../components/feedback/CycleMessage';\nimport ErrorMessageWithDetails from '../../components/common/ErrorMessageWithDetails';\nimport EtherscanURL from '../../components/web3/EtherscanURL';\nimport FadeIn from '../../components/common/FadeIn';\nimport InputError from '../../components/common/InputError';\nimport Loader from '../../components/feedback/Loader';\nimport Wrap from '../../components/common/Wrap';\n\nenum Fields {\n  ethAddress = 'ethAddress',\n  ethAmount = 'ethAmount',\n}\n\ntype FormInputs = {\n  ethAddress: string;\n  ethAmount: string;\n};\n\ntype OnboardArguments = [\n  string, // `dao`\n  string, // `proposalId`\n  string, // `applicant`\n  string, // `tokenToMint`\n  string // `tokenAmount`\n];\n\ntype UserAccountBalance = {\n  wei: string;\n  eth: string;\n};\n\nexport default function CreateMembershipProposal() {\n  /**\n   * Selectors\n   */\n\n  const OnboardingContract = useSelector(\n    (state: StoreState) => state.contracts?.OnboardingContract\n  );\n  const DaoRegistryContract = useSelector(\n    (state: StoreState) => state.contracts?.DaoRegistryContract\n  );\n\n  /**\n   * Hooks\n   */\n\n  const {defaultChainError} = useIsDefaultChain();\n  const {connected, account, web3Instance} = useWeb3Modal();\n  const gasPrices = useETHGasPrice();\n  const {\n    txError,\n    txEtherscanURL,\n    txIsPromptOpen,\n    txSend,\n    txStatus,\n  } = useContractSend();\n\n  const {\n    proposalData,\n    proposalSignAndSendStatus,\n    signAndSendProposal,\n  } = useSignAndSubmitProposal<SnapshotType.draft>();\n\n  /**\n   * Their hooks\n   */\n\n  const form = useForm<FormInputs>({\n    mode: 'onBlur',\n    reValidateMode: 'onChange',\n  });\n  const history = useHistory();\n\n  /**\n   * State\n   */\n\n  const [submitError, setSubmitError] = useState<Error>();\n  const [\n    userAccountBalance,\n    setUserAccountBalance,\n  ] = useState<UserAccountBalance>();\n\n  /**\n   * Variables\n   */\n\n  const {errors, getValues, setValue, register, trigger} = form;\n\n  const createMemberError = submitError || txError;\n  const isConnected = connected && account;\n\n  const isInProcess =\n    txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    txStatus === Web3TxStatus.PENDING ||\n    proposalSignAndSendStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    proposalSignAndSendStatus === Web3TxStatus.PENDING;\n\n  const isDone =\n    txStatus === Web3TxStatus.FULFILLED &&\n    proposalSignAndSendStatus === Web3TxStatus.FULFILLED;\n\n  const isInProcessOrDone = isInProcess || isDone || txIsPromptOpen;\n\n  /**\n   * Cached callbacks\n   */\n\n  const getUserAccountBalanceCached = useCallback(getUserAccountBalance, [\n    account,\n    web3Instance,\n  ]);\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    getUserAccountBalanceCached();\n  }, [getUserAccountBalanceCached]);\n\n  // Set the value of `ethAddress` if the `account` changes\n  useEffect(() => {\n    setValue(Fields.ethAddress, account);\n  }, [account, setValue]);\n\n  /**\n   * Functions\n   */\n\n  async function getUserAccountBalance() {\n    if (!web3Instance || !account) {\n      setUserAccountBalance(undefined);\n      return;\n    }\n\n    try {\n      // Ether wallet balance\n      const accountBalanceInWei = await web3Instance.eth.getBalance(account);\n      setUserAccountBalance({\n        wei: accountBalanceInWei,\n        eth: web3Instance.utils.fromWei(accountBalanceInWei),\n      });\n    } catch (error) {\n      setUserAccountBalance(undefined);\n    }\n  }\n\n  async function handleSubmit(values: FormInputs) {\n    try {\n      if (!isConnected) {\n        throw new Error(\n          'No user account was found. Please makes sure your wallet is connected.'\n        );\n      }\n\n      if (!OnboardingContract) {\n        throw new Error('No OnboardingContract found.');\n      }\n\n      if (!DaoRegistryContract) {\n        throw new Error('No DaoRegistryContract found.');\n      }\n\n      if (!account) {\n        throw new Error('No account found.');\n      }\n\n      // Maybe set proposal ID from previous attempt\n      let proposalId: string = proposalData?.uniqueId || '';\n\n      const {ethAddress, ethAmount} = values;\n      const ethAmountInWei = Web3.utils.toWei(\n        stripFormatNumber(ethAmount),\n        'ether'\n      );\n\n      // Only submit to snapshot if there is not already a proposal ID returned from a previous attempt.\n      if (!proposalId) {\n        // Sign and submit draft for snapshot-hub\n        const {uniqueId} = await signAndSendProposal({\n          partialProposalData: {\n            name: ethAddress,\n            body: `Membership for ${ethAddress}.`,\n            metadata: {amountUnit: 'ETH'},\n          },\n          adapterName: ContractAdapterNames.onboarding,\n          type: SnapshotType.draft,\n        });\n\n        proposalId = uniqueId;\n      }\n\n      const onboardArguments: OnboardArguments = [\n        DaoRegistryContract.contractAddress,\n        proposalId,\n        ethAddress,\n        SHARES_ADDRESS,\n        ethAmountInWei,\n      ];\n\n      const txArguments = {\n        from: account || '',\n        value: ethAmountInWei,\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      // Execute contract call for `onboard`\n      await txSend(\n        'onboard',\n        OnboardingContract.instance.methods,\n        onboardArguments,\n        txArguments\n      );\n\n      // go to MemberDetails page for newly created member proposal\n      history.push(`/membership/${proposalId}`);\n    } catch (error) {\n      // Set any errors from Web3 utils or explicitly set above.\n      setSubmitError(error);\n    }\n  }\n\n  function renderSubmitStatus(): React.ReactNode {\n    // Either Snapshot or chain tx\n    if (\n      txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n      proposalSignAndSendStatus === Web3TxStatus.AWAITING_CONFIRM\n    ) {\n      return 'Awaiting your confirmation\\u2026';\n    }\n\n    // Only for chain tx\n    switch (txStatus) {\n      case Web3TxStatus.PENDING:\n        return (\n          <>\n            <CycleMessage\n              intervalMs={2000}\n              messages={TX_CYCLE_MESSAGES}\n              useFirstItemStart\n              render={(message) => {\n                return <FadeIn key={message}>{message}</FadeIn>;\n              }}\n            />\n\n            <EtherscanURL url={txEtherscanURL} isPending />\n          </>\n        );\n      case Web3TxStatus.FULFILLED:\n        return (\n          <>\n            <div>Proposal submitted!</div>\n\n            <EtherscanURL url={txEtherscanURL} />\n          </>\n        );\n      default:\n        return null;\n    }\n  }\n\n  /**\n   * Render\n   */\n\n  // Render wallet auth message if user is not connected\n  if (!isConnected) {\n    return (\n      <RenderWrapper>\n        <div className=\"form__description--unauthorized\">\n          <p>Connect your wallet to submit a member proposal.</p>\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render wrong network message if user is on wrong network\n  if (defaultChainError) {\n    return (\n      <RenderWrapper>\n        <div className=\"form__description--unauthorized\">\n          <p>{defaultChainError.message}</p>\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  return (\n    <RenderWrapper>\n      <form className=\"form\" onSubmit={(e) => e.preventDefault()}>\n        {/* ETH ADDRESS */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\" htmlFor={Fields.ethAddress}>\n            Applicant Address\n          </label>\n          <div className=\"form__input-row-fieldwrap\">\n            {/* @note We don't need the default value as it's handled in the useEffect above. */}\n            <input\n              aria-describedby={`error-${Fields.ethAddress}`}\n              aria-invalid={errors.ethAddress ? 'true' : 'false'}\n              id={Fields.ethAddress}\n              name={Fields.ethAddress}\n              ref={register({\n                validate: (ethAddress: string): string | boolean => {\n                  return !ethAddress\n                    ? FormFieldErrors.REQUIRED\n                    : !isEthAddressValid(ethAddress)\n                    ? FormFieldErrors.INVALID_ETHEREUM_ADDRESS\n                    : true;\n                },\n              })}\n              type=\"text\"\n              disabled={isInProcessOrDone}\n            />\n\n            <InputError\n              error={getValidationError(Fields.ethAddress, errors)}\n              id={`error-${Fields.ethAddress}`}\n            />\n          </div>\n        </div>\n\n        {/* ETH AMOUNT */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\" htmlFor={Fields.ethAmount}>\n            Amount\n          </label>\n          <div className=\"form__input-row-fieldwrap--narrow\">\n            <div className=\"input__suffix-wrap\">\n              <input\n                className=\"input__suffix\"\n                aria-describedby={`error-${Fields.ethAmount}`}\n                aria-invalid={errors.ethAmount ? 'true' : 'false'}\n                id={Fields.ethAmount}\n                name={Fields.ethAmount}\n                onChange={() =>\n                  setValue(\n                    Fields.ethAmount,\n                    formatNumber(getValues().ethAmount)\n                  )\n                }\n                ref={register({\n                  validate: (value: string): string | boolean => {\n                    const amount = Number(stripFormatNumber(value));\n\n                    return value === ''\n                      ? FormFieldErrors.REQUIRED\n                      : isNaN(amount)\n                      ? FormFieldErrors.INVALID_NUMBER\n                      : amount <= 0\n                      ? 'The value must be greater than 0 ETH.'\n                      : amount >= Number(userAccountBalance?.eth)\n                      ? 'Insufficient funds.'\n                      : true;\n                  },\n                })}\n                type=\"text\"\n                disabled={isInProcessOrDone}\n              />\n              <div className=\"input__suffix-item\">ETH</div>\n            </div>\n\n            <InputError\n              error={getValidationError(Fields.ethAmount, errors)}\n              id={`error-${Fields.ethAmount}`}\n            />\n          </div>\n          <div className=\"form__input-addon\">\n            available:{' '}\n            <span className=\"text-underline\">\n              {userAccountBalance\n                ? formatDecimal(Number(userAccountBalance.eth))\n                : '---'}{' '}\n              ETH\n            </span>\n          </div>\n        </div>\n\n        {/* SUBMIT */}\n        <button\n          aria-label={isInProcess ? 'Submitting your proposal.' : ''}\n          className=\"button\"\n          disabled={isInProcessOrDone}\n          onClick={async () => {\n            if (isInProcessOrDone) return;\n\n            if (!(await trigger())) {\n              return;\n            }\n\n            handleSubmit(getValues());\n          }}\n          type=\"submit\">\n          {isInProcess ? <Loader /> : isDone ? 'Done' : 'Submit'}\n        </button>\n\n        {/* SUBMIT STATUS */}\n        {isInProcessOrDone && (\n          <div className=\"form__submit-status-container\">\n            {renderSubmitStatus()}\n          </div>\n        )}\n\n        {/* SUBMIT ERROR */}\n        {createMemberError && (\n          <div className=\"form__submit-error-container\">\n            <ErrorMessageWithDetails\n              renderText=\"Something went wrong while submitting the proposal.\"\n              error={createMemberError}\n            />\n          </div>\n        )}\n      </form>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Join</h2>\n        </div>\n\n        <div className=\"form-wrapper\">\n          <div className=\"form__description\">\n            <p>\n              Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla\n              consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut\n              lacus dictum fermentum vel tincidunt neque. Sed sed lacinia...\n            </p>\n          </div>\n\n          {/* RENDER CHILDREN */}\n          {props.children}\n        </div>\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React, {useState, useCallback, useEffect} from 'react';\nimport {\n  SnapshotType,\n  SnapshotProposalData,\n  prepareVoteProposalData,\n} from '@openlaw/snapshot-js-erc712';\nimport {useForm} from 'react-hook-form';\nimport {useSelector} from 'react-redux';\nimport {useHistory} from 'react-router-dom';\nimport {toBN, AbiItem, toWei} from 'web3-utils';\n\nimport {ETH_TOKEN_ADDRESS, GUILD_ADDRESS, SHARES_ADDRESS} from '../../config';\nimport {\n  getValidationError,\n  stripFormatNumber,\n  formatNumber,\n  formatDecimal,\n} from '../../util/helpers';\nimport {\n  useContractSend,\n  useETHGasPrice,\n  useIsDefaultChain,\n} from '../../components/web3/hooks';\nimport {ContractAdapterNames, Web3TxStatus} from '../../components/web3/types';\nimport {FormFieldErrors} from '../../util/enums';\nimport {isEthAddressValid} from '../../util/validation';\nimport {StoreState} from '../../store/types';\nimport {TX_CYCLE_MESSAGES} from '../../components/web3/config';\nimport {multicall, MulticallTuple} from '../../components/web3/helpers';\nimport {useSignAndSubmitProposal} from '../../components/proposals/hooks';\nimport {useWeb3Modal} from '../../components/web3/hooks';\nimport CycleMessage from '../../components/feedback/CycleMessage';\nimport ErrorMessageWithDetails from '../../components/common/ErrorMessageWithDetails';\nimport FadeIn from '../../components/common/FadeIn';\nimport InputError from '../../components/common/InputError';\nimport Loader from '../../components/feedback/Loader';\nimport Wrap from '../../components/common/Wrap';\nimport EtherscanURL from '../../components/web3/EtherscanURL';\nimport {default as ERC20ABI} from '../../truffle-contracts/ERC20.json';\n\nenum Fields {\n  type = 'type',\n  selectedToken = 'selectedToken',\n  memberAddress = 'memberAddress',\n  amount = 'amount',\n  notes = 'notes',\n}\n\ntype FormInputs = {\n  type: string;\n  selectedToken: string;\n  memberAddress: string;\n  amount: string;\n  notes: string;\n};\n\ntype TransferArguments = [\n  string, // `dao`\n  string, // `proposalId`\n  string, // `shareHolderAddr`\n  string, // `token`\n  string, // `amount`\n  string // `data`\n];\n\ntype InitialTokenDetails = {\n  address: string;\n  daoBalance: string;\n};\n\ntype TokenDetails = InitialTokenDetails & {\n  name: string;\n  symbol: string;\n  decimals: number;\n};\n\nexport default function CreateTransferProposal() {\n  /**\n   * Selectors\n   */\n\n  const DistributeContract = useSelector(\n    (state: StoreState) => state.contracts?.DistributeContract\n  );\n  const DaoRegistryContract = useSelector(\n    (state: StoreState) => state.contracts?.DaoRegistryContract\n  );\n  const BankExtensionContract = useSelector(\n    (state: StoreState) => state.contracts?.BankExtensionContract\n  );\n  const isActiveMember = useSelector(\n    (s: StoreState) => s.connectedMember?.isActiveMember\n  );\n\n  /**\n   * Hooks\n   */\n\n  const {defaultChainError} = useIsDefaultChain();\n  const {connected, account, web3Instance} = useWeb3Modal();\n  const gasPrices = useETHGasPrice();\n  const {\n    txError,\n    txEtherscanURL,\n    txIsPromptOpen,\n    txSend,\n    txStatus,\n  } = useContractSend();\n\n  const {\n    proposalData,\n    proposalSignAndSendStatus,\n    signAndSendProposal,\n  } = useSignAndSubmitProposal<SnapshotType.proposal>();\n\n  /**\n   * Their hooks\n   */\n\n  const form = useForm<FormInputs>({\n    mode: 'onBlur',\n    reValidateMode: 'onChange',\n  });\n  const history = useHistory();\n\n  /**\n   * State\n   */\n\n  const [submitError, setSubmitError] = useState<Error>();\n  const [daoTokens, setDaoTokens] = useState<TokenDetails[]>();\n  const [selectedTokenBalance, setSelectedTokenBalance] = useState<string>();\n\n  /**\n   * Variables\n   */\n\n  const {errors, getValues, setValue, register, trigger, watch} = form;\n  const typeValue = watch('type');\n  const isTypeAllMembers = typeValue === 'all members';\n  const selectedTokenValue = watch('selectedToken');\n\n  const createTransferError = submitError || txError;\n  const isConnected = connected && account;\n  const erc20ABI: AbiItem[] = ERC20ABI as any;\n\n  const isInProcess =\n    txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    txStatus === Web3TxStatus.PENDING ||\n    proposalSignAndSendStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    proposalSignAndSendStatus === Web3TxStatus.PENDING;\n\n  const isDone =\n    txStatus === Web3TxStatus.FULFILLED &&\n    proposalSignAndSendStatus === Web3TxStatus.FULFILLED;\n\n  const isInProcessOrDone = isInProcess || isDone || txIsPromptOpen;\n\n  /**\n   * Cached callbacks\n   */\n\n  const getDaoTokensCached = useCallback(getDaoTokens, [\n    BankExtensionContract,\n    account,\n    erc20ABI,\n    web3Instance,\n  ]);\n\n  const getSelectedTokenBalanceCached = useCallback(getSelectedTokenBalance, [\n    account,\n    selectedTokenValue,\n  ]);\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    getDaoTokensCached();\n  }, [getDaoTokensCached]);\n\n  useEffect(() => {\n    getSelectedTokenBalanceCached();\n  }, [getSelectedTokenBalanceCached]);\n\n  /**\n   * Functions\n   */\n\n  async function getDaoTokens() {\n    if (!account || !BankExtensionContract || !web3Instance) {\n      setDaoTokens(undefined);\n      return;\n    }\n\n    try {\n      const {\n        abi: bankABI,\n        contractAddress: bankAddress,\n        instance: {methods: bankMethods},\n      } = BankExtensionContract;\n\n      const nbTokens = await bankMethods.nbTokens().call();\n\n      if (Number(nbTokens) < 1) {\n        setDaoTokens([]);\n      } else {\n        let parsedAndSortedTokens: TokenDetails[] = [];\n\n        // Build calls to get DAO token list with details\n        const getTokenABI = bankABI.find((item) => item.name === 'getToken');\n        const getTokenCalls = [...Array(Number(nbTokens)).keys()].map(\n          (index): MulticallTuple => [\n            bankAddress,\n            getTokenABI as AbiItem,\n            [index.toString()],\n          ]\n        );\n        const fetchedTokens: string[] = await multicall({\n          calls: getTokenCalls,\n          web3Instance,\n        });\n\n        const balanceOfABI = bankABI.find((item) => item.name === 'balanceOf');\n        const getDaoTokenBalanceCalls = fetchedTokens.map(\n          (token): MulticallTuple => [\n            bankAddress,\n            balanceOfABI as AbiItem,\n            [GUILD_ADDRESS, token],\n          ]\n        );\n        const daoTokenBalances: string[] = await multicall({\n          calls: getDaoTokenBalanceCalls,\n          web3Instance,\n        });\n\n        const tokensArray: InitialTokenDetails[] = fetchedTokens\n          .map((token, index) => ({\n            address: token,\n            daoBalance: daoTokenBalances[index],\n          }))\n          // Don't need to include tokens that have 0 balance\n          .filter((tokenObj) => toBN(tokenObj.daoBalance).gt(toBN(0)));\n\n        const ethToken = tokensArray.find(\n          (token) => token.address === ETH_TOKEN_ADDRESS\n        );\n        if (ethToken) {\n          parsedAndSortedTokens.push({\n            ...ethToken,\n            name: 'Ether',\n            symbol: 'ETH',\n            decimals: 18,\n          });\n        }\n\n        // Filter out Ether to handle ERC20 tokens\n        const erc20Tokens = tokensArray.filter(\n          (token) => token.address !== ETH_TOKEN_ADDRESS\n        );\n\n        if (erc20Tokens.length > 0) {\n          const nameABI = erc20ABI.find((item) => item.name === 'name');\n          const nameCalls = erc20Tokens.map(\n            (token): MulticallTuple => [\n              token.address as string,\n              nameABI as AbiItem,\n              [],\n            ]\n          );\n          const symbolABI = erc20ABI.find((item) => item.name === 'symbol');\n          const symbolCalls = erc20Tokens.map(\n            (token): MulticallTuple => [\n              token.address as string,\n              symbolABI as AbiItem,\n              [],\n            ]\n          );\n          const decimalsABI = erc20ABI.find((item) => item.name === 'decimals');\n          const decimalsCalls = erc20Tokens.map(\n            (token): MulticallTuple => [\n              token.address as string,\n              decimalsABI as AbiItem,\n              [],\n            ]\n          );\n          const erc20DetailsCalls = [\n            ...nameCalls,\n            ...symbolCalls,\n            ...decimalsCalls,\n          ];\n          let results = await multicall({\n            calls: erc20DetailsCalls,\n            web3Instance,\n          });\n          let chunkedResults = [];\n          while (results.length) {\n            chunkedResults.push(results.splice(0, erc20Tokens.length));\n          }\n          const [names, symbols, decimals] = chunkedResults;\n\n          const parsedAndSortedERC20Tokens = erc20Tokens\n            .map((token, index) => ({\n              ...token,\n              name: names[index],\n              symbol: symbols[index],\n              decimals: decimals[index],\n            }))\n            .sort((a, b) => a.name.localeCompare(b.name));\n\n          parsedAndSortedTokens = [\n            ...parsedAndSortedTokens,\n            ...parsedAndSortedERC20Tokens,\n          ];\n        }\n\n        setDaoTokens(parsedAndSortedTokens);\n      }\n    } catch (error) {\n      console.error(error);\n      setDaoTokens(undefined);\n    }\n  }\n\n  async function getSelectedTokenBalance() {\n    if (!account || !selectedTokenValue) {\n      setSelectedTokenBalance(undefined);\n      return;\n    }\n\n    try {\n      const selectedTokenObj = JSON.parse(selectedTokenValue);\n      const balance = selectedTokenObj.daoBalance;\n      const balanceBN = toBN(balance);\n      const decimals = selectedTokenObj.decimals;\n      const divisor = toBN(10).pow(toBN(decimals));\n      const beforeDecimal = balanceBN.div(divisor);\n      const afterDecimal = balanceBN.mod(divisor);\n      const balanceReadable = afterDecimal.eq(toBN(0))\n        ? beforeDecimal.toString()\n        : `${beforeDecimal.toString()}.${afterDecimal.toString()}`;\n\n      setSelectedTokenBalance(balanceReadable);\n    } catch (error) {\n      console.error(error);\n      setSelectedTokenBalance(undefined);\n    }\n  }\n\n  async function handleSubmit(values: FormInputs) {\n    try {\n      if (!isConnected) {\n        throw new Error(\n          'No user account was found. Please makes sure your wallet is connected.'\n        );\n      }\n\n      if (!DistributeContract) {\n        throw new Error('No DistributeContract found.');\n      }\n\n      if (!DaoRegistryContract) {\n        throw new Error('No DaoRegistryContract found.');\n      }\n\n      if (!account) {\n        throw new Error('No account found.');\n      }\n\n      if (!web3Instance) {\n        throw new Error('No Web3 instance was found.');\n      }\n\n      const {selectedToken, memberAddress, amount, notes} = values;\n      const selectedTokenObj = JSON.parse(selectedToken);\n      const {symbol, decimals, address: tokenAddress} = selectedTokenObj;\n      let amountArg;\n      if (tokenAddress === ETH_TOKEN_ADDRESS) {\n        amountArg = toWei(stripFormatNumber(amount), 'ether');\n      } else {\n        const multiplier = toBN(10).pow(toBN(decimals));\n        const amountWithDecimals = toBN(stripFormatNumber(amount)).mul(\n          multiplier\n        );\n        amountArg = amountWithDecimals.toString();\n      }\n\n      // Maybe set proposal info from previous attempt\n      let proposalId: string = proposalData?.uniqueId || '';\n      let data: SnapshotProposalData | undefined = proposalData?.data;\n      let signature: string = proposalData?.signature || '';\n\n      const bodyIntro = isTypeAllMembers\n        ? 'Transfer to all members pro rata.'\n        : `Transfer to ${memberAddress}.`;\n\n      // Only submit to snapshot if there is not already a proposal ID returned from a previous attempt.\n      if (!proposalId) {\n        const body = notes ? `${bodyIntro}\\n${notes}` : bodyIntro;\n        const name = isTypeAllMembers ? 'All members' : memberAddress;\n        const now = Math.floor(Date.now() / 1000);\n\n        // Sign and submit proposal for snapshot-hub\n        const {\n          uniqueId,\n          data: returnData,\n          signature: returnSignature,\n        } = await signAndSendProposal({\n          partialProposalData: {\n            name,\n            body,\n            metadata: {\n              amountUnit: symbol,\n              tokenDecimals: decimals,\n              isTypeAllMembers,\n            },\n            timestamp: now.toString(),\n          },\n          adapterName: ContractAdapterNames.distribute,\n          type: SnapshotType.proposal,\n        });\n\n        proposalId = uniqueId;\n        data = returnData;\n        signature = returnSignature;\n      }\n\n      const memberAddressArg = isTypeAllMembers\n        ? '0x0000000000000000000000000000000000000000' //indicates distribution to all active members\n        : memberAddress;\n      /**\n       * Prepare `data` argument for submission to DAO\n       *\n       * For information about which data the smart contract needs for signature verification (e.g. `hashMessage`):\n       * @link https://github.com/openlawteam/molochv3-contracts/blob/master/contracts/adapters/voting/OffchainVoting.sol\n       */\n      const preparedVoteVerificationBytes = data\n        ? prepareVoteProposalData(\n            {\n              payload: {\n                name: data.payload.name,\n                body: data.payload.body,\n                choices: data.payload.choices,\n                snapshot: data.payload.snapshot.toString(),\n                start: data.payload.start,\n                end: data.payload.end,\n              },\n              sig: signature,\n              space: data.space,\n              timestamp: parseInt(data.timestamp),\n            },\n            web3Instance\n          )\n        : '';\n\n      const transferArguments: TransferArguments = [\n        DaoRegistryContract.contractAddress,\n        proposalId,\n        memberAddressArg,\n        tokenAddress,\n        amountArg,\n        preparedVoteVerificationBytes,\n      ];\n\n      const txArguments = {\n        from: account || '',\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      // Execute contract call for `submitProposal`\n      await txSend(\n        'submitProposal',\n        DistributeContract.instance.methods,\n        transferArguments,\n        txArguments\n      );\n\n      // go to TransferDetails page for newly created transfer proposal\n      history.push(`/transfers/${proposalId}`);\n    } catch (error) {\n      // Set any errors from Web3 utils or explicitly set above.\n      setSubmitError(error);\n    }\n  }\n\n  function renderSubmitStatus(): React.ReactNode {\n    // Either Snapshot or chain tx\n    if (\n      txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n      proposalSignAndSendStatus === Web3TxStatus.AWAITING_CONFIRM\n    ) {\n      return 'Awaiting your confirmation\\u2026';\n    }\n\n    // Only for chain tx\n    switch (txStatus) {\n      case Web3TxStatus.PENDING:\n        return (\n          <>\n            <CycleMessage\n              intervalMs={2000}\n              messages={TX_CYCLE_MESSAGES}\n              useFirstItemStart\n              render={(message) => {\n                return <FadeIn key={message}>{message}</FadeIn>;\n              }}\n            />\n\n            <EtherscanURL url={txEtherscanURL} isPending />\n          </>\n        );\n      case Web3TxStatus.FULFILLED:\n        return (\n          <>\n            <div>Proposal submitted!</div>\n\n            <EtherscanURL url={txEtherscanURL} />\n          </>\n        );\n      default:\n        return null;\n    }\n  }\n\n  function renderSelectedTokenBalance() {\n    if (!selectedTokenBalance) {\n      return '---';\n    }\n\n    const isBalanceInt = Number.isInteger(Number(selectedTokenBalance));\n    return isBalanceInt\n      ? selectedTokenBalance\n      : formatDecimal(Number(selectedTokenBalance));\n  }\n\n  function getUnauthorizedMessage() {\n    // user is not connected\n    if (!isConnected) {\n      return 'Connect your wallet to submit a transfer proposal.';\n    }\n\n    // user is on wrong network\n    if (defaultChainError) {\n      return defaultChainError.message;\n    }\n\n    // user is not an active member\n    if (!isActiveMember) {\n      return 'Either you are not a member, or your membership is not active.';\n    }\n  }\n\n  async function isActiveMemberWithShares(address: string) {\n    if (!BankExtensionContract) {\n      console.error('No BankExtensionContract found.');\n      return false;\n    }\n\n    const sharesBalance = await BankExtensionContract.instance.methods\n      .balanceOf(address, SHARES_ADDRESS)\n      .call();\n\n    return toBN(sharesBalance).gt(toBN(0));\n  }\n\n  /**\n   * Render\n   */\n\n  // Render unauthorized message\n\n  if (!isConnected || defaultChainError || !isActiveMember) {\n    return (\n      <RenderWrapper>\n        <div className=\"form__description--unauthorized\">\n          <p>{getUnauthorizedMessage()}</p>\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  return (\n    <RenderWrapper>\n      <form className=\"form\" onSubmit={(e) => e.preventDefault()}>\n        {/* TYPE */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">Type</label>\n          <div className=\"form__input-row-fieldwrap\">\n            <select\n              name={Fields.type}\n              ref={register}\n              disabled={isInProcessOrDone}>\n              <option value=\"single member\">Single member</option>\n              <option value=\"all members\">All members</option>\n            </select>\n          </div>\n        </div>\n\n        {/* MEMBER ADDRESS */}\n        {!isTypeAllMembers && (\n          <div className=\"form__input-row\">\n            <label className=\"form__input-row-label\">Member Address</label>\n            <div className=\"form__input-row-fieldwrap\">\n              <input\n                aria-describedby={`error-${Fields.memberAddress}`}\n                aria-invalid={errors.memberAddress ? 'true' : 'false'}\n                name={Fields.memberAddress}\n                ref={register({\n                  validate: async (\n                    memberAddress: string\n                  ): Promise<string | boolean> => {\n                    return !memberAddress\n                      ? FormFieldErrors.REQUIRED\n                      : !isEthAddressValid(memberAddress)\n                      ? FormFieldErrors.INVALID_ETHEREUM_ADDRESS\n                      : !(await isActiveMemberWithShares(memberAddress))\n                      ? 'The address is not an active member with SHARES.'\n                      : true;\n                  },\n                })}\n                type=\"text\"\n                disabled={isInProcessOrDone}\n              />\n\n              <InputError\n                error={getValidationError(Fields.memberAddress, errors)}\n                id={`error-${Fields.memberAddress}`}\n              />\n            </div>\n          </div>\n        )}\n\n        {/* SELECTED TOKEN */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">Asset</label>\n          <div className=\"form__input-row-fieldwrap\">\n            <select\n              aria-describedby={`error-${Fields.selectedToken}`}\n              aria-invalid={errors.selectedToken ? 'true' : 'false'}\n              name={Fields.selectedToken}\n              ref={register({\n                validate: (token: string): string | boolean => {\n                  return !daoTokens || daoTokens.length < 1\n                    ? 'No tokens available for distribution.'\n                    : !token\n                    ? FormFieldErrors.REQUIRED\n                    : true;\n                },\n              })}\n              disabled={isInProcessOrDone}>\n              <option value=\"\">Select from DAO assets</option>\n              {daoTokens?.map((token) => (\n                <option\n                  key={token.address}\n                  value={JSON.stringify(\n                    token\n                  )}>{`${token.name} (${token.symbol})`}</option>\n              ))}\n            </select>\n\n            <InputError\n              error={getValidationError(Fields.selectedToken, errors)}\n              id={`error-${Fields.selectedToken}`}\n            />\n          </div>\n        </div>\n\n        {/* AMOUNT */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">Amount</label>\n          <div className=\"form__input-row-fieldwrap--narrow\">\n            <div className=\"input__suffix-wrap\">\n              <input\n                className=\"input__suffix\"\n                aria-describedby={`error-${Fields.amount}`}\n                aria-invalid={errors.amount ? 'true' : 'false'}\n                name={Fields.amount}\n                onChange={() =>\n                  setValue(Fields.amount, formatNumber(getValues().amount))\n                }\n                ref={register({\n                  validate: (amount: string): string | boolean => {\n                    const amountToNumber = Number(stripFormatNumber(amount));\n                    const selectedTokenObj =\n                      selectedTokenValue && JSON.parse(selectedTokenValue);\n                    const isSelectedTokenEth =\n                      selectedTokenObj?.address === ETH_TOKEN_ADDRESS;\n\n                    return amount === ''\n                      ? FormFieldErrors.REQUIRED\n                      : isNaN(amountToNumber)\n                      ? FormFieldErrors.INVALID_NUMBER\n                      : amountToNumber <= 0\n                      ? 'The value must be greater than 0.'\n                      : amountToNumber > Number(selectedTokenBalance)\n                      ? 'Insufficient funds.'\n                      : isSelectedTokenEth\n                      ? true\n                      : !Number.isInteger(amountToNumber)\n                      ? 'The value must be an integer for an ERC20 token.'\n                      : true;\n                  },\n                })}\n                type=\"text\"\n                disabled={isInProcessOrDone}\n              />\n\n              <div className=\"input__suffix-item\">\n                {(selectedTokenValue &&\n                  JSON.parse(selectedTokenValue).symbol) ||\n                  '___'}\n              </div>\n            </div>\n\n            <InputError\n              error={getValidationError(Fields.amount, errors)}\n              id={`error-${Fields.amount}`}\n            />\n\n            <div className=\"form__input-description\">\n              {isTypeAllMembers\n                ? \"If the proposal passes, this total amount will be distributed pro rata to all members' internal accounts, based on the current number of shares held by each member.\"\n                : \"If the proposal passes, this amount will be distributed to the member's internal account.\"}\n            </div>\n          </div>\n\n          <div className=\"form__input-addon\">\n            available:{' '}\n            <span className=\"text-underline\">\n              {renderSelectedTokenBalance()}\n            </span>\n          </div>\n        </div>\n\n        {/* NOTES */}\n        <div className=\"form__textarea-row\">\n          <label className=\"form__input-row-label\">Notes</label>\n          <div className=\"form__input-row-fieldwrap\">\n            <textarea\n              name={Fields.notes}\n              placeholder=\"Transactions purpose...\"\n              ref={register}\n              disabled={isInProcessOrDone}\n            />\n          </div>\n        </div>\n\n        {/* SUBMIT */}\n        <button\n          className=\"button\"\n          disabled={isInProcessOrDone}\n          onClick={async () => {\n            if (isInProcessOrDone) return;\n\n            if (!(await trigger())) {\n              return;\n            }\n\n            handleSubmit(getValues());\n          }}\n          type=\"submit\">\n          {isInProcess ? <Loader /> : isDone ? 'Done' : 'Submit'}\n        </button>\n\n        {/* SUBMIT STATUS */}\n        {isInProcessOrDone && (\n          <div className=\"form__submit-status-container\">\n            {renderSubmitStatus()}\n          </div>\n        )}\n\n        {/* SUBMIT ERROR */}\n        {createTransferError && (\n          <div className=\"form__submit-error-container\">\n            <ErrorMessageWithDetails\n              renderText=\"Something went wrong while submitting the proposal.\"\n              error={createTransferError}\n            />\n          </div>\n        )}\n      </form>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Transfer Proposal</h2>\n        </div>\n\n        <div className=\"form-wrapper\">\n          <div className=\"form__description\">\n            <p>\n              Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla\n              consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut\n              lacus dictum fermentum vel tincidunt neque. Sed sed lacinia...\n            </p>\n          </div>\n\n          {/* RENDER CHILDREN */}\n          {props.children}\n        </div>\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React, {useState, useCallback, useEffect} from 'react';\nimport {SnapshotType} from '@openlaw/snapshot-js-erc712';\nimport {useForm} from 'react-hook-form';\nimport {useSelector} from 'react-redux';\nimport {Link, useHistory} from 'react-router-dom';\nimport {Contract as Web3Contract} from 'web3-eth-contract/types';\nimport {toBN, AbiItem} from 'web3-utils';\n\nimport {\n  getValidationError,\n  stripFormatNumber,\n  formatNumber,\n  formatDecimal,\n} from '../../util/helpers';\nimport {\n  useContractSend,\n  useETHGasPrice,\n  useIsDefaultChain,\n} from '../../components/web3/hooks';\nimport {ContractAdapterNames, Web3TxStatus} from '../../components/web3/types';\nimport {FormFieldErrors} from '../../util/enums';\nimport {isEthAddressValid} from '../../util/validation';\nimport {truncateEthAddress} from '../../util/helpers';\nimport {SHARES_ADDRESS} from '../../config';\nimport {StoreState} from '../../store/types';\nimport {TX_CYCLE_MESSAGES} from '../../components/web3/config';\nimport {useSignAndSubmitProposal} from '../../components/proposals/hooks';\nimport {useWeb3Modal} from '../../components/web3/hooks';\nimport CycleMessage from '../../components/feedback/CycleMessage';\nimport ErrorMessageWithDetails from '../../components/common/ErrorMessageWithDetails';\nimport FadeIn from '../../components/common/FadeIn';\nimport InputError from '../../components/common/InputError';\nimport Loader from '../../components/feedback/Loader';\nimport Wrap from '../../components/common/Wrap';\nimport EtherscanURL from '../../components/web3/EtherscanURL';\n\nenum Fields {\n  applicantAddress = 'applicantAddress',\n  erc20Address = 'erc20Address',\n  tributeAmount = 'tributeAmount',\n  requestAmount = 'requestAmount',\n  description = 'description',\n}\n\ntype FormInputs = {\n  applicantAddress: string;\n  erc20Address: string;\n  tributeAmount: string;\n  requestAmount: string;\n  description: string;\n};\n\ntype TributeArguments = [\n  string, // `dao`\n  string, // `proposalId`\n  string, // `applicant`\n  string, // `tokenToMint`\n  string, // `requestAmount`\n  string, // `tokenAddr`\n  string // `tributeAmount`\n];\n\ntype TokenApproveArguments = [\n  string, // `spender`\n  string // `value`\n];\n\ntype ERC20Details = {\n  symbol: string;\n  decimals: number;\n};\n\ntype BN = ReturnType<typeof toBN>;\n\nexport default function CreateTributeProposal() {\n  /**\n   * Selectors\n   */\n\n  const TributeContract = useSelector(\n    (state: StoreState) => state.contracts?.TributeContract\n  );\n  const DaoRegistryContract = useSelector(\n    (state: StoreState) => state.contracts?.DaoRegistryContract\n  );\n\n  /**\n   * Hooks\n   */\n\n  const {defaultChainError} = useIsDefaultChain();\n  const {connected, account, web3Instance} = useWeb3Modal();\n  const gasPrices = useETHGasPrice();\n  const {\n    txError,\n    txEtherscanURL,\n    txIsPromptOpen,\n    txSend,\n    txStatus,\n  } = useContractSend();\n  const {\n    txError: txErrorTokenApprove,\n    txEtherscanURL: txEtherscanURLTokenApprove,\n    txIsPromptOpen: txIsPromptOpenTokenApprove,\n    txSend: txSendTokenApprove,\n    txStatus: txStatusTokenApprove,\n  } = useContractSend();\n\n  const {\n    proposalData,\n    proposalSignAndSendStatus,\n    signAndSendProposal,\n  } = useSignAndSubmitProposal<SnapshotType.draft>();\n\n  /**\n   * Their hooks\n   */\n\n  const form = useForm<FormInputs>({\n    mode: 'onBlur',\n    reValidateMode: 'onChange',\n  });\n  const history = useHistory();\n\n  /**\n   * State\n   */\n\n  const [submitError, setSubmitError] = useState<Error>();\n  const [userERC20Balance, setUserERC20Balance] = useState<string>();\n  const [erc20Details, setERC20Details] = useState<ERC20Details>();\n  const [erc20Contract, setERC20Contract] = useState<Web3Contract>();\n\n  /**\n   * Variables\n   */\n\n  const {errors, getValues, setValue, register, trigger, watch} = form;\n  const erc20AddressValue = watch('erc20Address');\n\n  const createTributeError = submitError || txError || txErrorTokenApprove;\n  const isConnected = connected && account;\n\n  const isInProcess =\n    txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    txStatus === Web3TxStatus.PENDING ||\n    txStatusTokenApprove === Web3TxStatus.AWAITING_CONFIRM ||\n    txStatusTokenApprove === Web3TxStatus.PENDING ||\n    proposalSignAndSendStatus === Web3TxStatus.AWAITING_CONFIRM ||\n    proposalSignAndSendStatus === Web3TxStatus.PENDING;\n\n  const isDone =\n    txStatus === Web3TxStatus.FULFILLED &&\n    proposalSignAndSendStatus === Web3TxStatus.FULFILLED;\n\n  const isInProcessOrDone =\n    isInProcess || isDone || txIsPromptOpen || txIsPromptOpenTokenApprove;\n\n  /**\n   * Cached callbacks\n   */\n\n  const getERC20ContractCached = useCallback(getERC20Contract, [\n    erc20AddressValue,\n    web3Instance,\n  ]);\n\n  const getERC20DetailsCached = useCallback(getERC20Details, [\n    account,\n    erc20Contract,\n  ]);\n\n  const getUserERC20BalanceCached = useCallback(getUserERC20Balance, [\n    account,\n    erc20Contract,\n  ]);\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    getERC20ContractCached();\n  }, [getERC20ContractCached]);\n\n  useEffect(() => {\n    getERC20DetailsCached();\n  }, [getERC20DetailsCached]);\n\n  useEffect(() => {\n    getUserERC20BalanceCached();\n  }, [getUserERC20BalanceCached]);\n\n  // Set the value of `applicantAddress` if the `account` changes\n  useEffect(() => {\n    setValue(Fields.applicantAddress, account);\n  }, [account, setValue]);\n\n  /**\n   * Functions\n   */\n\n  async function getERC20Contract() {\n    if (!web3Instance || !erc20AddressValue) {\n      setERC20Contract(undefined);\n      return;\n    }\n\n    try {\n      const {default: lazyERC20ABI} = await import(\n        '../../truffle-contracts/ERC20.json'\n      );\n      const erc20Contract: AbiItem[] = lazyERC20ABI as any;\n      const instance = new web3Instance.eth.Contract(\n        erc20Contract,\n        erc20AddressValue\n      );\n      setERC20Contract(instance);\n    } catch (error) {\n      console.error(error);\n      setERC20Contract(undefined);\n    }\n  }\n\n  async function getERC20Details() {\n    if (!account || !erc20Contract) {\n      setERC20Details(undefined);\n      return;\n    }\n\n    try {\n      const symbol = await erc20Contract.methods.symbol().call();\n      const decimals = await erc20Contract.methods.decimals().call();\n      setERC20Details({symbol, decimals: Number(decimals)});\n    } catch (error) {\n      console.error(error);\n      setERC20Details(undefined);\n    }\n  }\n\n  async function getUserERC20Balance() {\n    if (!account || !erc20Contract) {\n      setUserERC20Balance(undefined);\n      return;\n    }\n\n    try {\n      const balance = await erc20Contract.methods.balanceOf(account).call();\n      const balanceBN = toBN(balance);\n      const decimals = await erc20Contract.methods.decimals().call();\n      const divisor = toBN(10).pow(toBN(decimals));\n      const beforeDecimal = balanceBN.div(divisor);\n      const afterDecimal = balanceBN.mod(divisor);\n      const balanceReadable = afterDecimal.eq(toBN(0))\n        ? beforeDecimal.toString()\n        : `${beforeDecimal.toString()}.${afterDecimal.toString()}`;\n\n      setUserERC20Balance(balanceReadable);\n    } catch (error) {\n      console.error(error);\n      setUserERC20Balance(undefined);\n    }\n  }\n\n  async function handleSubmitTokenApprove(\n    tributeAmountWithDecimals: BN,\n    allowanceBN: BN\n  ) {\n    try {\n      if (!erc20Contract) {\n        throw new Error('No ERC20Contract found.');\n      }\n\n      if (!TributeContract) {\n        throw new Error('No TributeContract found.');\n      }\n\n      if (!account) {\n        throw new Error('No account found.');\n      }\n\n      const difference = tributeAmountWithDecimals.sub(allowanceBN);\n      const approveValue = allowanceBN.add(difference);\n      const tokenApproveArguments: TokenApproveArguments = [\n        TributeContract.contractAddress,\n        approveValue.toString(),\n      ];\n      const txArguments = {\n        from: account || '',\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      // Execute contract call for `approve`\n      await txSendTokenApprove(\n        'approve',\n        erc20Contract.methods,\n        tokenApproveArguments,\n        txArguments\n      );\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  async function handleSubmit(values: FormInputs) {\n    try {\n      if (!isConnected) {\n        throw new Error(\n          'No user account was found. Please makes sure your wallet is connected.'\n        );\n      }\n\n      if (!TributeContract) {\n        throw new Error('No TributeContract found.');\n      }\n\n      if (!DaoRegistryContract) {\n        throw new Error('No DaoRegistryContract found.');\n      }\n\n      if (!account) {\n        throw new Error('No account found.');\n      }\n\n      if (!erc20Contract) {\n        throw new Error('No ERC20Contract found.');\n      }\n\n      if (!erc20Details) {\n        throw new Error('No ERC20 details found.');\n      }\n\n      const {\n        applicantAddress,\n        erc20Address,\n        tributeAmount,\n        requestAmount,\n        description,\n      } = values;\n      const multiplier = toBN(10).pow(toBN(erc20Details.decimals));\n      const tributeAmountWithDecimals = toBN(\n        stripFormatNumber(tributeAmount)\n      ).mul(multiplier);\n      const requestAmountArg = stripFormatNumber(requestAmount);\n\n      // Check if adapter is allowed to spend amount of tribute tokens on behalf\n      // of user. If allowance is not sufficient, approve the adapter to spend\n      // the amount of tokens needed for the user to provide the full tribute\n      // amount.\n      const allowance = await erc20Contract.methods\n        .allowance(account, TributeContract.contractAddress)\n        .call();\n      const allowanceBN = toBN(allowance);\n\n      if (tributeAmountWithDecimals.gt(allowanceBN)) {\n        try {\n          await handleSubmitTokenApprove(\n            tributeAmountWithDecimals,\n            allowanceBN\n          );\n        } catch (error) {\n          console.error(error);\n          throw new Error(\n            'Your ERC20 tokens could not be approved for transfer.'\n          );\n        }\n      }\n\n      // Maybe set proposal ID from previous attempt\n      let proposalId: string = proposalData?.uniqueId || '';\n\n      // Only submit to snapshot if there is not already a proposal ID returned from a previous attempt.\n      if (!proposalId) {\n        const bodyIntro =\n          applicantAddress.toLowerCase() === account.toLowerCase()\n            ? `Tribute from ${applicantAddress}.`\n            : `Tribute from ${truncateEthAddress(\n                account,\n                7\n              )} for applicant ${truncateEthAddress(applicantAddress, 7)}.`;\n        const body = description ? `${bodyIntro}\\n${description}` : bodyIntro;\n\n        // Sign and submit draft for snapshot-hub\n        const {uniqueId} = await signAndSendProposal({\n          partialProposalData: {\n            name: applicantAddress,\n            body,\n            metadata: {\n              tributeAmountUnit: erc20Details.symbol,\n              tributeTokenDecimals: erc20Details.decimals,\n              requestAmountUnit: 'SHARES',\n            },\n          },\n          adapterName: ContractAdapterNames.tribute,\n          type: SnapshotType.draft,\n        });\n\n        proposalId = uniqueId;\n      }\n\n      const tributeArguments: TributeArguments = [\n        DaoRegistryContract.contractAddress,\n        proposalId,\n        applicantAddress,\n        SHARES_ADDRESS,\n        requestAmountArg,\n        erc20Address,\n        tributeAmountWithDecimals.toString(),\n      ];\n\n      const txArguments = {\n        from: account || '',\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      // Execute contract call for `provideTribute`\n      await txSend(\n        'provideTribute',\n        TributeContract.instance.methods,\n        tributeArguments,\n        txArguments\n      );\n\n      // go to TributeDetails page for newly created tribute proposal\n      history.push(`/tributes/${proposalId}`);\n    } catch (error) {\n      // Set any errors from Web3 utils or explicitly set above.\n      setSubmitError(error);\n    }\n  }\n\n  function renderSubmitStatus(): React.ReactNode {\n    // Either Snapshot or chain tx\n    if (\n      txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n      txStatusTokenApprove === Web3TxStatus.AWAITING_CONFIRM ||\n      proposalSignAndSendStatus === Web3TxStatus.AWAITING_CONFIRM\n    ) {\n      return 'Awaiting your confirmation\\u2026';\n    }\n\n    // If token approve transaction is confirmed\n    if (txStatusTokenApprove === Web3TxStatus.PENDING) {\n      return (\n        <>\n          <div>{'Approving your tokens for transfer\\u2026'}</div>\n\n          <EtherscanURL url={txEtherscanURLTokenApprove} isPending />\n        </>\n      );\n    }\n\n    // Only for chain tx\n    switch (txStatus) {\n      case Web3TxStatus.PENDING:\n        return (\n          <>\n            <CycleMessage\n              intervalMs={2000}\n              messages={TX_CYCLE_MESSAGES}\n              useFirstItemStart\n              render={(message) => {\n                return <FadeIn key={message}>{message}</FadeIn>;\n              }}\n            />\n\n            <EtherscanURL url={txEtherscanURL} isPending />\n          </>\n        );\n      case Web3TxStatus.FULFILLED:\n        return (\n          <>\n            <div>Proposal submitted!</div>\n\n            <EtherscanURL url={txEtherscanURL} />\n          </>\n        );\n      default:\n        return null;\n    }\n  }\n\n  function renderUserERC20Balance() {\n    if (!userERC20Balance) {\n      return '---';\n    }\n\n    const isBalanceInt = Number.isInteger(Number(userERC20Balance));\n    return isBalanceInt\n      ? userERC20Balance\n      : formatDecimal(Number(userERC20Balance));\n  }\n\n  /**\n   * Render\n   */\n\n  // Render wallet auth message if user is not connected\n  if (!isConnected) {\n    return (\n      <RenderWrapper>\n        <div className=\"form__description--unauthorized\">\n          <p>Connect your wallet to submit a tribute proposal.</p>\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render wrong network message if user is on wrong network\n  if (defaultChainError) {\n    return (\n      <RenderWrapper>\n        <div className=\"form__description--unauthorized\">\n          <p>{defaultChainError.message}</p>\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  return (\n    <RenderWrapper>\n      <form className=\"form\" onSubmit={(e) => e.preventDefault()}>\n        {/* APPLICANT ADDRESS */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">Applicant Address</label>\n          <div className=\"form__input-row-fieldwrap\">\n            {/* @note We don't need the default value as it's handled in the useEffect above. */}\n            <input\n              aria-describedby={`error-${Fields.applicantAddress}`}\n              aria-invalid={errors.applicantAddress ? 'true' : 'false'}\n              name={Fields.applicantAddress}\n              ref={register({\n                validate: (applicantAddress: string): string | boolean => {\n                  return !applicantAddress\n                    ? FormFieldErrors.REQUIRED\n                    : !isEthAddressValid(applicantAddress)\n                    ? FormFieldErrors.INVALID_ETHEREUM_ADDRESS\n                    : true;\n                },\n              })}\n              type=\"text\"\n              disabled={isInProcessOrDone}\n            />\n\n            <InputError\n              error={getValidationError(Fields.applicantAddress, errors)}\n              id={`error-${Fields.applicantAddress}`}\n            />\n          </div>\n        </div>\n\n        {/* ERC20 ADDRESS */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">ERC20 Address</label>\n          <div className=\"form__input-row-fieldwrap\">\n            <input\n              aria-describedby={`error-${Fields.erc20Address}`}\n              aria-invalid={errors.erc20Address ? 'true' : 'false'}\n              name={Fields.erc20Address}\n              ref={register({\n                validate: (erc20Address: string): string | boolean => {\n                  return !erc20Address\n                    ? FormFieldErrors.REQUIRED\n                    : !isEthAddressValid(erc20Address)\n                    ? FormFieldErrors.INVALID_ETHEREUM_ADDRESS\n                    : true;\n                },\n              })}\n              type=\"text\"\n              disabled={isInProcessOrDone}\n            />\n\n            <InputError\n              error={getValidationError(Fields.erc20Address, errors)}\n              id={`error-${Fields.erc20Address}`}\n            />\n          </div>\n        </div>\n\n        {/* TRIBUTE AMOUNT */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">Amount</label>\n          <div className=\"form__input-row-fieldwrap--narrow\">\n            <div className=\"input__suffix-wrap\">\n              <input\n                className=\"input__suffix\"\n                aria-describedby={`error-${Fields.tributeAmount}`}\n                aria-invalid={errors.tributeAmount ? 'true' : 'false'}\n                name={Fields.tributeAmount}\n                onChange={() =>\n                  setValue(\n                    Fields.tributeAmount,\n                    formatNumber(getValues().tributeAmount)\n                  )\n                }\n                ref={register({\n                  validate: (tributeAmount: string): string | boolean => {\n                    const amount = Number(stripFormatNumber(tributeAmount));\n\n                    return tributeAmount === ''\n                      ? FormFieldErrors.REQUIRED\n                      : isNaN(amount)\n                      ? FormFieldErrors.INVALID_NUMBER\n                      : amount <= 0\n                      ? 'The value must be greater than 0.'\n                      : amount > Number(userERC20Balance)\n                      ? 'Insufficient funds.'\n                      : !Number.isInteger(amount)\n                      ? 'The value must be an integer for an ERC20 token.'\n                      : true;\n                  },\n                })}\n                type=\"text\"\n                disabled={isInProcessOrDone}\n              />\n\n              <div className=\"input__suffix-item\">\n                {erc20Details?.symbol || '___'}\n              </div>\n            </div>\n\n            <InputError\n              error={getValidationError(Fields.tributeAmount, errors)}\n              id={`error-${Fields.tributeAmount}`}\n            />\n\n            <div className=\"form__input-description\">\n              This amount will be held in escrow pending a member vote. If the\n              proposal passes, the funds will automatically be sent to the DAO.\n              If the proposal fails, the funds will be refunded to you.\n            </div>\n          </div>\n\n          <div className=\"form__input-addon\">\n            available:{' '}\n            <span className=\"text-underline\">{renderUserERC20Balance()}</span>\n          </div>\n        </div>\n\n        {/* REQUEST AMOUNT */}\n        <div className=\"form__input-row\">\n          <label className=\"form__input-row-label\">Request Amount</label>\n          <div className=\"form__input-row-fieldwrap--narrow\">\n            <input\n              aria-describedby={`error-${Fields.requestAmount}`}\n              aria-invalid={errors.requestAmount ? 'true' : 'false'}\n              name={Fields.requestAmount}\n              onChange={() =>\n                setValue(\n                  Fields.requestAmount,\n                  formatNumber(getValues().requestAmount)\n                )\n              }\n              ref={register({\n                validate: (requestAmount: string): string | boolean => {\n                  const amount = Number(stripFormatNumber(requestAmount));\n\n                  return requestAmount === ''\n                    ? FormFieldErrors.REQUIRED\n                    : isNaN(amount)\n                    ? FormFieldErrors.INVALID_NUMBER\n                    : amount < 0\n                    ? 'The value must be at least 0.'\n                    : true;\n                },\n              })}\n              type=\"text\"\n              disabled={isInProcessOrDone}\n            />\n\n            <InputError\n              error={getValidationError(Fields.requestAmount, errors)}\n              id={`error-${Fields.requestAmount}`}\n            />\n\n            <div className=\"form__input-description\">\n              This is the amount of DAO tokens you are requesting be sent to the\n              Applicant Address in exchange for your tribute. Current member\n              allocations can be viewed{' '}\n              <Link to=\"/members\" target=\"_blank\" rel=\"noopener noreferrer\">\n                here\n              </Link>\n              .\n            </div>\n          </div>\n        </div>\n\n        {/* DESCRIPTION */}\n        <div className=\"form__textarea-row\">\n          <label className=\"form__input-row-label\">Description</label>\n          <div className=\"form__input-row-fieldwrap\">\n            <textarea\n              name={Fields.description}\n              placeholder=\"Say something about your tribute...\"\n              ref={register}\n              disabled={isInProcessOrDone}\n            />\n          </div>\n        </div>\n\n        {/* SUBMIT */}\n        <button\n          className=\"button\"\n          disabled={isInProcessOrDone}\n          onClick={async () => {\n            if (isInProcessOrDone) return;\n\n            if (!(await trigger())) {\n              return;\n            }\n\n            handleSubmit(getValues());\n          }}\n          type=\"submit\">\n          {isInProcess ? <Loader /> : isDone ? 'Done' : 'Submit'}\n        </button>\n\n        {/* SUBMIT STATUS */}\n        {isInProcessOrDone && (\n          <div className=\"form__submit-status-container\">\n            {renderSubmitStatus()}\n          </div>\n        )}\n\n        {/* SUBMIT ERROR */}\n        {createTributeError && (\n          <div className=\"form__submit-error-container\">\n            <ErrorMessageWithDetails\n              renderText=\"Something went wrong while submitting the proposal.\"\n              error={createTributeError}\n            />\n          </div>\n        )}\n      </form>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Tribute Proposal</h2>\n        </div>\n\n        <div className=\"form-wrapper\">\n          <div className=\"form__description\">\n            <p>\n              Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla\n              consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut\n              lacus dictum fermentum vel tincidunt neque. Sed sed lacinia...\n            </p>\n          </div>\n\n          {/* RENDER CHILDREN */}\n          {props.children}\n        </div>\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React, {useEffect} from 'react';\nimport {useHistory} from 'react-router-dom';\nimport AOS from 'aos';\nimport '../../../node_modules/aos/dist/aos.css';\n\nimport {CenterLogo} from '../../components/logo';\nimport {NavLinks} from '../../components/Nav';\nimport FadeIn from '../../components/common/FadeIn';\nimport Wrap from '../../components/common/Wrap';\n\nconst MolochV3Cube = React.memo(() => {\n  return (\n    <div\n      className=\"cube\"\n      data-testid=\"cube\"\n      data-aos=\"fade-up\"\n      data-aos-delay=\"150\">\n      <div className=\"cube__segment--top\"></div>\n      <div className=\"cube__segment--left\"></div>\n      <div className=\"cube__segment--right\"></div>\n    </div>\n  );\n});\n\nexport default function GetStarted() {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    AOS.init({\n      duration: 800,\n      offset: 40,\n      delay: 120,\n      mirror: false,\n      once: true,\n    });\n  }, []);\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <header className=\"header\">\n          <CenterLogo />\n        </header>\n\n        <div className=\"landing\">\n          <div className=\"landing__subtitle\">\n            <p>For the ongoing development of Moloch v3</p>\n          </div>\n\n          <div className=\"landing__img\">\n            <MolochV3Cube />\n          </div>\n\n          <div className=\"landing__button\">\n            {/* @todo Display Join button only if user is not a member */}\n            <button\n              className=\"button\"\n              onClick={() => {\n                history.push('/join');\n              }}>\n              Join\n            </button>\n          </div>\n\n          <div className=\"landing__navlinks\">\n            <NavLinks />\n          </div>\n        </div>\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import {OffchainVotingAction, OffchainVotingStatus} from '../proposals/voting';\nimport {ProposalData} from '../proposals/types';\nimport {useOffchainVotingStartEnd} from '../proposals/hooks';\n\ntype GovernanceActionsProps = {\n  proposal: ProposalData;\n};\n\nexport function GovernanceActions(props: GovernanceActionsProps) {\n  const {proposal} = props;\n\n  /**\n   * Our hooks\n   */\n\n  const {\n    hasOffchainVotingEnded,\n    hasOffchainVotingStarted,\n    offchainVotingStartEndInitReady,\n  } = useOffchainVotingStartEnd(proposal);\n\n  /**\n   * Render\n   */\n\n  return (\n    <>\n      {offchainVotingStartEndInitReady && hasOffchainVotingStarted && (\n        <OffchainVotingStatus proposal={proposal} />\n      )}\n\n      {offchainVotingStartEndInitReady &&\n        hasOffchainVotingStarted &&\n        !hasOffchainVotingEnded && <OffchainVotingAction proposal={proposal} />}\n    </>\n  );\n}\n","import React from 'react';\n\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n\nexport default function NotFound() {\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div style={{textAlign: 'center', fontSize: '5rem'}}>\n          <h3>\n            4\n            <span\n              className=\"pulse\"\n              role=\"img\"\n              aria-label=\"404, not found\"\n              style={{display: 'inline-block'}}>\n              \n            </span>\n            4\n          </h3>\n        </div>\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import {ProposalData} from './types';\n\nimport {truncateEthAddress} from '../../util/helpers';\nimport Markdown from 'markdown-to-jsx';\n\ntype ProposalDetailsProps = {\n  proposal: ProposalData;\n  /**\n   * A render prop to render amount(s) badge.\n   */\n  renderAmountBadge?: () => React.ReactNode;\n  /**\n   * A render prop to render any action button flows for a proposal.\n   */\n  renderActions: () => React.ReactNode;\n};\n\nexport default function ProposalDetails(props: ProposalDetailsProps) {\n  const {proposal, renderAmountBadge, renderActions} = props;\n\n  const commonData = proposal.getCommonSnapshotProposalData();\n\n  /**\n   * Render\n   */\n\n  if (!commonData) {\n    return null;\n  }\n\n  return (\n    <>\n      <div className=\"proposaldetails__header\">Proposal Details</div>\n      <div className=\"proposaldetails\">\n        {/* PROPOSAL NAME (an address in most cases) AND BODY */}\n        <div className=\"proposaldetails__content\">\n          <h3>{truncateEthAddress(commonData.msg.payload.name || '', 7)}</h3>\n\n          <Markdown>{commonData.msg.payload.body}</Markdown>\n        </div>\n\n        {/* SIDEBAR */}\n        <div className=\"proposaldetails__status\">\n          {/* AMOUNT(S) IF RELEVANT FOR PROPOSAL */}\n          {renderAmountBadge && renderAmountBadge()}\n\n          {/* SPONSOR & VOTING ACTIONS */}\n          {renderActions()}\n        </div>\n      </div>\n    </>\n  );\n}\n","import {SnapshotType} from '@openlaw/snapshot-js-erc712';\nimport React from 'react';\nimport {useHistory, useParams} from 'react-router-dom';\n\nimport {AsyncStatus} from '../../util/types';\nimport {GovernanceActions} from '../../components/governance';\nimport {useProposalOrDraft} from '../../components/proposals/hooks';\nimport ErrorMessageWithDetails from '../../components/common/ErrorMessageWithDetails';\nimport FadeIn from '../../components/common/FadeIn';\nimport LoaderWithEmoji from '../../components/feedback/LoaderWithEmoji';\nimport NotFound from '../subpages/NotFound';\nimport ProposalDetails from '../../components/proposals/ProposalDetails';\nimport Wrap from '../../components/common/Wrap';\n\nexport default function GovernanceProposalDetails() {\n  /**\n   * Their hooks\n   */\n\n  // Get hash for fetching the proposal.\n  const {proposalId} = useParams<{proposalId: string}>();\n\n  /**\n   * Our hooks\n   */\n\n  const {\n    proposalData,\n    proposalError,\n    proposalNotFound,\n    proposalStatus,\n  } = useProposalOrDraft(proposalId, SnapshotType.proposal);\n\n  /**\n   * Render\n   */\n\n  // Render loading\n  if (proposalStatus === AsyncStatus.PENDING) {\n    return (\n      <RenderWrapper>\n        <div style={{width: '3rem', margin: '0 auto'}}>\n          <LoaderWithEmoji />\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render 404 no proposal found\n  if (proposalNotFound) {\n    return (\n      <RenderWrapper>\n        <NotFound />\n      </RenderWrapper>\n    );\n  }\n\n  // Render error\n  if (proposalStatus === AsyncStatus.REJECTED || proposalError) {\n    return (\n      <RenderWrapper>\n        <div className=\"text-center\">\n          <ErrorMessageWithDetails\n            error={proposalError}\n            renderText=\"Something went wrong.\"\n          />\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render proposal\n  if (proposalData) {\n    return (\n      <RenderWrapper>\n        <ProposalDetails\n          proposal={proposalData}\n          renderActions={() => <GovernanceActions proposal={proposalData} />}\n        />\n      </RenderWrapper>\n    );\n  }\n\n  // Render nothing. Should never reach this case.\n  return <></>;\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function viewAll(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n\n    history.push('/governance-proposals');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Governance</h2>\n\n          <button className=\"titlebar__action\" onClick={viewAll}>\n            View all\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n\nexport default function GovernanceProposals() {\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div>GovernanceProposals @todo</div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function goToNewProposal(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    history.push('/governance-proposal');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Governance</h2>\n          <button className=\"titlebar__action\" onClick={goToNewProposal}>\n            New Proposal\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import Web3 from 'web3';\n\nimport {DaoConstants} from './enums';\n// import {AclFlag} from './types';\n\nexport function getAdapterOrExtensionId(adapterName: DaoConstants): string {\n  return sha3(adapterName) as string;\n}\n\n/**\n * getConfigurationABIFunction()\n *\n * Returns the ABI functions used to configure adapters\n */\nexport function getConfigurationABIFunction(): Record<DaoConstants, string> {\n  return {\n    [DaoConstants.BANK]: 'configureExtension', //@todo `configureExtension` comes from the DaoFactory\n    [DaoConstants.CONFIGURATION]: 'submitConfigurationProposal',\n    [DaoConstants.DISTRIBUTE]: '', //@todo\n    [DaoConstants.FINANCING]: 'createFinancingRequest',\n    [DaoConstants.GUILDKICK]: 'submitKickProposal',\n    [DaoConstants.MANAGING]: 'createAdapterChangeRequest',\n    [DaoConstants.OFFCHAINVOTING]: 'configureDao',\n    [DaoConstants.ONBOARDING]: 'configureDao',\n    [DaoConstants.RAGEQUIT]: 'ragequit',\n    [DaoConstants.TRIBUTE]: 'configureDao',\n    [DaoConstants.VOTING]: 'configureDao',\n    [DaoConstants.WITHDRAW]: 'withdraw',\n  };\n}\n\n/**\n * getAccessControlLayer\n *\n * @param adapterName\n */\nexport function getAccessControlLayer(\n  adapterName: string\n): Record<string, any> {\n  const adapterFlags: Record<DaoConstants, any> = {\n    [DaoConstants.BANK]: {},\n    [DaoConstants.CONFIGURATION]: {\n      SUBMIT_PROPOSAL: true,\n      PROCESS_PROPOSAL: true,\n      SPONSOR_PROPOSAL: true,\n      SET_CONFIGURATION: true,\n    },\n    [DaoConstants.DISTRIBUTE]: {\n      SUBMIT_PROPOSAL: true,\n      SPONSOR_PROPOSAL: true,\n      PROCESS_PROPOSAL: true,\n      INTERNAL_TRANSFER: true,\n    },\n    [DaoConstants.TRIBUTE]: {\n      SUBMIT_PROPOSAL: true,\n      SPONSOR_PROPOSAL: true,\n      PROCESS_PROPOSAL: true,\n      NEW_MEMBER: true,\n      ADD_TO_BALANCE: true,\n      REGISTER_NEW_TOKEN: true,\n    },\n    [DaoConstants.FINANCING]: {\n      SUBMIT_PROPOSAL: true,\n      SPONSOR_PROPOSAL: true,\n      PROCESS_PROPOSAL: true,\n      ADD_TO_BALANCE: true,\n      SUB_FROM_BALANCE: true,\n    },\n    [DaoConstants.GUILDKICK]: {\n      SUBMIT_PROPOSAL: true,\n      SPONSOR_PROPOSAL: true,\n      PROCESS_PROPOSAL: true,\n      SUB_FROM_BALANCE: true,\n      ADD_TO_BALANCE: true,\n      JAIL_MEMBER: true,\n      UNJAIL_MEMBER: true,\n      INTERNAL_TRANSFER: true,\n    },\n    [DaoConstants.MANAGING]: {\n      SUBMIT_PROPOSAL: true,\n      PROCESS_PROPOSAL: true,\n      SPONSOR_PROPOSAL: true,\n      REMOVE_ADAPTER: true,\n      ADD_ADAPTER: true,\n    },\n    [DaoConstants.OFFCHAINVOTING]: {},\n    [DaoConstants.ONBOARDING]: {\n      SUBMIT_PROPOSAL: true,\n      SPONSOR_PROPOSAL: true,\n      PROCESS_PROPOSAL: true,\n      ADD_TO_BALANCE: true,\n      UPDATE_DELEGATE_KEY: true,\n      NEW_MEMBER: true,\n    },\n    [DaoConstants.RAGEQUIT]: {\n      SUB_FROM_BALANCE: true,\n      JAIL_MEMBER: true,\n      UNJAIL_MEMBER: true,\n      INTERNAL_TRANSFER: true,\n    },\n    [DaoConstants.VOTING]: {},\n    [DaoConstants.WITHDRAW]: {\n      WITHDRAW: true,\n      SUB_FROM_BALANCE: true,\n    },\n  };\n\n  const flags = adapterFlags[adapterName];\n\n  return {acl: accessFlags(flags)};\n}\n\n/**\n *   === INTERNAL HELPER FUNCTIONS ===\n */\n\n/**\n * accessFlags()\n *\n * @param flags\n */\nfunction accessFlags(flags: Record<string, boolean>): number {\n  const values = [\n    flags.ADD_ADAPTER,\n    flags.REMOVE_ADAPTER,\n    flags.JAIL_MEMBER,\n    flags.UNJAIL_MEMBER,\n    flags.SUBMIT_PROPOSAL,\n    flags.SPONSOR_PROPOSAL,\n    flags.PROCESS_PROPOSAL,\n    flags.UPDATE_DELEGATE_KEY,\n    flags.SET_CONFIGURATION,\n    flags.ADD_EXTENSION,\n    flags.REMOVE_EXTENSION,\n    flags.NEW_MEMBER,\n  ];\n\n  return entry(values) as number;\n}\n\n/**\n * sha3()\n *\n * @returns string | null\n * @param value\n */\nfunction sha3(value: string): string | null {\n  return Web3.utils.sha3(value);\n}\n\n/**\n * entry()\n *\n * @param values\n */\nfunction entry(values: Boolean[]): number {\n  return values\n    .map((v: any, idx: number) => (v !== undefined ? 2 ** idx : 0))\n    .reduce((a: any, b: any) => a + b);\n}\n","import {DaoConstants} from './enums';\nimport {getAdapterOrExtensionId} from './helpers';\n\nimport {\n  DEFAULT_CHAIN,\n  BANK_EXTENSION_CONTRACT_ADDRESS,\n  CONFIGURATION_CONTRACT_ADDRESS,\n  FINANCING_CONTRACT_ADDRESS,\n  GUILDKICK_CONTRACT_ADDRESS,\n  MANAGING_CONTRACT_ADDRESS,\n  ONBOARDING_CONTRACT_ADDRESS,\n  RAGEQUIT_CONTRACT_ADDRESS,\n  TRIBUTE_CONTRACT_ADDRESS,\n  VOTING_CONTRACT_ADDRESS,\n  WITHDRAW_CONTRACT_ADDRESS,\n  OFFCHAINVOTING_CONTRACT_ADDRESS,\n  DISTRIBUTE_CONTRACT_ADDRESS,\n} from '../../config';\n\ntype AdapterProps = {\n  adapterId?: string;\n  extensionId?: string;\n  name: string;\n  contractAddress: string;\n  description: string;\n};\n\nexport type AdaptersAndExtensionsType = {\n  isExtension?: boolean;\n  options?: Omit<\n    AdapterProps,\n    'adapterId' | 'extensionId' | 'name' | 'description' | 'contractAddress'\n  >;\n  optionDefaultTarget?: DaoConstants;\n} & Partial<AdapterProps>;\n\n/**\n * @note README [IMPORTANT]\n *\n *    HOW TO ADD A NEW DEFAULT ADAPTER OR EXTENSION\n *\n * 1. Add the new contract address to the `./src/config.ts`\n *    list ie: <NAME-OF-NEW-CONTRACT>_CONTRACT_ADDRESS\n *\n * 2. Create a new object in the following variable `defaultAdaptersAndExtensions`\n *    - Extensions: must have the key/value pair set `isExtension: true`\n *    - Choosing an adapter/extension from a group: must be defined within a nested `options` key\n */\nexport const defaultAdaptersAndExtensions: AdaptersAndExtensionsType[] = [\n  {\n    isExtension: true,\n    name: DaoConstants.BANK,\n    extensionId: getAdapterOrExtensionId(DaoConstants.BANK),\n    contractAddress: BANK_EXTENSION_CONTRACT_ADDRESS[DEFAULT_CHAIN],\n    description:\n      'Adds the banking capabilities to the DAO, and keeps track of the DAO accounts and internal token balances.',\n  },\n  {\n    name: DaoConstants.CONFIGURATION,\n    adapterId: getAdapterOrExtensionId(DaoConstants.CONFIGURATION),\n    contractAddress: CONFIGURATION_CONTRACT_ADDRESS[DEFAULT_CHAIN],\n    description:\n      'Manages storing and retrieving per-DAO settings required by shared adapters.',\n  },\n  {\n    name: DaoConstants.DISTRIBUTE,\n    adapterId: getAdapterOrExtensionId(DaoConstants.DISTRIBUTE),\n    contractAddress: DISTRIBUTE_CONTRACT_ADDRESS[DEFAULT_CHAIN],\n    description:\n      'Allows the members to distribute funds to one or all members of the DAO.',\n  },\n  {\n    name: DaoConstants.FINANCING,\n    adapterId: getAdapterOrExtensionId(DaoConstants.FINANCING),\n    contractAddress: FINANCING_CONTRACT_ADDRESS[DEFAULT_CHAIN],\n    description:\n      'Allows individuals and/or organizations to request funds to finance their projects, and the members of the DAO have the power to vote and decide which projects should be funded.',\n  },\n  {\n    name: DaoConstants.GUILDKICK,\n    adapterId: getAdapterOrExtensionId(DaoConstants.GUILDKICK),\n    contractAddress: GUILDKICK_CONTRACT_ADDRESS[DEFAULT_CHAIN],\n    description:\n      'Gives the members the freedom to choose which individuals or organizations should really be part of the DAO.',\n  },\n  {\n    name: DaoConstants.MANAGING,\n    adapterId: getAdapterOrExtensionId(DaoConstants.MANAGING),\n    contractAddress: MANAGING_CONTRACT_ADDRESS[DEFAULT_CHAIN],\n    description:\n      'Enhances the DAO capabilities by adding/updating the DAO Adapters through a voting process.',\n  },\n  {\n    name: DaoConstants.ONBOARDING,\n    adapterId: getAdapterOrExtensionId(DaoConstants.ONBOARDING),\n    contractAddress: ONBOARDING_CONTRACT_ADDRESS[DEFAULT_CHAIN],\n    description:\n      'Triggers the process of minting internal tokens in exchange of a specific token at a fixed price.',\n  },\n  {\n    name: DaoConstants.RAGEQUIT,\n    adapterId: getAdapterOrExtensionId(DaoConstants.RAGEQUIT),\n    contractAddress: RAGEQUIT_CONTRACT_ADDRESS[DEFAULT_CHAIN],\n    description:\n      'Gives the members the freedom to choose when it is the best time to exit the DAO for any given reason.',\n  },\n  {\n    name: DaoConstants.TRIBUTE,\n    adapterId: getAdapterOrExtensionId(DaoConstants.TRIBUTE),\n    contractAddress: TRIBUTE_CONTRACT_ADDRESS[DEFAULT_CHAIN],\n    description:\n      'Allows potential and existing DAO members to contribute any amount of ERC-20 tokens to the DAO in exchange for any amount of DAO internal tokens.',\n  },\n  {\n    options: [\n      {\n        name: DaoConstants.VOTING,\n        displayName: DaoConstants.OFFCHAINVOTING,\n        adapterId: getAdapterOrExtensionId(DaoConstants.VOTING),\n        contractAddress: OFFCHAINVOTING_CONTRACT_ADDRESS[DEFAULT_CHAIN],\n        description:\n          'Adds the offchain voting governance process to the DAO to support gasless voting.',\n      },\n      {\n        name: DaoConstants.VOTING,\n        displayName: DaoConstants.VOTING,\n        adapterId: getAdapterOrExtensionId(DaoConstants.VOTING),\n        contractAddress: VOTING_CONTRACT_ADDRESS[DEFAULT_CHAIN],\n        description:\n          'Adds the simple on chain voting governance process to the DAO.',\n      },\n    ],\n    optionDefaultTarget: DaoConstants.VOTING,\n  },\n  {\n    name: DaoConstants.WITHDRAW,\n    adapterId: getAdapterOrExtensionId(DaoConstants.WITHDRAW),\n    contractAddress: WITHDRAW_CONTRACT_ADDRESS[DEFAULT_CHAIN],\n    description:\n      'Allows the members to withdraw their funds from the DAO bank.',\n  },\n];\n","import {useCallback, useEffect, useState} from 'react';\nimport {useLazyQuery} from '@apollo/react-hooks';\nimport {useSelector} from 'react-redux';\n\nimport {StoreState} from '../../../store/types';\nimport {AsyncStatus} from '../../../util/types';\nimport {Adapters, Extensions} from '../types';\n\nimport {GET_ADAPTERS_AND_EXTENSIONS} from '../../../gql';\n\nimport {\n  defaultAdaptersAndExtensions,\n  AdaptersAndExtensionsType,\n} from '../config';\nimport {GQL_QUERY_POLLING_INTERVAL} from '../../../config';\n\nimport {DaoConstants} from '../enums';\n\nexport type AdapterType = {\n  __typename: string;\n  id: string;\n  acl: string;\n  adapterId: string;\n  adapterAddress: string;\n};\n\nexport type ExtensionType = {\n  __typename: string;\n  id: string;\n  extensionId: string;\n  extensionAddress: string;\n};\n\ntype UseAdaptersOrExtensionsReturn = {\n  adapterExtensionStatus: AsyncStatus;\n  getAdapterOrExtensionFromRedux: (\n    adapterName: DaoConstants\n  ) => Record<string, any>;\n  registeredAdaptersOrExtensions: AdapterType[] | undefined;\n  unRegisteredAdaptersOrExtensions: Adapters[] | undefined;\n};\n\nexport type AdaptersType = AdapterType & Adapters;\nexport type ExtensionsType = ExtensionType & Extensions;\n\n/**\n * useAdaptersOrExtensions\n *\n * This component queries The Graph API to get the daos adapters.\n * It returns the available adapters filtered by a search on the current dao.\n *\n * @returns {UseAdaptersOrExtensionsReturn}\n */\nexport function useAdaptersOrExtensions(): UseAdaptersOrExtensionsReturn {\n  /**\n   * Selectors\n   */\n  const {DaoRegistryContract, ...adapterExtensionContracts} = useSelector(\n    (s: StoreState) => s.contracts\n  );\n\n  /**\n   * Their hooks\n   */\n  const [\n    getRegisteredAdaptersAndExtensions,\n    {called, data, error},\n  ] = useLazyQuery(GET_ADAPTERS_AND_EXTENSIONS, {\n    pollInterval: GQL_QUERY_POLLING_INTERVAL,\n    variables: {daoAddress: DaoRegistryContract?.contractAddress.toLowerCase()},\n  });\n\n  /**\n   * State\n   */\n  const [\n    registeredAdaptersOrExtensions,\n    setRegisteredAdaptersOrExtensions,\n  ] = useState<AdapterType[] | undefined>();\n  const [\n    unRegisteredAdaptersOrExtensions,\n    setUnRegisteredAdaptersOrExtensions,\n  ] = useState<Adapters[] | undefined>();\n  const [\n    adapterExtensionStatus,\n    setAdapterExtensionStatus,\n  ] = useState<AsyncStatus>(AsyncStatus.STANDBY);\n\n  const getAdaptersAndExtensionsCached = useCallback(\n    getAdaptersAndExtensions,\n    []\n  );\n\n  useEffect(() => {\n    if (!called) {\n      getRegisteredAdaptersAndExtensions();\n    }\n  }, [called, getRegisteredAdaptersAndExtensions]);\n\n  // Get adapters and extensions from GQL\n  useEffect(() => {\n    if (!DaoRegistryContract?.contractAddress) return;\n\n    try {\n      setAdapterExtensionStatus(AsyncStatus.PENDING);\n\n      if (data) {\n        // extract adapters and extensions from gql data\n        const {adapters, extensions} = data.molochv3S[0] as Record<string, any>;\n\n        // create a list of registered and un-registered adapters and extensions\n        const {\n          registeredList,\n          unRegisteredList,\n        } = getAdaptersAndExtensionsCached(adapters, extensions);\n\n        setRegisteredAdaptersOrExtensions(registeredList);\n        setUnRegisteredAdaptersOrExtensions(unRegisteredList);\n\n        // done; lets set status to fulfilled\n        setAdapterExtensionStatus(AsyncStatus.FULFILLED);\n      } else {\n        if (error) {\n          throw new Error(error.message);\n        }\n      }\n    } catch (error) {\n      setRegisteredAdaptersOrExtensions(undefined);\n      setUnRegisteredAdaptersOrExtensions(undefined);\n\n      setAdapterExtensionStatus(AsyncStatus.REJECTED);\n    }\n  }, [DaoRegistryContract, data, error, getAdaptersAndExtensionsCached]);\n\n  /**\n   * getAdaptersAndExtensions\n   *\n   * Find all registered and un-registered adapters and extensions\n   *\n   * @param registeredDaoAdapters\n   * @param registeredDaoExtensions\n   */\n  function getAdaptersAndExtensions(\n    registeredDaoAdapters: any,\n    registeredDaoExtensions: any\n  ): Record<string, any> {\n    //@todo types\n\n    let registeredList: AdaptersAndExtensionsType[] = [];\n    let unRegisteredList: AdaptersAndExtensionsType[] = [];\n\n    const getAdapterFromGql = (adapterId: string) => {\n      return registeredDaoAdapters.find(\n        (adapter: AdaptersAndExtensionsType) => {\n          return adapter.adapterId?.toLowerCase() === adapterId?.toLowerCase();\n        }\n      );\n    };\n\n    const getExtensionFromGql = (extensionId: string) => {\n      return registeredDaoExtensions.find(\n        (extension: AdaptersAndExtensionsType) => {\n          return (\n            extension.extensionId?.toLowerCase() === extensionId?.toLowerCase()\n          );\n        }\n      );\n    };\n\n    defaultAdaptersAndExtensions.forEach(\n      (adapterOrExtension: AdaptersAndExtensionsType | any) => {\n        if (adapterOrExtension?.isExtension) {\n          // Add an extenaion\n\n          const gqlExtension = getExtensionFromGql(\n            adapterOrExtension.extensionId\n          );\n\n          if (gqlExtension) {\n            registeredList.push({\n              ...gqlExtension,\n              ...adapterOrExtension,\n              name: adapterOrExtension.name as DaoConstants,\n              description: adapterOrExtension.description,\n            } as AdaptersAndExtensionsType);\n          } else {\n            unRegisteredList.push({\n              ...adapterOrExtension,\n              name: adapterOrExtension.name as DaoConstants,\n              description: adapterOrExtension.description,\n            } as AdaptersAndExtensionsType);\n          }\n        } else if (adapterOrExtension?.options) {\n          // Check options for adapters and extensions\n\n          // dry-run check to see if any of the options have already been registered\n          const maybeSomeAdapters = adapterOrExtension?.options.some(\n            (s: any) => {\n              return !s.isExtension && getAdapterFromGql(s.adapterId);\n            }\n          );\n\n          // dry-run check to see if any of the options have already been registered\n          const maybeSomeExtensions = adapterOrExtension?.options.some(\n            (s: any) => {\n              return s.isExtension && getExtensionFromGql(s.extensionId);\n            }\n          );\n\n          // this means an adapter or extension has already been\n          // added from the options\n          if (maybeSomeAdapters || maybeSomeExtensions) {\n            let shouldSkip = false;\n\n            adapterOrExtension?.options?.forEach((option: any) => {\n              if (shouldSkip) {\n                return;\n              }\n\n              if (option?.isExtension) {\n                const gqlExtension = getExtensionFromGql(option.extensionId);\n\n                if (gqlExtension) {\n                  registeredList.push({\n                    ...gqlExtension,\n                    ...option,\n                    name: option.name as DaoConstants,\n                    description: option.description,\n                  } as AdaptersAndExtensionsType);\n\n                  shouldSkip = true;\n                  return;\n                } else {\n                  unRegisteredList.push({\n                    ...option,\n                    name: option.name as DaoConstants,\n                    description: option.description,\n                  } as AdaptersAndExtensionsType);\n                }\n              } else {\n                const gqlAdapter = getAdapterFromGql(option.adapterId);\n                if (gqlAdapter) {\n                  registeredList.push({\n                    ...gqlAdapter,\n                    ...option,\n                    name: option.name as DaoConstants,\n                    description: option.description,\n                  } as AdaptersAndExtensionsType);\n\n                  shouldSkip = true;\n                  return;\n                } else {\n                  unRegisteredList.push({\n                    ...option,\n                    name: option.name as DaoConstants,\n                    description: option.description,\n                  } as AdaptersAndExtensionsType);\n                }\n              }\n            });\n          } else {\n            // just add the options as a nested object;\n            // this will trigger the dropdown to display the options\n            unRegisteredList.push(adapterOrExtension);\n          }\n        } else {\n          // Add an adapter\n          const gqlAdapter = getAdapterFromGql(adapterOrExtension.adapterId);\n\n          if (gqlAdapter) {\n            registeredList.push({\n              ...gqlAdapter,\n              ...adapterOrExtension,\n              name: adapterOrExtension.name as DaoConstants,\n              description: adapterOrExtension.description,\n            } as AdaptersAndExtensionsType);\n          } else {\n            unRegisteredList.push({\n              ...adapterOrExtension,\n              name: adapterOrExtension.name as DaoConstants,\n              description: adapterOrExtension.description,\n            } as AdaptersAndExtensionsType);\n          }\n        }\n      }\n    );\n\n    return {\n      registeredList,\n      unRegisteredList,\n    };\n  }\n\n  /**\n   * getAdapterOrExtensionFromRedux\n   *\n   * @param adapterOrExtensionName DaoConstants\n   */\n  function getAdapterOrExtensionFromRedux(\n    adapterOrExtensionName: DaoConstants\n  ): Record<string, any> {\n    return Object.keys(adapterExtensionContracts)\n      .map((ae) => adapterExtensionContracts[ae])\n      .filter((ae) => ae) // filter out any `null` objects\n      .filter((ae) => ae.adapterOrExtensionName === adapterOrExtensionName)[0];\n  }\n\n  return {\n    adapterExtensionStatus,\n    getAdapterOrExtensionFromRedux,\n    registeredAdaptersOrExtensions,\n    unRegisteredAdaptersOrExtensions,\n  };\n}\n","import Web3 from 'web3';\n\nimport {FormFieldErrors} from '../../../util/enums';\nimport {useIsDefaultChain} from '../../web3/hooks';\n\ntype ValidationType =\n  | 'address'\n  | 'bytes32'\n  | 'bytes32[]'\n  | 'uint256'\n  | 'uint256[]';\n\nexport type ParamInputType = string | string[] | number | number[];\n\nexport enum ParamType {\n  ADDRESS = 'address',\n  BYTES32 = 'bytes32',\n  BYTES32_ARRAY = 'bytes32[]',\n  UINT256 = 'uint256',\n  UINT256_ARRAY = 'uint256[]',\n}\n\ntype UseValidationReturn = {\n  isParamInputValid: (\n    paramInput: ParamInputType,\n    paramType: ValidationType\n  ) => boolean;\n  getFormFieldError: (paramType: ValidationType) => string | FormFieldErrors;\n  formatInputByType: (inputValue: any, inputType: ParamType) => string;\n};\n\n/**\n * useValidation\n *\n * This hook validates the input values for the ABI parameters.\n *\n * @returns {UseValidationReturn}\n */\nexport function useValidation(): UseValidationReturn {\n  /**\n   * Hooks\n   */\n  const {defaultChain} = useIsDefaultChain();\n\n  function isParamInputValid(\n    paramInput: ParamInputType,\n    paramType: ValidationType\n  ): boolean {\n    const parameter: string = paramInput.toString();\n\n    const isValid: boolean =\n      paramType === ParamType.ADDRESS\n        ? isAddressValid(parameter)\n        : paramType === ParamType.BYTES32\n        ? isBytes32Valid(parameter)\n        : paramType === ParamType.BYTES32_ARRAY\n        ? isBytes32ArrayValid(parameter)\n        : paramType === ParamType.UINT256\n        ? isUint256Valid(parameter)\n        : paramType === ParamType.UINT256_ARRAY\n        ? isUint256ArrayValid(parameter)\n        : true;\n\n    return isValid;\n  }\n\n  function getFormFieldError(\n    paramType: ValidationType\n  ): string | FormFieldErrors {\n    return paramType === ParamType.ADDRESS\n      ? FormFieldErrors.INVALID_ETHEREUM_ADDRESS\n      : paramType === ParamType.BYTES32\n      ? FormFieldErrors.INVALID_BYTES32\n      : paramType === ParamType.BYTES32_ARRAY\n      ? FormFieldErrors.INVALID_BYTES32_ARRAY\n      : paramType === ParamType.UINT256\n      ? FormFieldErrors.INVALID_NUMBER\n      : paramType === ParamType.UINT256_ARRAY\n      ? FormFieldErrors.INVALID_NUMBER_ARRAY\n      : FormFieldErrors.REQUIRED;\n  }\n\n  /**\n   * isAddressValid()\n   *\n   * @returns boolean\n   * @param parameter string\n   */\n  function isAddressValid(parameter: string): boolean {\n    try {\n      if (!parameter) return false;\n\n      return (\n        Web3.utils.checkAddressChecksum(parameter, defaultChain) ||\n        Web3.utils.isAddress(parameter, defaultChain)\n      );\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * isBytes32Valid()\n   *\n   * @returns boolean\n   * @param parameter string\n   */\n  function isBytes32Valid(parameter: string): boolean {\n    try {\n      if (!parameter) return false;\n\n      return parameter.length === 66 && Web3.utils.isHex(parameter);\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * isBytes32ArrayValid()\n   *\n   * @returns boolean\n   * @param parameter string\n   */\n  function isBytes32ArrayValid(parameter: string): boolean {\n    try {\n      return Array.from(parameter.split(',')).every(\n        (p) => p.length === 66 && Web3.utils.isHex(p)\n      );\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * isUint256Valid\n   *\n   * @returns boolean\n   * @param parameter string\n   */\n  function isUint256Valid(parameter: string): boolean {\n    return !isNaN(Number(parameter));\n  }\n\n  /**\n   * isUint256ArrayValid()\n   *\n   * @returns boolean\n   * @param parameter string\n   */\n  function isUint256ArrayValid(parameter: string): boolean {\n    return Array.from(parameter.split(',')).every((p) => Number(p));\n  }\n\n  function formatInputByType(inputValue: any, inputType: any) {\n    const formatBytes32Array = (): string[] =>\n      Array.from(inputValue.split(','));\n    const formatUint256Array = (): number[] => {\n      return Array.from(inputValue.split(',').map((i: string) => Number(i)));\n    };\n\n    return inputType === ParamType.BYTES32_ARRAY\n      ? formatBytes32Array()\n      : inputType === ParamType.UINT256_ARRAY\n      ? formatUint256Array()\n      : inputType === ParamType.UINT256\n      ? Number(inputValue)\n      : inputValue;\n  }\n\n  return {\n    isParamInputValid,\n    getFormFieldError,\n    formatInputByType,\n  };\n}\n","import React, {Fragment} from 'react';\n\ninterface IProps {\n  checked: boolean;\n  id: string;\n  label: string;\n  name: string;\n  onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\ntype OtherProps = {[key: string]: any; size?: CheckboxSize};\n\nexport enum CheckboxSize {\n  LARGE = 'large',\n  SMALL = 'small',\n}\n\nexport default function Checkbox({size, ...props}: IProps & OtherProps) {\n  return (\n    <Fragment>\n      <input\n        {...props}\n        aria-checked={props.checked}\n        checked={props.checked}\n        className={`checkbox-input ${props.className || ''} `}\n        id={props.id}\n        name={props.name}\n        onChange={props.onChange}\n        type=\"checkbox\"\n      />\n\n      <label className={`checkbox-label`} htmlFor={props.id}>\n        <span className={`checkbox-box ${size || CheckboxSize.SMALL}`}></span>\n        <span className={`checkbox-text`}>{props.label}</span>\n      </label>\n    </Fragment>\n  );\n}\n","import {useCallback, useEffect, useState} from 'react';\nimport {useSelector} from 'react-redux';\n\nimport {StoreState} from '../../store/types';\nimport {AsyncStatus} from '../../util/types';\nimport {\n  AddAdapterArguments,\n  AddExtensionArguments,\n  AdaptersOrExtensions,\n} from './types';\n\nimport {DaoConstants} from './enums';\n\nimport {\n  defaultAdaptersAndExtensions,\n  AdaptersAndExtensionsType,\n} from './config';\n\nimport {\n  getAdapterOrExtensionId,\n  getAccessControlLayer,\n  getConfigurationABIFunction,\n} from './helpers';\nimport {getDaoState, DaoState} from '../web3/helpers';\nimport {truncateEthAddress} from '../../util/helpers';\n\nimport {useAdaptersOrExtensions} from './hooks/useAdaptersOrExtensions';\nimport {useDao, useMemberActionDisabled} from '../../hooks';\nimport {useContractSend, useETHGasPrice, useWeb3Modal} from '../web3/hooks';\n\nimport ConfiguratorModal from './ConfigurationModal';\nimport AdapterExtensionSelectTarget from './AdapterOrExtensionSelectTarget';\nimport Checkbox, {CheckboxSize} from '../common/Checkbox';\nimport ErrorMessageWithDetails from '../common/ErrorMessageWithDetails';\nimport Loader from '../feedback/Loader';\n\nenum WhyDisableModalTitles {\n  FINALIZED_REASON = 'Why is finalizing disabled?',\n  CONFIGURATION_REASON = 'Why are configurations disabled?',\n}\n/**\n * AdapterOrExtensionManager()\n *\n * This components lists all the registered and unregistered adapters/extensions\n * from the list of available adapters in the `defaultAdaptersAndExtensions` in `./config.ts`\n *\n * It allows for adding unreigsterd adapters and extensions, configurating\n * registered adapters and extensions, and finalizing the DAO.\n *\n * @note it is not possible to manage the adapters/extensions if the DAO is finalized.\n */\nexport default function AdapterOrExtensionManager() {\n  /**\n   * Selectors\n   */\n  const {DaoRegistryContract, DaoFactoryContract} = useSelector(\n    (state: StoreState) => state.contracts\n  );\n\n  /**\n   * States\n   */\n  const [abiMethodName, setABIMethodName] = useState<string>('');\n  const [daoState, setDaoState] = useState<DaoState>();\n  const [isDone, setIsDone] = useState<Record<string, boolean> | undefined>();\n  const [inputParameters, setInputParameters] = useState<Record<string, any>>();\n  const [submitError, setSubmitError] = useState<Error>();\n  const [openModal, setOpenModal] = useState<boolean>(false);\n  const [selectAll, setSelectAll] = useState<boolean>(false);\n  const [selectionCount, setSelectionCount] = useState<number>(0);\n  const [selections, setSelections] = useState<\n    Record<string, boolean> | undefined\n  >();\n  const [\n    configureAdapterOrExtension,\n    setConfigureAdapterOrExtension,\n  ] = useState<AdaptersOrExtensions | undefined>();\n  const [isInProcess, setIsInProcess] = useState<\n    Record<string, boolean> | undefined\n  >();\n  const [whyDisabledReason, setWhyDisabledReason] = useState<\n    WhyDisableModalTitles | undefined\n  >();\n\n  /**\n   * Hooks\n   */\n  const {account} = useWeb3Modal();\n  const {\n    adapterExtensionStatus,\n    getAdapterOrExtensionFromRedux,\n    registeredAdaptersOrExtensions,\n    unRegisteredAdaptersOrExtensions,\n  } = useAdaptersOrExtensions();\n  const {dao, gqlError} = useDao();\n\n  const {\n    // txError,\n    // txEtherscanURL,\n    // txIsPromptOpen,\n    txSend,\n    // txStatus,\n  } = useContractSend();\n  const gasPrices = useETHGasPrice();\n  const {\n    isDisabled,\n    openWhyDisabledModal,\n    setOtherDisabledReasons,\n    WhyDisabledModal,\n  } = useMemberActionDisabled();\n\n  /**\n   * Variables\n   */\n  const isDAOExisting: Record<string, any> | undefined = dao;\n  const isDAOReady: boolean = daoState === DaoState.READY;\n  // grammatically naming is incorrect :)\n  const isAdaptersUnavailable: boolean =\n    adapterExtensionStatus === AsyncStatus.REJECTED &&\n    registeredAdaptersOrExtensions === undefined &&\n    unRegisteredAdaptersOrExtensions === undefined;\n  const isLoadingAdapters: boolean =\n    adapterExtensionStatus === AsyncStatus.PENDING;\n\n  // @todo track the prior selection of a dropdown target\n  // let priorSelectedTargetOption: DaoConstants | null = null;\n\n  const checkDaoStateCached = useCallback(checkDaoState, [\n    DaoRegistryContract,\n    dao?.name,\n    setOtherDisabledReasons,\n  ]);\n\n  // Check the Dao state\n  useEffect(() => {\n    checkDaoStateCached();\n  }, [checkDaoStateCached, DaoRegistryContract]);\n\n  // Sets the initial checkbox selections for non-registered adapters to `false`\n  // and sets the `Select All` checkbox to disabled if no adapters are available\n  useEffect(() => {\n    // Set the select all check to false by default\n    setSelectAll(false);\n\n    if (!unRegisteredAdaptersOrExtensions) return;\n\n    unRegisteredAdaptersOrExtensions &&\n      unRegisteredAdaptersOrExtensions?.forEach(\n        (adapterOrExtension: Record<string, any>) => {\n          // only add a selection if it doesn't have nested `options`\n          !adapterOrExtension?.options &&\n            setSelections((prevState: Record<string, boolean> | undefined) => ({\n              ...prevState,\n              [adapterOrExtension.name]: false,\n            }));\n        }\n      );\n  }, [isDisabled, unRegisteredAdaptersOrExtensions]);\n\n  // Updates checkbox selection counter when user selects a checkbox\n  useEffect(() => {\n    selections &&\n      setSelectionCount(\n        Object.values(selections).filter((adapter: boolean) => adapter === true)\n          .length\n      );\n  }, [selections]);\n\n  async function checkDaoState() {\n    if (!DaoRegistryContract) {\n      return;\n    }\n\n    try {\n      const finalizedMessage = `${dao?.name} is already finalized`;\n\n      const daoRegistryState = await getDaoState(DaoRegistryContract.instance);\n      setDaoState(daoRegistryState);\n\n      daoRegistryState === DaoState.READY &&\n        setOtherDisabledReasons([finalizedMessage]);\n    } catch (error) {\n      setDaoState(undefined);\n    }\n  }\n\n  /**\n   * handleAddAdapter\n   *\n   * Handles adding `adapter`\n   *\n   * @param adapter\n   */\n  function handleAddAdapter(adapter: Record<string, any>): void {\n    const adapterOrExtensionAddress = new Promise<any>((resolve, reject) => {\n      try {\n        // Get contract address\n        const {contractAddress} = getAdapterOrExtensionFromRedux(\n          adapter.name as DaoConstants\n        );\n\n        resolve(contractAddress);\n      } catch (error) {\n        // try and get the default contract address from the arg `adapter`\n        const contractAddress = adapter.contractAddress;\n\n        if (contractAddress) {\n          resolve(contractAddress);\n        } else {\n          reject(error);\n        }\n      }\n    });\n\n    adapterOrExtensionAddress\n      .then((contractAddress: string) => {\n        addAdapterOrExtension(contractAddress, adapter.name, 'ADAPTER');\n      })\n      .catch((error) => {\n        console.warn(\n          `Dao adapter contract not found, try adding the default \"${adapter.name}\" contract`\n        );\n      });\n  }\n\n  /**\n   * handleAddExtension\n   *\n   * Handle adding an `extension`\n   * @param extension\n   */\n  function handleAddExtension(extension: any): void {\n    const adapterOrExtensionAddress = new Promise<any>((resolve, reject) => {\n      try {\n        // Get contract address\n        const {contractAddress} = getAdapterOrExtensionFromRedux(\n          extension.name as DaoConstants\n        );\n\n        resolve(contractAddress);\n      } catch (error) {\n        // try and get the default contract address\n        // from the arg `adapter` or  `extension`\n        const contractAddress = extension.contractAddress;\n\n        if (contractAddress) {\n          resolve(contractAddress);\n        } else {\n          reject(error);\n        }\n      }\n    });\n\n    adapterOrExtensionAddress\n      .then((contractAddress: string) => {\n        addAdapterOrExtension(contractAddress, extension.name, 'EXTENSION');\n      })\n      .catch((error) => {\n        console.warn(\n          `Dao extension contract not found, try adding the default \"${extension.name}\" contract`,\n          error\n        );\n      });\n  }\n\n  async function addAdapterOrExtension(\n    adapterOrExtensionAddress: string,\n    adapterOrExtensionName: DaoConstants,\n    adapterOrExtensionType: 'ADAPTER' | 'EXTENSION'\n  ): Promise<void> {\n    setSubmitError(undefined);\n\n    if (!DaoRegistryContract) return;\n\n    try {\n      setIsInProcess((prevState) => ({\n        ...prevState,\n        [adapterOrExtensionName]: true,\n      }));\n\n      if (!adapterOrExtensionAddress) {\n        throw new Error(`${adapterOrExtensionType} address must not be empty`);\n      }\n\n      // 1. Get the bytes32 hash of the adapter name\n      const adapterOrExtensionId = getAdapterOrExtensionId(\n        adapterOrExtensionName\n      );\n\n      // 2. Get adapters access control layer (acl)\n      // these are the functions the adapter will have access to\n      const {acl} = getAccessControlLayer(adapterOrExtensionName);\n\n      // 3. Contract the function arguments base of its type\n      const addAdapterOrExtensionArguments:\n        | AddAdapterArguments\n        | AddExtensionArguments =\n        adapterOrExtensionType === 'ADAPTER'\n          ? [adapterOrExtensionId, adapterOrExtensionAddress, acl]\n          : [adapterOrExtensionId, adapterOrExtensionAddress, account];\n\n      const txArguments = {\n        from: account || '',\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      const txSendMethod =\n        adapterOrExtensionType === 'ADAPTER' ? 'addAdapter' : 'addExtension';\n\n      // Execute contract call for `addAdapter` or `addExtension`\n      await txSend(\n        txSendMethod,\n        DaoRegistryContract.instance.methods,\n        addAdapterOrExtensionArguments,\n        txArguments\n      );\n\n      setIsInProcess((prevState) => ({\n        ...prevState,\n        [adapterOrExtensionName]: false,\n      }));\n      setIsDone((prevState) => ({\n        ...prevState,\n        [adapterOrExtensionName]: true,\n      }));\n\n      // @todo re-initContracts\n    } catch (error) {\n      setIsInProcess((prevState) => ({\n        ...prevState,\n        [adapterOrExtensionName]: false,\n      }));\n\n      const errorMessage = new Error(\n        error && error?.code === 4001\n          ? error.message\n          : `Unable to add ${adapterOrExtensionName} ${adapterOrExtensionType}; ${error}`\n      );\n      setSubmitError(errorMessage);\n    }\n  }\n\n  /**\n   * handleAddSelectedAdapters()\n   *\n   * This function only adds adapters, not extensions\n   */\n  async function handleAddSelectedAdapters(): Promise<void> {\n    setSubmitError(undefined);\n\n    if (!DaoFactoryContract) {\n      throw new Error('DaoFactoryContract not found');\n    }\n\n    try {\n      let adaptersArguments: AddAdapterArguments[] = [];\n\n      // Set the `Add` button states to true for all selected adapters\n      for (const adapterName in selections) {\n        if (selections[adapterName]) {\n          // @todo check for extension\n          // Get adapterOrExtensionId from `defaultAdaptersAndExtensions`\n          const {\n            adapterId,\n          }: AdaptersAndExtensionsType = defaultAdaptersAndExtensions.filter(\n            (a: AdaptersAndExtensionsType) => a.name === adapterName\n          )[0];\n\n          // Get adapter contract address\n          const {contractAddress} = getAdapterOrExtensionFromRedux(\n            adapterName as DaoConstants\n          );\n\n          // Get adapters access control layer (acl)\n          // these are the functions the adapter will have access to\n          const {acl} = getAccessControlLayer(adapterName);\n\n          // skip if adapterId undefined\n          adapterId &&\n            adaptersArguments.push([adapterId, contractAddress, acl]);\n\n          setIsInProcess((prevState) => ({\n            ...prevState,\n            [adapterName]: true,\n          }));\n        }\n      }\n\n      const addAdaptersArguments: [string, AddAdapterArguments[]] = [\n        dao?.daoAddress,\n        adaptersArguments,\n      ];\n\n      const txArguments = {\n        from: account || '',\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      // Execute contract call for `addAdapters`\n      await txSend(\n        'addAdapters',\n        DaoFactoryContract.instance.methods,\n        addAdaptersArguments,\n        txArguments\n      );\n\n      // enable buttons @todo\n      // re-init contracts @todo\n    } catch (error) {\n      const errorMessage = new Error(\n        error && error?.code === 4001\n          ? error.message\n          : `Unable to add adapters; ${error}`\n      );\n      setSubmitError(errorMessage);\n\n      // reset all the checkboxes for the selected adapters\n      checkboxesSelection(false);\n      // reset all the buttons for the selected adapters\n      for (const adapterName in selections) {\n        setIsInProcess((prevState) => ({\n          ...prevState,\n          [adapterName]: false,\n        }));\n      }\n    }\n  }\n\n  /**\n   * configureAdapter\n   *\n   * @param adapter\n   */\n  async function handleConfigure(\n    adapterOrExtension: AdaptersOrExtensions\n  ): Promise<void> {\n    setSubmitError(undefined);\n\n    try {\n      // Get ABI function name\n      const abiFunctionName: string = getConfigurationABIFunction()[\n        adapterOrExtension.name\n      ];\n      // Get adapters/extension ABI\n      const {abi} = getAdapterOrExtensionFromRedux(adapterOrExtension.name);\n      // Get adapters/extension configure function input parameters\n      const {inputs} = abi.filter(\n        (p: Record<string, any>) => p.name === abiFunctionName\n      )[0];\n\n      setABIMethodName(abiFunctionName);\n      setConfigureAdapterOrExtension(adapterOrExtension);\n      setInputParameters(inputs);\n      setOpenModal(true);\n    } catch (error) {\n      const errorMessage = new Error(\n        error && error?.code === 4001\n          ? error.message\n          : `${adapterOrExtension.name} contract not found`\n      );\n      setSubmitError(errorMessage);\n    }\n  }\n\n  /**\n   * confirmFinalizePrompt\n   */\n  function confirmFinalizePrompt(): void {\n    if (window.confirm('Do you really want to finalize this DAO?')) {\n      handleFinalizeDao();\n    }\n  }\n\n  async function handleFinalizeDao(): Promise<void> {\n    window.alert(`Sorry, finalizing isn't ready yet!`);\n\n    try {\n      // get getDaoState when done\n    } catch (error) {}\n  }\n\n  // Handles the select all checkbox event\n  function handleOnChange(event: React.ChangeEvent<HTMLInputElement>): void {\n    checkboxesSelection(event.target.checked);\n  }\n\n  function checkboxesSelection(checked: boolean): void {\n    // Update the select all checkbox\n    setSelectAll(checked);\n\n    // Update all un-registered adapter/extension\n    for (const key in selections) {\n      setSelections((s) => ({\n        ...s,\n        [key]: checked,\n      }));\n    }\n  }\n\n  function handleSelectTargetChange({event, selectedTargetOption}: any): void {\n    // update the prior selected target to track the change\n    // so we can remove the old target from checkbox `selections`\n\n    // @todo Remove previously selected target if its from an `options` list\n\n    setSelections((s) => ({\n      ...s,\n      [selectedTargetOption]: event.target.checked,\n    }));\n  }\n\n  function renderDaoName() {\n    if (!dao && gqlError) {\n      window.scrollTo({\n        top: 0,\n        left: 200,\n        behavior: 'smooth',\n      });\n\n      return (\n        <ErrorMessageWithDetails\n          error={gqlError}\n          renderText=\"Something went wrong\"\n        />\n      );\n    }\n\n    if (dao) {\n      return (\n        <h3>\n          {dao.name} <small>{truncateEthAddress(dao.daoAddress, 7)}</small>\n        </h3>\n      );\n    }\n  }\n\n  function renderErrorMessage() {\n    if (submitError) {\n      window.scrollTo({\n        top: 0,\n        left: 200,\n        behavior: 'smooth',\n      });\n\n      return (\n        <ErrorMessageWithDetails\n          error={submitError}\n          renderText=\"Something went wrong\"\n        />\n      );\n    } else {\n      return <></>;\n    }\n  }\n\n  return (\n    <div className=\"adaptermanager\">\n      <h2>Adapter/Extension Manager</h2>\n      {renderDaoName()}\n      {renderErrorMessage()}\n      <p>\n        Nulla aliquet porttitor venenatis. Donec a dui et dui fringilla\n        consectetur id nec massa. Aliquam erat volutpat. Sed ut dui ut lacus\n        dictum fermentum vel tincidunt neque. Sed sed lacinia...\n      </p>\n      <div className=\"adapter-extension__selection\">\n        <div>\n          <Checkbox\n            id=\"selectAll\"\n            label={`${selectionCount} selected`}\n            checked={selectAll === true}\n            disabled={\n              isAdaptersUnavailable ||\n              isDisabled || // connected user is not an active member\n              unRegisteredAdaptersOrExtensions?.length === 0 || // nothing left to register\n              !isDAOExisting\n              /* @todo \n              - disable when selection is processing \n              - disable when there are no more unused adapters to select\n              */\n            }\n            name=\"selectAll\"\n            size={CheckboxSize.LARGE}\n            onChange={handleOnChange}\n          />\n        </div>\n        <div>\n          <button\n            className=\"button--secondary\"\n            disabled={selectionCount === 0 || isDisabled}\n            onClick={handleAddSelectedAdapters}>\n            Add selected\n          </button>\n        </div>\n      </div>\n\n      {isLoadingAdapters && <Loader text=\"Loading data from subgraph...\" />}\n      {isAdaptersUnavailable && <p>No adapters available</p>}\n\n      {/** UNUSED ADAPTERS AND EXTENSIONS TO ADD */}\n      {isDAOExisting &&\n        unRegisteredAdaptersOrExtensions &&\n        unRegisteredAdaptersOrExtensions?.length > 0 &&\n        unRegisteredAdaptersOrExtensions.map(\n          (adapter: Record<string, any>, idx: number) => (\n            <div className=\"adapter-extension__grid unregistered\" key={idx}>\n              {/** RENDER ADAPTER/EXTENSION DROPDOWN */}\n              {adapter?.options ? (\n                <AdapterExtensionSelectTarget\n                  adapterOrExtension={adapter}\n                  renderCheckboxAction={({selectedTargetOption}) => {\n                    return (\n                      <>\n                        <div className=\"adapter-extension__checkbox\">\n                          <Checkbox\n                            id={selectedTargetOption || 'empty'}\n                            label={''}\n                            checked={\n                              (selectedTargetOption &&\n                                selections &&\n                                selections[selectedTargetOption] === true) ||\n                              false\n                            }\n                            disabled={\n                              isDisabled ||\n                              selectedTargetOption === null ||\n                              adapter?.isExtension\n                            }\n                            name={selectedTargetOption || ''}\n                            size={CheckboxSize.LARGE}\n                            onChange={(event) => {\n                              selectedTargetOption &&\n                                handleSelectTargetChange({\n                                  event,\n                                  selectedTargetOption,\n                                });\n                            }}\n                          />\n                        </div>\n                      </>\n                    );\n                  }}\n                  renderActions={({\n                    selectedTargetOption,\n                    selectedTargetOptionProps,\n                  }) => {\n                    return (\n                      <>\n                        <div className=\"adapter-extension__add\">\n                          <button\n                            className=\"button--secondary\"\n                            disabled={\n                              selectedTargetOption === null ||\n                              (isInProcess &&\n                                isInProcess[selectedTargetOptionProps.name]) ||\n                              isDisabled\n                            }\n                            onClick={() =>\n                              selectedTargetOptionProps?.isExtension\n                                ? handleAddExtension(selectedTargetOptionProps)\n                                : handleAddAdapter(selectedTargetOptionProps)\n                            }>\n                            {isInProcess &&\n                            isInProcess[selectedTargetOptionProps.name] ? (\n                              <Loader />\n                            ) : isDone &&\n                              isDone[selectedTargetOptionProps.name] ? (\n                              'Done'\n                            ) : (\n                              'Add'\n                            )}\n                          </button>\n                        </div>\n                      </>\n                    );\n                  }}\n                />\n              ) : (\n                <>\n                  {/** RENDER ADAPTER/EXTENSION */}\n                  <div className=\"adapter-extension__checkbox\">\n                    <Checkbox\n                      id={adapter.name}\n                      label={''}\n                      checked={\n                        (selections && selections[adapter.name] === true) ||\n                        false\n                      }\n                      disabled={isDisabled}\n                      name={adapter.name}\n                      size={CheckboxSize.LARGE}\n                      onChange={(event) => {\n                        setSelections((s) => ({\n                          ...s,\n                          [adapter.name]: event.target.checked,\n                        }));\n                      }}\n                    />\n                  </div>\n\n                  <div className=\"adapter-extension__info\">\n                    <span className=\"adapter-extension__name\">\n                      {adapter.name} {adapter?.isExtension && '(EXTENSION)'}\n                    </span>\n                    <span className=\"adapter-extension__desc\">\n                      {adapter.description}\n                    </span>\n                  </div>\n\n                  <div className=\"adapter-extension__add\">\n                    <button\n                      className=\"button--secondary\"\n                      disabled={\n                        (isInProcess && isInProcess[adapter.name]) || isDisabled\n                      }\n                      onClick={() =>\n                        adapter?.isExtension\n                          ? handleAddExtension(adapter)\n                          : handleAddAdapter(adapter)\n                      }>\n                      {isInProcess && isInProcess[adapter.name] ? (\n                        <Loader />\n                      ) : isDone && isDone[adapter.name] ? (\n                        'Done'\n                      ) : (\n                        'Add'\n                      )}\n                    </button>\n                  </div>\n                </>\n              )}\n            </div>\n          )\n        )}\n\n      {/** CURRENTLY USED ADAPTERS/EXTENSIONS TO CONFIGURE OR REMOVE */}\n      {isDAOExisting &&\n        registeredAdaptersOrExtensions &&\n        registeredAdaptersOrExtensions?.length > 0 &&\n        registeredAdaptersOrExtensions.map(\n          (adapterOrExtension: Record<string, any>, idx: number) => (\n            <div\n              className=\"adapter-extension__grid registered\"\n              key={`${adapterOrExtension.id}-${idx}`}>\n              <div className=\"adapter-extension__info\">\n                <span className=\"adapter-extension__name\">\n                  {adapterOrExtension.name}{' '}\n                  {adapterOrExtension?.isExtension && '(EXTENSION)'}\n                </span>\n                <span className=\"adapter-extension__desc\">\n                  {adapterOrExtension.description}\n                </span>\n              </div>\n\n              <div className=\"adapter-extension__configure\">\n                <button\n                  className=\"button--secondary\"\n                  disabled={isDisabled || adapterOrExtension?.isExtension}\n                  onClick={() =>\n                    handleConfigure(adapterOrExtension as AdaptersOrExtensions)\n                  }>\n                  Configure\n                </button>\n              </div>\n            </div>\n          )\n        )}\n\n      {isDisabled && (\n        <div>\n          <button\n            className=\"button--help\"\n            onClick={() => {\n              openWhyDisabledModal();\n              setWhyDisabledReason(WhyDisableModalTitles.CONFIGURATION_REASON);\n            }}>\n            {WhyDisableModalTitles.CONFIGURATION_REASON}\n          </button>\n        </div>\n      )}\n\n      <div className=\"adapter-adapter-extension__finalize\">\n        <p>\n          If you're happy with your setup, you can finalize your DAO. After your\n          DAO is finalized you will need to submit a proposal to make changes.\n        </p>\n        <div>\n          <button\n            className=\"button--secondary finalize\"\n            disabled={\n              isAdaptersUnavailable || !isDAOExisting || isDAOReady\n              /* @todo \n              - also disable when selection is processing \n              - when there are no more unused adapters to select\n              */\n            }\n            onClick={confirmFinalizePrompt}>\n            Finalize Dao\n          </button>\n        </div>\n\n        {isDisabled && (\n          <div>\n            <button\n              className=\"button--help\"\n              onClick={() => {\n                openWhyDisabledModal();\n\n                setWhyDisabledReason(WhyDisableModalTitles.FINALIZED_REASON);\n              }}>\n              {WhyDisableModalTitles.FINALIZED_REASON}\n            </button>\n          </div>\n        )}\n\n        <WhyDisabledModal title={whyDisabledReason} />\n      </div>\n\n      {openModal && (\n        <ConfiguratorModal\n          abiMethodName={abiMethodName}\n          adapterOrExtension={configureAdapterOrExtension}\n          configurationInputs={inputParameters}\n          isOpen={openModal}\n          closeHandler={() => {\n            setOpenModal(false);\n          }}\n        />\n      )}\n    </div>\n  );\n}\n","import React, {useState} from 'react';\nimport {useForm} from 'react-hook-form';\nimport {useSelector} from 'react-redux';\nimport {AbiItem} from 'web3-utils/types';\n\nimport {DaoConstants} from './enums';\nimport {AdaptersOrExtensions} from './types';\nimport {StoreState} from '../../store/types';\nimport {Web3TxStatus} from '../web3/types';\nimport {FormFieldErrors} from '../../util/enums';\nimport {getValidationError} from '../../util/helpers';\nimport {useContractSend, useETHGasPrice, useWeb3Modal} from '../web3/hooks';\nimport {useAdaptersOrExtensions, useValidation} from './hooks';\nimport {ParamInputType, ParamType} from './hooks/useValidation';\n\nimport ErrorMessageWithDetails from '../common/ErrorMessageWithDetails';\nimport InputError from '../common/InputError';\nimport Loader from '../feedback/Loader';\n\ntype ConfigurationFormProps = {\n  abiConfigurationInputs: Record<string, any> | undefined;\n  abiMethodName: string;\n  adapterOrExtension: Pick<AdaptersOrExtensions, any> | undefined;\n  closeHandler?: () => void;\n};\n\ntype RemoveArgument = [\n  string // `adapterId` | `extensionId`\n];\n\nexport default function ConfigurationForm({\n  abiConfigurationInputs,\n  abiMethodName,\n  adapterOrExtension,\n  closeHandler,\n}: ConfigurationFormProps) {\n  /**\n   * Selectors\n   */\n  const {DaoRegistryContract} = useSelector(\n    (state: StoreState) => state.contracts\n  );\n\n  /**\n   * State\n   */\n  const [submitError, setSubmitError] = useState<Error>();\n  const [\n    configureAdapterStatus,\n    setConfigureAdapterStatus,\n  ] = useState<Web3TxStatus>(Web3TxStatus.STANDBY);\n  const [removeStatus, setRemoveStatus] = useState<Web3TxStatus>(\n    Web3TxStatus.STANDBY\n  );\n\n  /**\n   * Hooks\n   */\n  const {\n    txError,\n    // txEtherscanURL,\n    txIsPromptOpen,\n    txSend,\n    txStatus,\n  } = useContractSend();\n  const gasPrices = useETHGasPrice();\n  const {connected, account} = useWeb3Modal();\n  const {\n    isParamInputValid,\n    getFormFieldError,\n    formatInputByType,\n  } = useValidation();\n  const {getAdapterOrExtensionFromRedux} = useAdaptersOrExtensions();\n\n  /**\n   * Their hooks\n   */\n  const form = useForm<Record<string, any>>({\n    mode: 'onBlur',\n    reValidateMode: 'onChange',\n  });\n\n  /**\n   * Variables\n   */\n  const {errors, formState, getValues, setValue, register, trigger} = form;\n  const configureAdapterError = submitError || txError;\n  const isConnected = connected && account;\n\n  /**\n   * @note From the docs: \"Read the formState before render to subscribe the form state through Proxy\"\n   * @see https://react-hook-form.com/api#formState\n   */\n  const {isValid} = formState;\n\n  const isConfigureInProcess =\n    (txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n      txStatus === Web3TxStatus.PENDING) &&\n    (configureAdapterStatus === Web3TxStatus.AWAITING_CONFIRM ||\n      configureAdapterStatus === Web3TxStatus.PENDING);\n  const isRemoveInProcess =\n    (txStatus === Web3TxStatus.AWAITING_CONFIRM ||\n      txStatus === Web3TxStatus.PENDING) &&\n    (removeStatus === Web3TxStatus.AWAITING_CONFIRM ||\n      removeStatus === Web3TxStatus.PENDING);\n\n  const isConfigureDone =\n    txStatus === Web3TxStatus.FULFILLED &&\n    configureAdapterStatus === Web3TxStatus.FULFILLED;\n  const isRemoveDone =\n    txStatus === Web3TxStatus.FULFILLED &&\n    removeStatus === Web3TxStatus.FULFILLED;\n\n  const isConfigureInProcessOrDone =\n    (isConfigureInProcess || isConfigureDone) && txIsPromptOpen;\n  const isRemoveInProcessOrDone =\n    (isRemoveInProcess || isRemoveDone) && txIsPromptOpen;\n\n  /**\n   * handleRemove()\n   */\n  async function handleRemove(): Promise<void> {\n    if (!DaoRegistryContract) return;\n\n    try {\n      setRemoveStatus(Web3TxStatus.AWAITING_CONFIRM);\n\n      const removeArguments: RemoveArgument = [\n        adapterOrExtension?.isExtension\n          ? adapterOrExtension?.extensionId\n          : adapterOrExtension?.adapterId,\n      ] as any;\n      const txArguments = {\n        from: account || '',\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      // Execute contract call for `removeAdapter` | `removeExtension`\n      await txSend(\n        adapterOrExtension?.isExtension ? 'removeExtension' : 'removeAdapter',\n        DaoRegistryContract.instance.methods,\n        removeArguments,\n        txArguments\n      );\n\n      setRemoveStatus(Web3TxStatus.FULFILLED);\n\n      // Close modal\n      closeHandler &&\n        setTimeout(() => {\n          closeHandler();\n          // @todo Display closing modal message\n        }, 3000);\n    } catch (error) {\n      setSubmitError(error);\n      setRemoveStatus(Web3TxStatus.REJECTED);\n    }\n  }\n\n  /**\n   * handleSubmit()\n   * @param values\n   */\n  async function handleSubmit(values: Record<string, any>) {\n    try {\n      setConfigureAdapterStatus(Web3TxStatus.PENDING);\n\n      const {\n        contractAddress,\n        instance: {methods},\n      } = getAdapterOrExtensionFromRedux(\n        adapterOrExtension?.name as DaoConstants\n      );\n\n      if (!isConnected) {\n        throw new Error(\n          'No user account was found. Please makes sure your wallet is connected.'\n        );\n      }\n\n      if (!contractAddress) {\n        throw new Error(`No ${adapterOrExtension?.name} contract found.`);\n      }\n\n      if (!account) {\n        throw new Error('No account found.');\n      }\n\n      let adapterConfigArguments: Array<ParamInputType> = [];\n      // construct method arguments\n      abiConfigurationInputs?.forEach((abiInput: AbiItem) => {\n        const inputValue = Object.entries(values).find(\n          (v: any) => v[0] === abiInput.name\n        );\n\n        if (inputValue) {\n          const formattedValue: ParamInputType = formatInputByType(\n            inputValue[1] as ParamInputType,\n            abiInput.type as ParamType\n          );\n\n          adapterConfigArguments.push(formattedValue);\n        }\n      });\n\n      const txArguments = {\n        from: account || '',\n        // Set a fast gas price\n        ...(gasPrices ? {gasPrice: gasPrices.fast} : null),\n      };\n\n      setConfigureAdapterStatus(Web3TxStatus.AWAITING_CONFIRM);\n\n      // Execute contract call\n      await txSend(abiMethodName, methods, adapterConfigArguments, txArguments);\n\n      setConfigureAdapterStatus(Web3TxStatus.FULFILLED);\n    } catch (error) {\n      // Set any errors from Web3 utils or explicitly set above.\n      setSubmitError(error);\n      setConfigureAdapterStatus(Web3TxStatus.REJECTED);\n    }\n  }\n\n  return (\n    <form className=\"form\" onSubmit={(e) => e.preventDefault()}>\n      {/* INPUT PARAMETERS */}\n      {abiConfigurationInputs &&\n        abiConfigurationInputs.map((input: Record<string, any>) => (\n          <div className=\"form__input-row\" key={input.name}>\n            <label className=\"form__input-row-label\">{input.name}</label>\n            <div className=\"form__input-row-fieldwrap\">\n              <input\n                aria-describedby={`error-${input.name}`}\n                aria-invalid={errors[input.name] ? 'true' : 'false'}\n                name={input.name}\n                placeholder={input.type}\n                type=\"text\"\n                onChange={() =>\n                  setValue(input.name[0], getValues()[input.name])\n                }\n                ref={register({\n                  validate: (value: string): string | boolean => {\n                    return value === ''\n                      ? FormFieldErrors.REQUIRED\n                      : isParamInputValid(value, input.type)\n                      ? true\n                      : getFormFieldError(input.type);\n                  },\n                })}\n                disabled={isConfigureInProcessOrDone}\n              />\n\n              <InputError\n                error={getValidationError(input.name, errors)}\n                id={`error-${input.name}`}\n              />\n            </div>\n          </div>\n        ))}\n\n      {/* SUBMIT */}\n      <button\n        className=\"button\"\n        disabled={isConfigureInProcessOrDone || isRemoveInProcessOrDone}\n        onClick={() => {\n          if (isConfigureInProcessOrDone) return;\n\n          if (!isValid) {\n            trigger();\n            return;\n          }\n\n          handleSubmit(getValues());\n        }}\n        type=\"submit\">\n        {isConfigureInProcess ? (\n          <Loader />\n        ) : isConfigureDone ? (\n          'Done'\n        ) : (\n          'Submit'\n        )}\n      </button>\n\n      {/* SUBMIT CONFIGURE STATUS */}\n      {/* <div className=\"form__submit-status-container\">\n      {isConfigureInProcessOrDone && renderSubmitStatus()}\n    </div> */}\n\n      {/* SUBMIT ERROR */}\n      {configureAdapterError && (\n        <div className=\"form__submit-error-container\">\n          <ErrorMessageWithDetails\n            renderText=\"Something went wrong while submitting the adapter configuration.\"\n            error={configureAdapterError}\n          />\n        </div>\n      )}\n\n      {/** REMOVE ADAPTER BUTTON - only show if DAO isn't finalized */}\n      <div className=\"adapter-extension__remove\">\n        <p>\n          Delete this adapter. Once you delete this adapter, it can be re-added\n          if the DAO isn't finalized.\n        </p>\n        <button\n          className=\"button--secondary\"\n          disabled={isRemoveInProcessOrDone || isConfigureInProcessOrDone}\n          onClick={handleRemove}>\n          {isRemoveInProcess ? <Loader /> : isRemoveDone ? 'Done' : 'Remove'}\n        </button>\n\n        {/* SUBMIT REMOVE STATUS */}\n        {/* <div className=\"form__submit-status-container\">\n        {isRemoveInProcessOrDone && renderSubmitStatus()}\n      </div> */}\n      </div>\n    </form>\n  );\n}\n","import React from 'react';\n\nimport {AdaptersOrExtensions} from './types';\nimport ConfigurationForm from './ConfigurationForm';\nimport Modal from '../common/Modal';\n\nimport TimesSVG from '../../assets/svg/TimesSVG';\n\ntype ConfiguratorModalProps = {\n  abiMethodName: string;\n  adapterOrExtension: AdaptersOrExtensions | undefined;\n  configurationInputs: Record<string, any> | undefined;\n  isOpen: boolean;\n  closeHandler: () => void;\n};\n\nexport default function ConfiguratorModal({\n  abiMethodName,\n  adapterOrExtension,\n  configurationInputs,\n  isOpen,\n  closeHandler,\n}: ConfiguratorModalProps) {\n  return (\n    <Modal\n      keyProp=\"adapter-extension-configuration\"\n      modalClassNames=\"adapter-extension-configure-modal\"\n      isOpen={isOpen}\n      isOpenHandler={() => {\n        closeHandler();\n      }}>\n      {/* MODEL CLOSE BUTTON */}\n      <>\n        <span\n          className=\"modal__close-button\"\n          onClick={() => {\n            closeHandler();\n          }}>\n          <TimesSVG />\n        </span>\n\n        <h1>{adapterOrExtension?.name.toUpperCase()}</h1>\n        <p>{adapterOrExtension?.description}</p>\n\n        <ConfigurationForm\n          abiConfigurationInputs={configurationInputs}\n          abiMethodName={abiMethodName}\n          adapterOrExtension={adapterOrExtension as AdaptersOrExtensions}\n          closeHandler={closeHandler}\n        />\n      </>\n    </Modal>\n  );\n}\n","import React, {useState} from 'react';\n\nimport {DaoConstants} from './enums';\n\ntype AdapterExtensionTarget = DaoConstants | null;\n\ntype AdapterExtensionSelectTargetRenderActionsArgs = {\n  selectedTargetOption: AdapterExtensionTarget;\n  selectedTargetOptionProps: any;\n};\n\ntype AdapterExtensionSelectTargetProps = {\n  defaultTarget?: AdapterExtensionTarget;\n  adapterOrExtension: Record<string, any>;\n  renderActions: (\n    a: AdapterExtensionSelectTargetRenderActionsArgs\n  ) => JSX.Element | null;\n  renderCheckboxAction: (a: {\n    selectedTargetOption: AdapterExtensionTarget;\n  }) => JSX.Element | null;\n};\n\n/**\n * AdapterExtensionSelectTarget\n *\n * Displays a drop-down confirm list with options to\n * choose to from the defined list of options in `./config.ts`\n\n *\n * @param {AdapterExtensionSelectTargetProps} props\n * @returns {JSX.Element}\n */\nexport default function AdapterExtensionSelectTarget(\n  props: AdapterExtensionSelectTargetProps\n) {\n  const {\n    adapterOrExtension,\n    defaultTarget,\n    renderActions,\n    renderCheckboxAction,\n  } = props;\n\n  /**\n   * State\n   */\n\n  const [\n    selectedTargetOption,\n    setSelectedTargetOption,\n  ] = useState<AdapterExtensionTarget>(defaultTarget || null);\n\n  const [\n    selectedTargetOptionProps,\n    setSelectedTargetOptionProps,\n  ] = useState<any>({});\n\n  /**\n   * Functions\n   */\n\n  function handleSelectTargetChange(\n    event: React.ChangeEvent<HTMLSelectElement>\n  ) {\n    const {value} = event.target;\n\n    setSelectedTargetOption(value as AdapterExtensionTarget);\n\n    const selectedTargetProps: string = adapterOrExtension?.options.find(\n      (selectedOption: any) => selectedOption.displayName === value\n    );\n\n    setSelectedTargetOptionProps(selectedTargetProps);\n  }\n\n  function renderDescription(selectedTargetOption: DaoConstants | null) {\n    if (!selectedTargetOption) return null;\n\n    try {\n      const description: string =\n        adapterOrExtension?.options.find(\n          (selectedOption: any) =>\n            selectedOption.displayName === selectedTargetOption\n        ).description || '';\n\n      return <span className=\"adapter-extension__desc\">{description}</span>;\n    } catch (error) {\n      console.warn(error);\n    }\n  }\n\n  return (\n    <>\n      {/* CHECKBOX ACTIONS */}\n      {renderCheckboxAction({selectedTargetOption})}\n\n      <div className=\"adapter-extension__info\">\n        {/* ADAPTER/EXTENSION TARGET DEFAULT NAME */}\n        <span className=\"adapter-extension__name\">\n          {adapterOrExtension?.optionDefaultTarget}\n          {adapterOrExtension?.isExtension && '(EXTENSION)'}\n        </span>\n\n        {/* CHOOSE ADAPTER/EXTENSION TARGET */}\n        <select className=\"select\" onChange={handleSelectTargetChange}>\n          <option\n            key={'adapterOrExtensionSelect'}\n            value=\"\"\n            disabled={selectedTargetOption !== null}>\n            Select a {adapterOrExtension?.optionDefaultTarget} type&hellip;\n          </option>\n\n          {adapterOrExtension?.options.map((option: any) => (\n            <option key={option.displayName} value={option.displayName}>\n              {option.displayName.toUpperCase()}\n            </option>\n          ))}\n        </select>\n\n        {renderDescription(selectedTargetOption)}\n      </div>\n\n      {/* BUTTON ACTIONS */}\n      {renderActions({selectedTargetOption, selectedTargetOptionProps})}\n    </>\n  );\n}\n","// @todo delete this file when no longer needed. (Fake data needed for\n// placeholder components to render styles)\n\nexport type FakeMember = {\n  address: string;\n};\n\nexport const fakeMembers: FakeMember[] = [\n  {\n    address: '0xd38f1A08f9894CE69Bdf796271dC9e4099fC5043',\n  },\n  {\n    address: '0x927A9928Fe2eD6415e4D7761314c3466C3dc78f9',\n  },\n  {\n    address: '0x2e4707940C2d65221ee352945f0551738BCd026E',\n  },\n  {\n    address: '0xF2603046726414C5Dd0B0AE07a842209010AfbC5',\n  },\n  {\n    address: '0x01410229072479e1e4d33490a7052439d7893ed6',\n  },\n  {\n    address: '0x69732A015EE3A371714C99CcF6291fF774638E77',\n  },\n  {\n    address: '0x2b22914fd1A891a4b11A39B11bD53f0e0434a63A',\n  },\n  {\n    address: '0xD47d51c4963aB981A062dd15aE5e442B1Ee9425C',\n  },\n  {\n    address: '0x6197776A13a094370e3F71452fA868937A9f2334',\n  },\n];\n","import {useEffect} from 'react';\nimport {useHistory, useParams} from 'react-router-dom';\n\nimport {truncateEthAddress} from '../../util/helpers';\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\nimport AdapterOrExtensionManager from '../../components/adapters-extensions/AdapterOrExtensionManager';\nimport {fakeMembers, FakeMember} from './_mockData';\n\nexport default function MemberProfile() {\n  /**\n   * Their hooks\n   */\n\n  // Get ethereumAddress for fetching the member.\n  // @todo Use this to check that active member exists.\n  const {ethereumAddress} = useParams<{ethereumAddress: string}>();\n  const history = useHistory();\n\n  /**\n   * Variables\n   */\n\n  // @todo replace with actual member fetch and member exists check\n  const activeMember: FakeMember | undefined = fakeMembers.find(\n    (member) => member.address.toLowerCase() === ethereumAddress.toLowerCase()\n  );\n\n  /**\n   * Effects\n   */\n\n  // Navigate to 404\n  useEffect(() => {\n    if (!activeMember) {\n      history.push('/404');\n    }\n  }, [history, activeMember]);\n\n  /**\n   * Render\n   */\n\n  if (activeMember) {\n    return (\n      <RenderWrapper>\n        <>\n          <div className=\"memberprofile__header\">Member Profile</div>\n          <div className=\"proposaldetails\">\n            {/* LEFT COLUMN */}\n\n            {/* MEMBER ADDRESS */}\n            <div className=\"memberprofile__left-column\">\n              <h3>\n                {truncateEthAddress((activeMember as FakeMember).address, 7)}\n              </h3>\n\n              <AdapterOrExtensionManager />\n            </div>\n\n            {/* RIGHT COLUMN */}\n            <div className=\"memberprofile__right-column\">\n              MemberProfile @todo\n            </div>\n          </div>\n        </>\n      </RenderWrapper>\n    );\n  }\n\n  // Render nothing. Should never reach this case.\n  return <></>;\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function viewAll(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    history.push('/members');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Members</h2>\n          <button className=\"titlebar__action\" onClick={viewAll}>\n            View all\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import {FakeMember} from './_mockData';\n\ntype MemberCardProps = {\n  member: FakeMember; // placeholder prop\n  name: string;\n  onClick: (ethereumAddress: string) => void;\n};\n\n/**\n * Shows a preview of a members's profile\n *\n * @param {MemberCardProps} props\n * @returns {JSX.Element}\n */\nexport default function MemberCard(props: MemberCardProps): JSX.Element {\n  const {member, name, onClick} = props;\n\n  /**\n   * Functions\n   */\n\n  function handleClick() {\n    const ethereumAddress = member.address;\n\n    onClick(ethereumAddress);\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <div className=\"membercard\" onClick={handleClick}>\n      {/* TITLE */}\n      <h3 className=\"membercard__title\">{name}</h3>\n    </div>\n  );\n}\n","import {useHistory} from 'react-router-dom';\n\nimport {truncateEthAddress} from '../../util/helpers';\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\nimport MemberCard from './MemberCard';\nimport {fakeMembers, FakeMember} from './_mockData';\n\nexport default function Members() {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Variables\n   */\n\n  const activeMembers = renderMemberCards(fakeMembers);\n\n  /**\n   * Functions\n   */\n\n  function renderMemberCards(members: FakeMember[]) {\n    return members.map((member) => {\n      return (\n        <MemberCard\n          key={member.address}\n          onClick={handleClickMemberProfile(member.address)}\n          member={member}\n          name={truncateEthAddress(member.address, 7)}\n        />\n      );\n    });\n  }\n\n  function handleClickMemberProfile(ethereumAddress: string) {\n    return () => {\n      if (!ethereumAddress) return;\n\n      history.push(`/members/${ethereumAddress}`);\n    };\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div className=\"grid--fluid grid-container\">\n        {/* ACTIVE MEMBERS */}\n        <>\n          <div className=\"grid__header\">Active Members</div>\n          <div className=\"grid__cards\">{activeMembers}</div>\n        </>\n      </div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Members</h2>\n        </div>\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport {ProposalHeaderNames} from '../../util/enums';\n// import {truncateEthAddress} from '../../util/helpers';\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n// import ProposalCard from '../../components/proposals/ProposalCard';\n// import {\n//   fakeMembershipProposalsVoting,\n//   fakeMembershipProposalsRequest,\n//   fakeMembershipProposalsPassed,\n//   fakeMembershipProposalsFailed,\n//   FakeProposal,\n// } from '../../components/proposals/_mockData';\n\nexport default function Membership() {\n  /**\n   * Their hooks\n   */\n\n  // const history = useHistory();\n\n  /**\n   * Variables\n   */\n\n  const votingProposals = /* renderProposalCards(fakeMembershipProposalsVoting) */ [] as any;\n  const requestProposals = /* renderProposalCards(fakeMembershipProposalsRequest) */ [] as any;\n  const passedProposals = /* renderProposalCards(fakeMembershipProposalsPassed) */ [] as any;\n  const failedProposals = /* renderProposalCards(fakeMembershipProposalsFailed) */ [] as any;\n\n  /**\n   * Functions\n   */\n\n  /* function renderProposalCards(proposals: FakeProposal[]) {\n    return proposals.map((proposal) => {\n      return (\n        <ProposalCard\n          key={proposal.snapshotProposal.hash}\n          onClick={handleClickProposalDetails(proposal.snapshotProposal.hash)}\n          proposal={proposal}\n          name={truncateEthAddress(proposal.snapshotProposal.name, 7)}\n        />\n      );\n    });\n  } */\n\n  /* function handleClickProposalDetails(proposalHash: string) {\n    return () => {\n      if (!proposalHash) return;\n\n      history.push(`/membership/${proposalHash}`);\n    };\n  } */\n\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div className=\"grid--fluid grid-container\">\n        {/* VOTING PROPOSALS */}\n        {votingProposals.length > 0 && (\n          <>\n            <div className=\"grid__header\">{ProposalHeaderNames.VOTING}</div>\n            <div className=\"grid__cards\">{votingProposals}</div>\n          </>\n        )}\n\n        {/* PENDING PROPOSALS (DRAFTS, NOT SPONSORED) */}\n        {requestProposals.length > 0 && (\n          <>\n            <div className=\"grid__header\">{ProposalHeaderNames.REQUESTS}</div>\n            <div className=\"grid__cards\">{requestProposals}</div>\n          </>\n        )}\n\n        {/* PASSED PROPOSALS */}\n        {passedProposals.length > 0 && (\n          <>\n            <div className=\"grid__header\">{ProposalHeaderNames.PASSED}</div>\n            <div className=\"grid__cards\">{passedProposals}</div>\n          </>\n        )}\n\n        {/* FAILED PROPOSALS */}\n        {failedProposals.length > 0 && (\n          <>\n            <div className=\"grid__header\">{ProposalHeaderNames.FAILED}</div>\n            <div className=\"grid__cards\">{failedProposals}</div>\n          </>\n        )}\n      </div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function viewMembers(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    history.push('/members');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Membership</h2>\n          <button className=\"titlebar__action\" onClick={viewMembers}>\n            View members\n          </button>\n        </div>\n        {/* RENDER CHILDREN */}\n        @TODO\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import {lazy, Suspense} from 'react';\nimport {useSelector} from 'react-redux';\n\nimport {ContractAdapterNames} from '../web3/types';\nimport {CycleEllipsis} from '../feedback';\nimport {ProposalData} from './types';\nimport {StoreState} from '../../store/types';\nimport {VotingAdapterName} from '../adapters-extensions/enums';\nimport ErrorMessageWithDetails from '../common/ErrorMessageWithDetails';\n\ntype ProposalActionsProps = {\n  adapterName: ContractAdapterNames;\n  proposal: ProposalData;\n};\n\n/**\n * Lazy load action component tree\n */\nconst ProposalWithOffchainVoteActions = lazy(\n  () => import('./ProposalWithOffchainVoteActions')\n);\n\nconst fadeInProps = {duration: 150};\nconst cycleEllipsisStyles = {\n  display: 'inline-block',\n  width: '100%',\n  fontSize: '1.5rem',\n};\n\nexport default function ProposalActions(\n  props: ProposalActionsProps\n): JSX.Element {\n  const {adapterName, proposal} = props;\n\n  const votingAdapterName = useSelector(\n    (s: StoreState) => s.contracts.VotingContract?.adapterOrExtensionName\n  );\n\n  function renderActions() {\n    if (!votingAdapterName) {\n      return <></>;\n    }\n\n    switch (votingAdapterName) {\n      case VotingAdapterName.OffchainVotingContract:\n        return (\n          <ProposalWithOffchainVoteActions\n            adapterName={adapterName}\n            proposal={proposal}\n          />\n        );\n      // @todo On-chain Voting\n      // case VotingAdapterName.VotingContract:\n      //   return <></>\n      default:\n        const error = new Error(\n          `\"${votingAdapterName}\" is not a valid voting adapter name.`\n        );\n\n        return (\n          <ErrorMessageWithDetails\n            error={error}\n            renderText=\"Something went wrong\"\n          />\n        );\n    }\n  }\n\n  return (\n    <Suspense\n      fallback={\n        <span className=\"text-center\" style={cycleEllipsisStyles}>\n          <CycleEllipsis intervalMs={200} fadeInProps={fadeInProps} />\n        </span>\n      }>\n      {renderActions()}\n    </Suspense>\n  );\n}\n","type ProposalAmountProps = {\n  /**\n   * Amount in WEI\n   */\n  amount: string;\n  amountUnit: string;\n  amount2?: string;\n  amount2Unit?: string;\n};\n\nexport default function ProposalAmount(props: ProposalAmountProps) {\n  const {amount, amountUnit, amount2, amount2Unit} = props;\n\n  /**\n   * Render\n   */\n\n  return (\n    <div className=\"proposaldetails__amount\">\n      <span>\n        {`${amount} ${amountUnit}`}\n        {/* assumes second amount is value requested from the DAO */}\n        {amount2 && (\n          <>\n            <br />\n            <small>for</small>\n            <br />\n            {`${amount2} ${amount2Unit}`}\n          </>\n        )}\n      </span>\n    </div>\n  );\n}\n","import React from 'react';\nimport {useHistory, useParams} from 'react-router-dom';\nimport Web3 from 'web3';\n\nimport {AsyncStatus} from '../../util/types';\nimport {ContractAdapterNames} from '../../components/web3/types';\nimport {formatDecimal} from '../../util/helpers';\nimport {useProposalOrDraft} from '../../components/proposals/hooks';\nimport ErrorMessageWithDetails from '../../components/common/ErrorMessageWithDetails';\nimport FadeIn from '../../components/common/FadeIn';\nimport LoaderWithEmoji from '../../components/feedback/LoaderWithEmoji';\nimport NotFound from '../subpages/NotFound';\nimport ProposalActions from '../../components/proposals/ProposalActions';\nimport ProposalAmount from '../../components/proposals/ProposalAmount';\nimport ProposalDetails from '../../components/proposals/ProposalDetails';\nimport Wrap from '../../components/common/Wrap';\n\nexport default function MembershipDetails() {\n  /**\n   * @todo\n   *\n   * 1. Fetch proposal by ID from the subgraph.\n   * 2. Determine if sponsored\n   * 3. Get Snapshot data\n   *   3.1 If sponsored, get data about proposal from Snapshot (use flag to also search by draft hash).\n   *   3.2 If not sponsored, get data about draft from Snapshot.\n   */\n\n  /**\n   * Their hooks\n   */\n\n  // Get hash for fetching the proposal.\n  const {proposalId} = useParams<{proposalId: string}>();\n\n  /**\n   * @todo Get subgraph proposal and determine if it has been sponsored\n   *   so we know how to search snapshot-hub.\n   */\n\n  // ...\n\n  /**\n   * Our hooks\n   */\n\n  // @todo Use dynamic `SnapshotType` depending on subgraph data for `type` arg.\n  const {\n    proposalData,\n    proposalError,\n    proposalNotFound,\n    proposalStatus,\n  } = useProposalOrDraft(proposalId);\n\n  /**\n   * Render\n   */\n\n  // Render loading\n  if (proposalStatus === AsyncStatus.PENDING) {\n    return (\n      <RenderWrapper>\n        <div style={{width: '3rem', margin: '0 auto'}}>\n          <LoaderWithEmoji />\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render 404 no proposal found\n  if (proposalNotFound) {\n    return (\n      <RenderWrapper>\n        <NotFound />\n      </RenderWrapper>\n    );\n  }\n\n  // Render error\n  if (proposalStatus === AsyncStatus.REJECTED || proposalError) {\n    return (\n      <RenderWrapper>\n        <div className=\"text-center\">\n          <ErrorMessageWithDetails\n            error={proposalError}\n            renderText=\"Something went wrong.\"\n          />\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render proposal\n  if (proposalData) {\n    const {daoProposal} = proposalData;\n    const commonData = proposalData.getCommonSnapshotProposalData();\n\n    // @todo use amount from proposal.subgraphproposal\n    let amount = '\\u2026';\n    try {\n      amount = formatDecimal(\n        Number(Web3.utils.fromWei(daoProposal?.amount, 'ether'))\n      );\n    } catch (error) {\n      amount = '\\u2026';\n    }\n\n    return (\n      <RenderWrapper>\n        <ProposalDetails\n          proposal={proposalData}\n          renderAmountBadge={() => (\n            <ProposalAmount\n              amount={amount}\n              amountUnit={commonData?.msg.payload.metadata.amountUnit}\n            />\n          )}\n          renderActions={() => (\n            <ProposalActions\n              adapterName={ContractAdapterNames.onboarding}\n              proposal={proposalData}\n            />\n          )}\n        />\n      </RenderWrapper>\n    );\n  }\n\n  // Render nothing. Should never reach this case.\n  return <></>;\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function goToAll(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n\n    history.push('/membership');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Membership</h2>\n          <button className=\"titlebar__action\" onClick={goToAll}>\n            View all\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {useHistory, useParams} from 'react-router-dom';\nimport {toBN} from 'web3-utils';\n\nimport {AsyncStatus} from '../../util/types';\nimport {ContractAdapterNames} from '../../components/web3/types';\nimport {formatDecimal} from '../../util/helpers';\nimport {useProposalOrDraft} from '../../components/proposals/hooks';\nimport ErrorMessageWithDetails from '../../components/common/ErrorMessageWithDetails';\nimport FadeIn from '../../components/common/FadeIn';\nimport LoaderWithEmoji from '../../components/feedback/LoaderWithEmoji';\nimport NotFound from '../subpages/NotFound';\nimport ProposalActions from '../../components/proposals/ProposalActions';\nimport ProposalAmount from '../../components/proposals/ProposalAmount';\nimport ProposalDetails from '../../components/proposals/ProposalDetails';\nimport Wrap from '../../components/common/Wrap';\n\nexport default function TransferDetails() {\n  /**\n   * @todo\n   *\n   * 1. Fetch proposal by ID from the subgraph.\n   * 2. Determine if sponsored\n   * 3. Get Snapshot data\n   *   3.1 If sponsored, get data about proposal from Snapshot (use flag to also search by draft hash).\n   *   3.2 If not sponsored, get data about draft from Snapshot.\n   */\n\n  /**\n   * Their hooks\n   */\n\n  // Get hash for fetching the proposal.\n  const {proposalId} = useParams<{proposalId: string}>();\n\n  /**\n   * @todo Get subgraph proposal and determine if it has been sponsored\n   *   so we know how to search snapshot-hub.\n   */\n\n  // ...\n\n  /**\n   * Our hooks\n   */\n\n  // @todo Use dynamic `SnapshotType` depending on subgraph data for `type` arg.\n  const {\n    proposalData,\n    proposalError,\n    proposalNotFound,\n    proposalStatus,\n  } = useProposalOrDraft(proposalId);\n\n  /**\n   * Render\n   */\n\n  // Render loading\n  if (proposalStatus === AsyncStatus.PENDING) {\n    return (\n      <RenderWrapper>\n        <div style={{width: '3rem', margin: '0 auto'}}>\n          <LoaderWithEmoji />\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render 404 no proposal found\n  if (proposalNotFound) {\n    return (\n      <RenderWrapper>\n        <NotFound />\n      </RenderWrapper>\n    );\n  }\n\n  // Render error\n  if (proposalStatus === AsyncStatus.REJECTED || proposalError) {\n    return (\n      <RenderWrapper>\n        <div className=\"text-center\">\n          <ErrorMessageWithDetails\n            error={proposalError}\n            renderText=\"Something went wrong.\"\n          />\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render proposal\n  if (proposalData) {\n    const {daoProposal} = proposalData;\n    const commonData = proposalData.getCommonSnapshotProposalData();\n\n    // @todo use amounts from proposal.subgraphproposal\n    let transferAmount = '\\u2026';\n    try {\n      const divisor = toBN(10).pow(\n        toBN(commonData?.msg.payload.metadata.tokenDecimals)\n      );\n      const beforeDecimal = toBN(daoProposal?.amount).div(divisor);\n      const afterDecimal = toBN(daoProposal?.amount).mod(divisor);\n      const balanceReadable = afterDecimal.eq(toBN(0))\n        ? beforeDecimal.toString()\n        : `${beforeDecimal.toString()}.${afterDecimal.toString()}`;\n      const isTransferAmountInt = Number.isInteger(Number(balanceReadable));\n      transferAmount = isTransferAmountInt\n        ? balanceReadable\n        : formatDecimal(Number(balanceReadable));\n    } catch (error) {\n      // Fallback gracefully to ellipsis\n    }\n\n    return (\n      <RenderWrapper>\n        <ProposalDetails\n          proposal={proposalData}\n          renderAmountBadge={() => (\n            <ProposalAmount\n              amount={transferAmount}\n              amountUnit={commonData?.msg.payload.metadata.amountUnit}\n            />\n          )}\n          renderActions={() => (\n            <ProposalActions\n              adapterName={ContractAdapterNames.distribute}\n              proposal={proposalData}\n            />\n          )}\n        />\n      </RenderWrapper>\n    );\n  }\n\n  // Render nothing. Should never reach this case.\n  return <></>;\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function goToAll(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n\n    history.push('/transfers');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Transfers</h2>\n          <button className=\"titlebar__action\" onClick={goToAll}>\n            View all\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n\nexport default function Transfers() {\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div>Transfers @todo</div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function goToNewProposal(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    history.push('/transfer');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Transfers</h2>\n          <button className=\"titlebar__action\" onClick={goToNewProposal}>\n            Make Transfer\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {useHistory, useParams} from 'react-router-dom';\nimport {toBN} from 'web3-utils';\n\nimport {AsyncStatus} from '../../util/types';\nimport {ContractAdapterNames} from '../../components/web3/types';\nimport {formatDecimal, formatNumber} from '../../util/helpers';\nimport {useProposalOrDraft} from '../../components/proposals/hooks';\nimport ErrorMessageWithDetails from '../../components/common/ErrorMessageWithDetails';\nimport FadeIn from '../../components/common/FadeIn';\nimport LoaderWithEmoji from '../../components/feedback/LoaderWithEmoji';\nimport NotFound from '../subpages/NotFound';\nimport ProposalActions from '../../components/proposals/ProposalActions';\nimport ProposalAmount from '../../components/proposals/ProposalAmount';\nimport ProposalDetails from '../../components/proposals/ProposalDetails';\nimport Wrap from '../../components/common/Wrap';\n\nexport default function TributeDetails() {\n  /**\n   * @todo\n   *\n   * 1. Fetch proposal by ID from the subgraph.\n   * 2. Determine if sponsored\n   * 3. Get Snapshot data\n   *   3.1 If sponsored, get data about proposal from Snapshot (use flag to also search by draft hash).\n   *   3.2 If not sponsored, get data about draft from Snapshot.\n   */\n\n  /**\n   * Their hooks\n   */\n\n  // Get hash for fetching the proposal.\n  const {proposalId} = useParams<{proposalId: string}>();\n\n  /**\n   * @todo Get subgraph proposal and determine if it has been sponsored\n   *   so we know how to search snapshot-hub.\n   */\n\n  // ...\n\n  /**\n   * Our hooks\n   */\n\n  // @todo Use dynamic `SnapshotType` depending on subgraph data for `type` arg.\n  const {\n    proposalData,\n    proposalError,\n    proposalNotFound,\n    proposalStatus,\n  } = useProposalOrDraft(proposalId);\n\n  /**\n   * Render\n   */\n\n  // Render loading\n  if (proposalStatus === AsyncStatus.PENDING) {\n    return (\n      <RenderWrapper>\n        <div style={{width: '3rem', margin: '0 auto'}}>\n          <LoaderWithEmoji />\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render 404 no proposal found\n  if (proposalNotFound) {\n    return (\n      <RenderWrapper>\n        <NotFound />\n      </RenderWrapper>\n    );\n  }\n\n  // Render error\n  if (proposalStatus === AsyncStatus.REJECTED || proposalError) {\n    return (\n      <RenderWrapper>\n        <div className=\"text-center\">\n          <ErrorMessageWithDetails\n            error={proposalError}\n            renderText=\"Something went wrong.\"\n          />\n        </div>\n      </RenderWrapper>\n    );\n  }\n\n  // Render proposal\n  if (proposalData) {\n    const {daoProposal} = proposalData;\n    const commonData = proposalData.getCommonSnapshotProposalData();\n\n    // @todo use amounts from proposal.subgraphproposal\n    let tributeAmount = '\\u2026';\n    try {\n      const divisor = toBN(10).pow(\n        toBN(commonData?.msg.payload.metadata.tributeTokenDecimals)\n      );\n      const beforeDecimal = toBN(daoProposal?.tributeAmount).div(divisor);\n      const afterDecimal = toBN(daoProposal?.tributeAmount).mod(divisor);\n      const balanceReadable = afterDecimal.eq(toBN(0))\n        ? beforeDecimal.toString()\n        : `${beforeDecimal.toString()}.${afterDecimal.toString()}`;\n      const isTributeAmountInt = Number.isInteger(Number(balanceReadable));\n      tributeAmount = isTributeAmountInt\n        ? balanceReadable\n        : formatDecimal(Number(balanceReadable));\n    } catch (error) {\n      // Fallback gracefully to ellipsis\n    }\n\n    let requestAmount = '\\u2026';\n    try {\n      requestAmount = formatNumber(daoProposal?.requestAmount);\n    } catch (error) {\n      // Fallback gracefully to ellipsis\n    }\n\n    return (\n      <RenderWrapper>\n        <ProposalDetails\n          proposal={proposalData}\n          renderAmountBadge={() => (\n            <ProposalAmount\n              amount={tributeAmount}\n              amountUnit={commonData?.msg.payload.metadata.tributeAmountUnit}\n              amount2={requestAmount}\n              amount2Unit={commonData?.msg.payload.metadata.requestAmountUnit}\n            />\n          )}\n          renderActions={() => (\n            <ProposalActions\n              adapterName={ContractAdapterNames.tribute}\n              proposal={proposalData}\n            />\n          )}\n        />\n      </RenderWrapper>\n    );\n  }\n\n  // Render nothing. Should never reach this case.\n  return <></>;\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function goToAll(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n\n    history.push('/tributes');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Tributes</h2>\n          <button className=\"titlebar__action\" onClick={goToAll}>\n            View all\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport Wrap from '../../components/common/Wrap';\nimport FadeIn from '../../components/common/FadeIn';\n\nexport default function Tributes() {\n  /**\n   * Render\n   */\n\n  return (\n    <RenderWrapper>\n      <div>Tributes @todo</div>\n    </RenderWrapper>\n  );\n}\n\nfunction RenderWrapper(props: React.PropsWithChildren<any>): JSX.Element {\n  /**\n   * Their hooks\n   */\n\n  const history = useHistory();\n\n  /**\n   * Functions\n   */\n\n  function goToNewProposal(event: React.MouseEvent<HTMLButtonElement>) {\n    event.preventDefault();\n    history.push('/tribute');\n  }\n\n  /**\n   * Render\n   */\n\n  return (\n    <Wrap className=\"section-wrapper\">\n      <FadeIn>\n        <div className=\"titlebar\">\n          <h2 className=\"titlebar__title\">Tributes</h2>\n          <button className=\"titlebar__action\" onClick={goToNewProposal}>\n            Provide Tribute\n          </button>\n        </div>\n\n        {/* RENDER CHILDREN */}\n        {props.children}\n      </FadeIn>\n    </Wrap>\n  );\n}\n","import {Route, Switch} from 'react-router-dom';\n\nimport CreateGovernanceProposal from './pages/governance/CreateGovernanceProposal';\nimport CreateMembershipProposal from './pages/membership/CreateMembershipProposal';\nimport CreateTransferProposal from './pages/transfers/CreateTransferProposal';\nimport CreateTributeProposal from './pages/tributes/CreateTributeProposal';\nimport GetStarted from './pages/start/GetStarted';\nimport GovernanceProposalDetails from './pages/governance/GovernanceProposalDetails';\nimport GovernanceProposals from './pages/governance/GovernanceProposals';\nimport MemberProfile from './pages/members/MemberProfile';\nimport Members from './pages/members/Members';\nimport Membership from './pages/membership/Membership';\nimport MembershipDetails from './pages/membership/MembershipDetails';\nimport NotFound from './pages/subpages/NotFound';\nimport TransferDetails from './pages/transfers/TransferDetails';\nimport Transfers from './pages/transfers/Transfers';\nimport TributeDetails from './pages/tributes/TributeDetails';\nimport Tributes from './pages/tributes/Tributes';\n\nconst proposalIdParameter: string = ':proposalId';\n\nexport default function Routes() {\n  return (\n    <Switch>\n      {[\n        <Route key=\"splash\" exact path=\"/\" render={() => <GetStarted />} />,\n        <Route\n          key=\"join\"\n          exact\n          path=\"/join\"\n          render={() => <CreateMembershipProposal />}\n        />,\n        <Route\n          key=\"membership\"\n          exact\n          path=\"/membership\"\n          render={() => <Membership />}\n        />,\n        <Route\n          key=\"membership-details\"\n          exact\n          path={`/membership/${proposalIdParameter}`}\n          render={() => <MembershipDetails />}\n        />,\n        <Route\n          key=\"transfer\"\n          exact\n          path=\"/transfer\"\n          render={() => <CreateTransferProposal />}\n        />,\n        <Route\n          key=\"transfers\"\n          exact\n          path=\"/transfers\"\n          render={() => <Transfers />}\n        />,\n        <Route\n          key=\"transfer-details\"\n          exact\n          path={`/transfers/${proposalIdParameter}`}\n          render={() => <TransferDetails />}\n        />,\n        <Route\n          key=\"tribute\"\n          exact\n          path=\"/tribute\"\n          render={() => <CreateTributeProposal />}\n        />,\n        <Route\n          key=\"tributes\"\n          exact\n          path=\"/tributes\"\n          render={() => <Tributes />}\n        />,\n        <Route\n          key=\"tribute-details\"\n          exact\n          path={`/tributes/${proposalIdParameter}`}\n          render={() => <TributeDetails />}\n        />,\n        <Route\n          key=\"governance-proposal\"\n          exact\n          path=\"/governance-proposal\"\n          render={() => <CreateGovernanceProposal />}\n        />,\n        <Route\n          key=\"governance-proposals\"\n          exact\n          path=\"/governance-proposals\"\n          render={() => <GovernanceProposals />}\n        />,\n        <Route\n          key=\"governance-proposal-details\"\n          exact\n          path={`/governance-proposals/${proposalIdParameter}`}\n          render={() => <GovernanceProposalDetails />}\n        />,\n        <Route\n          key=\"members\"\n          exact\n          path=\"/members\"\n          render={() => <Members />}\n        />,\n        <Route\n          key=\"member-profile\"\n          exact\n          path=\"/members/:ethereumAddress\"\n          render={() => <MemberProfile />}\n        />,\n        <Route key=\"no-match\" component={NotFound} />,\n      ]}\n    </Switch>\n  );\n}\n","import React, {useCallback, useEffect, useState} from 'react';\nimport {getApiStatus as getSnapshotAPIStatus} from '@openlaw/snapshot-js-erc712';\n\nimport {AsyncStatus} from './util/types';\nimport {getConnectedMember} from './store/actions';\nimport {ContractsStateEntry, ReduxDispatch, StoreState} from './store/types';\nimport {SNAPSHOT_HUB_API_URL} from './config';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {useInitContracts, useIsDefaultChain} from './components/web3/hooks';\nimport {useIsMounted} from './hooks';\nimport {useWeb3Modal} from './components/web3/hooks';\nimport ErrorMessageWithDetails from './components/common/ErrorMessageWithDetails';\nimport FadeIn from './components/common/FadeIn';\nimport Header from './components/Header';\nimport Wrap from './components/common/Wrap';\n\ntype InitPropsRenderProps = {\n  error: Error | undefined;\n  isInitComplete: boolean;\n};\n\ntype InitProps = {\n  render: (p: InitPropsRenderProps) => React.ReactElement | null;\n};\n\ntype InitErrorProps = {\n  error: Error;\n};\n\n/**\n * Register any new async process names here.\n * It is mainly to check their progress before rendering.\n *\n * If the app is not dependent on a process before starting\n * do not add it here.\n */\nenum ProcessName {\n  initSnapshotAPI = 'initSnapshotAPI',\n}\n\n/**\n * Init Component\n *\n * Init will run any designated sync/async\n * setup processes and then render any child component\n * upon completion.\n *\n * In our case the children prop component to render is our app.\n *\n * @param {InitProps} props\n */\nexport default function Init(props: InitProps) {\n  const {render} = props;\n\n  /**\n   * Selectors\n   */\n\n  const daoRegistryContract = useSelector(\n    (s: StoreState) => s.contracts.DaoRegistryContract\n  );\n\n  /**\n   * State\n   */\n\n  const [error, setError] = useState<Error>();\n  const [isInitComplete, setIsInitComplete] = useState<boolean>(false);\n  const [processReadyMap, setProcessReadyMap] = useState<\n    Record<ProcessName, AsyncStatus>\n  >({\n    [ProcessName.initSnapshotAPI]: AsyncStatus.STANDBY,\n  });\n\n  /**\n   * Our hooks\n   */\n\n  const initContracts = useInitContracts();\n  const {account, connected, provider, web3Instance} = useWeb3Modal();\n  const {defaultChainError} = useIsDefaultChain();\n  const {isMountedRef} = useIsMounted();\n\n  /**\n   * Their hooks\n   */\n\n  const dispatch = useDispatch<ReduxDispatch>();\n\n  /**\n   * Cached callbacks\n   */\n\n  const handleInitContractsCached = useCallback(handleInitContracts, [\n    initContracts,\n  ]);\n  const handleGetMemberCached = useCallback(handleGetMember, [dispatch]);\n  const handleGetSnapshotAPIStatusCached = useCallback(\n    handleGetSnapshotAPIStatus,\n    [isMountedRef]\n  );\n\n  /**\n   * Effects\n   */\n\n  useEffect(() => {\n    setIsInitComplete(\n      Object.values(processReadyMap).every((fs) => fs === AsyncStatus.FULFILLED)\n    );\n  }, [processReadyMap]);\n\n  useEffect(() => {\n    connected && provider && web3Instance && handleInitContractsCached();\n  }, [connected, handleInitContractsCached, provider, web3Instance]);\n\n  useEffect(() => {\n    connected &&\n      account &&\n      daoRegistryContract &&\n      handleGetMemberCached(account, daoRegistryContract);\n  }, [account, connected, daoRegistryContract, handleGetMemberCached]);\n\n  useEffect(() => {\n    setError(defaultChainError);\n  }, [defaultChainError]);\n\n  useEffect(() => {\n    handleGetSnapshotAPIStatusCached();\n  }, [handleGetSnapshotAPIStatusCached]);\n\n  /**\n   * Functions\n   */\n\n  async function handleGetSnapshotAPIStatus() {\n    try {\n      if (!SNAPSHOT_HUB_API_URL) {\n        throw new Error('No Snapshot Hub API URL was found.');\n      }\n\n      const {data} = await getSnapshotAPIStatus(SNAPSHOT_HUB_API_URL);\n\n      // Choosing a slice of the data to make sure we have a response, not just 200 OK.\n      if (!data.version) {\n        throw new Error('Snapshot API is not ready.');\n      }\n\n      if (!isMountedRef.current) return;\n\n      setProcessReadyMap((p) => ({\n        ...p,\n        [ProcessName.initSnapshotAPI]: AsyncStatus.FULFILLED,\n      }));\n    } catch (error) {\n      if (!isMountedRef.current) return;\n\n      setError(new Error('Snapshot API is not responding.'));\n    }\n  }\n\n  async function handleInitContracts() {\n    try {\n      await initContracts();\n    } catch (error) {\n      setError(error);\n    }\n  }\n\n  async function handleGetMember(\n    account: string,\n    daoRegistryContract: ContractsStateEntry\n  ) {\n    try {\n      await dispatch(getConnectedMember(account, daoRegistryContract));\n    } catch (error) {\n      setError(error);\n    }\n  }\n\n  // Render children\n  return render({error, isInitComplete});\n}\n\n/**\n * InitError\n *\n * An error component that is meant to be used if the <Init /> component\n * could not complete any of its processes to provide the app with vital data.\n *\n * @param {InitErrorProps} props\n */\nexport function InitError(props: InitErrorProps) {\n  const {error} = props;\n\n  return (\n    <>\n      <Header />\n\n      <Wrap className=\"section-wrapper\">\n        <main>\n          <FadeIn>\n            <div\n              style={{\n                padding: '2em 1em 1em',\n                textAlign: 'center',\n              }}>\n              <h1 style={{fontSize: '2rem'}}>\n                <span\n                  className=\"pulse\"\n                  role=\"img\"\n                  aria-label=\"Emoji with eyes crossed out.\"\n                  style={{display: 'inline-block'}}>\n                  \n                </span>{' '}\n                Oops, something went wrong.\n              </h1>\n            </div>\n\n            <div\n              style={{\n                textAlign: 'center',\n                maxWidth: 600,\n                display: 'block',\n                margin: '0 auto',\n              }}>\n              <ErrorMessageWithDetails error={error} renderText=\"\" />\n            </div>\n          </FadeIn>\n        </main>\n      </Wrap>\n    </>\n  );\n}\n","import React from 'react';\n\nimport Footer from './components/Footer';\nimport Header from './components/Header';\nimport Head from './Head';\nimport Routes from './Routes';\n\nexport default function App() {\n  return (\n    <>\n      {/* HEAD (react-helmet) */}\n      <Head />\n\n      {/* HEADER */}\n      <Header />\n\n      <main>\n        <Routes />\n      </main>\n\n      {/* FOOTER */}\n      <Footer />\n    </>\n  );\n}\n","import {ReportHandler} from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({getCLS, getFID, getFCP, getLCP, getTTFB}) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport {BrowserRouter} from 'react-router-dom';\nimport {ApolloProvider} from '@apollo/react-hooks';\nimport {\n  ApolloClient,\n  InMemoryCache,\n  NormalizedCacheObject,\n} from '@apollo/client';\nimport WalletConnectProvider from '@walletconnect/web3-provider';\n\nimport {disableReactDevTools} from './util/helpers';\nimport {ENVIRONMENT, INFURA_PROJECT_ID, GRAPH_API_URL} from './config';\nimport {DefaultTheme} from './components/web3/hooks/useWeb3ModalManager';\nimport {store} from './store';\nimport App from './App';\nimport Init, {InitError} from './Init';\nimport Web3ModalManager from './components/web3/Web3ModalManager';\nimport reportWebVitals from './reportWebVitals';\n\nimport './assets/scss/style.scss';\n\nconst root = document.getElementById('root');\n\n// disable React dev tools for production\nENVIRONMENT === 'production' && disableReactDevTools();\n\n// will be deprecated eventually, for now we set it to false to silence the\n// console warning\nwindow.ethereum &&\n  window.ethereum.autoRefreshOnNetworkChange &&\n  (window.ethereum.autoRefreshOnNetworkChange = false);\n\n// Tell Web3modal what providers we have available.\n// Built-in web browser provider (only one can exist at a time),\n// MetaMask, Brave or Opera is added automatically by Web3modal\nfunction getProviderOptions() {\n  const providerOptions = {\n    // Injected providers\n    injected: {\n      display: {\n        name: 'MetaMask',\n        description: 'Connect with the provider in your Browser',\n      },\n      package: null,\n    },\n    // WalletConnect provider\n    walletconnect: {\n      display: {\n        name: 'WalletConnect',\n        description: 'Connect with your mobile wallet',\n      },\n      package: WalletConnectProvider,\n      options: {\n        infuraId: INFURA_PROJECT_ID, // required\n        qrcodeModalOptions: {\n          mobileLinks: ['rainbow', 'metamask', 'argent', 'trust'],\n        },\n      },\n    },\n  };\n  return providerOptions;\n}\n\n// Create apolloClient\nexport const apolloClient:\n  | ApolloClient<NormalizedCacheObject>\n  | undefined = new ApolloClient({\n  uri: GRAPH_API_URL,\n  cache: new InMemoryCache({\n    // Cache data may be lost when replacing the `adapters|extensions`\n    // field of a Query object. To address this problem\n    // (which is not a bug in Apollo Client), define a custom\n    // merge function for the Query.adapters|extensions field, so\n    // InMemoryCache can safely merge these objects\n    // https://www.apollographql.com/docs/react/caching/cache-field-behavior/#the-merge-function\n    typePolicies: {\n      Adapter: {\n        fields: {\n          adapters: {\n            merge(existing = [], incoming: any[]) {\n              return [...existing, ...incoming];\n            },\n          },\n        },\n      },\n      Extension: {\n        fields: {\n          extensions: {\n            merge(existing = [], incoming: any[]) {\n              return [...existing, ...incoming];\n            },\n          },\n        },\n      },\n    },\n  }),\n});\n\nif (root !== null) {\n  ReactDOM.render(\n    <Provider store={store}>\n      <BrowserRouter>\n        <Web3ModalManager\n          providerOptions={getProviderOptions()}\n          defaultTheme={DefaultTheme.LIGHT}>\n          <ApolloProvider client={apolloClient}>\n            <Init\n              render={({error, isInitComplete}) =>\n                error ? (\n                  <InitError error={error} />\n                ) : isInitComplete ? (\n                  <App />\n                ) : null\n              }\n            />\n          </ApolloProvider>\n        </Web3ModalManager>\n      </BrowserRouter>\n    </Provider>,\n    root\n  );\n}\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import {useContext} from 'react';\n\nimport {Web3ModalContextValue, Web3ModalContext} from '../Web3ModalManager';\n\n/**\n * useWeb3Modal(): Web3ModalContextValue\n *\n * Internal hook to access wallet connectivity and connected state.\n *\n * @example\n * const {account, connected, networkId, ...} = useWeb3Modal();\n */\nexport function useWeb3Modal(): Web3ModalContextValue {\n  return useContext(Web3ModalContext);\n}\n"],"sourceRoot":""}